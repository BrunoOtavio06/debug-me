function AS(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();function Gs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dd={exports:{}},Ii={},zd={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function OS(){if(Zy)return Ue;Zy=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(P){return P===null||typeof P!="object"?null:(P=m&&P[m]||P["@@iterator"],typeof P=="function"?P:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function E(P,U,se){this.props=P,this.context=U,this.refs=x,this.updater=se||_}E.prototype.isReactComponent={},E.prototype.setState=function(P,U){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,U,"setState")},E.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function I(){}I.prototype=E.prototype;function O(P,U,se){this.props=P,this.context=U,this.refs=x,this.updater=se||_}var A=O.prototype=new I;A.constructor=O,b(A,E.prototype),A.isPureReactComponent=!0;var D=Array.isArray,H=Object.prototype.hasOwnProperty,Z={current:null},K={key:!0,ref:!0,__self:!0,__source:!0};function C(P,U,se){var le,ue={},T=null,S=null;if(U!=null)for(le in U.ref!==void 0&&(S=U.ref),U.key!==void 0&&(T=""+U.key),U)H.call(U,le)&&!K.hasOwnProperty(le)&&(ue[le]=U[le]);var V=arguments.length-2;if(V===1)ue.children=se;else if(1<V){for(var j=Array(V),Te=0;Te<V;Te++)j[Te]=arguments[Te+2];ue.children=j}if(P&&P.defaultProps)for(le in V=P.defaultProps,V)ue[le]===void 0&&(ue[le]=V[le]);return{$$typeof:e,type:P,key:T,ref:S,props:ue,_owner:Z.current}}function ce(P,U){return{$$typeof:e,type:P.type,key:U,ref:P.ref,props:P.props,_owner:P._owner}}function Ne(P){return typeof P=="object"&&P!==null&&P.$$typeof===e}function ke(P){var U={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(se){return U[se]})}var Ve=/\/+/g;function tt(P,U){return typeof P=="object"&&P!==null&&P.key!=null?ke(""+P.key):U.toString(36)}function ee(P,U,se,le,ue){var T=typeof P;(T==="undefined"||T==="boolean")&&(P=null);var S=!1;if(P===null)S=!0;else switch(T){case"string":case"number":S=!0;break;case"object":switch(P.$$typeof){case e:case t:S=!0}}if(S)return S=P,ue=ue(S),P=le===""?"."+tt(S,0):le,D(ue)?(se="",P!=null&&(se=P.replace(Ve,"$&/")+"/"),ee(ue,U,se,"",function(Te){return Te})):ue!=null&&(Ne(ue)&&(ue=ce(ue,se+(!ue.key||S&&S.key===ue.key?"":(""+ue.key).replace(Ve,"$&/")+"/")+P)),U.push(ue)),1;if(S=0,le=le===""?".":le+":",D(P))for(var V=0;V<P.length;V++){T=P[V];var j=le+tt(T,V);S+=ee(T,U,se,j,ue)}else if(j=y(P),typeof j=="function")for(P=j.call(P),V=0;!(T=P.next()).done;)T=T.value,j=le+tt(T,V++),S+=ee(T,U,se,j,ue);else if(T==="object")throw U=String(P),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return S}function J(P,U,se){if(P==null)return P;var le=[],ue=0;return ee(P,le,"","",function(T){return U.call(se,T,ue++)}),le}function W(P){if(P._status===-1){var U=P._result;U=U(),U.then(function(se){(P._status===0||P._status===-1)&&(P._status=1,P._result=se)},function(se){(P._status===0||P._status===-1)&&(P._status=2,P._result=se)}),P._status===-1&&(P._status=0,P._result=U)}if(P._status===1)return P._result.default;throw P._result}var te={current:null},M={transition:null},q={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:M,ReactCurrentOwner:Z};function G(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:J,forEach:function(P,U,se){J(P,function(){U.apply(this,arguments)},se)},count:function(P){var U=0;return J(P,function(){U++}),U},toArray:function(P){return J(P,function(U){return U})||[]},only:function(P){if(!Ne(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Ue.Component=E,Ue.Fragment=r,Ue.Profiler=a,Ue.PureComponent=O,Ue.StrictMode=n,Ue.Suspense=d,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Ue.act=G,Ue.cloneElement=function(P,U,se){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var le=b({},P.props),ue=P.key,T=P.ref,S=P._owner;if(U!=null){if(U.ref!==void 0&&(T=U.ref,S=Z.current),U.key!==void 0&&(ue=""+U.key),P.type&&P.type.defaultProps)var V=P.type.defaultProps;for(j in U)H.call(U,j)&&!K.hasOwnProperty(j)&&(le[j]=U[j]===void 0&&V!==void 0?V[j]:U[j])}var j=arguments.length-2;if(j===1)le.children=se;else if(1<j){V=Array(j);for(var Te=0;Te<j;Te++)V[Te]=arguments[Te+2];le.children=V}return{$$typeof:e,type:P.type,key:ue,ref:T,props:le,_owner:S}},Ue.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:o,_context:P},P.Consumer=P},Ue.createElement=C,Ue.createFactory=function(P){var U=C.bind(null,P);return U.type=P,U},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(P){return{$$typeof:c,render:P}},Ue.isValidElement=Ne,Ue.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:W}},Ue.memo=function(P,U){return{$$typeof:f,type:P,compare:U===void 0?null:U}},Ue.startTransition=function(P){var U=M.transition;M.transition={};try{P()}finally{M.transition=U}},Ue.unstable_act=G,Ue.useCallback=function(P,U){return te.current.useCallback(P,U)},Ue.useContext=function(P){return te.current.useContext(P)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(P){return te.current.useDeferredValue(P)},Ue.useEffect=function(P,U){return te.current.useEffect(P,U)},Ue.useId=function(){return te.current.useId()},Ue.useImperativeHandle=function(P,U,se){return te.current.useImperativeHandle(P,U,se)},Ue.useInsertionEffect=function(P,U){return te.current.useInsertionEffect(P,U)},Ue.useLayoutEffect=function(P,U){return te.current.useLayoutEffect(P,U)},Ue.useMemo=function(P,U){return te.current.useMemo(P,U)},Ue.useReducer=function(P,U,se){return te.current.useReducer(P,U,se)},Ue.useRef=function(P){return te.current.useRef(P)},Ue.useState=function(P){return te.current.useState(P)},Ue.useSyncExternalStore=function(P,U,se){return te.current.useSyncExternalStore(P,U,se)},Ue.useTransition=function(){return te.current.useTransition()},Ue.version="18.3.1",Ue}var Ky;function yc(){return Ky||(Ky=1,zd.exports=OS()),zd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function PS(){if(Jy)return Ii;Jy=1;var e=yc(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,d,f){var p,m={},y=null,_=null;f!==void 0&&(y=""+f),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(_=d.ref);for(p in d)n.call(d,p)&&!o.hasOwnProperty(p)&&(m[p]=d[p]);if(c&&c.defaultProps)for(p in d=c.defaultProps,d)m[p]===void 0&&(m[p]=d[p]);return{$$typeof:t,type:c,key:y,ref:_,props:m,_owner:a.current}}return Ii.Fragment=r,Ii.jsx=l,Ii.jsxs=l,Ii}var Yy;function $S(){return Yy||(Yy=1,Dd.exports=PS()),Dd.exports}var w=$S(),El={},Fd={exports:{}},ir={},Ud={exports:{}},Bd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy;function jS(){return Xy||(Xy=1,(function(e){function t(M,q){var G=M.length;M.push(q);e:for(;0<G;){var P=G-1>>>1,U=M[P];if(0<a(U,q))M[P]=q,M[G]=U,G=P;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var q=M[0],G=M.pop();if(G!==q){M[0]=G;e:for(var P=0,U=M.length,se=U>>>1;P<se;){var le=2*(P+1)-1,ue=M[le],T=le+1,S=M[T];if(0>a(ue,G))T<U&&0>a(S,ue)?(M[P]=S,M[T]=G,P=T):(M[P]=ue,M[le]=G,P=le);else if(T<U&&0>a(S,G))M[P]=S,M[T]=G,P=T;else break e}}return q}function a(M,q){var G=M.sortIndex-q.sortIndex;return G!==0?G:M.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var d=[],f=[],p=1,m=null,y=3,_=!1,b=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(M){for(var q=r(f);q!==null;){if(q.callback===null)n(f);else if(q.startTime<=M)n(f),q.sortIndex=q.expirationTime,t(d,q);else break;q=r(f)}}function D(M){if(x=!1,A(M),!b)if(r(d)!==null)b=!0,W(H);else{var q=r(f);q!==null&&te(D,q.startTime-M)}}function H(M,q){b=!1,x&&(x=!1,I(C),C=-1),_=!0;var G=y;try{for(A(q),m=r(d);m!==null&&(!(m.expirationTime>q)||M&&!ke());){var P=m.callback;if(typeof P=="function"){m.callback=null,y=m.priorityLevel;var U=P(m.expirationTime<=q);q=e.unstable_now(),typeof U=="function"?m.callback=U:m===r(d)&&n(d),A(q)}else n(d);m=r(d)}if(m!==null)var se=!0;else{var le=r(f);le!==null&&te(D,le.startTime-q),se=!1}return se}finally{m=null,y=G,_=!1}}var Z=!1,K=null,C=-1,ce=5,Ne=-1;function ke(){return!(e.unstable_now()-Ne<ce)}function Ve(){if(K!==null){var M=e.unstable_now();Ne=M;var q=!0;try{q=K(!0,M)}finally{q?tt():(Z=!1,K=null)}}else Z=!1}var tt;if(typeof O=="function")tt=function(){O(Ve)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,J=ee.port2;ee.port1.onmessage=Ve,tt=function(){J.postMessage(null)}}else tt=function(){E(Ve,0)};function W(M){K=M,Z||(Z=!0,tt())}function te(M,q){C=E(function(){M(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){b||_||(b=!0,W(H))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(M){switch(y){case 1:case 2:case 3:var q=3;break;default:q=y}var G=y;y=q;try{return M()}finally{y=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,q){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=y;y=M;try{return q()}finally{y=G}},e.unstable_scheduleCallback=function(M,q,G){var P=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?P+G:P):G=P,M){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=G+U,M={id:p++,callback:q,priorityLevel:M,startTime:G,expirationTime:U,sortIndex:-1},G>P?(M.sortIndex=G,t(f,M),r(d)===null&&M===r(f)&&(x?(I(C),C=-1):x=!0,te(D,G-P))):(M.sortIndex=U,t(d,M),b||_||(b=!0,W(H))),M},e.unstable_shouldYield=ke,e.unstable_wrapCallback=function(M){var q=y;return function(){var G=y;y=q;try{return M.apply(this,arguments)}finally{y=G}}}})(Bd)),Bd}var Qy;function LS(){return Qy||(Qy=1,Ud.exports=jS()),Ud.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev;function MS(){if(ev)return ir;ev=1;var e=yc(),t=LS();function r(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)i+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function o(s,i){l(s,i),l(s+"Capture",i)}function l(s,i){for(a[s]=i,s=0;s<i.length;s++)n.add(i[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function y(s){return d.call(m,s)?!0:d.call(p,s)?!1:f.test(s)?m[s]=!0:(p[s]=!0,!1)}function _(s,i,u,h){if(u!==null&&u.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function b(s,i,u,h){if(i===null||typeof i>"u"||_(s,i,u,h))return!0;if(h)return!1;if(u!==null)switch(u.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function x(s,i,u,h,g,v,k){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=s,this.type=i,this.sanitizeURL=v,this.removeEmptyString=k}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){E[s]=new x(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];E[i]=new x(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){E[s]=new x(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){E[s]=new x(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){E[s]=new x(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){E[s]=new x(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){E[s]=new x(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){E[s]=new x(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){E[s]=new x(s,5,!1,s.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function O(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(I,O);E[i]=new x(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(I,O);E[i]=new x(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(I,O);E[i]=new x(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){E[s]=new x(s,1,!1,s.toLowerCase(),null,!1,!1)}),E.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){E[s]=new x(s,1,!1,s.toLowerCase(),null,!0,!0)});function A(s,i,u,h){var g=E.hasOwnProperty(i)?E[i]:null;(g!==null?g.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(b(i,u,g,h)&&(u=null),h||g===null?y(i)&&(u===null?s.removeAttribute(i):s.setAttribute(i,""+u)):g.mustUseProperty?s[g.propertyName]=u===null?g.type===3?!1:"":u:(i=g.attributeName,h=g.attributeNamespace,u===null?s.removeAttribute(i):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,h?s.setAttributeNS(h,i,u):s.setAttribute(i,u))))}var D=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),Z=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),ce=Symbol.for("react.profiler"),Ne=Symbol.for("react.provider"),ke=Symbol.for("react.context"),Ve=Symbol.for("react.forward_ref"),tt=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),M=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=M&&s[M]||s["@@iterator"],typeof s=="function"?s:null)}var G=Object.assign,P;function U(s){if(P===void 0)try{throw Error()}catch(u){var i=u.stack.trim().match(/\n( *(at )?)/);P=i&&i[1]||""}return`
`+P+s}var se=!1;function le(s,i){if(!s||se)return"";se=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var h=B}Reflect.construct(s,[],i)}else{try{i.call()}catch(B){h=B}s.call(i.prototype)}else{try{throw Error()}catch(B){h=B}s()}}catch(B){if(B&&h&&typeof B.stack=="string"){for(var g=B.stack.split(`
`),v=h.stack.split(`
`),k=g.length-1,R=v.length-1;1<=k&&0<=R&&g[k]!==v[R];)R--;for(;1<=k&&0<=R;k--,R--)if(g[k]!==v[R]){if(k!==1||R!==1)do if(k--,R--,0>R||g[k]!==v[R]){var $=`
`+g[k].replace(" at new "," at ");return s.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",s.displayName)),$}while(1<=k&&0<=R);break}}}finally{se=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?U(s):""}function ue(s){switch(s.tag){case 5:return U(s.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return s=le(s.type,!1),s;case 11:return s=le(s.type.render,!1),s;case 1:return s=le(s.type,!0),s;default:return""}}function T(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case K:return"Fragment";case Z:return"Portal";case ce:return"Profiler";case C:return"StrictMode";case tt:return"Suspense";case ee:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case ke:return(s.displayName||"Context")+".Consumer";case Ne:return(s._context.displayName||"Context")+".Provider";case Ve:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case J:return i=s.displayName||null,i!==null?i:T(s.type)||"Memo";case W:i=s._payload,s=s._init;try{return T(s(i))}catch{}}return null}function S(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return T(i);case 8:return i===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function V(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function j(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Te(s){var i=j(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),h=""+s[i];if(!s.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(k){h=""+k,v.call(this,k)}}),Object.defineProperty(s,i,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(k){h=""+k},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function He(s){s._valueTracker||(s._valueTracker=Te(s))}function Ge(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var u=i.getValue(),h="";return s&&(h=j(s)?s.checked?"true":"false":s.value),s=h,s!==u?(i.setValue(s),!0):!1}function nt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function vt(s,i){var u=i.checked;return G({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Qt(s,i){var u=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;u=V(i.value!=null?i.value:u),s._wrapperState={initialChecked:h,initialValue:u,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function st(s,i){i=i.checked,i!=null&&A(s,"checked",i,!1)}function Ft(s,i){st(s,i);var u=V(i.value),h=i.type;if(u!=null)h==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(h==="submit"||h==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?Dn(s,i.type,u):i.hasOwnProperty("defaultValue")&&Dn(s,i.type,V(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function pn(s,i,u){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,u||i===s.value||(s.value=i),s.defaultValue=i}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function Dn(s,i,u){(i!=="number"||nt(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var ie=Array.isArray;function er(s,i,u,h){if(s=s.options,i){i={};for(var g=0;g<u.length;g++)i["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=i.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&h&&(s[u].defaultSelected=!0)}else{for(u=""+V(u),i=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,h&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function Pe(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return G({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Se(s,i){var u=i.value;if(u==null){if(u=i.children,i=i.defaultValue,u!=null){if(i!=null)throw Error(r(92));if(ie(u)){if(1<u.length)throw Error(r(93));u=u[0]}i=u}i==null&&(i=""),u=i}s._wrapperState={initialValue:V(u)}}function je(s,i){var u=V(i.value),h=V(i.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),i.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),h!=null&&(s.defaultValue=""+h)}function he(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function oe(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $e(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?oe(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Re,Lt=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,u,h,g){MSApp.execUnsafeLocalFunction(function(){return s(i,u,h,g)})}:s})(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for(Re=Re||document.createElement("div"),Re.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Re.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function zn(s,i){if(i){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=i;return}}s.textContent=i}var Fn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j1=["Webkit","ms","Moz","O"];Object.keys(Fn).forEach(function(s){j1.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),Fn[i]=Fn[s]})});function cm(s,i,u){return i==null||typeof i=="boolean"||i===""?"":u||typeof i!="number"||i===0||Fn.hasOwnProperty(s)&&Fn[s]?(""+i).trim():i+"px"}function um(s,i){s=s.style;for(var u in i)if(i.hasOwnProperty(u)){var h=u.indexOf("--")===0,g=cm(u,i[u],h);u==="float"&&(u="cssFloat"),h?s.setProperty(u,g):s[u]=g}}var L1=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jc(s,i){if(i){if(L1[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function Yc(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xc=null;function Qc(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var eu=null,Js=null,Ys=null;function dm(s){if(s=pi(s)){if(typeof eu!="function")throw Error(r(280));var i=s.stateNode;i&&(i=Do(i),eu(s.stateNode,s.type,i))}}function fm(s){Js?Ys?Ys.push(s):Ys=[s]:Js=s}function hm(){if(Js){var s=Js,i=Ys;if(Ys=Js=null,dm(s),i)for(s=0;s<i.length;s++)dm(i[s])}}function pm(s,i){return s(i)}function mm(){}var tu=!1;function gm(s,i,u){if(tu)return s(i,u);tu=!0;try{return pm(s,i,u)}finally{tu=!1,(Js!==null||Ys!==null)&&(mm(),hm())}}function Wa(s,i){var u=s.stateNode;if(u===null)return null;var h=Do(u);if(h===null)return null;u=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(r(231,i,typeof u));return u}var ru=!1;if(c)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){ru=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{ru=!1}function M1(s,i,u,h,g,v,k,R,$){var B=Array.prototype.slice.call(arguments,3);try{i.apply(u,B)}catch(X){this.onError(X)}}var Ka=!1,go=null,yo=!1,nu=null,D1={onError:function(s){Ka=!0,go=s}};function z1(s,i,u,h,g,v,k,R,$){Ka=!1,go=null,M1.apply(D1,arguments)}function F1(s,i,u,h,g,v,k,R,$){if(z1.apply(this,arguments),Ka){if(Ka){var B=go;Ka=!1,go=null}else throw Error(r(198));yo||(yo=!0,nu=B)}}function Es(s){var i=s,u=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(u=i.return),s=i.return;while(s)}return i.tag===3?u:null}function ym(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function vm(s){if(Es(s)!==s)throw Error(r(188))}function U1(s){var i=s.alternate;if(!i){if(i=Es(s),i===null)throw Error(r(188));return i!==s?null:s}for(var u=s,h=i;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(h=g.return,h!==null){u=h;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return vm(g),s;if(v===h)return vm(g),i;v=v.sibling}throw Error(r(188))}if(u.return!==h.return)u=g,h=v;else{for(var k=!1,R=g.child;R;){if(R===u){k=!0,u=g,h=v;break}if(R===h){k=!0,h=g,u=v;break}R=R.sibling}if(!k){for(R=v.child;R;){if(R===u){k=!0,u=v,h=g;break}if(R===h){k=!0,h=v,u=g;break}R=R.sibling}if(!k)throw Error(r(189))}}if(u.alternate!==h)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?s:i}function _m(s){return s=U1(s),s!==null?wm(s):null}function wm(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=wm(s);if(i!==null)return i;s=s.sibling}return null}var bm=t.unstable_scheduleCallback,xm=t.unstable_cancelCallback,B1=t.unstable_shouldYield,V1=t.unstable_requestPaint,_t=t.unstable_now,H1=t.unstable_getCurrentPriorityLevel,su=t.unstable_ImmediatePriority,Em=t.unstable_UserBlockingPriority,vo=t.unstable_NormalPriority,G1=t.unstable_LowPriority,Sm=t.unstable_IdlePriority,_o=null,en=null;function q1(s){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(_o,s,void 0,(s.current.flags&128)===128)}catch{}}var Pr=Math.clz32?Math.clz32:K1,W1=Math.log,Z1=Math.LN2;function K1(s){return s>>>=0,s===0?32:31-(W1(s)/Z1|0)|0}var wo=64,bo=4194304;function Ja(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function xo(s,i){var u=s.pendingLanes;if(u===0)return 0;var h=0,g=s.suspendedLanes,v=s.pingedLanes,k=u&268435455;if(k!==0){var R=k&~g;R!==0?h=Ja(R):(v&=k,v!==0&&(h=Ja(v)))}else k=u&~g,k!==0?h=Ja(k):v!==0&&(h=Ja(v));if(h===0)return 0;if(i!==0&&i!==h&&(i&g)===0&&(g=h&-h,v=i&-i,g>=v||g===16&&(v&4194240)!==0))return i;if((h&4)!==0&&(h|=u&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=h;0<i;)u=31-Pr(i),g=1<<u,h|=s[u],i&=~g;return h}function J1(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y1(s,i){for(var u=s.suspendedLanes,h=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes;0<v;){var k=31-Pr(v),R=1<<k,$=g[k];$===-1?((R&u)===0||(R&h)!==0)&&(g[k]=J1(R,i)):$<=i&&(s.expiredLanes|=R),v&=~R}}function au(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function km(){var s=wo;return wo<<=1,(wo&4194240)===0&&(wo=64),s}function iu(s){for(var i=[],u=0;31>u;u++)i.push(s);return i}function Ya(s,i,u){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-Pr(i),s[i]=u}function X1(s,i){var u=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var h=s.eventTimes;for(s=s.expirationTimes;0<u;){var g=31-Pr(u),v=1<<g;i[g]=0,h[g]=-1,s[g]=-1,u&=~v}}function ou(s,i){var u=s.entangledLanes|=i;for(s=s.entanglements;u;){var h=31-Pr(u),g=1<<h;g&i|s[h]&i&&(s[h]|=i),u&=~g}}var Qe=0;function Tm(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Cm,lu,Nm,Im,Rm,cu=!1,Eo=[],Un=null,Bn=null,Vn=null,Xa=new Map,Qa=new Map,Hn=[],Q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Am(s,i){switch(s){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Xa.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qa.delete(i.pointerId)}}function ei(s,i,u,h,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:i,domEventName:u,eventSystemFlags:h,nativeEvent:v,targetContainers:[g]},i!==null&&(i=pi(i),i!==null&&lu(i)),s):(s.eventSystemFlags|=h,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function eE(s,i,u,h,g){switch(i){case"focusin":return Un=ei(Un,s,i,u,h,g),!0;case"dragenter":return Bn=ei(Bn,s,i,u,h,g),!0;case"mouseover":return Vn=ei(Vn,s,i,u,h,g),!0;case"pointerover":var v=g.pointerId;return Xa.set(v,ei(Xa.get(v)||null,s,i,u,h,g)),!0;case"gotpointercapture":return v=g.pointerId,Qa.set(v,ei(Qa.get(v)||null,s,i,u,h,g)),!0}return!1}function Om(s){var i=Ss(s.target);if(i!==null){var u=Es(i);if(u!==null){if(i=u.tag,i===13){if(i=ym(u),i!==null){s.blockedOn=i,Rm(s.priority,function(){Nm(u)});return}}else if(i===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function So(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var u=du(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);Xc=h,u.target.dispatchEvent(h),Xc=null}else return i=pi(u),i!==null&&lu(i),s.blockedOn=u,!1;i.shift()}return!0}function Pm(s,i,u){So(s)&&u.delete(i)}function tE(){cu=!1,Un!==null&&So(Un)&&(Un=null),Bn!==null&&So(Bn)&&(Bn=null),Vn!==null&&So(Vn)&&(Vn=null),Xa.forEach(Pm),Qa.forEach(Pm)}function ti(s,i){s.blockedOn===i&&(s.blockedOn=null,cu||(cu=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,tE)))}function ri(s){function i(g){return ti(g,s)}if(0<Eo.length){ti(Eo[0],s);for(var u=1;u<Eo.length;u++){var h=Eo[u];h.blockedOn===s&&(h.blockedOn=null)}}for(Un!==null&&ti(Un,s),Bn!==null&&ti(Bn,s),Vn!==null&&ti(Vn,s),Xa.forEach(i),Qa.forEach(i),u=0;u<Hn.length;u++)h=Hn[u],h.blockedOn===s&&(h.blockedOn=null);for(;0<Hn.length&&(u=Hn[0],u.blockedOn===null);)Om(u),u.blockedOn===null&&Hn.shift()}var Xs=D.ReactCurrentBatchConfig,ko=!0;function rE(s,i,u,h){var g=Qe,v=Xs.transition;Xs.transition=null;try{Qe=1,uu(s,i,u,h)}finally{Qe=g,Xs.transition=v}}function nE(s,i,u,h){var g=Qe,v=Xs.transition;Xs.transition=null;try{Qe=4,uu(s,i,u,h)}finally{Qe=g,Xs.transition=v}}function uu(s,i,u,h){if(ko){var g=du(s,i,u,h);if(g===null)Nu(s,i,h,To,u),Am(s,h);else if(eE(g,s,i,u,h))h.stopPropagation();else if(Am(s,h),i&4&&-1<Q1.indexOf(s)){for(;g!==null;){var v=pi(g);if(v!==null&&Cm(v),v=du(s,i,u,h),v===null&&Nu(s,i,h,To,u),v===g)break;g=v}g!==null&&h.stopPropagation()}else Nu(s,i,h,null,u)}}var To=null;function du(s,i,u,h){if(To=null,s=Qc(h),s=Ss(s),s!==null)if(i=Es(s),i===null)s=null;else if(u=i.tag,u===13){if(s=ym(i),s!==null)return s;s=null}else if(u===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return To=s,null}function $m(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H1()){case su:return 1;case Em:return 4;case vo:case G1:return 16;case Sm:return 536870912;default:return 16}default:return 16}}var Gn=null,fu=null,Co=null;function jm(){if(Co)return Co;var s,i=fu,u=i.length,h,g="value"in Gn?Gn.value:Gn.textContent,v=g.length;for(s=0;s<u&&i[s]===g[s];s++);var k=u-s;for(h=1;h<=k&&i[u-h]===g[v-h];h++);return Co=g.slice(s,1<h?1-h:void 0)}function No(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Io(){return!0}function Lm(){return!1}function fr(s){function i(u,h,g,v,k){this._reactName=u,this._targetInst=g,this.type=h,this.nativeEvent=v,this.target=k,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(u=s[R],this[R]=u?u(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Io:Lm,this.isPropagationStopped=Lm,this}return G(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Io)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Io)},persist:function(){},isPersistent:Io}),i}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hu=fr(Qs),ni=G({},Qs,{view:0,detail:0}),sE=fr(ni),pu,mu,si,Ro=G({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yu,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==si&&(si&&s.type==="mousemove"?(pu=s.screenX-si.screenX,mu=s.screenY-si.screenY):mu=pu=0,si=s),pu)},movementY:function(s){return"movementY"in s?s.movementY:mu}}),Mm=fr(Ro),aE=G({},Ro,{dataTransfer:0}),iE=fr(aE),oE=G({},ni,{relatedTarget:0}),gu=fr(oE),lE=G({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),cE=fr(lE),uE=G({},Qs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),dE=fr(uE),fE=G({},Qs,{data:0}),Dm=fr(fE),hE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gE(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=mE[s])?!!i[s]:!1}function yu(){return gE}var yE=G({},ni,{key:function(s){if(s.key){var i=hE[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=No(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?pE[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yu,charCode:function(s){return s.type==="keypress"?No(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?No(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),vE=fr(yE),_E=G({},Ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zm=fr(_E),wE=G({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yu}),bE=fr(wE),xE=G({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),EE=fr(xE),SE=G({},Ro,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),kE=fr(SE),TE=[9,13,27,32],vu=c&&"CompositionEvent"in window,ai=null;c&&"documentMode"in document&&(ai=document.documentMode);var CE=c&&"TextEvent"in window&&!ai,Fm=c&&(!vu||ai&&8<ai&&11>=ai),Um=" ",Bm=!1;function Vm(s,i){switch(s){case"keyup":return TE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ea=!1;function NE(s,i){switch(s){case"compositionend":return Hm(i);case"keypress":return i.which!==32?null:(Bm=!0,Um);case"textInput":return s=i.data,s===Um&&Bm?null:s;default:return null}}function IE(s,i){if(ea)return s==="compositionend"||!vu&&Vm(s,i)?(s=jm(),Co=fu=Gn=null,ea=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Fm&&i.locale!=="ko"?null:i.data;default:return null}}var RE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gm(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!RE[s.type]:i==="textarea"}function qm(s,i,u,h){fm(h),i=jo(i,"onChange"),0<i.length&&(u=new hu("onChange","change",null,u,h),s.push({event:u,listeners:i}))}var ii=null,oi=null;function AE(s){ug(s,0)}function Ao(s){var i=aa(s);if(Ge(i))return s}function OE(s,i){if(s==="change")return i}var Wm=!1;if(c){var _u;if(c){var wu="oninput"in document;if(!wu){var Zm=document.createElement("div");Zm.setAttribute("oninput","return;"),wu=typeof Zm.oninput=="function"}_u=wu}else _u=!1;Wm=_u&&(!document.documentMode||9<document.documentMode)}function Km(){ii&&(ii.detachEvent("onpropertychange",Jm),oi=ii=null)}function Jm(s){if(s.propertyName==="value"&&Ao(oi)){var i=[];qm(i,oi,s,Qc(s)),gm(AE,i)}}function PE(s,i,u){s==="focusin"?(Km(),ii=i,oi=u,ii.attachEvent("onpropertychange",Jm)):s==="focusout"&&Km()}function $E(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ao(oi)}function jE(s,i){if(s==="click")return Ao(i)}function LE(s,i){if(s==="input"||s==="change")return Ao(i)}function ME(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var $r=typeof Object.is=="function"?Object.is:ME;function li(s,i){if($r(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var u=Object.keys(s),h=Object.keys(i);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var g=u[h];if(!d.call(i,g)||!$r(s[g],i[g]))return!1}return!0}function Ym(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Xm(s,i){var u=Ym(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=i&&h>=i)return{node:u,offset:i-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Ym(u)}}function Qm(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Qm(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function eg(){for(var s=window,i=nt();i instanceof s.HTMLIFrameElement;){try{var u=typeof i.contentWindow.location.href=="string"}catch{u=!1}if(u)s=i.contentWindow;else break;i=nt(s.document)}return i}function bu(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function DE(s){var i=eg(),u=s.focusedElem,h=s.selectionRange;if(i!==u&&u&&u.ownerDocument&&Qm(u.ownerDocument.documentElement,u)){if(h!==null&&bu(u)){if(i=h.start,s=h.end,s===void 0&&(s=i),"selectionStart"in u)u.selectionStart=i,u.selectionEnd=Math.min(s,u.value.length);else if(s=(i=u.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var g=u.textContent.length,v=Math.min(h.start,g);h=h.end===void 0?v:Math.min(h.end,g),!s.extend&&v>h&&(g=h,h=v,v=g),g=Xm(u,v);var k=Xm(u,h);g&&k&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==k.node||s.focusOffset!==k.offset)&&(i=i.createRange(),i.setStart(g.node,g.offset),s.removeAllRanges(),v>h?(s.addRange(i),s.extend(k.node,k.offset)):(i.setEnd(k.node,k.offset),s.addRange(i)))}}for(i=[],s=u;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<i.length;u++)s=i[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var zE=c&&"documentMode"in document&&11>=document.documentMode,ta=null,xu=null,ci=null,Eu=!1;function tg(s,i,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Eu||ta==null||ta!==nt(h)||(h=ta,"selectionStart"in h&&bu(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ci&&li(ci,h)||(ci=h,h=jo(xu,"onSelect"),0<h.length&&(i=new hu("onSelect","select",null,i,u),s.push({event:i,listeners:h}),i.target=ta)))}function Oo(s,i){var u={};return u[s.toLowerCase()]=i.toLowerCase(),u["Webkit"+s]="webkit"+i,u["Moz"+s]="moz"+i,u}var ra={animationend:Oo("Animation","AnimationEnd"),animationiteration:Oo("Animation","AnimationIteration"),animationstart:Oo("Animation","AnimationStart"),transitionend:Oo("Transition","TransitionEnd")},Su={},rg={};c&&(rg=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function Po(s){if(Su[s])return Su[s];if(!ra[s])return s;var i=ra[s],u;for(u in i)if(i.hasOwnProperty(u)&&u in rg)return Su[s]=i[u];return s}var ng=Po("animationend"),sg=Po("animationiteration"),ag=Po("animationstart"),ig=Po("transitionend"),og=new Map,lg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qn(s,i){og.set(s,i),o(i,[s])}for(var ku=0;ku<lg.length;ku++){var Tu=lg[ku],FE=Tu.toLowerCase(),UE=Tu[0].toUpperCase()+Tu.slice(1);qn(FE,"on"+UE)}qn(ng,"onAnimationEnd"),qn(sg,"onAnimationIteration"),qn(ag,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(ig,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ui));function cg(s,i,u){var h=s.type||"unknown-event";s.currentTarget=u,F1(h,i,void 0,s),s.currentTarget=null}function ug(s,i){i=(i&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],g=h.event;h=h.listeners;e:{var v=void 0;if(i)for(var k=h.length-1;0<=k;k--){var R=h[k],$=R.instance,B=R.currentTarget;if(R=R.listener,$!==v&&g.isPropagationStopped())break e;cg(g,R,B),v=$}else for(k=0;k<h.length;k++){if(R=h[k],$=R.instance,B=R.currentTarget,R=R.listener,$!==v&&g.isPropagationStopped())break e;cg(g,R,B),v=$}}}if(yo)throw s=nu,yo=!1,nu=null,s}function at(s,i){var u=i[$u];u===void 0&&(u=i[$u]=new Set);var h=s+"__bubble";u.has(h)||(dg(i,s,2,!1),u.add(h))}function Cu(s,i,u){var h=0;i&&(h|=4),dg(u,s,h,i)}var $o="_reactListening"+Math.random().toString(36).slice(2);function di(s){if(!s[$o]){s[$o]=!0,n.forEach(function(u){u!=="selectionchange"&&(BE.has(u)||Cu(u,!1,s),Cu(u,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[$o]||(i[$o]=!0,Cu("selectionchange",!1,i))}}function dg(s,i,u,h){switch($m(i)){case 1:var g=rE;break;case 4:g=nE;break;default:g=uu}u=g.bind(null,i,u,s),g=void 0,!ru||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),h?g!==void 0?s.addEventListener(i,u,{capture:!0,passive:g}):s.addEventListener(i,u,!0):g!==void 0?s.addEventListener(i,u,{passive:g}):s.addEventListener(i,u,!1)}function Nu(s,i,u,h,g){var v=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var k=h.tag;if(k===3||k===4){var R=h.stateNode.containerInfo;if(R===g||R.nodeType===8&&R.parentNode===g)break;if(k===4)for(k=h.return;k!==null;){var $=k.tag;if(($===3||$===4)&&($=k.stateNode.containerInfo,$===g||$.nodeType===8&&$.parentNode===g))return;k=k.return}for(;R!==null;){if(k=Ss(R),k===null)return;if($=k.tag,$===5||$===6){h=v=k;continue e}R=R.parentNode}}h=h.return}gm(function(){var B=v,X=Qc(u),Q=[];e:{var Y=og.get(s);if(Y!==void 0){var de=hu,ge=s;switch(s){case"keypress":if(No(u)===0)break e;case"keydown":case"keyup":de=vE;break;case"focusin":ge="focus",de=gu;break;case"focusout":ge="blur",de=gu;break;case"beforeblur":case"afterblur":de=gu;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Mm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=iE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=bE;break;case ng:case sg:case ag:de=cE;break;case ig:de=EE;break;case"scroll":de=sE;break;case"wheel":de=kE;break;case"copy":case"cut":case"paste":de=dE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=zm}var we=(i&4)!==0,wt=!we&&s==="scroll",z=we?Y!==null?Y+"Capture":null:Y;we=[];for(var L=B,F;L!==null;){F=L;var re=F.stateNode;if(F.tag===5&&re!==null&&(F=re,z!==null&&(re=Wa(L,z),re!=null&&we.push(fi(L,re,F)))),wt)break;L=L.return}0<we.length&&(Y=new de(Y,ge,null,u,X),Q.push({event:Y,listeners:we}))}}if((i&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",de=s==="mouseout"||s==="pointerout",Y&&u!==Xc&&(ge=u.relatedTarget||u.fromElement)&&(Ss(ge)||ge[mn]))break e;if((de||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,de?(ge=u.relatedTarget||u.toElement,de=B,ge=ge?Ss(ge):null,ge!==null&&(wt=Es(ge),ge!==wt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(de=null,ge=B),de!==ge)){if(we=Mm,re="onMouseLeave",z="onMouseEnter",L="mouse",(s==="pointerout"||s==="pointerover")&&(we=zm,re="onPointerLeave",z="onPointerEnter",L="pointer"),wt=de==null?Y:aa(de),F=ge==null?Y:aa(ge),Y=new we(re,L+"leave",de,u,X),Y.target=wt,Y.relatedTarget=F,re=null,Ss(X)===B&&(we=new we(z,L+"enter",ge,u,X),we.target=F,we.relatedTarget=wt,re=we),wt=re,de&&ge)t:{for(we=de,z=ge,L=0,F=we;F;F=na(F))L++;for(F=0,re=z;re;re=na(re))F++;for(;0<L-F;)we=na(we),L--;for(;0<F-L;)z=na(z),F--;for(;L--;){if(we===z||z!==null&&we===z.alternate)break t;we=na(we),z=na(z)}we=null}else we=null;de!==null&&fg(Q,Y,de,we,!1),ge!==null&&wt!==null&&fg(Q,wt,ge,we,!0)}}e:{if(Y=B?aa(B):window,de=Y.nodeName&&Y.nodeName.toLowerCase(),de==="select"||de==="input"&&Y.type==="file")var xe=OE;else if(Gm(Y))if(Wm)xe=LE;else{xe=$E;var Ae=PE}else(de=Y.nodeName)&&de.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(xe=jE);if(xe&&(xe=xe(s,B))){qm(Q,xe,u,X);break e}Ae&&Ae(s,Y,B),s==="focusout"&&(Ae=Y._wrapperState)&&Ae.controlled&&Y.type==="number"&&Dn(Y,"number",Y.value)}switch(Ae=B?aa(B):window,s){case"focusin":(Gm(Ae)||Ae.contentEditable==="true")&&(ta=Ae,xu=B,ci=null);break;case"focusout":ci=xu=ta=null;break;case"mousedown":Eu=!0;break;case"contextmenu":case"mouseup":case"dragend":Eu=!1,tg(Q,u,X);break;case"selectionchange":if(zE)break;case"keydown":case"keyup":tg(Q,u,X)}var Oe;if(vu)e:{switch(s){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else ea?Vm(s,u)&&(Le="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Le="onCompositionStart");Le&&(Fm&&u.locale!=="ko"&&(ea||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&ea&&(Oe=jm()):(Gn=X,fu="value"in Gn?Gn.value:Gn.textContent,ea=!0)),Ae=jo(B,Le),0<Ae.length&&(Le=new Dm(Le,s,null,u,X),Q.push({event:Le,listeners:Ae}),Oe?Le.data=Oe:(Oe=Hm(u),Oe!==null&&(Le.data=Oe)))),(Oe=CE?NE(s,u):IE(s,u))&&(B=jo(B,"onBeforeInput"),0<B.length&&(X=new Dm("onBeforeInput","beforeinput",null,u,X),Q.push({event:X,listeners:B}),X.data=Oe))}ug(Q,i)})}function fi(s,i,u){return{instance:s,listener:i,currentTarget:u}}function jo(s,i){for(var u=i+"Capture",h=[];s!==null;){var g=s,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Wa(s,u),v!=null&&h.unshift(fi(s,v,g)),v=Wa(s,i),v!=null&&h.push(fi(s,v,g))),s=s.return}return h}function na(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function fg(s,i,u,h,g){for(var v=i._reactName,k=[];u!==null&&u!==h;){var R=u,$=R.alternate,B=R.stateNode;if($!==null&&$===h)break;R.tag===5&&B!==null&&(R=B,g?($=Wa(u,v),$!=null&&k.unshift(fi(u,$,R))):g||($=Wa(u,v),$!=null&&k.push(fi(u,$,R)))),u=u.return}k.length!==0&&s.push({event:i,listeners:k})}var VE=/\r\n?/g,HE=/\u0000|\uFFFD/g;function hg(s){return(typeof s=="string"?s:""+s).replace(VE,`
`).replace(HE,"")}function Lo(s,i,u){if(i=hg(i),hg(s)!==i&&u)throw Error(r(425))}function Mo(){}var Iu=null,Ru=null;function Au(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ou=typeof setTimeout=="function"?setTimeout:void 0,GE=typeof clearTimeout=="function"?clearTimeout:void 0,pg=typeof Promise=="function"?Promise:void 0,qE=typeof queueMicrotask=="function"?queueMicrotask:typeof pg<"u"?function(s){return pg.resolve(null).then(s).catch(WE)}:Ou;function WE(s){setTimeout(function(){throw s})}function Pu(s,i){var u=i,h=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(h===0){s.removeChild(g),ri(i);return}h--}else u!=="$"&&u!=="$?"&&u!=="$!"||h++;u=g}while(u);ri(i)}function Wn(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function mg(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(i===0)return s;i--}else u==="/$"&&i++}s=s.previousSibling}return null}var sa=Math.random().toString(36).slice(2),tn="__reactFiber$"+sa,hi="__reactProps$"+sa,mn="__reactContainer$"+sa,$u="__reactEvents$"+sa,ZE="__reactListeners$"+sa,KE="__reactHandles$"+sa;function Ss(s){var i=s[tn];if(i)return i;for(var u=s.parentNode;u;){if(i=u[mn]||u[tn]){if(u=i.alternate,i.child!==null||u!==null&&u.child!==null)for(s=mg(s);s!==null;){if(u=s[tn])return u;s=mg(s)}return i}s=u,u=s.parentNode}return null}function pi(s){return s=s[tn]||s[mn],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function aa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(r(33))}function Do(s){return s[hi]||null}var ju=[],ia=-1;function Zn(s){return{current:s}}function it(s){0>ia||(s.current=ju[ia],ju[ia]=null,ia--)}function rt(s,i){ia++,ju[ia]=s.current,s.current=i}var Kn={},Ut=Zn(Kn),tr=Zn(!1),ks=Kn;function oa(s,i){var u=s.type.contextTypes;if(!u)return Kn;var h=s.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=i[v];return h&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=g),g}function rr(s){return s=s.childContextTypes,s!=null}function zo(){it(tr),it(Ut)}function gg(s,i,u){if(Ut.current!==Kn)throw Error(r(168));rt(Ut,i),rt(tr,u)}function yg(s,i,u){var h=s.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return u;h=h.getChildContext();for(var g in h)if(!(g in i))throw Error(r(108,S(s)||"Unknown",g));return G({},u,h)}function Fo(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Kn,ks=Ut.current,rt(Ut,s),rt(tr,tr.current),!0}function vg(s,i,u){var h=s.stateNode;if(!h)throw Error(r(169));u?(s=yg(s,i,ks),h.__reactInternalMemoizedMergedChildContext=s,it(tr),it(Ut),rt(Ut,s)):it(tr),rt(tr,u)}var gn=null,Uo=!1,Lu=!1;function _g(s){gn===null?gn=[s]:gn.push(s)}function JE(s){Uo=!0,_g(s)}function Jn(){if(!Lu&&gn!==null){Lu=!0;var s=0,i=Qe;try{var u=gn;for(Qe=1;s<u.length;s++){var h=u[s];do h=h(!0);while(h!==null)}gn=null,Uo=!1}catch(g){throw gn!==null&&(gn=gn.slice(s+1)),bm(su,Jn),g}finally{Qe=i,Lu=!1}}return null}var la=[],ca=0,Bo=null,Vo=0,xr=[],Er=0,Ts=null,yn=1,vn="";function Cs(s,i){la[ca++]=Vo,la[ca++]=Bo,Bo=s,Vo=i}function wg(s,i,u){xr[Er++]=yn,xr[Er++]=vn,xr[Er++]=Ts,Ts=s;var h=yn;s=vn;var g=32-Pr(h)-1;h&=~(1<<g),u+=1;var v=32-Pr(i)+g;if(30<v){var k=g-g%5;v=(h&(1<<k)-1).toString(32),h>>=k,g-=k,yn=1<<32-Pr(i)+g|u<<g|h,vn=v+s}else yn=1<<v|u<<g|h,vn=s}function Mu(s){s.return!==null&&(Cs(s,1),wg(s,1,0))}function Du(s){for(;s===Bo;)Bo=la[--ca],la[ca]=null,Vo=la[--ca],la[ca]=null;for(;s===Ts;)Ts=xr[--Er],xr[Er]=null,vn=xr[--Er],xr[Er]=null,yn=xr[--Er],xr[Er]=null}var hr=null,pr=null,lt=!1,jr=null;function bg(s,i){var u=Cr(5,null,null,0);u.elementType="DELETED",u.stateNode=i,u.return=s,i=s.deletions,i===null?(s.deletions=[u],s.flags|=16):i.push(u)}function xg(s,i){switch(s.tag){case 5:var u=s.type;return i=i.nodeType!==1||u.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,hr=s,pr=Wn(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,hr=s,pr=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(u=Ts!==null?{id:yn,overflow:vn}:null,s.memoizedState={dehydrated:i,treeContext:u,retryLane:1073741824},u=Cr(18,null,null,0),u.stateNode=i,u.return=s,s.child=u,hr=s,pr=null,!0):!1;default:return!1}}function zu(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Fu(s){if(lt){var i=pr;if(i){var u=i;if(!xg(s,i)){if(zu(s))throw Error(r(418));i=Wn(u.nextSibling);var h=hr;i&&xg(s,i)?bg(h,u):(s.flags=s.flags&-4097|2,lt=!1,hr=s)}}else{if(zu(s))throw Error(r(418));s.flags=s.flags&-4097|2,lt=!1,hr=s}}}function Eg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;hr=s}function Ho(s){if(s!==hr)return!1;if(!lt)return Eg(s),lt=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!Au(s.type,s.memoizedProps)),i&&(i=pr)){if(zu(s))throw Sg(),Error(r(418));for(;i;)bg(s,i),i=Wn(i.nextSibling)}if(Eg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(i===0){pr=Wn(s.nextSibling);break e}i--}else u!=="$"&&u!=="$!"&&u!=="$?"||i++}s=s.nextSibling}pr=null}}else pr=hr?Wn(s.stateNode.nextSibling):null;return!0}function Sg(){for(var s=pr;s;)s=Wn(s.nextSibling)}function ua(){pr=hr=null,lt=!1}function Uu(s){jr===null?jr=[s]:jr.push(s)}var YE=D.ReactCurrentBatchConfig;function mi(s,i,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(r(309));var h=u.stateNode}if(!h)throw Error(r(147,s));var g=h,v=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(k){var R=g.refs;k===null?delete R[v]:R[v]=k},i._stringRef=v,i)}if(typeof s!="string")throw Error(r(284));if(!u._owner)throw Error(r(290,s))}return s}function Go(s,i){throw s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function kg(s){var i=s._init;return i(s._payload)}function Tg(s){function i(z,L){if(s){var F=z.deletions;F===null?(z.deletions=[L],z.flags|=16):F.push(L)}}function u(z,L){if(!s)return null;for(;L!==null;)i(z,L),L=L.sibling;return null}function h(z,L){for(z=new Map;L!==null;)L.key!==null?z.set(L.key,L):z.set(L.index,L),L=L.sibling;return z}function g(z,L){return z=ss(z,L),z.index=0,z.sibling=null,z}function v(z,L,F){return z.index=F,s?(F=z.alternate,F!==null?(F=F.index,F<L?(z.flags|=2,L):F):(z.flags|=2,L)):(z.flags|=1048576,L)}function k(z){return s&&z.alternate===null&&(z.flags|=2),z}function R(z,L,F,re){return L===null||L.tag!==6?(L=Od(F,z.mode,re),L.return=z,L):(L=g(L,F),L.return=z,L)}function $(z,L,F,re){var xe=F.type;return xe===K?X(z,L,F.props.children,re,F.key):L!==null&&(L.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===W&&kg(xe)===L.type)?(re=g(L,F.props),re.ref=mi(z,L,F),re.return=z,re):(re=ml(F.type,F.key,F.props,null,z.mode,re),re.ref=mi(z,L,F),re.return=z,re)}function B(z,L,F,re){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=Pd(F,z.mode,re),L.return=z,L):(L=g(L,F.children||[]),L.return=z,L)}function X(z,L,F,re,xe){return L===null||L.tag!==7?(L=js(F,z.mode,re,xe),L.return=z,L):(L=g(L,F),L.return=z,L)}function Q(z,L,F){if(typeof L=="string"&&L!==""||typeof L=="number")return L=Od(""+L,z.mode,F),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case H:return F=ml(L.type,L.key,L.props,null,z.mode,F),F.ref=mi(z,null,L),F.return=z,F;case Z:return L=Pd(L,z.mode,F),L.return=z,L;case W:var re=L._init;return Q(z,re(L._payload),F)}if(ie(L)||q(L))return L=js(L,z.mode,F,null),L.return=z,L;Go(z,L)}return null}function Y(z,L,F,re){var xe=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return xe!==null?null:R(z,L,""+F,re);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case H:return F.key===xe?$(z,L,F,re):null;case Z:return F.key===xe?B(z,L,F,re):null;case W:return xe=F._init,Y(z,L,xe(F._payload),re)}if(ie(F)||q(F))return xe!==null?null:X(z,L,F,re,null);Go(z,F)}return null}function de(z,L,F,re,xe){if(typeof re=="string"&&re!==""||typeof re=="number")return z=z.get(F)||null,R(L,z,""+re,xe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case H:return z=z.get(re.key===null?F:re.key)||null,$(L,z,re,xe);case Z:return z=z.get(re.key===null?F:re.key)||null,B(L,z,re,xe);case W:var Ae=re._init;return de(z,L,F,Ae(re._payload),xe)}if(ie(re)||q(re))return z=z.get(F)||null,X(L,z,re,xe,null);Go(L,re)}return null}function ge(z,L,F,re){for(var xe=null,Ae=null,Oe=L,Le=L=0,$t=null;Oe!==null&&Le<F.length;Le++){Oe.index>Le?($t=Oe,Oe=null):$t=Oe.sibling;var Ke=Y(z,Oe,F[Le],re);if(Ke===null){Oe===null&&(Oe=$t);break}s&&Oe&&Ke.alternate===null&&i(z,Oe),L=v(Ke,L,Le),Ae===null?xe=Ke:Ae.sibling=Ke,Ae=Ke,Oe=$t}if(Le===F.length)return u(z,Oe),lt&&Cs(z,Le),xe;if(Oe===null){for(;Le<F.length;Le++)Oe=Q(z,F[Le],re),Oe!==null&&(L=v(Oe,L,Le),Ae===null?xe=Oe:Ae.sibling=Oe,Ae=Oe);return lt&&Cs(z,Le),xe}for(Oe=h(z,Oe);Le<F.length;Le++)$t=de(Oe,z,Le,F[Le],re),$t!==null&&(s&&$t.alternate!==null&&Oe.delete($t.key===null?Le:$t.key),L=v($t,L,Le),Ae===null?xe=$t:Ae.sibling=$t,Ae=$t);return s&&Oe.forEach(function(as){return i(z,as)}),lt&&Cs(z,Le),xe}function we(z,L,F,re){var xe=q(F);if(typeof xe!="function")throw Error(r(150));if(F=xe.call(F),F==null)throw Error(r(151));for(var Ae=xe=null,Oe=L,Le=L=0,$t=null,Ke=F.next();Oe!==null&&!Ke.done;Le++,Ke=F.next()){Oe.index>Le?($t=Oe,Oe=null):$t=Oe.sibling;var as=Y(z,Oe,Ke.value,re);if(as===null){Oe===null&&(Oe=$t);break}s&&Oe&&as.alternate===null&&i(z,Oe),L=v(as,L,Le),Ae===null?xe=as:Ae.sibling=as,Ae=as,Oe=$t}if(Ke.done)return u(z,Oe),lt&&Cs(z,Le),xe;if(Oe===null){for(;!Ke.done;Le++,Ke=F.next())Ke=Q(z,Ke.value,re),Ke!==null&&(L=v(Ke,L,Le),Ae===null?xe=Ke:Ae.sibling=Ke,Ae=Ke);return lt&&Cs(z,Le),xe}for(Oe=h(z,Oe);!Ke.done;Le++,Ke=F.next())Ke=de(Oe,z,Le,Ke.value,re),Ke!==null&&(s&&Ke.alternate!==null&&Oe.delete(Ke.key===null?Le:Ke.key),L=v(Ke,L,Le),Ae===null?xe=Ke:Ae.sibling=Ke,Ae=Ke);return s&&Oe.forEach(function(RS){return i(z,RS)}),lt&&Cs(z,Le),xe}function wt(z,L,F,re){if(typeof F=="object"&&F!==null&&F.type===K&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case H:e:{for(var xe=F.key,Ae=L;Ae!==null;){if(Ae.key===xe){if(xe=F.type,xe===K){if(Ae.tag===7){u(z,Ae.sibling),L=g(Ae,F.props.children),L.return=z,z=L;break e}}else if(Ae.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===W&&kg(xe)===Ae.type){u(z,Ae.sibling),L=g(Ae,F.props),L.ref=mi(z,Ae,F),L.return=z,z=L;break e}u(z,Ae);break}else i(z,Ae);Ae=Ae.sibling}F.type===K?(L=js(F.props.children,z.mode,re,F.key),L.return=z,z=L):(re=ml(F.type,F.key,F.props,null,z.mode,re),re.ref=mi(z,L,F),re.return=z,z=re)}return k(z);case Z:e:{for(Ae=F.key;L!==null;){if(L.key===Ae)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){u(z,L.sibling),L=g(L,F.children||[]),L.return=z,z=L;break e}else{u(z,L);break}else i(z,L);L=L.sibling}L=Pd(F,z.mode,re),L.return=z,z=L}return k(z);case W:return Ae=F._init,wt(z,L,Ae(F._payload),re)}if(ie(F))return ge(z,L,F,re);if(q(F))return we(z,L,F,re);Go(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,L!==null&&L.tag===6?(u(z,L.sibling),L=g(L,F),L.return=z,z=L):(u(z,L),L=Od(F,z.mode,re),L.return=z,z=L),k(z)):u(z,L)}return wt}var da=Tg(!0),Cg=Tg(!1),qo=Zn(null),Wo=null,fa=null,Bu=null;function Vu(){Bu=fa=Wo=null}function Hu(s){var i=qo.current;it(qo),s._currentValue=i}function Gu(s,i,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),s===u)break;s=s.return}}function ha(s,i){Wo=s,Bu=fa=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&i)!==0&&(nr=!0),s.firstContext=null)}function Sr(s){var i=s._currentValue;if(Bu!==s)if(s={context:s,memoizedValue:i,next:null},fa===null){if(Wo===null)throw Error(r(308));fa=s,Wo.dependencies={lanes:0,firstContext:s}}else fa=fa.next=s;return i}var Ns=null;function qu(s){Ns===null?Ns=[s]:Ns.push(s)}function Ng(s,i,u,h){var g=i.interleaved;return g===null?(u.next=u,qu(i)):(u.next=g.next,g.next=u),i.interleaved=u,_n(s,h)}function _n(s,i){s.lanes|=i;var u=s.alternate;for(u!==null&&(u.lanes|=i),u=s,s=s.return;s!==null;)s.childLanes|=i,u=s.alternate,u!==null&&(u.childLanes|=i),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Yn=!1;function Wu(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ig(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function wn(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function Xn(s,i,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(qe&2)!==0){var g=h.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),h.pending=i,_n(s,u)}return g=h.interleaved,g===null?(i.next=i,qu(h)):(i.next=g.next,g.next=i),h.interleaved=i,_n(s,u)}function Zo(s,i,u){if(i=i.updateQueue,i!==null&&(i=i.shared,(u&4194240)!==0)){var h=i.lanes;h&=s.pendingLanes,u|=h,i.lanes=u,ou(s,u)}}function Rg(s,i){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var k={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=k:v=v.next=k,u=u.next}while(u!==null);v===null?g=v=i:v=v.next=i}else g=v=i;u={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:h.shared,effects:h.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=i:s.next=i,u.lastBaseUpdate=i}function Ko(s,i,u,h){var g=s.updateQueue;Yn=!1;var v=g.firstBaseUpdate,k=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var $=R,B=$.next;$.next=null,k===null?v=B:k.next=B,k=$;var X=s.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==k&&(R===null?X.firstBaseUpdate=B:R.next=B,X.lastBaseUpdate=$))}if(v!==null){var Q=g.baseState;k=0,X=B=$=null,R=v;do{var Y=R.lane,de=R.eventTime;if((h&Y)===Y){X!==null&&(X=X.next={eventTime:de,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var ge=s,we=R;switch(Y=i,de=u,we.tag){case 1:if(ge=we.payload,typeof ge=="function"){Q=ge.call(de,Q,Y);break e}Q=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=we.payload,Y=typeof ge=="function"?ge.call(de,Q,Y):ge,Y==null)break e;Q=G({},Q,Y);break e;case 2:Yn=!0}}R.callback!==null&&R.lane!==0&&(s.flags|=64,Y=g.effects,Y===null?g.effects=[R]:Y.push(R))}else de={eventTime:de,lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?(B=X=de,$=Q):X=X.next=de,k|=Y;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;Y=R,R=Y.next,Y.next=null,g.lastBaseUpdate=Y,g.shared.pending=null}}while(!0);if(X===null&&($=Q),g.baseState=$,g.firstBaseUpdate=B,g.lastBaseUpdate=X,i=g.shared.interleaved,i!==null){g=i;do k|=g.lane,g=g.next;while(g!==i)}else v===null&&(g.shared.lanes=0);As|=k,s.lanes=k,s.memoizedState=Q}}function Ag(s,i,u){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var h=s[i],g=h.callback;if(g!==null){if(h.callback=null,h=u,typeof g!="function")throw Error(r(191,g));g.call(h)}}}var gi={},rn=Zn(gi),yi=Zn(gi),vi=Zn(gi);function Is(s){if(s===gi)throw Error(r(174));return s}function Zu(s,i){switch(rt(vi,i),rt(yi,s),rt(rn,gi),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:$e(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=$e(i,s)}it(rn),rt(rn,i)}function pa(){it(rn),it(yi),it(vi)}function Og(s){Is(vi.current);var i=Is(rn.current),u=$e(i,s.type);i!==u&&(rt(yi,s),rt(rn,u))}function Ku(s){yi.current===s&&(it(rn),it(yi))}var dt=Zn(0);function Jo(s){for(var i=s;i!==null;){if(i.tag===13){var u=i.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ju=[];function Yu(){for(var s=0;s<Ju.length;s++)Ju[s]._workInProgressVersionPrimary=null;Ju.length=0}var Yo=D.ReactCurrentDispatcher,Xu=D.ReactCurrentBatchConfig,Rs=0,ft=null,Ct=null,Ot=null,Xo=!1,_i=!1,wi=0,XE=0;function Bt(){throw Error(r(321))}function Qu(s,i){if(i===null)return!1;for(var u=0;u<i.length&&u<s.length;u++)if(!$r(s[u],i[u]))return!1;return!0}function ed(s,i,u,h,g,v){if(Rs=v,ft=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Yo.current=s===null||s.memoizedState===null?rS:nS,s=u(h,g),_i){v=0;do{if(_i=!1,wi=0,25<=v)throw Error(r(301));v+=1,Ot=Ct=null,i.updateQueue=null,Yo.current=sS,s=u(h,g)}while(_i)}if(Yo.current=tl,i=Ct!==null&&Ct.next!==null,Rs=0,Ot=Ct=ft=null,Xo=!1,i)throw Error(r(300));return s}function td(){var s=wi!==0;return wi=0,s}function nn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ft.memoizedState=Ot=s:Ot=Ot.next=s,Ot}function kr(){if(Ct===null){var s=ft.alternate;s=s!==null?s.memoizedState:null}else s=Ct.next;var i=Ot===null?ft.memoizedState:Ot.next;if(i!==null)Ot=i,Ct=s;else{if(s===null)throw Error(r(310));Ct=s,s={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Ot===null?ft.memoizedState=Ot=s:Ot=Ot.next=s}return Ot}function bi(s,i){return typeof i=="function"?i(s):i}function rd(s){var i=kr(),u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var h=Ct,g=h.baseQueue,v=u.pending;if(v!==null){if(g!==null){var k=g.next;g.next=v.next,v.next=k}h.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,h=h.baseState;var R=k=null,$=null,B=v;do{var X=B.lane;if((Rs&X)===X)$!==null&&($=$.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),h=B.hasEagerState?B.eagerState:s(h,B.action);else{var Q={lane:X,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};$===null?(R=$=Q,k=h):$=$.next=Q,ft.lanes|=X,As|=X}B=B.next}while(B!==null&&B!==v);$===null?k=h:$.next=R,$r(h,i.memoizedState)||(nr=!0),i.memoizedState=h,i.baseState=k,i.baseQueue=$,u.lastRenderedState=h}if(s=u.interleaved,s!==null){g=s;do v=g.lane,ft.lanes|=v,As|=v,g=g.next;while(g!==s)}else g===null&&(u.lanes=0);return[i.memoizedState,u.dispatch]}function nd(s){var i=kr(),u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var h=u.dispatch,g=u.pending,v=i.memoizedState;if(g!==null){u.pending=null;var k=g=g.next;do v=s(v,k.action),k=k.next;while(k!==g);$r(v,i.memoizedState)||(nr=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),u.lastRenderedState=v}return[v,h]}function Pg(){}function $g(s,i){var u=ft,h=kr(),g=i(),v=!$r(h.memoizedState,g);if(v&&(h.memoizedState=g,nr=!0),h=h.queue,sd(Mg.bind(null,u,h,s),[s]),h.getSnapshot!==i||v||Ot!==null&&Ot.memoizedState.tag&1){if(u.flags|=2048,xi(9,Lg.bind(null,u,h,g,i),void 0,null),Pt===null)throw Error(r(349));(Rs&30)!==0||jg(u,i,g)}return g}function jg(s,i,u){s.flags|=16384,s={getSnapshot:i,value:u},i=ft.updateQueue,i===null?(i={lastEffect:null,stores:null},ft.updateQueue=i,i.stores=[s]):(u=i.stores,u===null?i.stores=[s]:u.push(s))}function Lg(s,i,u,h){i.value=u,i.getSnapshot=h,Dg(i)&&zg(s)}function Mg(s,i,u){return u(function(){Dg(i)&&zg(s)})}function Dg(s){var i=s.getSnapshot;s=s.value;try{var u=i();return!$r(s,u)}catch{return!0}}function zg(s){var i=_n(s,1);i!==null&&zr(i,s,1,-1)}function Fg(s){var i=nn();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:s},i.queue=s,s=s.dispatch=tS.bind(null,ft,s),[i.memoizedState,s]}function xi(s,i,u,h){return s={tag:s,create:i,destroy:u,deps:h,next:null},i=ft.updateQueue,i===null?(i={lastEffect:null,stores:null},ft.updateQueue=i,i.lastEffect=s.next=s):(u=i.lastEffect,u===null?i.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,i.lastEffect=s)),s}function Ug(){return kr().memoizedState}function Qo(s,i,u,h){var g=nn();ft.flags|=s,g.memoizedState=xi(1|i,u,void 0,h===void 0?null:h)}function el(s,i,u,h){var g=kr();h=h===void 0?null:h;var v=void 0;if(Ct!==null){var k=Ct.memoizedState;if(v=k.destroy,h!==null&&Qu(h,k.deps)){g.memoizedState=xi(i,u,v,h);return}}ft.flags|=s,g.memoizedState=xi(1|i,u,v,h)}function Bg(s,i){return Qo(8390656,8,s,i)}function sd(s,i){return el(2048,8,s,i)}function Vg(s,i){return el(4,2,s,i)}function Hg(s,i){return el(4,4,s,i)}function Gg(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function qg(s,i,u){return u=u!=null?u.concat([s]):null,el(4,4,Gg.bind(null,i,s),u)}function ad(){}function Wg(s,i){var u=kr();i=i===void 0?null:i;var h=u.memoizedState;return h!==null&&i!==null&&Qu(i,h[1])?h[0]:(u.memoizedState=[s,i],s)}function Zg(s,i){var u=kr();i=i===void 0?null:i;var h=u.memoizedState;return h!==null&&i!==null&&Qu(i,h[1])?h[0]:(s=s(),u.memoizedState=[s,i],s)}function Kg(s,i,u){return(Rs&21)===0?(s.baseState&&(s.baseState=!1,nr=!0),s.memoizedState=u):($r(u,i)||(u=km(),ft.lanes|=u,As|=u,s.baseState=!0),i)}function QE(s,i){var u=Qe;Qe=u!==0&&4>u?u:4,s(!0);var h=Xu.transition;Xu.transition={};try{s(!1),i()}finally{Qe=u,Xu.transition=h}}function Jg(){return kr().memoizedState}function eS(s,i,u){var h=rs(s);if(u={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null},Yg(s))Xg(i,u);else if(u=Ng(s,i,u,h),u!==null){var g=Zt();zr(u,s,h,g),Qg(u,i,h)}}function tS(s,i,u){var h=rs(s),g={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null};if(Yg(s))Xg(i,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var k=i.lastRenderedState,R=v(k,u);if(g.hasEagerState=!0,g.eagerState=R,$r(R,k)){var $=i.interleaved;$===null?(g.next=g,qu(i)):(g.next=$.next,$.next=g),i.interleaved=g;return}}catch{}finally{}u=Ng(s,i,g,h),u!==null&&(g=Zt(),zr(u,s,h,g),Qg(u,i,h))}}function Yg(s){var i=s.alternate;return s===ft||i!==null&&i===ft}function Xg(s,i){_i=Xo=!0;var u=s.pending;u===null?i.next=i:(i.next=u.next,u.next=i),s.pending=i}function Qg(s,i,u){if((u&4194240)!==0){var h=i.lanes;h&=s.pendingLanes,u|=h,i.lanes=u,ou(s,u)}}var tl={readContext:Sr,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},rS={readContext:Sr,useCallback:function(s,i){return nn().memoizedState=[s,i===void 0?null:i],s},useContext:Sr,useEffect:Bg,useImperativeHandle:function(s,i,u){return u=u!=null?u.concat([s]):null,Qo(4194308,4,Gg.bind(null,i,s),u)},useLayoutEffect:function(s,i){return Qo(4194308,4,s,i)},useInsertionEffect:function(s,i){return Qo(4,2,s,i)},useMemo:function(s,i){var u=nn();return i=i===void 0?null:i,s=s(),u.memoizedState=[s,i],s},useReducer:function(s,i,u){var h=nn();return i=u!==void 0?u(i):i,h.memoizedState=h.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},h.queue=s,s=s.dispatch=eS.bind(null,ft,s),[h.memoizedState,s]},useRef:function(s){var i=nn();return s={current:s},i.memoizedState=s},useState:Fg,useDebugValue:ad,useDeferredValue:function(s){return nn().memoizedState=s},useTransition:function(){var s=Fg(!1),i=s[0];return s=QE.bind(null,s[1]),nn().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,u){var h=ft,g=nn();if(lt){if(u===void 0)throw Error(r(407));u=u()}else{if(u=i(),Pt===null)throw Error(r(349));(Rs&30)!==0||jg(h,i,u)}g.memoizedState=u;var v={value:u,getSnapshot:i};return g.queue=v,Bg(Mg.bind(null,h,v,s),[s]),h.flags|=2048,xi(9,Lg.bind(null,h,v,u,i),void 0,null),u},useId:function(){var s=nn(),i=Pt.identifierPrefix;if(lt){var u=vn,h=yn;u=(h&~(1<<32-Pr(h)-1)).toString(32)+u,i=":"+i+"R"+u,u=wi++,0<u&&(i+="H"+u.toString(32)),i+=":"}else u=XE++,i=":"+i+"r"+u.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},nS={readContext:Sr,useCallback:Wg,useContext:Sr,useEffect:sd,useImperativeHandle:qg,useInsertionEffect:Vg,useLayoutEffect:Hg,useMemo:Zg,useReducer:rd,useRef:Ug,useState:function(){return rd(bi)},useDebugValue:ad,useDeferredValue:function(s){var i=kr();return Kg(i,Ct.memoizedState,s)},useTransition:function(){var s=rd(bi)[0],i=kr().memoizedState;return[s,i]},useMutableSource:Pg,useSyncExternalStore:$g,useId:Jg,unstable_isNewReconciler:!1},sS={readContext:Sr,useCallback:Wg,useContext:Sr,useEffect:sd,useImperativeHandle:qg,useInsertionEffect:Vg,useLayoutEffect:Hg,useMemo:Zg,useReducer:nd,useRef:Ug,useState:function(){return nd(bi)},useDebugValue:ad,useDeferredValue:function(s){var i=kr();return Ct===null?i.memoizedState=s:Kg(i,Ct.memoizedState,s)},useTransition:function(){var s=nd(bi)[0],i=kr().memoizedState;return[s,i]},useMutableSource:Pg,useSyncExternalStore:$g,useId:Jg,unstable_isNewReconciler:!1};function Lr(s,i){if(s&&s.defaultProps){i=G({},i),s=s.defaultProps;for(var u in s)i[u]===void 0&&(i[u]=s[u]);return i}return i}function id(s,i,u,h){i=s.memoizedState,u=u(h,i),u=u==null?i:G({},i,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var rl={isMounted:function(s){return(s=s._reactInternals)?Es(s)===s:!1},enqueueSetState:function(s,i,u){s=s._reactInternals;var h=Zt(),g=rs(s),v=wn(h,g);v.payload=i,u!=null&&(v.callback=u),i=Xn(s,v,g),i!==null&&(zr(i,s,g,h),Zo(i,s,g))},enqueueReplaceState:function(s,i,u){s=s._reactInternals;var h=Zt(),g=rs(s),v=wn(h,g);v.tag=1,v.payload=i,u!=null&&(v.callback=u),i=Xn(s,v,g),i!==null&&(zr(i,s,g,h),Zo(i,s,g))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var u=Zt(),h=rs(s),g=wn(u,h);g.tag=2,i!=null&&(g.callback=i),i=Xn(s,g,h),i!==null&&(zr(i,s,h,u),Zo(i,s,h))}};function ey(s,i,u,h,g,v,k){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,v,k):i.prototype&&i.prototype.isPureReactComponent?!li(u,h)||!li(g,v):!0}function ty(s,i,u){var h=!1,g=Kn,v=i.contextType;return typeof v=="object"&&v!==null?v=Sr(v):(g=rr(i)?ks:Ut.current,h=i.contextTypes,v=(h=h!=null)?oa(s,g):Kn),i=new i(u,v),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=rl,s.stateNode=i,i._reactInternals=s,h&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=v),i}function ry(s,i,u,h){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(u,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(u,h),i.state!==s&&rl.enqueueReplaceState(i,i.state,null)}function od(s,i,u,h){var g=s.stateNode;g.props=u,g.state=s.memoizedState,g.refs={},Wu(s);var v=i.contextType;typeof v=="object"&&v!==null?g.context=Sr(v):(v=rr(i)?ks:Ut.current,g.context=oa(s,v)),g.state=s.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(id(s,i,v,u),g.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(i=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),i!==g.state&&rl.enqueueReplaceState(g,g.state,null),Ko(s,u,g,h),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function ma(s,i){try{var u="",h=i;do u+=ue(h),h=h.return;while(h);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:i,stack:g,digest:null}}function ld(s,i,u){return{value:s,source:null,stack:u??null,digest:i??null}}function cd(s,i){try{console.error(i.value)}catch(u){setTimeout(function(){throw u})}}var aS=typeof WeakMap=="function"?WeakMap:Map;function ny(s,i,u){u=wn(-1,u),u.tag=3,u.payload={element:null};var h=i.value;return u.callback=function(){cl||(cl=!0,Sd=h),cd(s,i)},u}function sy(s,i,u){u=wn(-1,u),u.tag=3;var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var g=i.value;u.payload=function(){return h(g)},u.callback=function(){cd(s,i)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){cd(s,i),typeof h!="function"&&(es===null?es=new Set([this]):es.add(this));var k=i.stack;this.componentDidCatch(i.value,{componentStack:k!==null?k:""})}),u}function ay(s,i,u){var h=s.pingCache;if(h===null){h=s.pingCache=new aS;var g=new Set;h.set(i,g)}else g=h.get(i),g===void 0&&(g=new Set,h.set(i,g));g.has(u)||(g.add(u),s=_S.bind(null,s,i,u),i.then(s,s))}function iy(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function oy(s,i,u,h,g){return(s.mode&1)===0?(s===i?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(i=wn(-1,1),i.tag=2,Xn(u,i,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var iS=D.ReactCurrentOwner,nr=!1;function Wt(s,i,u,h){i.child=s===null?Cg(i,null,u,h):da(i,s.child,u,h)}function ly(s,i,u,h,g){u=u.render;var v=i.ref;return ha(i,g),h=ed(s,i,u,h,v,g),u=td(),s!==null&&!nr?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~g,bn(s,i,g)):(lt&&u&&Mu(i),i.flags|=1,Wt(s,i,h,g),i.child)}function cy(s,i,u,h,g){if(s===null){var v=u.type;return typeof v=="function"&&!Ad(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(i.tag=15,i.type=v,uy(s,i,v,h,g)):(s=ml(u.type,null,h,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(v=s.child,(s.lanes&g)===0){var k=v.memoizedProps;if(u=u.compare,u=u!==null?u:li,u(k,h)&&s.ref===i.ref)return bn(s,i,g)}return i.flags|=1,s=ss(v,h),s.ref=i.ref,s.return=i,i.child=s}function uy(s,i,u,h,g){if(s!==null){var v=s.memoizedProps;if(li(v,h)&&s.ref===i.ref)if(nr=!1,i.pendingProps=h=v,(s.lanes&g)!==0)(s.flags&131072)!==0&&(nr=!0);else return i.lanes=s.lanes,bn(s,i,g)}return ud(s,i,u,h,g)}function dy(s,i,u){var h=i.pendingProps,g=h.children,v=s!==null?s.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(ya,mr),mr|=u;else{if((u&1073741824)===0)return s=v!==null?v.baseLanes|u:u,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,rt(ya,mr),mr|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:u,rt(ya,mr),mr|=h}else v!==null?(h=v.baseLanes|u,i.memoizedState=null):h=u,rt(ya,mr),mr|=h;return Wt(s,i,g,u),i.child}function fy(s,i){var u=i.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(i.flags|=512,i.flags|=2097152)}function ud(s,i,u,h,g){var v=rr(u)?ks:Ut.current;return v=oa(i,v),ha(i,g),u=ed(s,i,u,h,v,g),h=td(),s!==null&&!nr?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~g,bn(s,i,g)):(lt&&h&&Mu(i),i.flags|=1,Wt(s,i,u,g),i.child)}function hy(s,i,u,h,g){if(rr(u)){var v=!0;Fo(i)}else v=!1;if(ha(i,g),i.stateNode===null)sl(s,i),ty(i,u,h),od(i,u,h,g),h=!0;else if(s===null){var k=i.stateNode,R=i.memoizedProps;k.props=R;var $=k.context,B=u.contextType;typeof B=="object"&&B!==null?B=Sr(B):(B=rr(u)?ks:Ut.current,B=oa(i,B));var X=u.getDerivedStateFromProps,Q=typeof X=="function"||typeof k.getSnapshotBeforeUpdate=="function";Q||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(R!==h||$!==B)&&ry(i,k,h,B),Yn=!1;var Y=i.memoizedState;k.state=Y,Ko(i,h,k,g),$=i.memoizedState,R!==h||Y!==$||tr.current||Yn?(typeof X=="function"&&(id(i,u,X,h),$=i.memoizedState),(R=Yn||ey(i,u,R,h,Y,$,B))?(Q||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(i.flags|=4194308)):(typeof k.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=$),k.props=h,k.state=$,k.context=B,h=R):(typeof k.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{k=i.stateNode,Ig(s,i),R=i.memoizedProps,B=i.type===i.elementType?R:Lr(i.type,R),k.props=B,Q=i.pendingProps,Y=k.context,$=u.contextType,typeof $=="object"&&$!==null?$=Sr($):($=rr(u)?ks:Ut.current,$=oa(i,$));var de=u.getDerivedStateFromProps;(X=typeof de=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(R!==Q||Y!==$)&&ry(i,k,h,$),Yn=!1,Y=i.memoizedState,k.state=Y,Ko(i,h,k,g);var ge=i.memoizedState;R!==Q||Y!==ge||tr.current||Yn?(typeof de=="function"&&(id(i,u,de,h),ge=i.memoizedState),(B=Yn||ey(i,u,B,h,Y,ge,$)||!1)?(X||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(h,ge,$),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(h,ge,$)),typeof k.componentDidUpdate=="function"&&(i.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof k.componentDidUpdate!="function"||R===s.memoizedProps&&Y===s.memoizedState||(i.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&Y===s.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=ge),k.props=h,k.state=ge,k.context=$,h=B):(typeof k.componentDidUpdate!="function"||R===s.memoizedProps&&Y===s.memoizedState||(i.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&Y===s.memoizedState||(i.flags|=1024),h=!1)}return dd(s,i,u,h,v,g)}function dd(s,i,u,h,g,v){fy(s,i);var k=(i.flags&128)!==0;if(!h&&!k)return g&&vg(i,u,!1),bn(s,i,v);h=i.stateNode,iS.current=i;var R=k&&typeof u.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,s!==null&&k?(i.child=da(i,s.child,null,v),i.child=da(i,null,R,v)):Wt(s,i,R,v),i.memoizedState=h.state,g&&vg(i,u,!0),i.child}function py(s){var i=s.stateNode;i.pendingContext?gg(s,i.pendingContext,i.pendingContext!==i.context):i.context&&gg(s,i.context,!1),Zu(s,i.containerInfo)}function my(s,i,u,h,g){return ua(),Uu(g),i.flags|=256,Wt(s,i,u,h),i.child}var fd={dehydrated:null,treeContext:null,retryLane:0};function hd(s){return{baseLanes:s,cachePool:null,transitions:null}}function gy(s,i,u){var h=i.pendingProps,g=dt.current,v=!1,k=(i.flags&128)!==0,R;if((R=k)||(R=s!==null&&s.memoizedState===null?!1:(g&2)!==0),R?(v=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),rt(dt,g&1),s===null)return Fu(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((i.mode&1)===0?i.lanes=1:s.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(k=h.children,s=h.fallback,v?(h=i.mode,v=i.child,k={mode:"hidden",children:k},(h&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=k):v=gl(k,h,0,null),s=js(s,h,u,null),v.return=i,s.return=i,v.sibling=s,i.child=v,i.child.memoizedState=hd(u),i.memoizedState=fd,s):pd(i,k));if(g=s.memoizedState,g!==null&&(R=g.dehydrated,R!==null))return oS(s,i,k,h,R,g,u);if(v){v=h.fallback,k=i.mode,g=s.child,R=g.sibling;var $={mode:"hidden",children:h.children};return(k&1)===0&&i.child!==g?(h=i.child,h.childLanes=0,h.pendingProps=$,i.deletions=null):(h=ss(g,$),h.subtreeFlags=g.subtreeFlags&14680064),R!==null?v=ss(R,v):(v=js(v,k,u,null),v.flags|=2),v.return=i,h.return=i,h.sibling=v,i.child=h,h=v,v=i.child,k=s.child.memoizedState,k=k===null?hd(u):{baseLanes:k.baseLanes|u,cachePool:null,transitions:k.transitions},v.memoizedState=k,v.childLanes=s.childLanes&~u,i.memoizedState=fd,h}return v=s.child,s=v.sibling,h=ss(v,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=u),h.return=i,h.sibling=null,s!==null&&(u=i.deletions,u===null?(i.deletions=[s],i.flags|=16):u.push(s)),i.child=h,i.memoizedState=null,h}function pd(s,i){return i=gl({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function nl(s,i,u,h){return h!==null&&Uu(h),da(i,s.child,null,u),s=pd(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function oS(s,i,u,h,g,v,k){if(u)return i.flags&256?(i.flags&=-257,h=ld(Error(r(422))),nl(s,i,k,h)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(v=h.fallback,g=i.mode,h=gl({mode:"visible",children:h.children},g,0,null),v=js(v,g,k,null),v.flags|=2,h.return=i,v.return=i,h.sibling=v,i.child=h,(i.mode&1)!==0&&da(i,s.child,null,k),i.child.memoizedState=hd(k),i.memoizedState=fd,v);if((i.mode&1)===0)return nl(s,i,k,null);if(g.data==="$!"){if(h=g.nextSibling&&g.nextSibling.dataset,h)var R=h.dgst;return h=R,v=Error(r(419)),h=ld(v,h,void 0),nl(s,i,k,h)}if(R=(k&s.childLanes)!==0,nr||R){if(h=Pt,h!==null){switch(k&-k){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(h.suspendedLanes|k))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,_n(s,g),zr(h,s,g,-1))}return Rd(),h=ld(Error(r(421))),nl(s,i,k,h)}return g.data==="$?"?(i.flags|=128,i.child=s.child,i=wS.bind(null,s),g._reactRetry=i,null):(s=v.treeContext,pr=Wn(g.nextSibling),hr=i,lt=!0,jr=null,s!==null&&(xr[Er++]=yn,xr[Er++]=vn,xr[Er++]=Ts,yn=s.id,vn=s.overflow,Ts=i),i=pd(i,h.children),i.flags|=4096,i)}function yy(s,i,u){s.lanes|=i;var h=s.alternate;h!==null&&(h.lanes|=i),Gu(s.return,i,u)}function md(s,i,u,h,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:g}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=u,v.tailMode=g)}function vy(s,i,u){var h=i.pendingProps,g=h.revealOrder,v=h.tail;if(Wt(s,i,h.children,u),h=dt.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&yy(s,u,i);else if(s.tag===19)yy(s,u,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}if(rt(dt,h),(i.mode&1)===0)i.memoizedState=null;else switch(g){case"forwards":for(u=i.child,g=null;u!==null;)s=u.alternate,s!==null&&Jo(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=i.child,i.child=null):(g=u.sibling,u.sibling=null),md(i,!1,g,u,v);break;case"backwards":for(u=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&Jo(s)===null){i.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}md(i,!0,u,null,v);break;case"together":md(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function sl(s,i){(i.mode&1)===0&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function bn(s,i,u){if(s!==null&&(i.dependencies=s.dependencies),As|=i.lanes,(u&i.childLanes)===0)return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,u=ss(s,s.pendingProps),i.child=u,u.return=i;s.sibling!==null;)s=s.sibling,u=u.sibling=ss(s,s.pendingProps),u.return=i;u.sibling=null}return i.child}function lS(s,i,u){switch(i.tag){case 3:py(i),ua();break;case 5:Og(i);break;case 1:rr(i.type)&&Fo(i);break;case 4:Zu(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,g=i.memoizedProps.value;rt(qo,h._currentValue),h._currentValue=g;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(rt(dt,dt.current&1),i.flags|=128,null):(u&i.child.childLanes)!==0?gy(s,i,u):(rt(dt,dt.current&1),s=bn(s,i,u),s!==null?s.sibling:null);rt(dt,dt.current&1);break;case 19:if(h=(u&i.childLanes)!==0,(s.flags&128)!==0){if(h)return vy(s,i,u);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),rt(dt,dt.current),h)break;return null;case 22:case 23:return i.lanes=0,dy(s,i,u)}return bn(s,i,u)}var _y,gd,wy,by;_y=function(s,i){for(var u=i.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},gd=function(){},wy=function(s,i,u,h){var g=s.memoizedProps;if(g!==h){s=i.stateNode,Is(rn.current);var v=null;switch(u){case"input":g=vt(s,g),h=vt(s,h),v=[];break;case"select":g=G({},g,{value:void 0}),h=G({},h,{value:void 0}),v=[];break;case"textarea":g=Pe(s,g),h=Pe(s,h),v=[];break;default:typeof g.onClick!="function"&&typeof h.onClick=="function"&&(s.onclick=Mo)}Jc(u,h);var k;u=null;for(B in g)if(!h.hasOwnProperty(B)&&g.hasOwnProperty(B)&&g[B]!=null)if(B==="style"){var R=g[B];for(k in R)R.hasOwnProperty(k)&&(u||(u={}),u[k]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(a.hasOwnProperty(B)?v||(v=[]):(v=v||[]).push(B,null));for(B in h){var $=h[B];if(R=g?.[B],h.hasOwnProperty(B)&&$!==R&&($!=null||R!=null))if(B==="style")if(R){for(k in R)!R.hasOwnProperty(k)||$&&$.hasOwnProperty(k)||(u||(u={}),u[k]="");for(k in $)$.hasOwnProperty(k)&&R[k]!==$[k]&&(u||(u={}),u[k]=$[k])}else u||(v||(v=[]),v.push(B,u)),u=$;else B==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,R=R?R.__html:void 0,$!=null&&R!==$&&(v=v||[]).push(B,$)):B==="children"?typeof $!="string"&&typeof $!="number"||(v=v||[]).push(B,""+$):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(a.hasOwnProperty(B)?($!=null&&B==="onScroll"&&at("scroll",s),v||R===$||(v=[])):(v=v||[]).push(B,$))}u&&(v=v||[]).push("style",u);var B=v;(i.updateQueue=B)&&(i.flags|=4)}},by=function(s,i,u,h){u!==h&&(i.flags|=4)};function Ei(s,i){if(!lt)switch(s.tailMode){case"hidden":i=s.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Vt(s){var i=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(i)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags&14680064,h|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=h,s.childLanes=u,i}function cS(s,i,u){var h=i.pendingProps;switch(Du(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(i),null;case 1:return rr(i.type)&&zo(),Vt(i),null;case 3:return h=i.stateNode,pa(),it(tr),it(Ut),Yu(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(Ho(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,jr!==null&&(Cd(jr),jr=null))),gd(s,i),Vt(i),null;case 5:Ku(i);var g=Is(vi.current);if(u=i.type,s!==null&&i.stateNode!=null)wy(s,i,u,h,g),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(r(166));return Vt(i),null}if(s=Is(rn.current),Ho(i)){h=i.stateNode,u=i.type;var v=i.memoizedProps;switch(h[tn]=i,h[hi]=v,s=(i.mode&1)!==0,u){case"dialog":at("cancel",h),at("close",h);break;case"iframe":case"object":case"embed":at("load",h);break;case"video":case"audio":for(g=0;g<ui.length;g++)at(ui[g],h);break;case"source":at("error",h);break;case"img":case"image":case"link":at("error",h),at("load",h);break;case"details":at("toggle",h);break;case"input":Qt(h,v),at("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},at("invalid",h);break;case"textarea":Se(h,v),at("invalid",h)}Jc(u,v),g=null;for(var k in v)if(v.hasOwnProperty(k)){var R=v[k];k==="children"?typeof R=="string"?h.textContent!==R&&(v.suppressHydrationWarning!==!0&&Lo(h.textContent,R,s),g=["children",R]):typeof R=="number"&&h.textContent!==""+R&&(v.suppressHydrationWarning!==!0&&Lo(h.textContent,R,s),g=["children",""+R]):a.hasOwnProperty(k)&&R!=null&&k==="onScroll"&&at("scroll",h)}switch(u){case"input":He(h),pn(h,v,!0);break;case"textarea":He(h),he(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=Mo)}h=g,i.updateQueue=h,h!==null&&(i.flags|=4)}else{k=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=oe(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=k.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof h.is=="string"?s=k.createElement(u,{is:h.is}):(s=k.createElement(u),u==="select"&&(k=s,h.multiple?k.multiple=!0:h.size&&(k.size=h.size))):s=k.createElementNS(s,u),s[tn]=i,s[hi]=h,_y(s,i,!1,!1),i.stateNode=s;e:{switch(k=Yc(u,h),u){case"dialog":at("cancel",s),at("close",s),g=h;break;case"iframe":case"object":case"embed":at("load",s),g=h;break;case"video":case"audio":for(g=0;g<ui.length;g++)at(ui[g],s);g=h;break;case"source":at("error",s),g=h;break;case"img":case"image":case"link":at("error",s),at("load",s),g=h;break;case"details":at("toggle",s),g=h;break;case"input":Qt(s,h),g=vt(s,h),at("invalid",s);break;case"option":g=h;break;case"select":s._wrapperState={wasMultiple:!!h.multiple},g=G({},h,{value:void 0}),at("invalid",s);break;case"textarea":Se(s,h),g=Pe(s,h),at("invalid",s);break;default:g=h}Jc(u,g),R=g;for(v in R)if(R.hasOwnProperty(v)){var $=R[v];v==="style"?um(s,$):v==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&Lt(s,$)):v==="children"?typeof $=="string"?(u!=="textarea"||$!=="")&&zn(s,$):typeof $=="number"&&zn(s,""+$):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(a.hasOwnProperty(v)?$!=null&&v==="onScroll"&&at("scroll",s):$!=null&&A(s,v,$,k))}switch(u){case"input":He(s),pn(s,h,!1);break;case"textarea":He(s),he(s);break;case"option":h.value!=null&&s.setAttribute("value",""+V(h.value));break;case"select":s.multiple=!!h.multiple,v=h.value,v!=null?er(s,!!h.multiple,v,!1):h.defaultValue!=null&&er(s,!!h.multiple,h.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=Mo)}switch(u){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Vt(i),null;case 6:if(s&&i.stateNode!=null)by(s,i,s.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(r(166));if(u=Is(vi.current),Is(rn.current),Ho(i)){if(h=i.stateNode,u=i.memoizedProps,h[tn]=i,(v=h.nodeValue!==u)&&(s=hr,s!==null))switch(s.tag){case 3:Lo(h.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Lo(h.nodeValue,u,(s.mode&1)!==0)}v&&(i.flags|=4)}else h=(u.nodeType===9?u:u.ownerDocument).createTextNode(h),h[tn]=i,i.stateNode=h}return Vt(i),null;case 13:if(it(dt),h=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(lt&&pr!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Sg(),ua(),i.flags|=98560,v=!1;else if(v=Ho(i),h!==null&&h.dehydrated!==null){if(s===null){if(!v)throw Error(r(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[tn]=i}else ua(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Vt(i),v=!1}else jr!==null&&(Cd(jr),jr=null),v=!0;if(!v)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=u,i):(h=h!==null,h!==(s!==null&&s.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(s===null||(dt.current&1)!==0?Nt===0&&(Nt=3):Rd())),i.updateQueue!==null&&(i.flags|=4),Vt(i),null);case 4:return pa(),gd(s,i),s===null&&di(i.stateNode.containerInfo),Vt(i),null;case 10:return Hu(i.type._context),Vt(i),null;case 17:return rr(i.type)&&zo(),Vt(i),null;case 19:if(it(dt),v=i.memoizedState,v===null)return Vt(i),null;if(h=(i.flags&128)!==0,k=v.rendering,k===null)if(h)Ei(v,!1);else{if(Nt!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(k=Jo(s),k!==null){for(i.flags|=128,Ei(v,!1),h=k.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=u,u=i.child;u!==null;)v=u,s=h,v.flags&=14680066,k=v.alternate,k===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=k.childLanes,v.lanes=k.lanes,v.child=k.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=k.memoizedProps,v.memoizedState=k.memoizedState,v.updateQueue=k.updateQueue,v.type=k.type,s=k.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return rt(dt,dt.current&1|2),i.child}s=s.sibling}v.tail!==null&&_t()>va&&(i.flags|=128,h=!0,Ei(v,!1),i.lanes=4194304)}else{if(!h)if(s=Jo(k),s!==null){if(i.flags|=128,h=!0,u=s.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),Ei(v,!0),v.tail===null&&v.tailMode==="hidden"&&!k.alternate&&!lt)return Vt(i),null}else 2*_t()-v.renderingStartTime>va&&u!==1073741824&&(i.flags|=128,h=!0,Ei(v,!1),i.lanes=4194304);v.isBackwards?(k.sibling=i.child,i.child=k):(u=v.last,u!==null?u.sibling=k:i.child=k,v.last=k)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=_t(),i.sibling=null,u=dt.current,rt(dt,h?u&1|2:u&1),i):(Vt(i),null);case 22:case 23:return Id(),h=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(mr&1073741824)!==0&&(Vt(i),i.subtreeFlags&6&&(i.flags|=8192)):Vt(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function uS(s,i){switch(Du(i),i.tag){case 1:return rr(i.type)&&zo(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return pa(),it(tr),it(Ut),Yu(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 5:return Ku(i),null;case 13:if(it(dt),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));ua()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return it(dt),null;case 4:return pa(),null;case 10:return Hu(i.type._context),null;case 22:case 23:return Id(),null;case 24:return null;default:return null}}var al=!1,Ht=!1,dS=typeof WeakSet=="function"?WeakSet:Set,pe=null;function ga(s,i){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(h){mt(s,i,h)}else u.current=null}function yd(s,i,u){try{u()}catch(h){mt(s,i,h)}}var xy=!1;function fS(s,i){if(Iu=ko,s=eg(),bu(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var g=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var k=0,R=-1,$=-1,B=0,X=0,Q=s,Y=null;t:for(;;){for(var de;Q!==u||g!==0&&Q.nodeType!==3||(R=k+g),Q!==v||h!==0&&Q.nodeType!==3||($=k+h),Q.nodeType===3&&(k+=Q.nodeValue.length),(de=Q.firstChild)!==null;)Y=Q,Q=de;for(;;){if(Q===s)break t;if(Y===u&&++B===g&&(R=k),Y===v&&++X===h&&($=k),(de=Q.nextSibling)!==null)break;Q=Y,Y=Q.parentNode}Q=de}u=R===-1||$===-1?null:{start:R,end:$}}else u=null}u=u||{start:0,end:0}}else u=null;for(Ru={focusedElem:s,selectionRange:u},ko=!1,pe=i;pe!==null;)if(i=pe,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,pe=s;else for(;pe!==null;){i=pe;try{var ge=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var we=ge.memoizedProps,wt=ge.memoizedState,z=i.stateNode,L=z.getSnapshotBeforeUpdate(i.elementType===i.type?we:Lr(i.type,we),wt);z.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var F=i.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(re){mt(i,i.return,re)}if(s=i.sibling,s!==null){s.return=i.return,pe=s;break}pe=i.return}return ge=xy,xy=!1,ge}function Si(s,i,u){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&s)===s){var v=g.destroy;g.destroy=void 0,v!==void 0&&yd(i,u,v)}g=g.next}while(g!==h)}}function il(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var u=i=i.next;do{if((u.tag&s)===s){var h=u.create;u.destroy=h()}u=u.next}while(u!==i)}}function vd(s){var i=s.ref;if(i!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof i=="function"?i(s):i.current=s}}function Ey(s){var i=s.alternate;i!==null&&(s.alternate=null,Ey(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[tn],delete i[hi],delete i[$u],delete i[ZE],delete i[KE])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Sy(s){return s.tag===5||s.tag===3||s.tag===4}function ky(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Sy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function _d(s,i,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,i?u.nodeType===8?u.parentNode.insertBefore(s,i):u.insertBefore(s,i):(u.nodeType===8?(i=u.parentNode,i.insertBefore(s,u)):(i=u,i.appendChild(s)),u=u._reactRootContainer,u!=null||i.onclick!==null||(i.onclick=Mo));else if(h!==4&&(s=s.child,s!==null))for(_d(s,i,u),s=s.sibling;s!==null;)_d(s,i,u),s=s.sibling}function wd(s,i,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,i?u.insertBefore(s,i):u.appendChild(s);else if(h!==4&&(s=s.child,s!==null))for(wd(s,i,u),s=s.sibling;s!==null;)wd(s,i,u),s=s.sibling}var Mt=null,Mr=!1;function Qn(s,i,u){for(u=u.child;u!==null;)Ty(s,i,u),u=u.sibling}function Ty(s,i,u){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(_o,u)}catch{}switch(u.tag){case 5:Ht||ga(u,i);case 6:var h=Mt,g=Mr;Mt=null,Qn(s,i,u),Mt=h,Mr=g,Mt!==null&&(Mr?(s=Mt,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Mt.removeChild(u.stateNode));break;case 18:Mt!==null&&(Mr?(s=Mt,u=u.stateNode,s.nodeType===8?Pu(s.parentNode,u):s.nodeType===1&&Pu(s,u),ri(s)):Pu(Mt,u.stateNode));break;case 4:h=Mt,g=Mr,Mt=u.stateNode.containerInfo,Mr=!0,Qn(s,i,u),Mt=h,Mr=g;break;case 0:case 11:case 14:case 15:if(!Ht&&(h=u.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){g=h=h.next;do{var v=g,k=v.destroy;v=v.tag,k!==void 0&&((v&2)!==0||(v&4)!==0)&&yd(u,i,k),g=g.next}while(g!==h)}Qn(s,i,u);break;case 1:if(!Ht&&(ga(u,i),h=u.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=u.memoizedProps,h.state=u.memoizedState,h.componentWillUnmount()}catch(R){mt(u,i,R)}Qn(s,i,u);break;case 21:Qn(s,i,u);break;case 22:u.mode&1?(Ht=(h=Ht)||u.memoizedState!==null,Qn(s,i,u),Ht=h):Qn(s,i,u);break;default:Qn(s,i,u)}}function Cy(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new dS),i.forEach(function(h){var g=bS.bind(null,s,h);u.has(h)||(u.add(h),h.then(g,g))})}}function Dr(s,i){var u=i.deletions;if(u!==null)for(var h=0;h<u.length;h++){var g=u[h];try{var v=s,k=i,R=k;e:for(;R!==null;){switch(R.tag){case 5:Mt=R.stateNode,Mr=!1;break e;case 3:Mt=R.stateNode.containerInfo,Mr=!0;break e;case 4:Mt=R.stateNode.containerInfo,Mr=!0;break e}R=R.return}if(Mt===null)throw Error(r(160));Ty(v,k,g),Mt=null,Mr=!1;var $=g.alternate;$!==null&&($.return=null),g.return=null}catch(B){mt(g,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Ny(i,s),i=i.sibling}function Ny(s,i){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Dr(i,s),sn(s),h&4){try{Si(3,s,s.return),il(3,s)}catch(we){mt(s,s.return,we)}try{Si(5,s,s.return)}catch(we){mt(s,s.return,we)}}break;case 1:Dr(i,s),sn(s),h&512&&u!==null&&ga(u,u.return);break;case 5:if(Dr(i,s),sn(s),h&512&&u!==null&&ga(u,u.return),s.flags&32){var g=s.stateNode;try{zn(g,"")}catch(we){mt(s,s.return,we)}}if(h&4&&(g=s.stateNode,g!=null)){var v=s.memoizedProps,k=u!==null?u.memoizedProps:v,R=s.type,$=s.updateQueue;if(s.updateQueue=null,$!==null)try{R==="input"&&v.type==="radio"&&v.name!=null&&st(g,v),Yc(R,k);var B=Yc(R,v);for(k=0;k<$.length;k+=2){var X=$[k],Q=$[k+1];X==="style"?um(g,Q):X==="dangerouslySetInnerHTML"?Lt(g,Q):X==="children"?zn(g,Q):A(g,X,Q,B)}switch(R){case"input":Ft(g,v);break;case"textarea":je(g,v);break;case"select":var Y=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var de=v.value;de!=null?er(g,!!v.multiple,de,!1):Y!==!!v.multiple&&(v.defaultValue!=null?er(g,!!v.multiple,v.defaultValue,!0):er(g,!!v.multiple,v.multiple?[]:"",!1))}g[hi]=v}catch(we){mt(s,s.return,we)}}break;case 6:if(Dr(i,s),sn(s),h&4){if(s.stateNode===null)throw Error(r(162));g=s.stateNode,v=s.memoizedProps;try{g.nodeValue=v}catch(we){mt(s,s.return,we)}}break;case 3:if(Dr(i,s),sn(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{ri(i.containerInfo)}catch(we){mt(s,s.return,we)}break;case 4:Dr(i,s),sn(s);break;case 13:Dr(i,s),sn(s),g=s.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(Ed=_t())),h&4&&Cy(s);break;case 22:if(X=u!==null&&u.memoizedState!==null,s.mode&1?(Ht=(B=Ht)||X,Dr(i,s),Ht=B):Dr(i,s),sn(s),h&8192){if(B=s.memoizedState!==null,(s.stateNode.isHidden=B)&&!X&&(s.mode&1)!==0)for(pe=s,X=s.child;X!==null;){for(Q=pe=X;pe!==null;){switch(Y=pe,de=Y.child,Y.tag){case 0:case 11:case 14:case 15:Si(4,Y,Y.return);break;case 1:ga(Y,Y.return);var ge=Y.stateNode;if(typeof ge.componentWillUnmount=="function"){h=Y,u=Y.return;try{i=h,ge.props=i.memoizedProps,ge.state=i.memoizedState,ge.componentWillUnmount()}catch(we){mt(h,u,we)}}break;case 5:ga(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Ay(Q);continue}}de!==null?(de.return=Y,pe=de):Ay(Q)}X=X.sibling}e:for(X=null,Q=s;;){if(Q.tag===5){if(X===null){X=Q;try{g=Q.stateNode,B?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(R=Q.stateNode,$=Q.memoizedProps.style,k=$!=null&&$.hasOwnProperty("display")?$.display:null,R.style.display=cm("display",k))}catch(we){mt(s,s.return,we)}}}else if(Q.tag===6){if(X===null)try{Q.stateNode.nodeValue=B?"":Q.memoizedProps}catch(we){mt(s,s.return,we)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===s)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===s)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===s)break e;X===Q&&(X=null),Q=Q.return}X===Q&&(X=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:Dr(i,s),sn(s),h&4&&Cy(s);break;case 21:break;default:Dr(i,s),sn(s)}}function sn(s){var i=s.flags;if(i&2){try{e:{for(var u=s.return;u!==null;){if(Sy(u)){var h=u;break e}u=u.return}throw Error(r(160))}switch(h.tag){case 5:var g=h.stateNode;h.flags&32&&(zn(g,""),h.flags&=-33);var v=ky(s);wd(s,v,g);break;case 3:case 4:var k=h.stateNode.containerInfo,R=ky(s);_d(s,R,k);break;default:throw Error(r(161))}}catch($){mt(s,s.return,$)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function hS(s,i,u){pe=s,Iy(s)}function Iy(s,i,u){for(var h=(s.mode&1)!==0;pe!==null;){var g=pe,v=g.child;if(g.tag===22&&h){var k=g.memoizedState!==null||al;if(!k){var R=g.alternate,$=R!==null&&R.memoizedState!==null||Ht;R=al;var B=Ht;if(al=k,(Ht=$)&&!B)for(pe=g;pe!==null;)k=pe,$=k.child,k.tag===22&&k.memoizedState!==null?Oy(g):$!==null?($.return=k,pe=$):Oy(g);for(;v!==null;)pe=v,Iy(v),v=v.sibling;pe=g,al=R,Ht=B}Ry(s)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,pe=v):Ry(s)}}function Ry(s){for(;pe!==null;){var i=pe;if((i.flags&8772)!==0){var u=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ht||il(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!Ht)if(u===null)h.componentDidMount();else{var g=i.elementType===i.type?u.memoizedProps:Lr(i.type,u.memoizedProps);h.componentDidUpdate(g,u.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&Ag(i,v,h);break;case 3:var k=i.updateQueue;if(k!==null){if(u=null,i.child!==null)switch(i.child.tag){case 5:u=i.child.stateNode;break;case 1:u=i.child.stateNode}Ag(i,k,u)}break;case 5:var R=i.stateNode;if(u===null&&i.flags&4){u=R;var $=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&u.focus();break;case"img":$.src&&(u.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var X=B.memoizedState;if(X!==null){var Q=X.dehydrated;Q!==null&&ri(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ht||i.flags&512&&vd(i)}catch(Y){mt(i,i.return,Y)}}if(i===s){pe=null;break}if(u=i.sibling,u!==null){u.return=i.return,pe=u;break}pe=i.return}}function Ay(s){for(;pe!==null;){var i=pe;if(i===s){pe=null;break}var u=i.sibling;if(u!==null){u.return=i.return,pe=u;break}pe=i.return}}function Oy(s){for(;pe!==null;){var i=pe;try{switch(i.tag){case 0:case 11:case 15:var u=i.return;try{il(4,i)}catch($){mt(i,u,$)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var g=i.return;try{h.componentDidMount()}catch($){mt(i,g,$)}}var v=i.return;try{vd(i)}catch($){mt(i,v,$)}break;case 5:var k=i.return;try{vd(i)}catch($){mt(i,k,$)}}}catch($){mt(i,i.return,$)}if(i===s){pe=null;break}var R=i.sibling;if(R!==null){R.return=i.return,pe=R;break}pe=i.return}}var pS=Math.ceil,ol=D.ReactCurrentDispatcher,bd=D.ReactCurrentOwner,Tr=D.ReactCurrentBatchConfig,qe=0,Pt=null,xt=null,Dt=0,mr=0,ya=Zn(0),Nt=0,ki=null,As=0,ll=0,xd=0,Ti=null,sr=null,Ed=0,va=1/0,xn=null,cl=!1,Sd=null,es=null,ul=!1,ts=null,dl=0,Ci=0,kd=null,fl=-1,hl=0;function Zt(){return(qe&6)!==0?_t():fl!==-1?fl:fl=_t()}function rs(s){return(s.mode&1)===0?1:(qe&2)!==0&&Dt!==0?Dt&-Dt:YE.transition!==null?(hl===0&&(hl=km()),hl):(s=Qe,s!==0||(s=window.event,s=s===void 0?16:$m(s.type)),s)}function zr(s,i,u,h){if(50<Ci)throw Ci=0,kd=null,Error(r(185));Ya(s,u,h),((qe&2)===0||s!==Pt)&&(s===Pt&&((qe&2)===0&&(ll|=u),Nt===4&&ns(s,Dt)),ar(s,h),u===1&&qe===0&&(i.mode&1)===0&&(va=_t()+500,Uo&&Jn()))}function ar(s,i){var u=s.callbackNode;Y1(s,i);var h=xo(s,s===Pt?Dt:0);if(h===0)u!==null&&xm(u),s.callbackNode=null,s.callbackPriority=0;else if(i=h&-h,s.callbackPriority!==i){if(u!=null&&xm(u),i===1)s.tag===0?JE($y.bind(null,s)):_g($y.bind(null,s)),qE(function(){(qe&6)===0&&Jn()}),u=null;else{switch(Tm(h)){case 1:u=su;break;case 4:u=Em;break;case 16:u=vo;break;case 536870912:u=Sm;break;default:u=vo}u=By(u,Py.bind(null,s))}s.callbackPriority=i,s.callbackNode=u}}function Py(s,i){if(fl=-1,hl=0,(qe&6)!==0)throw Error(r(327));var u=s.callbackNode;if(_a()&&s.callbackNode!==u)return null;var h=xo(s,s===Pt?Dt:0);if(h===0)return null;if((h&30)!==0||(h&s.expiredLanes)!==0||i)i=pl(s,h);else{i=h;var g=qe;qe|=2;var v=Ly();(Pt!==s||Dt!==i)&&(xn=null,va=_t()+500,Ps(s,i));do try{yS();break}catch(R){jy(s,R)}while(!0);Vu(),ol.current=v,qe=g,xt!==null?i=0:(Pt=null,Dt=0,i=Nt)}if(i!==0){if(i===2&&(g=au(s),g!==0&&(h=g,i=Td(s,g))),i===1)throw u=ki,Ps(s,0),ns(s,h),ar(s,_t()),u;if(i===6)ns(s,h);else{if(g=s.current.alternate,(h&30)===0&&!mS(g)&&(i=pl(s,h),i===2&&(v=au(s),v!==0&&(h=v,i=Td(s,v))),i===1))throw u=ki,Ps(s,0),ns(s,h),ar(s,_t()),u;switch(s.finishedWork=g,s.finishedLanes=h,i){case 0:case 1:throw Error(r(345));case 2:$s(s,sr,xn);break;case 3:if(ns(s,h),(h&130023424)===h&&(i=Ed+500-_t(),10<i)){if(xo(s,0)!==0)break;if(g=s.suspendedLanes,(g&h)!==h){Zt(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Ou($s.bind(null,s,sr,xn),i);break}$s(s,sr,xn);break;case 4:if(ns(s,h),(h&4194240)===h)break;for(i=s.eventTimes,g=-1;0<h;){var k=31-Pr(h);v=1<<k,k=i[k],k>g&&(g=k),h&=~v}if(h=g,h=_t()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*pS(h/1960))-h,10<h){s.timeoutHandle=Ou($s.bind(null,s,sr,xn),h);break}$s(s,sr,xn);break;case 5:$s(s,sr,xn);break;default:throw Error(r(329))}}}return ar(s,_t()),s.callbackNode===u?Py.bind(null,s):null}function Td(s,i){var u=Ti;return s.current.memoizedState.isDehydrated&&(Ps(s,i).flags|=256),s=pl(s,i),s!==2&&(i=sr,sr=u,i!==null&&Cd(i)),s}function Cd(s){sr===null?sr=s:sr.push.apply(sr,s)}function mS(s){for(var i=s;;){if(i.flags&16384){var u=i.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var h=0;h<u.length;h++){var g=u[h],v=g.getSnapshot;g=g.value;try{if(!$r(v(),g))return!1}catch{return!1}}}if(u=i.child,i.subtreeFlags&16384&&u!==null)u.return=i,i=u;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ns(s,i){for(i&=~xd,i&=~ll,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var u=31-Pr(i),h=1<<u;s[u]=-1,i&=~h}}function $y(s){if((qe&6)!==0)throw Error(r(327));_a();var i=xo(s,0);if((i&1)===0)return ar(s,_t()),null;var u=pl(s,i);if(s.tag!==0&&u===2){var h=au(s);h!==0&&(i=h,u=Td(s,h))}if(u===1)throw u=ki,Ps(s,0),ns(s,i),ar(s,_t()),u;if(u===6)throw Error(r(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,$s(s,sr,xn),ar(s,_t()),null}function Nd(s,i){var u=qe;qe|=1;try{return s(i)}finally{qe=u,qe===0&&(va=_t()+500,Uo&&Jn())}}function Os(s){ts!==null&&ts.tag===0&&(qe&6)===0&&_a();var i=qe;qe|=1;var u=Tr.transition,h=Qe;try{if(Tr.transition=null,Qe=1,s)return s()}finally{Qe=h,Tr.transition=u,qe=i,(qe&6)===0&&Jn()}}function Id(){mr=ya.current,it(ya)}function Ps(s,i){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,GE(u)),xt!==null)for(u=xt.return;u!==null;){var h=u;switch(Du(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&zo();break;case 3:pa(),it(tr),it(Ut),Yu();break;case 5:Ku(h);break;case 4:pa();break;case 13:it(dt);break;case 19:it(dt);break;case 10:Hu(h.type._context);break;case 22:case 23:Id()}u=u.return}if(Pt=s,xt=s=ss(s.current,null),Dt=mr=i,Nt=0,ki=null,xd=ll=As=0,sr=Ti=null,Ns!==null){for(i=0;i<Ns.length;i++)if(u=Ns[i],h=u.interleaved,h!==null){u.interleaved=null;var g=h.next,v=u.pending;if(v!==null){var k=v.next;v.next=g,h.next=k}u.pending=h}Ns=null}return s}function jy(s,i){do{var u=xt;try{if(Vu(),Yo.current=tl,Xo){for(var h=ft.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}Xo=!1}if(Rs=0,Ot=Ct=ft=null,_i=!1,wi=0,bd.current=null,u===null||u.return===null){Nt=1,ki=i,xt=null;break}e:{var v=s,k=u.return,R=u,$=i;if(i=Dt,R.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var B=$,X=R,Q=X.tag;if((X.mode&1)===0&&(Q===0||Q===11||Q===15)){var Y=X.alternate;Y?(X.updateQueue=Y.updateQueue,X.memoizedState=Y.memoizedState,X.lanes=Y.lanes):(X.updateQueue=null,X.memoizedState=null)}var de=iy(k);if(de!==null){de.flags&=-257,oy(de,k,R,v,i),de.mode&1&&ay(v,B,i),i=de,$=B;var ge=i.updateQueue;if(ge===null){var we=new Set;we.add($),i.updateQueue=we}else ge.add($);break e}else{if((i&1)===0){ay(v,B,i),Rd();break e}$=Error(r(426))}}else if(lt&&R.mode&1){var wt=iy(k);if(wt!==null){(wt.flags&65536)===0&&(wt.flags|=256),oy(wt,k,R,v,i),Uu(ma($,R));break e}}v=$=ma($,R),Nt!==4&&(Nt=2),Ti===null?Ti=[v]:Ti.push(v),v=k;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var z=ny(v,$,i);Rg(v,z);break e;case 1:R=$;var L=v.type,F=v.stateNode;if((v.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(es===null||!es.has(F)))){v.flags|=65536,i&=-i,v.lanes|=i;var re=sy(v,R,i);Rg(v,re);break e}}v=v.return}while(v!==null)}Dy(u)}catch(xe){i=xe,xt===u&&u!==null&&(xt=u=u.return);continue}break}while(!0)}function Ly(){var s=ol.current;return ol.current=tl,s===null?tl:s}function Rd(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Pt===null||(As&268435455)===0&&(ll&268435455)===0||ns(Pt,Dt)}function pl(s,i){var u=qe;qe|=2;var h=Ly();(Pt!==s||Dt!==i)&&(xn=null,Ps(s,i));do try{gS();break}catch(g){jy(s,g)}while(!0);if(Vu(),qe=u,ol.current=h,xt!==null)throw Error(r(261));return Pt=null,Dt=0,Nt}function gS(){for(;xt!==null;)My(xt)}function yS(){for(;xt!==null&&!B1();)My(xt)}function My(s){var i=Uy(s.alternate,s,mr);s.memoizedProps=s.pendingProps,i===null?Dy(s):xt=i,bd.current=null}function Dy(s){var i=s;do{var u=i.alternate;if(s=i.return,(i.flags&32768)===0){if(u=cS(u,i,mr),u!==null){xt=u;return}}else{if(u=uS(u,i),u!==null){u.flags&=32767,xt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Nt=6,xt=null;return}}if(i=i.sibling,i!==null){xt=i;return}xt=i=s}while(i!==null);Nt===0&&(Nt=5)}function $s(s,i,u){var h=Qe,g=Tr.transition;try{Tr.transition=null,Qe=1,vS(s,i,u,h)}finally{Tr.transition=g,Qe=h}return null}function vS(s,i,u,h){do _a();while(ts!==null);if((qe&6)!==0)throw Error(r(327));u=s.finishedWork;var g=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0;var v=u.lanes|u.childLanes;if(X1(s,v),s===Pt&&(xt=Pt=null,Dt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||ul||(ul=!0,By(vo,function(){return _a(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=Tr.transition,Tr.transition=null;var k=Qe;Qe=1;var R=qe;qe|=4,bd.current=null,fS(s,u),Ny(u,s),DE(Ru),ko=!!Iu,Ru=Iu=null,s.current=u,hS(u),V1(),qe=R,Qe=k,Tr.transition=v}else s.current=u;if(ul&&(ul=!1,ts=s,dl=g),v=s.pendingLanes,v===0&&(es=null),q1(u.stateNode),ar(s,_t()),i!==null)for(h=s.onRecoverableError,u=0;u<i.length;u++)g=i[u],h(g.value,{componentStack:g.stack,digest:g.digest});if(cl)throw cl=!1,s=Sd,Sd=null,s;return(dl&1)!==0&&s.tag!==0&&_a(),v=s.pendingLanes,(v&1)!==0?s===kd?Ci++:(Ci=0,kd=s):Ci=0,Jn(),null}function _a(){if(ts!==null){var s=Tm(dl),i=Tr.transition,u=Qe;try{if(Tr.transition=null,Qe=16>s?16:s,ts===null)var h=!1;else{if(s=ts,ts=null,dl=0,(qe&6)!==0)throw Error(r(331));var g=qe;for(qe|=4,pe=s.current;pe!==null;){var v=pe,k=v.child;if((pe.flags&16)!==0){var R=v.deletions;if(R!==null){for(var $=0;$<R.length;$++){var B=R[$];for(pe=B;pe!==null;){var X=pe;switch(X.tag){case 0:case 11:case 15:Si(8,X,v)}var Q=X.child;if(Q!==null)Q.return=X,pe=Q;else for(;pe!==null;){X=pe;var Y=X.sibling,de=X.return;if(Ey(X),X===B){pe=null;break}if(Y!==null){Y.return=de,pe=Y;break}pe=de}}}var ge=v.alternate;if(ge!==null){var we=ge.child;if(we!==null){ge.child=null;do{var wt=we.sibling;we.sibling=null,we=wt}while(we!==null)}}pe=v}}if((v.subtreeFlags&2064)!==0&&k!==null)k.return=v,pe=k;else e:for(;pe!==null;){if(v=pe,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Si(9,v,v.return)}var z=v.sibling;if(z!==null){z.return=v.return,pe=z;break e}pe=v.return}}var L=s.current;for(pe=L;pe!==null;){k=pe;var F=k.child;if((k.subtreeFlags&2064)!==0&&F!==null)F.return=k,pe=F;else e:for(k=L;pe!==null;){if(R=pe,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:il(9,R)}}catch(xe){mt(R,R.return,xe)}if(R===k){pe=null;break e}var re=R.sibling;if(re!==null){re.return=R.return,pe=re;break e}pe=R.return}}if(qe=g,Jn(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(_o,s)}catch{}h=!0}return h}finally{Qe=u,Tr.transition=i}}return!1}function zy(s,i,u){i=ma(u,i),i=ny(s,i,1),s=Xn(s,i,1),i=Zt(),s!==null&&(Ya(s,1,i),ar(s,i))}function mt(s,i,u){if(s.tag===3)zy(s,s,u);else for(;i!==null;){if(i.tag===3){zy(i,s,u);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(es===null||!es.has(h))){s=ma(u,s),s=sy(i,s,1),i=Xn(i,s,1),s=Zt(),i!==null&&(Ya(i,1,s),ar(i,s));break}}i=i.return}}function _S(s,i,u){var h=s.pingCache;h!==null&&h.delete(i),i=Zt(),s.pingedLanes|=s.suspendedLanes&u,Pt===s&&(Dt&u)===u&&(Nt===4||Nt===3&&(Dt&130023424)===Dt&&500>_t()-Ed?Ps(s,0):xd|=u),ar(s,i)}function Fy(s,i){i===0&&((s.mode&1)===0?i=1:(i=bo,bo<<=1,(bo&130023424)===0&&(bo=4194304)));var u=Zt();s=_n(s,i),s!==null&&(Ya(s,i,u),ar(s,u))}function wS(s){var i=s.memoizedState,u=0;i!==null&&(u=i.retryLane),Fy(s,u)}function bS(s,i){var u=0;switch(s.tag){case 13:var h=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:h=s.stateNode;break;default:throw Error(r(314))}h!==null&&h.delete(i),Fy(s,u)}var Uy;Uy=function(s,i,u){if(s!==null)if(s.memoizedProps!==i.pendingProps||tr.current)nr=!0;else{if((s.lanes&u)===0&&(i.flags&128)===0)return nr=!1,lS(s,i,u);nr=(s.flags&131072)!==0}else nr=!1,lt&&(i.flags&1048576)!==0&&wg(i,Vo,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;sl(s,i),s=i.pendingProps;var g=oa(i,Ut.current);ha(i,u),g=ed(null,i,h,s,g,u);var v=td();return i.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,rr(h)?(v=!0,Fo(i)):v=!1,i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Wu(i),g.updater=rl,i.stateNode=g,g._reactInternals=i,od(i,h,s,u),i=dd(null,i,h,!0,v,u)):(i.tag=0,lt&&v&&Mu(i),Wt(null,i,g,u),i=i.child),i;case 16:h=i.elementType;e:{switch(sl(s,i),s=i.pendingProps,g=h._init,h=g(h._payload),i.type=h,g=i.tag=ES(h),s=Lr(h,s),g){case 0:i=ud(null,i,h,s,u);break e;case 1:i=hy(null,i,h,s,u);break e;case 11:i=ly(null,i,h,s,u);break e;case 14:i=cy(null,i,h,Lr(h.type,s),u);break e}throw Error(r(306,h,""))}return i;case 0:return h=i.type,g=i.pendingProps,g=i.elementType===h?g:Lr(h,g),ud(s,i,h,g,u);case 1:return h=i.type,g=i.pendingProps,g=i.elementType===h?g:Lr(h,g),hy(s,i,h,g,u);case 3:e:{if(py(i),s===null)throw Error(r(387));h=i.pendingProps,v=i.memoizedState,g=v.element,Ig(s,i),Ko(i,h,null,u);var k=i.memoizedState;if(h=k.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){g=ma(Error(r(423)),i),i=my(s,i,h,u,g);break e}else if(h!==g){g=ma(Error(r(424)),i),i=my(s,i,h,u,g);break e}else for(pr=Wn(i.stateNode.containerInfo.firstChild),hr=i,lt=!0,jr=null,u=Cg(i,null,h,u),i.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ua(),h===g){i=bn(s,i,u);break e}Wt(s,i,h,u)}i=i.child}return i;case 5:return Og(i),s===null&&Fu(i),h=i.type,g=i.pendingProps,v=s!==null?s.memoizedProps:null,k=g.children,Au(h,g)?k=null:v!==null&&Au(h,v)&&(i.flags|=32),fy(s,i),Wt(s,i,k,u),i.child;case 6:return s===null&&Fu(i),null;case 13:return gy(s,i,u);case 4:return Zu(i,i.stateNode.containerInfo),h=i.pendingProps,s===null?i.child=da(i,null,h,u):Wt(s,i,h,u),i.child;case 11:return h=i.type,g=i.pendingProps,g=i.elementType===h?g:Lr(h,g),ly(s,i,h,g,u);case 7:return Wt(s,i,i.pendingProps,u),i.child;case 8:return Wt(s,i,i.pendingProps.children,u),i.child;case 12:return Wt(s,i,i.pendingProps.children,u),i.child;case 10:e:{if(h=i.type._context,g=i.pendingProps,v=i.memoizedProps,k=g.value,rt(qo,h._currentValue),h._currentValue=k,v!==null)if($r(v.value,k)){if(v.children===g.children&&!tr.current){i=bn(s,i,u);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var R=v.dependencies;if(R!==null){k=v.child;for(var $=R.firstContext;$!==null;){if($.context===h){if(v.tag===1){$=wn(-1,u&-u),$.tag=2;var B=v.updateQueue;if(B!==null){B=B.shared;var X=B.pending;X===null?$.next=$:($.next=X.next,X.next=$),B.pending=$}}v.lanes|=u,$=v.alternate,$!==null&&($.lanes|=u),Gu(v.return,u,i),R.lanes|=u;break}$=$.next}}else if(v.tag===10)k=v.type===i.type?null:v.child;else if(v.tag===18){if(k=v.return,k===null)throw Error(r(341));k.lanes|=u,R=k.alternate,R!==null&&(R.lanes|=u),Gu(k,u,i),k=v.sibling}else k=v.child;if(k!==null)k.return=v;else for(k=v;k!==null;){if(k===i){k=null;break}if(v=k.sibling,v!==null){v.return=k.return,k=v;break}k=k.return}v=k}Wt(s,i,g.children,u),i=i.child}return i;case 9:return g=i.type,h=i.pendingProps.children,ha(i,u),g=Sr(g),h=h(g),i.flags|=1,Wt(s,i,h,u),i.child;case 14:return h=i.type,g=Lr(h,i.pendingProps),g=Lr(h.type,g),cy(s,i,h,g,u);case 15:return uy(s,i,i.type,i.pendingProps,u);case 17:return h=i.type,g=i.pendingProps,g=i.elementType===h?g:Lr(h,g),sl(s,i),i.tag=1,rr(h)?(s=!0,Fo(i)):s=!1,ha(i,u),ty(i,h,g),od(i,h,g,u),dd(null,i,h,!0,s,u);case 19:return vy(s,i,u);case 22:return dy(s,i,u)}throw Error(r(156,i.tag))};function By(s,i){return bm(s,i)}function xS(s,i,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(s,i,u,h){return new xS(s,i,u,h)}function Ad(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ES(s){if(typeof s=="function")return Ad(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Ve)return 11;if(s===J)return 14}return 2}function ss(s,i){var u=s.alternate;return u===null?(u=Cr(s.tag,i,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=i,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,i=s.dependencies,u.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function ml(s,i,u,h,g,v){var k=2;if(h=s,typeof s=="function")Ad(s)&&(k=1);else if(typeof s=="string")k=5;else e:switch(s){case K:return js(u.children,g,v,i);case C:k=8,g|=8;break;case ce:return s=Cr(12,u,i,g|2),s.elementType=ce,s.lanes=v,s;case tt:return s=Cr(13,u,i,g),s.elementType=tt,s.lanes=v,s;case ee:return s=Cr(19,u,i,g),s.elementType=ee,s.lanes=v,s;case te:return gl(u,g,v,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Ne:k=10;break e;case ke:k=9;break e;case Ve:k=11;break e;case J:k=14;break e;case W:k=16,h=null;break e}throw Error(r(130,s==null?s:typeof s,""))}return i=Cr(k,u,i,g),i.elementType=s,i.type=h,i.lanes=v,i}function js(s,i,u,h){return s=Cr(7,s,h,i),s.lanes=u,s}function gl(s,i,u,h){return s=Cr(22,s,h,i),s.elementType=te,s.lanes=u,s.stateNode={isHidden:!1},s}function Od(s,i,u){return s=Cr(6,s,null,i),s.lanes=u,s}function Pd(s,i,u){return i=Cr(4,s.children!==null?s.children:[],s.key,i),i.lanes=u,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function SS(s,i,u,h,g){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iu(0),this.expirationTimes=iu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iu(0),this.identifierPrefix=h,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function $d(s,i,u,h,g,v,k,R,$){return s=new SS(s,i,u,R,$),i===1?(i=1,v===!0&&(i|=8)):i=0,v=Cr(3,null,null,i),s.current=v,v.stateNode=s,v.memoizedState={element:h,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wu(v),s}function kS(s,i,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:h==null?null:""+h,children:s,containerInfo:i,implementation:u}}function Vy(s){if(!s)return Kn;s=s._reactInternals;e:{if(Es(s)!==s||s.tag!==1)throw Error(r(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(rr(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(s.tag===1){var u=s.type;if(rr(u))return yg(s,u,i)}return i}function Hy(s,i,u,h,g,v,k,R,$){return s=$d(u,h,!0,s,g,v,k,R,$),s.context=Vy(null),u=s.current,h=Zt(),g=rs(u),v=wn(h,g),v.callback=i??null,Xn(u,v,g),s.current.lanes=g,Ya(s,g,h),ar(s,h),s}function yl(s,i,u,h){var g=i.current,v=Zt(),k=rs(g);return u=Vy(u),i.context===null?i.context=u:i.pendingContext=u,i=wn(v,k),i.payload={element:s},h=h===void 0?null:h,h!==null&&(i.callback=h),s=Xn(g,i,k),s!==null&&(zr(s,g,k,v),Zo(s,g,k)),k}function vl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Gy(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<i?u:i}}function jd(s,i){Gy(s,i),(s=s.alternate)&&Gy(s,i)}function TS(){return null}var qy=typeof reportError=="function"?reportError:function(s){console.error(s)};function Ld(s){this._internalRoot=s}_l.prototype.render=Ld.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));yl(s,i,null,null)},_l.prototype.unmount=Ld.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Os(function(){yl(null,s,null,null)}),i[mn]=null}};function _l(s){this._internalRoot=s}_l.prototype.unstable_scheduleHydration=function(s){if(s){var i=Im();s={blockedOn:null,target:s,priority:i};for(var u=0;u<Hn.length&&i!==0&&i<Hn[u].priority;u++);Hn.splice(u,0,s),u===0&&Om(s)}};function Md(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function wl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Wy(){}function CS(s,i,u,h,g){if(g){if(typeof h=="function"){var v=h;h=function(){var B=vl(k);v.call(B)}}var k=Hy(i,h,s,0,null,!1,!1,"",Wy);return s._reactRootContainer=k,s[mn]=k.current,di(s.nodeType===8?s.parentNode:s),Os(),k}for(;g=s.lastChild;)s.removeChild(g);if(typeof h=="function"){var R=h;h=function(){var B=vl($);R.call(B)}}var $=$d(s,0,!1,null,null,!1,!1,"",Wy);return s._reactRootContainer=$,s[mn]=$.current,di(s.nodeType===8?s.parentNode:s),Os(function(){yl(i,$,u,h)}),$}function bl(s,i,u,h,g){var v=u._reactRootContainer;if(v){var k=v;if(typeof g=="function"){var R=g;g=function(){var $=vl(k);R.call($)}}yl(i,k,s,g)}else k=CS(u,i,s,g,h);return vl(k)}Cm=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var u=Ja(i.pendingLanes);u!==0&&(ou(i,u|1),ar(i,_t()),(qe&6)===0&&(va=_t()+500,Jn()))}break;case 13:Os(function(){var h=_n(s,1);if(h!==null){var g=Zt();zr(h,s,1,g)}}),jd(s,1)}},lu=function(s){if(s.tag===13){var i=_n(s,134217728);if(i!==null){var u=Zt();zr(i,s,134217728,u)}jd(s,134217728)}},Nm=function(s){if(s.tag===13){var i=rs(s),u=_n(s,i);if(u!==null){var h=Zt();zr(u,s,i,h)}jd(s,i)}},Im=function(){return Qe},Rm=function(s,i){var u=Qe;try{return Qe=s,i()}finally{Qe=u}},eu=function(s,i,u){switch(i){case"input":if(Ft(s,u),i=u.name,u.type==="radio"&&i!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<u.length;i++){var h=u[i];if(h!==s&&h.form===s.form){var g=Do(h);if(!g)throw Error(r(90));Ge(h),Ft(h,g)}}}break;case"textarea":je(s,u);break;case"select":i=u.value,i!=null&&er(s,!!u.multiple,i,!1)}},pm=Nd,mm=Os;var NS={usingClientEntryPoint:!1,Events:[pi,aa,Do,fm,hm,Nd]},Ni={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IS={bundleType:Ni.bundleType,version:Ni.version,rendererPackageName:Ni.rendererPackageName,rendererConfig:Ni.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=_m(s),s===null?null:s.stateNode},findFiberByHostInstance:Ni.findFiberByHostInstance||TS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xl.isDisabled&&xl.supportsFiber)try{_o=xl.inject(IS),en=xl}catch{}}return ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NS,ir.createPortal=function(s,i){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Md(i))throw Error(r(200));return kS(s,i,null,u)},ir.createRoot=function(s,i){if(!Md(s))throw Error(r(299));var u=!1,h="",g=qy;return i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),i=$d(s,1,!1,null,null,u,!1,h,g),s[mn]=i.current,di(s.nodeType===8?s.parentNode:s),new Ld(i)},ir.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=_m(i),s=s===null?null:s.stateNode,s},ir.flushSync=function(s){return Os(s)},ir.hydrate=function(s,i,u){if(!wl(i))throw Error(r(200));return bl(null,s,i,!0,u)},ir.hydrateRoot=function(s,i,u){if(!Md(s))throw Error(r(405));var h=u!=null&&u.hydratedSources||null,g=!1,v="",k=qy;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(k=u.onRecoverableError)),i=Hy(i,null,s,1,u??null,g,!1,v,k),s[mn]=i.current,di(s),h)for(s=0;s<h.length;s++)u=h[s],g=u._getVersion,g=g(u._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[u,g]:i.mutableSourceEagerHydrationData.push(u,g);return new _l(i)},ir.render=function(s,i,u){if(!wl(i))throw Error(r(200));return bl(null,s,i,!1,u)},ir.unmountComponentAtNode=function(s){if(!wl(s))throw Error(r(40));return s._reactRootContainer?(Os(function(){bl(null,null,s,!1,function(){s._reactRootContainer=null,s[mn]=null})}),!0):!1},ir.unstable_batchedUpdates=Nd,ir.unstable_renderSubtreeIntoContainer=function(s,i,u,h){if(!wl(u))throw Error(r(200));if(s==null||s._reactInternals===void 0)throw Error(r(38));return bl(s,i,u,!1,h)},ir.version="18.3.1-next-f1338f8080-20240426",ir}var tv;function U0(){if(tv)return Fd.exports;tv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Fd.exports=MS(),Fd.exports}var rv;function DS(){if(rv)return El;rv=1;var e=U0();return El.createRoot=e.createRoot,El.hydrateRoot=e.hydrateRoot,El}var zS=DS(),N=yc();const yr=Gs(N),np=AS({__proto__:null,default:yr},[N]);function ut(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),r===!1||!a.defaultPrevented)return t?.(a)}}function FS(e,t){const r=N.createContext(t),n=o=>{const{children:l,...c}=o,d=N.useMemo(()=>c,Object.values(c));return w.jsx(r.Provider,{value:d,children:l})};n.displayName=e+"Provider";function a(o){const l=N.useContext(r);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[n,a]}function so(e,t=[]){let r=[];function n(o,l){const c=N.createContext(l),d=r.length;r=[...r,l];const f=m=>{const{scope:y,children:_,...b}=m,x=y?.[e]?.[d]||c,E=N.useMemo(()=>b,Object.values(b));return w.jsx(x.Provider,{value:E,children:_})};f.displayName=o+"Provider";function p(m,y){const _=y?.[e]?.[d]||c,b=N.useContext(_);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[f,p]}const a=()=>{const o=r.map(l=>N.createContext(l));return function(c){const d=c?.[e]||o;return N.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return a.scopeName=e,[n,US(a,...t)]}function US(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const l=n.reduce((c,{useScope:d,scopeName:f})=>{const m=d(o)[`__scope${f}`];return{...c,...m}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return r.scopeName=t.scopeName,r}function nv(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ao(...e){return t=>{let r=!1;const n=e.map(a=>{const o=nv(a,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():nv(e[a],null)}}}}function Gt(...e){return N.useCallback(ao(...e),e)}function sv(e){const t=BS(e),r=N.forwardRef((n,a)=>{const{children:o,...l}=n,c=N.Children.toArray(o),d=c.find(HS);if(d){const f=d.props.children,p=c.map(m=>m===d?N.Children.count(f)>1?N.Children.only(null):N.isValidElement(f)?f.props.children:null:m);return w.jsx(t,{...l,ref:a,children:N.isValidElement(f)?N.cloneElement(f,void 0,p):null})}return w.jsx(t,{...l,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}function BS(e){const t=N.forwardRef((r,n)=>{const{children:a,...o}=r;if(N.isValidElement(a)){const l=qS(a),c=GS(o,a.props);return a.type!==N.Fragment&&(c.ref=n?ao(n,l):l),N.cloneElement(a,c)}return N.Children.count(a)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var VS=Symbol("radix.slottable");function HS(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===VS}function GS(e,t){const r={...t};for(const n in t){const a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...c)=>{const d=o(...c);return a(...c),d}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function qS(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function WS(e){const t=e+"CollectionProvider",[r,n]=so(t),[a,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:E,children:I}=x,O=yr.useRef(null),A=yr.useRef(new Map).current;return w.jsx(a,{scope:E,itemMap:A,collectionRef:O,children:I})};l.displayName=t;const c=e+"CollectionSlot",d=sv(c),f=yr.forwardRef((x,E)=>{const{scope:I,children:O}=x,A=o(c,I),D=Gt(E,A.collectionRef);return w.jsx(d,{ref:D,children:O})});f.displayName=c;const p=e+"CollectionItemSlot",m="data-radix-collection-item",y=sv(p),_=yr.forwardRef((x,E)=>{const{scope:I,children:O,...A}=x,D=yr.useRef(null),H=Gt(E,D),Z=o(p,I);return yr.useEffect(()=>(Z.itemMap.set(D,{ref:D,...A}),()=>void Z.itemMap.delete(D))),w.jsx(y,{[m]:"",ref:H,children:O})});_.displayName=p;function b(x){const E=o(e+"CollectionConsumer",x);return yr.useCallback(()=>{const O=E.collectionRef.current;if(!O)return[];const A=Array.from(O.querySelectorAll(`[${m}]`));return Array.from(E.itemMap.values()).sort((Z,K)=>A.indexOf(Z.ref.current)-A.indexOf(K.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:l,Slot:f,ItemSlot:_},b,n]}var Rn=globalThis?.document?N.useLayoutEffect:()=>{},ZS=np[" useId ".trim().toString()]||(()=>{}),KS=0;function zi(e){const[t,r]=N.useState(ZS());return Rn(()=>{r(n=>n??String(KS++))},[e]),e||(t?`radix-${t}`:"")}var B0=U0();const JS=Gs(B0);function YS(e){const t=XS(e),r=N.forwardRef((n,a)=>{const{children:o,...l}=n,c=N.Children.toArray(o),d=c.find(ek);if(d){const f=d.props.children,p=c.map(m=>m===d?N.Children.count(f)>1?N.Children.only(null):N.isValidElement(f)?f.props.children:null:m);return w.jsx(t,{...l,ref:a,children:N.isValidElement(f)?N.cloneElement(f,void 0,p):null})}return w.jsx(t,{...l,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}function XS(e){const t=N.forwardRef((r,n)=>{const{children:a,...o}=r;if(N.isValidElement(a)){const l=rk(a),c=tk(o,a.props);return a.type!==N.Fragment&&(c.ref=n?ao(n,l):l),N.cloneElement(a,c)}return N.Children.count(a)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var QS=Symbol("radix.slottable");function ek(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===QS}function tk(e,t){const r={...t};for(const n in t){const a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...c)=>{const d=o(...c);return a(...c),d}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function rk(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var nk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Tt=nk.reduce((e,t)=>{const r=YS(`Primitive.${t}`),n=N.forwardRef((a,o)=>{const{asChild:l,...c}=a,d=l?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(d,{...c,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function sk(e,t){e&&B0.flushSync(()=>e.dispatchEvent(t))}function ur(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...r)=>t.current?.(...r),[])}var ak=np[" useInsertionEffect ".trim().toString()]||Rn;function sp({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,o,l]=ik({defaultProp:t,onChange:r}),c=e!==void 0,d=c?e:a;{const p=N.useRef(e!==void 0);N.useEffect(()=>{const m=p.current;m!==c&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=c},[c,n])}const f=N.useCallback(p=>{if(c){const m=ok(p)?p(e):p;m!==e&&l.current?.(m)}else o(p)},[c,e,o,l]);return[d,f]}function ik({defaultProp:e,onChange:t}){const[r,n]=N.useState(e),a=N.useRef(r),o=N.useRef(t);return ak(()=>{o.current=t},[t]),N.useEffect(()=>{a.current!==r&&(o.current?.(r),a.current=r)},[r,a]),[r,n,o]}function ok(e){return typeof e=="function"}var lk=N.createContext(void 0);function ap(e){const t=N.useContext(lk);return e||t||"ltr"}var Vd="rovingFocusGroup.onEntryFocus",ck={bubbles:!1,cancelable:!0},io="RovingFocusGroup",[bh,V0,uk]=WS(io),[dk,H0]=so(io,[uk]),[fk,hk]=dk(io),G0=N.forwardRef((e,t)=>w.jsx(bh.Provider,{scope:e.__scopeRovingFocusGroup,children:w.jsx(bh.Slot,{scope:e.__scopeRovingFocusGroup,children:w.jsx(pk,{...e,ref:t})})}));G0.displayName=io;var pk=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:p=!1,...m}=e,y=N.useRef(null),_=Gt(t,y),b=ap(o),[x,E]=sp({prop:l,defaultProp:c??null,onChange:d,caller:io}),[I,O]=N.useState(!1),A=ur(f),D=V0(r),H=N.useRef(!1),[Z,K]=N.useState(0);return N.useEffect(()=>{const C=y.current;if(C)return C.addEventListener(Vd,A),()=>C.removeEventListener(Vd,A)},[A]),w.jsx(fk,{scope:r,orientation:n,dir:b,loop:a,currentTabStopId:x,onItemFocus:N.useCallback(C=>E(C),[E]),onItemShiftTab:N.useCallback(()=>O(!0),[]),onFocusableItemAdd:N.useCallback(()=>K(C=>C+1),[]),onFocusableItemRemove:N.useCallback(()=>K(C=>C-1),[]),children:w.jsx(Tt.div,{tabIndex:I||Z===0?-1:0,"data-orientation":n,...m,ref:_,style:{outline:"none",...e.style},onMouseDown:ut(e.onMouseDown,()=>{H.current=!0}),onFocus:ut(e.onFocus,C=>{const ce=!H.current;if(C.target===C.currentTarget&&ce&&!I){const Ne=new CustomEvent(Vd,ck);if(C.currentTarget.dispatchEvent(Ne),!Ne.defaultPrevented){const ke=D().filter(W=>W.focusable),Ve=ke.find(W=>W.active),tt=ke.find(W=>W.id===x),J=[Ve,tt,...ke].filter(Boolean).map(W=>W.ref.current);Z0(J,p)}}H.current=!1}),onBlur:ut(e.onBlur,()=>O(!1))})})}),q0="RovingFocusGroupItem",W0=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:o,children:l,...c}=e,d=zi(),f=o||d,p=hk(q0,r),m=p.currentTabStopId===f,y=V0(r),{onFocusableItemAdd:_,onFocusableItemRemove:b,currentTabStopId:x}=p;return N.useEffect(()=>{if(n)return _(),()=>b()},[n,_,b]),w.jsx(bh.ItemSlot,{scope:r,id:f,focusable:n,active:a,children:w.jsx(Tt.span,{tabIndex:m?0:-1,"data-orientation":p.orientation,...c,ref:t,onMouseDown:ut(e.onMouseDown,E=>{n?p.onItemFocus(f):E.preventDefault()}),onFocus:ut(e.onFocus,()=>p.onItemFocus(f)),onKeyDown:ut(e.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){p.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const I=yk(E,p.orientation,p.dir);if(I!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let A=y().filter(D=>D.focusable).map(D=>D.ref.current);if(I==="last")A.reverse();else if(I==="prev"||I==="next"){I==="prev"&&A.reverse();const D=A.indexOf(E.currentTarget);A=p.loop?vk(A,D+1):A.slice(D+1)}setTimeout(()=>Z0(A))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:x!=null}):l})})});W0.displayName=q0;var mk={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function gk(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function yk(e,t,r){const n=gk(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return mk[n]}function Z0(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function vk(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var _k=G0,wk=W0;function bk(e,t){return N.useReducer((r,n)=>t[r][n]??r,e)}var jn=e=>{const{present:t,children:r}=e,n=xk(t),a=typeof r=="function"?r({present:n.isPresent}):N.Children.only(r),o=Gt(n.ref,Ek(a));return typeof r=="function"||n.isPresent?N.cloneElement(a,{ref:o}):null};jn.displayName="Presence";function xk(e){const[t,r]=N.useState(),n=N.useRef(null),a=N.useRef(e),o=N.useRef("none"),l=e?"mounted":"unmounted",[c,d]=bk(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const f=Sl(n.current);o.current=c==="mounted"?f:"none"},[c]),Rn(()=>{const f=n.current,p=a.current;if(p!==e){const y=o.current,_=Sl(f);e?d("MOUNT"):_==="none"||f?.display==="none"?d("UNMOUNT"):d(p&&y!==_?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,d]),Rn(()=>{if(t){let f;const p=t.ownerDocument.defaultView??window,m=_=>{const x=Sl(n.current).includes(CSS.escape(_.animationName));if(_.target===t&&x&&(d("ANIMATION_END"),!a.current)){const E=t.style.animationFillMode;t.style.animationFillMode="forwards",f=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=E)})}},y=_=>{_.target===t&&(o.current=Sl(n.current))};return t.addEventListener("animationstart",y),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{p.clearTimeout(f),t.removeEventListener("animationstart",y),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:N.useCallback(f=>{n.current=f?getComputedStyle(f):null,r(f)},[])}}function Sl(e){return e?.animationName||"none"}function Ek(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var vc="Tabs",[Sk]=so(vc,[H0]),K0=H0(),[kk,ip]=Sk(vc),J0=N.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:o,orientation:l="horizontal",dir:c,activationMode:d="automatic",...f}=e,p=ap(c),[m,y]=sp({prop:n,onChange:a,defaultProp:o??"",caller:vc});return w.jsx(kk,{scope:r,baseId:zi(),value:m,onValueChange:y,orientation:l,dir:p,activationMode:d,children:w.jsx(Tt.div,{dir:p,"data-orientation":l,...f,ref:t})})});J0.displayName=vc;var Y0="TabsList",X0=N.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,o=ip(Y0,r),l=K0(r);return w.jsx(_k,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:n,children:w.jsx(Tt.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});X0.displayName=Y0;var Q0="TabsTrigger",ew=N.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...o}=e,l=ip(Q0,r),c=K0(r),d=nw(l.baseId,n),f=sw(l.baseId,n),p=n===l.value;return w.jsx(wk,{asChild:!0,...c,focusable:!a,active:p,children:w.jsx(Tt.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":f,"data-state":p?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...o,ref:t,onMouseDown:ut(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?l.onValueChange(n):m.preventDefault()}),onKeyDown:ut(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(n)}),onFocus:ut(e.onFocus,()=>{const m=l.activationMode!=="manual";!p&&!a&&m&&l.onValueChange(n)})})})});ew.displayName=Q0;var tw="TabsContent",rw=N.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:o,...l}=e,c=ip(tw,r),d=nw(c.baseId,n),f=sw(c.baseId,n),p=n===c.value,m=N.useRef(p);return N.useEffect(()=>{const y=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(y)},[]),w.jsx(jn,{present:a||p,children:({present:y})=>w.jsx(Tt.div,{"data-state":p?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!y,id:f,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:y&&o})})});rw.displayName=tw;function nw(e,t){return`${e}-trigger-${t}`}function sw(e,t){return`${e}-content-${t}`}var Tk=J0,Ck=X0,Nk=ew,Ik=rw;function aw(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=aw(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function iw(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=aw(e))&&(n&&(n+=" "),n+=t);return n}const Rk=(e,t)=>{const r=new Array(e.length+t.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<t.length;n++)r[e.length+n]=t[n];return r},Ak=(e,t)=>({classGroupId:e,validator:t}),ow=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),Wl="-",av=[],Ok="arbitrary..",Pk=e=>{const t=jk(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return $k(l);const c=l.split(Wl),d=c[0]===""&&c.length>1?1:0;return lw(c,d,t)},getConflictingClassGroupIds:(l,c)=>{if(c){const d=n[l],f=r[l];return d?f?Rk(f,d):d:f||av}return r[l]||av}}},lw=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const a=e[t],o=r.nextPart.get(a);if(o){const f=lw(e,t+1,o);if(f)return f}const l=r.validators;if(l===null)return;const c=t===0?e.join(Wl):e.slice(t).join(Wl),d=l.length;for(let f=0;f<d;f++){const p=l[f];if(p.validator(c))return p.classGroupId}},$k=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),n=t.slice(0,r);return n?Ok+n:void 0})(),jk=e=>{const{theme:t,classGroups:r}=e;return Lk(r,t)},Lk=(e,t)=>{const r=ow();for(const n in e){const a=e[n];op(a,r,n,t)}return r},op=(e,t,r,n)=>{const a=e.length;for(let o=0;o<a;o++){const l=e[o];Mk(l,t,r,n)}},Mk=(e,t,r,n)=>{if(typeof e=="string"){Dk(e,t,r);return}if(typeof e=="function"){zk(e,t,r,n);return}Fk(e,t,r,n)},Dk=(e,t,r)=>{const n=e===""?t:cw(t,e);n.classGroupId=r},zk=(e,t,r,n)=>{if(Uk(e)){op(e(n),t,r,n);return}t.validators===null&&(t.validators=[]),t.validators.push(Ak(r,e))},Fk=(e,t,r,n)=>{const a=Object.entries(e),o=a.length;for(let l=0;l<o;l++){const[c,d]=a[l];op(d,cw(t,c),r,n)}},cw=(e,t)=>{let r=e;const n=t.split(Wl),a=n.length;for(let o=0;o<a;o++){const l=n[o];let c=r.nextPart.get(l);c||(c=ow(),r.nextPart.set(l,c)),r=c}return r},Uk=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Bk=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null);const a=(o,l)=>{r[o]=l,t++,t>e&&(t=0,n=r,r=Object.create(null))};return{get(o){let l=r[o];if(l!==void 0)return l;if((l=n[o])!==void 0)return a(o,l),l},set(o,l){o in r?r[o]=l:a(o,l)}}},xh="!",iv=":",Vk=[],ov=(e,t,r,n,a)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:a}),Hk=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=a=>{const o=[];let l=0,c=0,d=0,f;const p=a.length;for(let x=0;x<p;x++){const E=a[x];if(l===0&&c===0){if(E===iv){o.push(a.slice(d,x)),d=x+1;continue}if(E==="/"){f=x;continue}}E==="["?l++:E==="]"?l--:E==="("?c++:E===")"&&c--}const m=o.length===0?a:a.slice(d);let y=m,_=!1;m.endsWith(xh)?(y=m.slice(0,-1),_=!0):m.startsWith(xh)&&(y=m.slice(1),_=!0);const b=f&&f>d?f-d:void 0;return ov(o,_,y,b)};if(t){const a=t+iv,o=n;n=l=>l.startsWith(a)?o(l.slice(a.length)):ov(Vk,!1,l,void 0,!0)}if(r){const a=n;n=o=>r({className:o,parseClassName:a})}return n},Gk=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,n)=>{t.set(r,1e6+n)}),r=>{const n=[];let a=[];for(let o=0;o<r.length;o++){const l=r[o],c=l[0]==="[",d=t.has(l);c||d?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(l)):a.push(l)}return a.length>0&&(a.sort(),n.push(...a)),n}},qk=e=>({cache:Bk(e.cacheSize),parseClassName:Hk(e),sortModifiers:Gk(e),...Pk(e)}),Wk=/\s+/,Zk=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:o}=t,l=[],c=e.trim().split(Wk);let d="";for(let f=c.length-1;f>=0;f-=1){const p=c[f],{isExternal:m,modifiers:y,hasImportantModifier:_,baseClassName:b,maybePostfixModifierPosition:x}=r(p);if(m){d=p+(d.length>0?" "+d:d);continue}let E=!!x,I=n(E?b.substring(0,x):b);if(!I){if(!E){d=p+(d.length>0?" "+d:d);continue}if(I=n(b),!I){d=p+(d.length>0?" "+d:d);continue}E=!1}const O=y.length===0?"":y.length===1?y[0]:o(y).join(":"),A=_?O+xh:O,D=A+I;if(l.indexOf(D)>-1)continue;l.push(D);const H=a(I,E);for(let Z=0;Z<H.length;++Z){const K=H[Z];l.push(A+K)}d=p+(d.length>0?" "+d:d)}return d},Kk=(...e)=>{let t=0,r,n,a="";for(;t<e.length;)(r=e[t++])&&(n=uw(r))&&(a&&(a+=" "),a+=n);return a},uw=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=uw(e[n]))&&(r&&(r+=" "),r+=t);return r},Jk=(e,...t)=>{let r,n,a,o;const l=d=>{const f=t.reduce((p,m)=>m(p),e());return r=qk(f),n=r.cache.get,a=r.cache.set,o=c,c(d)},c=d=>{const f=n(d);if(f)return f;const p=Zk(d,r);return a(d,p),p};return o=l,(...d)=>o(Kk(...d))},Yk=[],It=e=>{const t=r=>r[e]||Yk;return t.isThemeGetter=!0,t},dw=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,fw=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Xk=/^\d+\/\d+$/,Qk=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,rT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wa=e=>Xk.test(e),Fe=e=>!!e&&!Number.isNaN(Number(e)),is=e=>!!e&&Number.isInteger(Number(e)),Hd=e=>e.endsWith("%")&&Fe(e.slice(0,-1)),En=e=>Qk.test(e),sT=()=>!0,aT=e=>eT.test(e)&&!tT.test(e),hw=()=>!1,iT=e=>rT.test(e),oT=e=>nT.test(e),lT=e=>!ve(e)&&!_e(e),cT=e=>Ua(e,gw,hw),ve=e=>dw.test(e),Ls=e=>Ua(e,yw,aT),Gd=e=>Ua(e,pT,Fe),lv=e=>Ua(e,pw,hw),uT=e=>Ua(e,mw,oT),kl=e=>Ua(e,vw,iT),_e=e=>fw.test(e),Ri=e=>Ba(e,yw),dT=e=>Ba(e,mT),cv=e=>Ba(e,pw),fT=e=>Ba(e,gw),hT=e=>Ba(e,mw),Tl=e=>Ba(e,vw,!0),Ua=(e,t,r)=>{const n=dw.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},Ba=(e,t,r=!1)=>{const n=fw.exec(e);return n?n[1]?t(n[1]):r:!1},pw=e=>e==="position"||e==="percentage",mw=e=>e==="image"||e==="url",gw=e=>e==="length"||e==="size"||e==="bg-size",yw=e=>e==="length",pT=e=>e==="number",mT=e=>e==="family-name",vw=e=>e==="shadow",gT=()=>{const e=It("color"),t=It("font"),r=It("text"),n=It("font-weight"),a=It("tracking"),o=It("leading"),l=It("breakpoint"),c=It("container"),d=It("spacing"),f=It("radius"),p=It("shadow"),m=It("inset-shadow"),y=It("text-shadow"),_=It("drop-shadow"),b=It("blur"),x=It("perspective"),E=It("aspect"),I=It("ease"),O=It("animate"),A=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],H=()=>[...D(),_e,ve],Z=()=>["auto","hidden","clip","visible","scroll"],K=()=>["auto","contain","none"],C=()=>[_e,ve,d],ce=()=>[wa,"full","auto",...C()],Ne=()=>[is,"none","subgrid",_e,ve],ke=()=>["auto",{span:["full",is,_e,ve]},is,_e,ve],Ve=()=>[is,"auto",_e,ve],tt=()=>["auto","min","max","fr",_e,ve],ee=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],W=()=>["auto",...C()],te=()=>[wa,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],M=()=>[e,_e,ve],q=()=>[...D(),cv,lv,{position:[_e,ve]}],G=()=>["no-repeat",{repeat:["","x","y","space","round"]}],P=()=>["auto","cover","contain",fT,cT,{size:[_e,ve]}],U=()=>[Hd,Ri,Ls],se=()=>["","none","full",f,_e,ve],le=()=>["",Fe,Ri,Ls],ue=()=>["solid","dashed","dotted","double"],T=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],S=()=>[Fe,Hd,cv,lv],V=()=>["","none",b,_e,ve],j=()=>["none",Fe,_e,ve],Te=()=>["none",Fe,_e,ve],He=()=>[Fe,_e,ve],Ge=()=>[wa,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[En],breakpoint:[En],color:[sT],container:[En],"drop-shadow":[En],ease:["in","out","in-out"],font:[lT],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[En],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[En],shadow:[En],spacing:["px",Fe],text:[En],"text-shadow":[En],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wa,ve,_e,E]}],container:["container"],columns:[{columns:[Fe,ve,_e,c]}],"break-after":[{"break-after":A()}],"break-before":[{"break-before":A()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:H()}],overflow:[{overflow:Z()}],"overflow-x":[{"overflow-x":Z()}],"overflow-y":[{"overflow-y":Z()}],overscroll:[{overscroll:K()}],"overscroll-x":[{"overscroll-x":K()}],"overscroll-y":[{"overscroll-y":K()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ce()}],"inset-x":[{"inset-x":ce()}],"inset-y":[{"inset-y":ce()}],start:[{start:ce()}],end:[{end:ce()}],top:[{top:ce()}],right:[{right:ce()}],bottom:[{bottom:ce()}],left:[{left:ce()}],visibility:["visible","invisible","collapse"],z:[{z:[is,"auto",_e,ve]}],basis:[{basis:[wa,"full","auto",c,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Fe,wa,"auto","initial","none",ve]}],grow:[{grow:["",Fe,_e,ve]}],shrink:[{shrink:["",Fe,_e,ve]}],order:[{order:[is,"first","last","none",_e,ve]}],"grid-cols":[{"grid-cols":Ne()}],"col-start-end":[{col:ke()}],"col-start":[{"col-start":Ve()}],"col-end":[{"col-end":Ve()}],"grid-rows":[{"grid-rows":Ne()}],"row-start-end":[{row:ke()}],"row-start":[{"row-start":Ve()}],"row-end":[{"row-end":Ve()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":tt()}],"auto-rows":[{"auto-rows":tt()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...ee(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...ee()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":ee()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:W()}],mx:[{mx:W()}],my:[{my:W()}],ms:[{ms:W()}],me:[{me:W()}],mt:[{mt:W()}],mr:[{mr:W()}],mb:[{mb:W()}],ml:[{ml:W()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:te()}],w:[{w:[c,"screen",...te()]}],"min-w":[{"min-w":[c,"screen","none",...te()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...te()]}],h:[{h:["screen","lh",...te()]}],"min-h":[{"min-h":["screen","lh","none",...te()]}],"max-h":[{"max-h":["screen","lh",...te()]}],"font-size":[{text:["base",r,Ri,Ls]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,_e,Gd]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Hd,ve]}],"font-family":[{font:[dT,ve,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,_e,ve]}],"line-clamp":[{"line-clamp":[Fe,"none",_e,Gd]}],leading:[{leading:[o,...C()]}],"list-image":[{"list-image":["none",_e,ve]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",_e,ve]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ue(),"wavy"]}],"text-decoration-thickness":[{decoration:[Fe,"from-font","auto",_e,Ls]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[Fe,"auto",_e,ve]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e,ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e,ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:q()}],"bg-repeat":[{bg:G()}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},is,_e,ve],radial:["",_e,ve],conic:[is,_e,ve]},hT,uT]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:U()}],"gradient-via-pos":[{via:U()}],"gradient-to-pos":[{to:U()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:le()}],"border-w-x":[{"border-x":le()}],"border-w-y":[{"border-y":le()}],"border-w-s":[{"border-s":le()}],"border-w-e":[{"border-e":le()}],"border-w-t":[{"border-t":le()}],"border-w-r":[{"border-r":le()}],"border-w-b":[{"border-b":le()}],"border-w-l":[{"border-l":le()}],"divide-x":[{"divide-x":le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ue(),"hidden","none"]}],"divide-style":[{divide:[...ue(),"hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:[...ue(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Fe,_e,ve]}],"outline-w":[{outline:["",Fe,Ri,Ls]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",p,Tl,kl]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",m,Tl,kl]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[Fe,Ls]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":le()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",y,Tl,kl]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[Fe,_e,ve]}],"mix-blend":[{"mix-blend":[...T(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":T()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Fe]}],"mask-image-linear-from-pos":[{"mask-linear-from":S()}],"mask-image-linear-to-pos":[{"mask-linear-to":S()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":S()}],"mask-image-t-to-pos":[{"mask-t-to":S()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":S()}],"mask-image-r-to-pos":[{"mask-r-to":S()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":S()}],"mask-image-b-to-pos":[{"mask-b-to":S()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":S()}],"mask-image-l-to-pos":[{"mask-l-to":S()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":S()}],"mask-image-x-to-pos":[{"mask-x-to":S()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":S()}],"mask-image-y-to-pos":[{"mask-y-to":S()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[_e,ve]}],"mask-image-radial-from-pos":[{"mask-radial-from":S()}],"mask-image-radial-to-pos":[{"mask-radial-to":S()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":D()}],"mask-image-conic-pos":[{"mask-conic":[Fe]}],"mask-image-conic-from-pos":[{"mask-conic-from":S()}],"mask-image-conic-to-pos":[{"mask-conic-to":S()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:q()}],"mask-repeat":[{mask:G()}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",_e,ve]}],filter:[{filter:["","none",_e,ve]}],blur:[{blur:V()}],brightness:[{brightness:[Fe,_e,ve]}],contrast:[{contrast:[Fe,_e,ve]}],"drop-shadow":[{"drop-shadow":["","none",_,Tl,kl]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",Fe,_e,ve]}],"hue-rotate":[{"hue-rotate":[Fe,_e,ve]}],invert:[{invert:["",Fe,_e,ve]}],saturate:[{saturate:[Fe,_e,ve]}],sepia:[{sepia:["",Fe,_e,ve]}],"backdrop-filter":[{"backdrop-filter":["","none",_e,ve]}],"backdrop-blur":[{"backdrop-blur":V()}],"backdrop-brightness":[{"backdrop-brightness":[Fe,_e,ve]}],"backdrop-contrast":[{"backdrop-contrast":[Fe,_e,ve]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Fe,_e,ve]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Fe,_e,ve]}],"backdrop-invert":[{"backdrop-invert":["",Fe,_e,ve]}],"backdrop-opacity":[{"backdrop-opacity":[Fe,_e,ve]}],"backdrop-saturate":[{"backdrop-saturate":[Fe,_e,ve]}],"backdrop-sepia":[{"backdrop-sepia":["",Fe,_e,ve]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",_e,ve]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Fe,"initial",_e,ve]}],ease:[{ease:["linear","initial",I,_e,ve]}],delay:[{delay:[Fe,_e,ve]}],animate:[{animate:["none",O,_e,ve]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,_e,ve]}],"perspective-origin":[{"perspective-origin":H()}],rotate:[{rotate:j()}],"rotate-x":[{"rotate-x":j()}],"rotate-y":[{"rotate-y":j()}],"rotate-z":[{"rotate-z":j()}],scale:[{scale:Te()}],"scale-x":[{"scale-x":Te()}],"scale-y":[{"scale-y":Te()}],"scale-z":[{"scale-z":Te()}],"scale-3d":["scale-3d"],skew:[{skew:He()}],"skew-x":[{"skew-x":He()}],"skew-y":[{"skew-y":He()}],transform:[{transform:[_e,ve,"","none","gpu","cpu"]}],"transform-origin":[{origin:H()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ge()}],"translate-x":[{"translate-x":Ge()}],"translate-y":[{"translate-y":Ge()}],"translate-z":[{"translate-z":Ge()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e,ve]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e,ve]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[Fe,Ri,Ls,Gd]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},yT=Jk(gT);function pt(...e){return yT(iw(e))}function _w({className:e,...t}){return w.jsx(Tk,{"data-slot":"tabs",className:pt("flex flex-col gap-2",e),...t})}function ww({className:e,...t}){return w.jsx(Ck,{"data-slot":"tabs-list",className:pt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function Ds({className:e,...t}){return w.jsx(Nk,{"data-slot":"tabs-trigger",className:pt("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function zs({className:e,...t}){return w.jsx(Ik,{"data-slot":"tabs-content",className:pt("flex-1 outline-none",e),...t})}function ht({className:e,...t}){return w.jsx("div",{"data-slot":"card",className:pt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function kn({className:e,...t}){return w.jsx("div",{"data-slot":"card-header",className:pt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function Tn({className:e,...t}){return w.jsx("h4",{"data-slot":"card-title",className:pt("leading-none",e),...t})}function _c({className:e,...t}){return w.jsx("p",{"data-slot":"card-description",className:pt("text-muted-foreground",e),...t})}function St({className:e,...t}){return w.jsx("div",{"data-slot":"card-content",className:pt("px-6 [&:last-child]:pb-6",e),...t})}function vT(e,t=[]){let r=[];function n(o,l){const c=N.createContext(l);c.displayName=o+"Context";const d=r.length;r=[...r,l];const f=m=>{const{scope:y,children:_,...b}=m,x=y?.[e]?.[d]||c,E=N.useMemo(()=>b,Object.values(b));return w.jsx(x.Provider,{value:E,children:_})};f.displayName=o+"Provider";function p(m,y){const _=y?.[e]?.[d]||c,b=N.useContext(_);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[f,p]}const a=()=>{const o=r.map(l=>N.createContext(l));return function(c){const d=c?.[e]||o;return N.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return a.scopeName=e,[n,_T(a,...t)]}function _T(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const l=n.reduce((c,{useScope:d,scopeName:f})=>{const m=d(o)[`__scope${f}`];return{...c,...m}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return r.scopeName=t.scopeName,r}var wT=Symbol.for("react.lazy"),Zl=np[" use ".trim().toString()];function bT(e){return typeof e=="object"&&e!==null&&"then"in e}function bw(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===wT&&"_payload"in e&&bT(e._payload)}function lp(e){const t=xT(e),r=N.forwardRef((n,a)=>{let{children:o,...l}=n;bw(o)&&typeof Zl=="function"&&(o=Zl(o._payload));const c=N.Children.toArray(o),d=c.find(ST);if(d){const f=d.props.children,p=c.map(m=>m===d?N.Children.count(f)>1?N.Children.only(null):N.isValidElement(f)?f.props.children:null:m);return w.jsx(t,{...l,ref:a,children:N.isValidElement(f)?N.cloneElement(f,void 0,p):null})}return w.jsx(t,{...l,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}var xw=lp("Slot");function xT(e){const t=N.forwardRef((r,n)=>{let{children:a,...o}=r;if(bw(a)&&typeof Zl=="function"&&(a=Zl(a._payload)),N.isValidElement(a)){const l=TT(a),c=kT(o,a.props);return a.type!==N.Fragment&&(c.ref=n?ao(n,l):l),N.cloneElement(a,c)}return N.Children.count(a)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ET=Symbol("radix.slottable");function ST(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ET}function kT(e,t){const r={...t};for(const n in t){const a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...c)=>{const d=o(...c);return a(...c),d}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function TT(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var CT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ew=CT.reduce((e,t)=>{const r=lp(`Primitive.${t}`),n=N.forwardRef((a,o)=>{const{asChild:l,...c}=a,d=l?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(d,{...c,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),cp="Progress",up=100,[NT]=vT(cp),[IT,RT]=NT(cp),Sw=N.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:o=AT,...l}=e;(a||a===0)&&!uv(a)&&console.error(OT(`${a}`,"Progress"));const c=uv(a)?a:up;n!==null&&!dv(n,c)&&console.error(PT(`${n}`,"Progress"));const d=dv(n,c)?n:null,f=Kl(d)?o(d,c):void 0;return w.jsx(IT,{scope:r,value:d,max:c,children:w.jsx(Ew.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Kl(d)?d:void 0,"aria-valuetext":f,role:"progressbar","data-state":Cw(d,c),"data-value":d??void 0,"data-max":c,...l,ref:t})})});Sw.displayName=cp;var kw="ProgressIndicator",Tw=N.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=RT(kw,r);return w.jsx(Ew.div,{"data-state":Cw(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});Tw.displayName=kw;function AT(e,t){return`${Math.round(e/t*100)}%`}function Cw(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Kl(e){return typeof e=="number"}function uv(e){return Kl(e)&&!isNaN(e)&&e>0}function dv(e,t){return Kl(e)&&!isNaN(e)&&e<=t&&e>=0}function OT(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${up}\`.`}function PT(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${up} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var $T=Sw,jT=Tw;function Nw({className:e,value:t,...r}){return w.jsx($T,{"data-slot":"progress",className:pt("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...r,children:w.jsx(jT,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const fv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,hv=iw,Iw=(e,t)=>r=>{var n;if(t?.variants==null)return hv(e,r?.class,r?.className);const{variants:a,defaultVariants:o}=t,l=Object.keys(a).map(f=>{const p=r?.[f],m=o?.[f];if(p===null)return null;const y=fv(p)||fv(m);return a[f][y]}),c=r&&Object.entries(r).reduce((f,p)=>{let[m,y]=p;return y===void 0||(f[m]=y),f},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((f,p)=>{let{class:m,className:y,..._}=p;return Object.entries(_).every(b=>{let[x,E]=b;return Array.isArray(E)?E.includes({...o,...c}[x]):{...o,...c}[x]===E})?[...f,m,y]:f},[]);return hv(e,l,d,r?.class,r?.className)},LT=Iw("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Rr({className:e,variant:t,asChild:r=!1,...n}){const a=r?xw:"span";return w.jsx(a,{"data-slot":"badge",className:pt(LT({variant:t}),e),...n})}function MT(e,t=[]){let r=[];function n(o,l){const c=N.createContext(l);c.displayName=o+"Context";const d=r.length;r=[...r,l];const f=m=>{const{scope:y,children:_,...b}=m,x=y?.[e]?.[d]||c,E=N.useMemo(()=>b,Object.values(b));return w.jsx(x.Provider,{value:E,children:_})};f.displayName=o+"Provider";function p(m,y){const _=y?.[e]?.[d]||c,b=N.useContext(_);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[f,p]}const a=()=>{const o=r.map(l=>N.createContext(l));return function(c){const d=c?.[e]||o;return N.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return a.scopeName=e,[n,DT(a,...t)]}function DT(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const l=n.reduce((c,{useScope:d,scopeName:f})=>{const m=d(o)[`__scope${f}`];return{...c,...m}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return r.scopeName=t.scopeName,r}var zT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],dp=zT.reduce((e,t)=>{const r=lp(`Primitive.${t}`),n=N.forwardRef((a,o)=>{const{asChild:l,...c}=a,d=l?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(d,{...c,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),qd={exports:{}},Wd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv;function FT(){if(pv)return Wd;pv=1;var e=yc();function t(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,o=e.useLayoutEffect,l=e.useDebugValue;function c(m,y){var _=y(),b=n({inst:{value:_,getSnapshot:y}}),x=b[0].inst,E=b[1];return o(function(){x.value=_,x.getSnapshot=y,d(x)&&E({inst:x})},[m,_,y]),a(function(){return d(x)&&E({inst:x}),m(function(){d(x)&&E({inst:x})})},[m]),l(_),_}function d(m){var y=m.getSnapshot;m=m.value;try{var _=y();return!r(m,_)}catch{return!0}}function f(m,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return Wd.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,Wd}var mv;function UT(){return mv||(mv=1,qd.exports=FT()),qd.exports}var BT=UT();function VT(){return BT.useSyncExternalStore(HT,()=>!0,()=>!1)}function HT(){return()=>{}}var fp="Avatar",[GT]=MT(fp),[qT,Rw]=GT(fp),Aw=N.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,o]=N.useState("idle");return w.jsx(qT,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:w.jsx(dp.span,{...n,ref:t})})});Aw.displayName=fp;var Ow="AvatarImage",WT=N.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...o}=e,l=Rw(Ow,r),c=ZT(n,o),d=ur(f=>{a(f),l.onImageLoadingStatusChange(f)});return Rn(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?w.jsx(dp.img,{...o,ref:t,src:n}):null});WT.displayName=Ow;var Pw="AvatarFallback",$w=N.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,o=Rw(Pw,r),[l,c]=N.useState(n===void 0);return N.useEffect(()=>{if(n!==void 0){const d=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(d)}},[n]),l&&o.imageLoadingStatus!=="loaded"?w.jsx(dp.span,{...a,ref:t}):null});$w.displayName=Pw;function gv(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ZT(e,{referrerPolicy:t,crossOrigin:r}){const n=VT(),a=N.useRef(null),o=n?(a.current||(a.current=new window.Image),a.current):null,[l,c]=N.useState(()=>gv(o,e));return Rn(()=>{c(gv(o,e))},[o,e]),Rn(()=>{const d=m=>()=>{c(m)};if(!o)return;const f=d("loaded"),p=d("error");return o.addEventListener("load",f),o.addEventListener("error",p),t&&(o.referrerPolicy=t),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",f),o.removeEventListener("error",p)}},[o,r,t]),l}var KT=Aw,JT=$w;function YT({className:e,...t}){return w.jsx(KT,{"data-slot":"avatar",className:pt("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...t})}function XT({className:e,...t}){return w.jsx(JT,{"data-slot":"avatar-fallback",className:pt("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),eC=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),yv=e=>{const t=eC(e);return t.charAt(0).toUpperCase()+t.slice(1)},jw=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:l,...c},d)=>N.createElement("svg",{ref:d,...tC,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:jw("lucide",a),...c},[...l.map(([f,p])=>N.createElement(f,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=(e,t)=>{const r=N.forwardRef(({className:n,...a},o)=>N.createElement(rC,{ref:o,iconNode:t,className:jw(`lucide-${QT(yv(e))}`,`lucide-${e}`,n),...a}));return r.displayName=yv(e),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],hp=yt("award",nC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],wc=yt("book-open",sC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],iC=yt("brain",aC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],lC=yt("circle-alert",oC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],qi=yt("circle-check",cC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],dC=yt("circle-x",uC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],hC=yt("code-xml",fC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],bc=yt("code",pC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],pp=yt("flame",mC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],yC=yt("lightbulb",gC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],_C=yt("list",vC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vv=yt("loader-circle",wC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lw=yt("lock",bC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],EC=yt("repeat",xC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],kC=yt("send",SC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],CC=yt("sparkles",TC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],xc=yt("star",NC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Mw=yt("target",IC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Wi=yt("trophy",RC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],OC=yt("user",AC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Dw=yt("x",PC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ec=yt("zap",$C);function jC({userProgress:e}){const t=(n,a)=>n==="wizard"?a<5?"":a<10?"":"":"",r=n=>n<5?"Code Apprentice":n<10?"Code Wizard":n<15?"Code Master":"Code Grandmaster";return w.jsxs(ht,{className:"overflow-hidden border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-indigo-50",children:[w.jsx(kn,{children:w.jsxs(Tn,{className:"flex items-center gap-2",children:[w.jsx(CC,{className:"w-5 h-5 text-purple-500"}),"Your Character"]})}),w.jsxs(St,{className:"flex flex-col items-center space-y-4",children:[w.jsxs("div",{className:"relative",children:[w.jsx(YT,{className:"w-32 h-32 border-4 border-purple-300 shadow-lg",children:w.jsx(XT,{className:"text-6xl bg-gradient-to-br from-purple-100 to-indigo-100",children:t(e.characterType,e.level)})}),w.jsx("div",{className:"absolute -bottom-2 -right-2 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full w-12 h-12 flex items-center justify-center border-4 border-white shadow-lg",children:w.jsx("span",{className:"text-sm",children:e.level})})]}),w.jsxs("div",{className:"text-center space-y-1",children:[w.jsx("h3",{className:"text-xl",children:r(e.level)}),w.jsxs("p",{className:"text-sm text-gray-600 flex items-center justify-center gap-1",children:[w.jsx(Ec,{className:"w-4 h-4 text-yellow-500"}),"Level ",e.level]})]}),w.jsxs("div",{className:"w-full space-y-2 pt-4 border-t border-purple-200",children:[w.jsxs("div",{className:"flex justify-between text-sm",children:[w.jsx("span",{className:"text-gray-600",children:"Power"}),w.jsx("span",{children:e.level*10})]}),w.jsxs("div",{className:"flex justify-between text-sm",children:[w.jsx("span",{className:"text-gray-600",children:"Wisdom"}),w.jsx("span",{children:e.completedLessons.length*5})]}),w.jsxs("div",{className:"flex justify-between text-sm",children:[w.jsx("span",{className:"text-gray-600",children:"Focus"}),w.jsx("span",{children:e.streak*3})]})]})]})]})}function LC({userProgress:e}){const t=e.xp/e.xpToNextLevel*100;return w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[w.jsx("div",{className:"lg:col-span-1",children:w.jsx(jC,{userProgress:e})}),w.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[w.jsxs(ht,{children:[w.jsxs(kn,{children:[w.jsxs(Tn,{className:"flex items-center gap-2",children:[w.jsx(xc,{className:"w-5 h-5 text-yellow-500"}),"Level Progress"]}),w.jsxs(_c,{children:["Level ",e.level," - ",e.xp," / ",e.xpToNextLevel," XP"]})]}),w.jsxs(St,{children:[w.jsx(Nw,{value:t,className:"h-4"}),w.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[e.xpToNextLevel-e.xp," XP until Level ",e.level+1]})]})]}),w.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[w.jsxs(ht,{children:[w.jsx(kn,{className:"pb-3",children:w.jsxs(Tn,{className:"flex items-center gap-2 text-sm",children:[w.jsx(pp,{className:"w-4 h-4 text-orange-500"}),"Streak"]})}),w.jsxs(St,{children:[w.jsx("p",{className:"text-3xl",children:e.streak}),w.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"days"})]})]}),w.jsxs(ht,{children:[w.jsx(kn,{className:"pb-3",children:w.jsxs(Tn,{className:"flex items-center gap-2 text-sm",children:[w.jsx(Mw,{className:"w-4 h-4 text-green-500"}),"Lessons"]})}),w.jsxs(St,{children:[w.jsx("p",{className:"text-3xl",children:e.completedLessons.length}),w.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"completed"})]})]}),w.jsxs(ht,{children:[w.jsx(kn,{className:"pb-3",children:w.jsxs(Tn,{className:"flex items-center gap-2 text-sm",children:[w.jsx(hp,{className:"w-4 h-4 text-purple-500"}),"Badges"]})}),w.jsxs(St,{children:[w.jsx("p",{className:"text-3xl",children:e.badges.length}),w.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"earned"})]})]})]}),w.jsxs(ht,{children:[w.jsx(kn,{children:w.jsx(Tn,{children:"Quick Stats"})}),w.jsxs(St,{className:"space-y-4",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"text-sm text-gray-600",children:"Challenges Completed"}),w.jsx(Rr,{variant:"secondary",children:e.completedChallenges.length})]}),w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"text-sm text-gray-600",children:"Current Rank"}),w.jsx(Rr,{className:"bg-gradient-to-r from-indigo-500 to-purple-500",children:e.level<5?"Novice":e.level<10?"Apprentice":"Expert"})]}),w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"text-sm text-gray-600",children:"Total XP Earned"}),w.jsx(Rr,{variant:"outline",children:e.xp+(e.level-1)*100})]})]})]})]})]})}const MC=Iw("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function vr({className:e,variant:t,size:r,asChild:n=!1,...a}){const o=n?xw:"button";return w.jsx(o,{"data-slot":"button",className:pt(MC({variant:t,size:r,className:e})),...a})}function DC(e,t=globalThis?.document){const r=ur(e);N.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var zC="DismissableLayer",Eh="dismissableLayer.update",FC="dismissableLayer.pointerDownOutside",UC="dismissableLayer.focusOutside",_v,zw=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fw=N.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=e,f=N.useContext(zw),[p,m]=N.useState(null),y=p?.ownerDocument??globalThis?.document,[,_]=N.useState({}),b=Gt(t,K=>m(K)),x=Array.from(f.layers),[E]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),I=x.indexOf(E),O=p?x.indexOf(p):-1,A=f.layersWithOutsidePointerEventsDisabled.size>0,D=O>=I,H=HC(K=>{const C=K.target,ce=[...f.branches].some(Ne=>Ne.contains(C));!D||ce||(a?.(K),l?.(K),K.defaultPrevented||c?.())},y),Z=GC(K=>{const C=K.target;[...f.branches].some(Ne=>Ne.contains(C))||(o?.(K),l?.(K),K.defaultPrevented||c?.())},y);return DC(K=>{O===f.layers.size-1&&(n?.(K),!K.defaultPrevented&&c&&(K.preventDefault(),c()))},y),N.useEffect(()=>{if(p)return r&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(_v=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),wv(),()=>{r&&f.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=_v)}},[p,y,r,f]),N.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),wv())},[p,f]),N.useEffect(()=>{const K=()=>_({});return document.addEventListener(Eh,K),()=>document.removeEventListener(Eh,K)},[]),w.jsx(Tt.div,{...d,ref:b,style:{pointerEvents:A?D?"auto":"none":void 0,...e.style},onFocusCapture:ut(e.onFocusCapture,Z.onFocusCapture),onBlurCapture:ut(e.onBlurCapture,Z.onBlurCapture),onPointerDownCapture:ut(e.onPointerDownCapture,H.onPointerDownCapture)})});Fw.displayName=zC;var BC="DismissableLayerBranch",VC=N.forwardRef((e,t)=>{const r=N.useContext(zw),n=N.useRef(null),a=Gt(t,n);return N.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),w.jsx(Tt.div,{...e,ref:a})});VC.displayName=BC;function HC(e,t=globalThis?.document){const r=ur(e),n=N.useRef(!1),a=N.useRef(()=>{});return N.useEffect(()=>{const o=c=>{if(c.target&&!n.current){let d=function(){Uw(FC,r,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);n.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function GC(e,t=globalThis?.document){const r=ur(e),n=N.useRef(!1);return N.useEffect(()=>{const a=o=>{o.target&&!n.current&&Uw(UC,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function wv(){const e=new CustomEvent(Eh);document.dispatchEvent(e)}function Uw(e,t,r,{discrete:n}){const a=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?sk(a,o):a.dispatchEvent(o)}var Zd="focusScope.autoFocusOnMount",Kd="focusScope.autoFocusOnUnmount",bv={bubbles:!1,cancelable:!0},qC="FocusScope",Bw=N.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...l}=e,[c,d]=N.useState(null),f=ur(a),p=ur(o),m=N.useRef(null),y=Gt(t,x=>d(x)),_=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(n){let x=function(A){if(_.paused||!c)return;const D=A.target;c.contains(D)?m.current=D:cs(m.current,{select:!0})},E=function(A){if(_.paused||!c)return;const D=A.relatedTarget;D!==null&&(c.contains(D)||cs(m.current,{select:!0}))},I=function(A){if(document.activeElement===document.body)for(const H of A)H.removedNodes.length>0&&cs(c)};document.addEventListener("focusin",x),document.addEventListener("focusout",E);const O=new MutationObserver(I);return c&&O.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",E),O.disconnect()}}},[n,c,_.paused]),N.useEffect(()=>{if(c){Ev.add(_);const x=document.activeElement;if(!c.contains(x)){const I=new CustomEvent(Zd,bv);c.addEventListener(Zd,f),c.dispatchEvent(I),I.defaultPrevented||(WC(XC(Vw(c)),{select:!0}),document.activeElement===x&&cs(c))}return()=>{c.removeEventListener(Zd,f),setTimeout(()=>{const I=new CustomEvent(Kd,bv);c.addEventListener(Kd,p),c.dispatchEvent(I),I.defaultPrevented||cs(x??document.body,{select:!0}),c.removeEventListener(Kd,p),Ev.remove(_)},0)}}},[c,f,p,_]);const b=N.useCallback(x=>{if(!r&&!n||_.paused)return;const E=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,I=document.activeElement;if(E&&I){const O=x.currentTarget,[A,D]=ZC(O);A&&D?!x.shiftKey&&I===D?(x.preventDefault(),r&&cs(A,{select:!0})):x.shiftKey&&I===A&&(x.preventDefault(),r&&cs(D,{select:!0})):I===O&&x.preventDefault()}},[r,n,_.paused]);return w.jsx(Tt.div,{tabIndex:-1,...l,ref:y,onKeyDown:b})});Bw.displayName=qC;function WC(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(cs(n,{select:t}),document.activeElement!==r)return}function ZC(e){const t=Vw(e),r=xv(t,e),n=xv(t.reverse(),e);return[r,n]}function Vw(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function xv(e,t){for(const r of e)if(!KC(r,{upTo:t}))return r}function KC(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function JC(e){return e instanceof HTMLInputElement&&"select"in e}function cs(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&JC(e)&&t&&e.select()}}var Ev=YC();function YC(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=Sv(e,t),e.unshift(t)},remove(t){e=Sv(e,t),e[0]?.resume()}}}function Sv(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function XC(e){return e.filter(t=>t.tagName!=="A")}var QC="Portal",Hw=N.forwardRef((e,t)=>{const{container:r,...n}=e,[a,o]=N.useState(!1);Rn(()=>o(!0),[]);const l=r||a&&globalThis?.document?.body;return l?JS.createPortal(w.jsx(Tt.div,{...n,ref:t}),l):null});Hw.displayName=QC;var Jd=0;function eN(){N.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??kv()),document.body.insertAdjacentElement("beforeend",e[1]??kv()),Jd++,()=>{Jd===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Jd--}},[])}function kv(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ln=function(){return ln=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},ln.apply(this,arguments)};function Gw(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function tN(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var Vl="right-scroll-bar-position",Hl="width-before-scroll-bar",rN="with-scroll-bars-hidden",nN="--removed-body-scroll-bar-size";function Yd(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function sN(e,t){var r=N.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var aN=typeof window<"u"?N.useLayoutEffect:N.useEffect,Tv=new WeakMap;function iN(e,t){var r=sN(null,function(n){return e.forEach(function(a){return Yd(a,n)})});return aN(function(){var n=Tv.get(r);if(n){var a=new Set(n),o=new Set(e),l=r.current;a.forEach(function(c){o.has(c)||Yd(c,null)}),o.forEach(function(c){a.has(c)||Yd(c,l)})}Tv.set(r,e)},[e]),r}function oN(e){return e}function lN(e,t){t===void 0&&(t=oN);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var l=t(o,n);return r.push(l),function(){r=r.filter(function(c){return c!==l})}},assignSyncMedium:function(o){for(n=!0;r.length;){var l=r;r=[],l.forEach(o)}r={push:function(c){return o(c)},filter:function(){return r}}},assignMedium:function(o){n=!0;var l=[];if(r.length){var c=r;r=[],c.forEach(o),l=r}var d=function(){var p=l;l=[],p.forEach(o)},f=function(){return Promise.resolve().then(d)};f(),r={push:function(p){l.push(p),f()},filter:function(p){return l=l.filter(p),r}}}};return a}function cN(e){e===void 0&&(e={});var t=lN(null);return t.options=ln({async:!0,ssr:!1},e),t}var qw=function(e){var t=e.sideCar,r=Gw(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return N.createElement(n,ln({},r))};qw.isSideCarExport=!0;function uN(e,t){return e.useMedium(t),qw}var Ww=cN(),Xd=function(){},Sc=N.forwardRef(function(e,t){var r=N.useRef(null),n=N.useState({onScrollCapture:Xd,onWheelCapture:Xd,onTouchMoveCapture:Xd}),a=n[0],o=n[1],l=e.forwardProps,c=e.children,d=e.className,f=e.removeScrollBar,p=e.enabled,m=e.shards,y=e.sideCar,_=e.noRelative,b=e.noIsolation,x=e.inert,E=e.allowPinchZoom,I=e.as,O=I===void 0?"div":I,A=e.gapMode,D=Gw(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),H=y,Z=iN([r,t]),K=ln(ln({},D),a);return N.createElement(N.Fragment,null,p&&N.createElement(H,{sideCar:Ww,removeScrollBar:f,shards:m,noRelative:_,noIsolation:b,inert:x,setCallbacks:o,allowPinchZoom:!!E,lockRef:r,gapMode:A}),l?N.cloneElement(N.Children.only(c),ln(ln({},K),{ref:Z})):N.createElement(O,ln({},K,{className:d,ref:Z}),c))});Sc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Sc.classNames={fullWidth:Hl,zeroRight:Vl};var dN=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fN(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=dN();return t&&e.setAttribute("nonce",t),e}function hN(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function pN(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var mN=function(){var e=0,t=null;return{add:function(r){e==0&&(t=fN())&&(hN(t,r),pN(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},gN=function(){var e=mN();return function(t,r){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Zw=function(){var e=gN(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},yN={left:0,top:0,right:0,gap:0},Qd=function(e){return parseInt(e||"",10)||0},vN=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Qd(r),Qd(n),Qd(a)]},_N=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return yN;var t=vN(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},wN=Zw(),Ia="data-scroll-locked",bN=function(e,t,r,n){var a=e.left,o=e.top,l=e.right,c=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(rN,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(Ia,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Vl,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Hl,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Vl," .").concat(Vl,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Hl," .").concat(Hl,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ia,`] {
    `).concat(nN,": ").concat(c,`px;
  }
`)},Cv=function(){var e=parseInt(document.body.getAttribute(Ia)||"0",10);return isFinite(e)?e:0},xN=function(){N.useEffect(function(){return document.body.setAttribute(Ia,(Cv()+1).toString()),function(){var e=Cv()-1;e<=0?document.body.removeAttribute(Ia):document.body.setAttribute(Ia,e.toString())}},[])},EN=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;xN();var o=N.useMemo(function(){return _N(a)},[a]);return N.createElement(wN,{styles:bN(o,!t,a,r?"":"!important")})},Sh=!1;if(typeof window<"u")try{var Cl=Object.defineProperty({},"passive",{get:function(){return Sh=!0,!0}});window.addEventListener("test",Cl,Cl),window.removeEventListener("test",Cl,Cl)}catch{Sh=!1}var ba=Sh?{passive:!1}:!1,SN=function(e){return e.tagName==="TEXTAREA"},Kw=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!SN(e)&&r[t]==="visible")},kN=function(e){return Kw(e,"overflowY")},TN=function(e){return Kw(e,"overflowX")},Nv=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=Jw(e,n);if(a){var o=Yw(e,n),l=o[1],c=o[2];if(l>c)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},CN=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},NN=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Jw=function(e,t){return e==="v"?kN(t):TN(t)},Yw=function(e,t){return e==="v"?CN(t):NN(t)},IN=function(e,t){return e==="h"&&t==="rtl"?-1:1},RN=function(e,t,r,n,a){var o=IN(e,window.getComputedStyle(t).direction),l=o*n,c=r.target,d=t.contains(c),f=!1,p=l>0,m=0,y=0;do{if(!c)break;var _=Yw(e,c),b=_[0],x=_[1],E=_[2],I=x-E-o*b;(b||I)&&Jw(e,c)&&(m+=I,y+=b);var O=c.parentNode;c=O&&O.nodeType===Node.DOCUMENT_FRAGMENT_NODE?O.host:O}while(!d&&c!==document.body||d&&(t.contains(c)||t===c));return(p&&Math.abs(m)<1||!p&&Math.abs(y)<1)&&(f=!0),f},Nl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Iv=function(e){return[e.deltaX,e.deltaY]},Rv=function(e){return e&&"current"in e?e.current:e},AN=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ON=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},PN=0,xa=[];function $N(e){var t=N.useRef([]),r=N.useRef([0,0]),n=N.useRef(),a=N.useState(PN++)[0],o=N.useState(Zw)[0],l=N.useRef(e);N.useEffect(function(){l.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var x=tN([e.lockRef.current],(e.shards||[]).map(Rv),!0).filter(Boolean);return x.forEach(function(E){return E.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),x.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var c=N.useCallback(function(x,E){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!l.current.allowPinchZoom;var I=Nl(x),O=r.current,A="deltaX"in x?x.deltaX:O[0]-I[0],D="deltaY"in x?x.deltaY:O[1]-I[1],H,Z=x.target,K=Math.abs(A)>Math.abs(D)?"h":"v";if("touches"in x&&K==="h"&&Z.type==="range")return!1;var C=Nv(K,Z);if(!C)return!0;if(C?H=K:(H=K==="v"?"h":"v",C=Nv(K,Z)),!C)return!1;if(!n.current&&"changedTouches"in x&&(A||D)&&(n.current=H),!H)return!0;var ce=n.current||H;return RN(ce,E,x,ce==="h"?A:D)},[]),d=N.useCallback(function(x){var E=x;if(!(!xa.length||xa[xa.length-1]!==o)){var I="deltaY"in E?Iv(E):Nl(E),O=t.current.filter(function(H){return H.name===E.type&&(H.target===E.target||E.target===H.shadowParent)&&AN(H.delta,I)})[0];if(O&&O.should){E.cancelable&&E.preventDefault();return}if(!O){var A=(l.current.shards||[]).map(Rv).filter(Boolean).filter(function(H){return H.contains(E.target)}),D=A.length>0?c(E,A[0]):!l.current.noIsolation;D&&E.cancelable&&E.preventDefault()}}},[]),f=N.useCallback(function(x,E,I,O){var A={name:x,delta:E,target:I,should:O,shadowParent:jN(I)};t.current.push(A),setTimeout(function(){t.current=t.current.filter(function(D){return D!==A})},1)},[]),p=N.useCallback(function(x){r.current=Nl(x),n.current=void 0},[]),m=N.useCallback(function(x){f(x.type,Iv(x),x.target,c(x,e.lockRef.current))},[]),y=N.useCallback(function(x){f(x.type,Nl(x),x.target,c(x,e.lockRef.current))},[]);N.useEffect(function(){return xa.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:y}),document.addEventListener("wheel",d,ba),document.addEventListener("touchmove",d,ba),document.addEventListener("touchstart",p,ba),function(){xa=xa.filter(function(x){return x!==o}),document.removeEventListener("wheel",d,ba),document.removeEventListener("touchmove",d,ba),document.removeEventListener("touchstart",p,ba)}},[]);var _=e.removeScrollBar,b=e.inert;return N.createElement(N.Fragment,null,b?N.createElement(o,{styles:ON(a)}):null,_?N.createElement(EN,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function jN(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const LN=uN(Ww,$N);var Xw=N.forwardRef(function(e,t){return N.createElement(Sc,ln({},e,{ref:t,sideCar:LN}))});Xw.classNames=Sc.classNames;var MN=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ea=new WeakMap,Il=new WeakMap,Rl={},ef=0,Qw=function(e){return e&&(e.host||Qw(e.parentNode))},DN=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Qw(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},zN=function(e,t,r,n){var a=DN(t,Array.isArray(e)?e:[e]);Rl[r]||(Rl[r]=new WeakMap);var o=Rl[r],l=[],c=new Set,d=new Set(a),f=function(m){!m||c.has(m)||(c.add(m),f(m.parentNode))};a.forEach(f);var p=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(y){if(c.has(y))p(y);else try{var _=y.getAttribute(n),b=_!==null&&_!=="false",x=(Ea.get(y)||0)+1,E=(o.get(y)||0)+1;Ea.set(y,x),o.set(y,E),l.push(y),x===1&&b&&Il.set(y,!0),E===1&&y.setAttribute(r,"true"),b||y.setAttribute(n,"true")}catch(I){console.error("aria-hidden: cannot operate on ",y,I)}})};return p(t),c.clear(),ef++,function(){l.forEach(function(m){var y=Ea.get(m)-1,_=o.get(m)-1;Ea.set(m,y),o.set(m,_),y||(Il.has(m)||m.removeAttribute(n),Il.delete(m)),_||m.removeAttribute(r)}),ef--,ef||(Ea=new WeakMap,Ea=new WeakMap,Il=new WeakMap,Rl={})}},FN=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=MN(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),zN(n,a,r,"aria-hidden")):function(){return null}};function UN(e){const t=BN(e),r=N.forwardRef((n,a)=>{const{children:o,...l}=n,c=N.Children.toArray(o),d=c.find(HN);if(d){const f=d.props.children,p=c.map(m=>m===d?N.Children.count(f)>1?N.Children.only(null):N.isValidElement(f)?f.props.children:null:m);return w.jsx(t,{...l,ref:a,children:N.isValidElement(f)?N.cloneElement(f,void 0,p):null})}return w.jsx(t,{...l,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}function BN(e){const t=N.forwardRef((r,n)=>{const{children:a,...o}=r;if(N.isValidElement(a)){const l=qN(a),c=GN(o,a.props);return a.type!==N.Fragment&&(c.ref=n?ao(n,l):l),N.cloneElement(a,c)}return N.Children.count(a)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var VN=Symbol("radix.slottable");function HN(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===VN}function GN(e,t){const r={...t};for(const n in t){const a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...c)=>{const d=o(...c);return a(...c),d}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function qN(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var kc="Dialog",[eb]=so(kc),[WN,Yr]=eb(kc),tb=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=N.useRef(null),d=N.useRef(null),[f,p]=sp({prop:n,defaultProp:a??!1,onChange:o,caller:kc});return w.jsx(WN,{scope:t,triggerRef:c,contentRef:d,contentId:zi(),titleId:zi(),descriptionId:zi(),open:f,onOpenChange:p,onOpenToggle:N.useCallback(()=>p(m=>!m),[p]),modal:l,children:r})};tb.displayName=kc;var rb="DialogTrigger",ZN=N.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Yr(rb,r),o=Gt(t,a.triggerRef);return w.jsx(Tt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":yp(a.open),...n,ref:o,onClick:ut(e.onClick,a.onOpenToggle)})});ZN.displayName=rb;var mp="DialogPortal",[KN,nb]=eb(mp,{forceMount:void 0}),sb=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,o=Yr(mp,t);return w.jsx(KN,{scope:t,forceMount:r,children:N.Children.map(n,l=>w.jsx(jn,{present:r||o.open,children:w.jsx(Hw,{asChild:!0,container:a,children:l})}))})};sb.displayName=mp;var Jl="DialogOverlay",ab=N.forwardRef((e,t)=>{const r=nb(Jl,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,o=Yr(Jl,e.__scopeDialog);return o.modal?w.jsx(jn,{present:n||o.open,children:w.jsx(YN,{...a,ref:t})}):null});ab.displayName=Jl;var JN=UN("DialogOverlay.RemoveScroll"),YN=N.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Yr(Jl,r);return w.jsx(Xw,{as:JN,allowPinchZoom:!0,shards:[a.contentRef],children:w.jsx(Tt.div,{"data-state":yp(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Vs="DialogContent",ib=N.forwardRef((e,t)=>{const r=nb(Vs,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,o=Yr(Vs,e.__scopeDialog);return w.jsx(jn,{present:n||o.open,children:o.modal?w.jsx(XN,{...a,ref:t}):w.jsx(QN,{...a,ref:t})})});ib.displayName=Vs;var XN=N.forwardRef((e,t)=>{const r=Yr(Vs,e.__scopeDialog),n=N.useRef(null),a=Gt(t,r.contentRef,n);return N.useEffect(()=>{const o=n.current;if(o)return FN(o)},[]),w.jsx(ob,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ut(e.onCloseAutoFocus,o=>{o.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:ut(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&o.preventDefault()}),onFocusOutside:ut(e.onFocusOutside,o=>o.preventDefault())})}),QN=N.forwardRef((e,t)=>{const r=Yr(Vs,e.__scopeDialog),n=N.useRef(!1),a=N.useRef(!1);return w.jsx(ob,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{e.onCloseAutoFocus?.(o),o.defaultPrevented||(n.current||r.triggerRef.current?.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{e.onInteractOutside?.(o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=o.target;r.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),ob=N.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,...l}=e,c=Yr(Vs,r),d=N.useRef(null),f=Gt(t,d);return eN(),w.jsxs(w.Fragment,{children:[w.jsx(Bw,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:w.jsx(Fw,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":yp(c.open),...l,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),w.jsxs(w.Fragment,{children:[w.jsx(eI,{titleId:c.titleId}),w.jsx(rI,{contentRef:d,descriptionId:c.descriptionId})]})]})}),gp="DialogTitle",lb=N.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Yr(gp,r);return w.jsx(Tt.h2,{id:a.titleId,...n,ref:t})});lb.displayName=gp;var cb="DialogDescription",ub=N.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Yr(cb,r);return w.jsx(Tt.p,{id:a.descriptionId,...n,ref:t})});ub.displayName=cb;var db="DialogClose",fb=N.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Yr(db,r);return w.jsx(Tt.button,{type:"button",...n,ref:t,onClick:ut(e.onClick,()=>a.onOpenChange(!1))})});fb.displayName=db;function yp(e){return e?"open":"closed"}var hb="DialogTitleWarning",[BL,pb]=FS(hb,{contentName:Vs,titleName:gp,docsSlug:"dialog"}),eI=({titleId:e})=>{const t=pb(hb),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return N.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},tI="DialogDescriptionWarning",rI=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${pb(tI).contentName}}.`;return N.useEffect(()=>{const a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},nI=tb,sI=sb,aI=ab,iI=ib,oI=lb,lI=ub,cI=fb;function mb({...e}){return w.jsx(nI,{"data-slot":"dialog",...e})}function uI({...e}){return w.jsx(sI,{"data-slot":"dialog-portal",...e})}function dI({className:e,...t}){return w.jsx(aI,{"data-slot":"dialog-overlay",className:pt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function gb({className:e,children:t,...r}){return w.jsxs(uI,{"data-slot":"dialog-portal",children:[w.jsx(dI,{}),w.jsxs(iI,{"data-slot":"dialog-content",className:pt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[t,w.jsxs(cI,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[w.jsx(Dw,{}),w.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function yb({className:e,...t}){return w.jsx("div",{"data-slot":"dialog-header",className:pt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function vb({className:e,...t}){return w.jsx(oI,{"data-slot":"dialog-title",className:pt("text-lg leading-none font-semibold",e),...t})}function _b({className:e,...t}){return w.jsx(lI,{"data-slot":"dialog-description",className:pt("text-muted-foreground text-sm",e),...t})}function fI(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let kh=1;class hI{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...a}=t,o=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:kh++,l=this.toasts.find(d=>d.id===o),c=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(d=>d.id===o?(this.publish({...d,...t,id:o,title:n}),{...d,...t,id:o,dismissible:c,title:n}):d):this.addToast({title:n,...a,dismissible:c,id:o}),o},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let o=n!==void 0,l;const c=a.then(async f=>{if(l=["resolve",f],yr.isValidElement(f))o=!1,this.create({id:n,type:"default",message:f});else if(mI(f)&&!f.ok){o=!1;const m=typeof r.error=="function"?await r.error(`HTTP error! status: ${f.status}`):r.error,y=typeof r.description=="function"?await r.description(`HTTP error! status: ${f.status}`):r.description,b=typeof m=="object"&&!yr.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:y,...b})}else if(f instanceof Error){o=!1;const m=typeof r.error=="function"?await r.error(f):r.error,y=typeof r.description=="function"?await r.description(f):r.description,b=typeof m=="object"&&!yr.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:y,...b})}else if(r.success!==void 0){o=!1;const m=typeof r.success=="function"?await r.success(f):r.success,y=typeof r.description=="function"?await r.description(f):r.description,b=typeof m=="object"&&!yr.isValidElement(m)?m:{message:m};this.create({id:n,type:"success",description:y,...b})}}).catch(async f=>{if(l=["reject",f],r.error!==void 0){o=!1;const p=typeof r.error=="function"?await r.error(f):r.error,m=typeof r.description=="function"?await r.description(f):r.description,_=typeof p=="object"&&!yr.isValidElement(p)?p:{message:p};this.create({id:n,type:"error",description:m,..._})}}).finally(()=>{o&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),d=()=>new Promise((f,p)=>c.then(()=>l[0]==="reject"?p(l[1]):f(l[1])).catch(p));return typeof n!="string"&&typeof n!="number"?{unwrap:d}:Object.assign(n,{unwrap:d})},this.custom=(t,r)=>{const n=r?.id||kh++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ir=new hI,pI=(e,t)=>{const r=t?.id||kh++;return Ir.addToast({title:e,...t,id:r}),r},mI=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",gI=pI,yI=()=>Ir.toasts,vI=()=>Ir.getActiveToasts(),Ra=Object.assign(gI,{success:Ir.success,info:Ir.info,warning:Ir.warning,error:Ir.error,custom:Ir.custom,message:Ir.message,promise:Ir.promise,dismiss:Ir.dismiss,loading:Ir.loading},{getHistory:yI,getToasts:vI});fI("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function _I({lesson:e,isCompleted:t,onClose:r,onComplete:n}){const[a,o]=N.useState("learn"),[l,c]=N.useState(0),[d,f]=N.useState(null),[p,m]=N.useState(!1),[y,_]=N.useState(0),b=()=>{if(d===null)return;const E=d===e.content.quiz[l].correctAnswer;m(!0),E?(_(I=>I+1),Ra.success("Correct! Well done!")):Ra.error("Not quite right. Keep learning!"),setTimeout(()=>{l<e.content.quiz.length-1?(c(I=>I+1),f(null),m(!1)):(!t&&y+(E?1:0)>=e.content.quiz.length&&(n(e.xpReward),Ra.success(`+${e.xpReward} XP earned!`,{icon:w.jsx(hp,{className:"w-4 h-4"})})),o("complete"))},1500)},x=()=>{c(0),f(null),m(!1),_(0),o("quiz")};return w.jsx(mb,{open:!0,onOpenChange:r,children:w.jsxs(gb,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[w.jsxs(yb,{children:[w.jsx(vb,{children:e.title}),w.jsxs(_b,{children:[a==="learn"&&"Learn the concept",a==="quiz"&&`Quiz - Question ${l+1} of ${e.content.quiz.length}`,a==="complete"&&"Lesson Complete!"]})]}),a==="learn"&&w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"mb-3",children:"Explanation"}),w.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.content.explanation})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"mb-3",children:"Example"}),w.jsx(ht,{className:"bg-gray-900",children:w.jsx(St,{className:"p-4",children:w.jsx("pre",{className:"text-sm text-gray-100 overflow-x-auto",children:w.jsx("code",{children:e.content.example})})})})]}),w.jsx("div",{className:"flex justify-end pt-4",children:w.jsx(vr,{onClick:()=>o("quiz"),children:"Start Quiz "})})]}),a==="quiz"&&w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[w.jsx("h3",{className:"mb-4",children:e.content.quiz[l].question}),w.jsx("div",{className:"space-y-2",children:e.content.quiz[l].options.map((E,I)=>w.jsx("button",{onClick:()=>!p&&f(I),disabled:p,className:`w-full p-4 rounded-lg border-2 transition-all text-left ${d===I?p?I===e.content.quiz[l].correctAnswer?"border-green-500 bg-green-50":"border-red-500 bg-red-50":"border-indigo-500 bg-indigo-50":p&&I===e.content.quiz[l].correctAnswer?"border-green-500 bg-green-50":"border-gray-200 hover:border-indigo-300 hover:bg-white"}`,children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{children:E}),p&&I===e.content.quiz[l].correctAnswer&&w.jsx(qi,{className:"w-5 h-5 text-green-600"}),p&&d===I&&I!==e.content.quiz[l].correctAnswer&&w.jsx(dC,{className:"w-5 h-5 text-red-600"})]})},I))})]}),w.jsx("div",{className:"flex justify-end",children:w.jsx(vr,{onClick:b,disabled:d===null||p,children:"Submit Answer"})})]}),a==="complete"&&w.jsxs("div",{className:"space-y-6 text-center py-8",children:[w.jsx("div",{className:"flex justify-center",children:w.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-green-400 to-emerald-500 flex items-center justify-center",children:w.jsx(qi,{className:"w-12 h-12 text-white"})})}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-2xl mb-2",children:"Great Job!"}),w.jsxs("p",{className:"text-gray-600",children:["You answered ",y," out of ",e.content.quiz.length," questions correctly"]})]}),!t&&y===e.content.quiz.length&&w.jsxs(Rr,{className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-lg py-2 px-4",children:["+",e.xpReward," XP Earned"]}),w.jsxs("div",{className:"flex gap-3 justify-center pt-4",children:[w.jsx(vr,{variant:"outline",onClick:x,children:"Retake Quiz"}),w.jsx(vr,{onClick:r,children:"Continue"})]})]})]})})}const wb=[{id:"variables-1",title:"Introduction to Variables",description:"Learn how to store and use data in your programs",topic:"Variables",difficulty:"beginner",xpReward:50,requiredLevel:1,icon:w.jsx(wc,{className:"w-5 h-5"}),content:{explanation:"Variables are containers for storing data values. Think of them like boxes that hold information you want to use later.",example:`let name = "Alice";
let age = 25;
let isStudent = true;

console.log(name); // Output: Alice`,quiz:[{question:"What keyword is used to declare a variable in JavaScript?",options:["var","let","const","All of the above"],correctAnswer:3}]}},{id:"functions-1",title:"Creating Functions",description:"Master the art of writing reusable code blocks",topic:"Functions",difficulty:"beginner",xpReward:60,requiredLevel:1,icon:w.jsx(bc,{className:"w-5 h-5"}),content:{explanation:"Functions are reusable blocks of code that perform a specific task. They help you organize your code and avoid repetition.",example:`function greet(name) {
  return "Hello, " + name + "!";
}

console.log(greet("Bob")); // Output: Hello, Bob!`,quiz:[{question:"What keyword is used to define a function?",options:["func","function","def","method"],correctAnswer:1}]}},{id:"conditionals-1",title:"If Statements",description:"Make decisions in your code with conditionals",topic:"Conditionals",difficulty:"beginner",xpReward:55,requiredLevel:2,icon:w.jsx(iC,{className:"w-5 h-5"}),content:{explanation:"Conditional statements allow your code to make decisions. The if statement executes code only when a condition is true.",example:`let score = 85;

if (score >= 80) {
  console.log("Great job!");
} else {
  console.log("Keep practicing!");
}`,quiz:[{question:"Which operator checks if two values are equal?",options:["=","==","===","equals"],correctAnswer:2}]}},{id:"loops-1",title:"Understanding Loops",description:"Repeat actions efficiently with for and while loops",topic:"Loops",difficulty:"intermediate",xpReward:70,requiredLevel:3,icon:w.jsx(EC,{className:"w-5 h-5"}),content:{explanation:"Loops allow you to repeat a block of code multiple times. This is useful when you need to perform the same action many times.",example:`for (let i = 0; i < 5; i++) {
  console.log("Count: " + i);
}

// Output: Count: 0, 1, 2, 3, 4`,quiz:[{question:"What does i++ do in a for loop?",options:["Decreases i by 1","Increases i by 1","Multiplies i by 1","Nothing"],correctAnswer:1}]}},{id:"arrays-1",title:"Working with Arrays",description:"Store and manipulate lists of data",topic:"Arrays",difficulty:"intermediate",xpReward:65,requiredLevel:4,icon:w.jsx(_C,{className:"w-5 h-5"}),content:{explanation:"Arrays are used to store multiple values in a single variable. Each value has an index starting from 0.",example:`let fruits = ["apple", "banana", "orange"];

console.log(fruits[0]); // Output: apple
fruits.push("grape"); // Add to end
console.log(fruits.length); // Output: 4`,quiz:[{question:"What is the index of the first element in an array?",options:["1","0","-1","It depends"],correctAnswer:1}]}}];function wI({userProgress:e,onCompleteLesson:t,onEarnBadge:r}){const[n,a]=N.useState(null),o=d=>e.level>=d.requiredLevel,l=d=>e.completedLessons.includes(d),c=d=>{switch(d){case"beginner":return"bg-green-500";case"intermediate":return"bg-yellow-500";case"advanced":return"bg-red-500";default:return"bg-gray-500"}};return w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl mb-2",children:"Learning Path"}),w.jsx("p",{className:"text-gray-600",children:"Complete lessons to gain XP and unlock new content"})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:wb.map(d=>{const f=o(d),p=l(d.id);return w.jsxs(ht,{className:`relative overflow-hidden transition-all hover:shadow-lg ${f?"":"opacity-60"} ${p?"border-2 border-green-500":""}`,children:[p&&w.jsx("div",{className:"absolute top-2 right-2",children:w.jsx(qi,{className:"w-6 h-6 text-green-500"})}),w.jsx(kn,{children:w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("div",{className:`p-2 rounded-lg ${f?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-400"}`,children:f?d.icon:w.jsx(Lw,{className:"w-5 h-5"})}),w.jsxs("div",{className:"flex-1",children:[w.jsx(Tn,{className:"text-base",children:d.title}),w.jsx(_c,{className:"text-sm mt-1",children:d.description})]})]})}),w.jsxs(St,{className:"space-y-3",children:[w.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[w.jsx(Rr,{variant:"secondary",className:"text-xs",children:d.topic}),w.jsx(Rr,{className:`text-xs ${c(d.difficulty)}`,children:d.difficulty})]}),w.jsxs("div",{className:"flex items-center justify-between pt-2",children:[w.jsxs("span",{className:"text-sm text-gray-600",children:["+",d.xpReward," XP"]}),w.jsx(vr,{size:"sm",onClick:()=>a(d),disabled:!f,children:p?"Review":f?"Start":`Level ${d.requiredLevel}`})]})]})]},d.id)})}),n&&w.jsx(_I,{lesson:n,isCompleted:l(n.id),onClose:()=>a(null),onComplete:d=>{t(n.id,d),e.completedLessons.length+1===5&&r("first-five")}})]})}function bI({className:e,...t}){return w.jsx("textarea",{"data-slot":"textarea",className:pt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}function xI({challenge:e,isCompleted:t,onClose:r,onComplete:n}){const[a,o]=N.useState(e.starterCode),[l,c]=N.useState(!1),[d,f]=N.useState(!1),[p,m]=N.useState([]),y=()=>{const _=a.toLowerCase().replace(/\s+/g,"");e.solution.toLowerCase().replace(/\s+/g,"");const b=a.includes("return"),x=_.length>e.starterCode.length,E=e.testCases.map((O,A)=>{const D=b&&x;return{passed:D,message:D?`Test ${A+1} passed `:`Test ${A+1} failed - Expected ${O.expected}`}});m(E),E.every(O=>O.passed)?(Ra.success("All tests passed! Challenge complete!",{icon:w.jsx(Wi,{className:"w-4 h-4"})}),t||(n(e.xpReward),Ra.success(`+${e.xpReward} XP earned!`))):Ra.error("Some tests failed. Keep trying!")};return w.jsx(mb,{open:!0,onOpenChange:r,children:w.jsxs(gb,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[w.jsxs(yb,{children:[w.jsxs(vb,{className:"flex items-center gap-2",children:[w.jsx(bc,{className:"w-5 h-5"}),e.title]}),w.jsxs(_b,{children:["Complete this challenge to earn ",e.xpReward," XP"]})]}),w.jsxs(_w,{defaultValue:"problem",className:"w-full",children:[w.jsxs(ww,{className:"grid w-full grid-cols-3",children:[w.jsx(Ds,{value:"problem",children:"Problem"}),w.jsx(Ds,{value:"code",children:"Code"}),w.jsx(Ds,{value:"hints",children:"Hints"})]}),w.jsxs(zs,{value:"problem",className:"space-y-4",children:[w.jsx(ht,{children:w.jsxs(St,{className:"pt-6",children:[w.jsx("h3",{className:"mb-3",children:"Challenge Description"}),w.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.problem})]})}),w.jsx(ht,{children:w.jsxs(St,{className:"pt-6",children:[w.jsx("h3",{className:"mb-3",children:"Test Cases"}),w.jsx("div",{className:"space-y-2",children:e.testCases.map((_,b)=>w.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[w.jsxs("div",{className:"text-sm",children:[w.jsx("span",{className:"text-gray-600",children:"Input:"})," ",_.input]}),w.jsxs("div",{className:"text-sm",children:[w.jsx("span",{className:"text-gray-600",children:"Expected:"})," ",_.expected]})]},b))})]})})]}),w.jsx(zs,{value:"code",className:"space-y-4",children:w.jsx(ht,{children:w.jsxs(St,{className:"pt-6 space-y-4",children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsx("h3",{children:"Your Code"}),w.jsx(vr,{variant:"outline",size:"sm",onClick:()=>o(e.starterCode),children:"Reset"})]}),w.jsx(bI,{value:a,onChange:_=>o(_.target.value),className:"font-mono text-sm min-h-[300px] bg-gray-900 text-gray-100 border-gray-700",placeholder:"Write your code here..."})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx(vr,{onClick:y,className:"flex-1",children:"Run Tests"}),w.jsxs(vr,{variant:"outline",onClick:()=>f(!d),children:[d?"Hide":"Show"," Solution"]})]}),p.length>0&&w.jsx(ht,{children:w.jsxs(St,{className:"pt-6",children:[w.jsx("h4",{className:"mb-3",children:"Test Results"}),w.jsx("div",{className:"space-y-2",children:p.map((_,b)=>w.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${_.passed?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[w.jsx(qi,{className:`w-4 h-4 ${_.passed?"text-green-500":"text-red-500"}`}),w.jsx("span",{className:"text-sm",children:_.message})]},b))})]})}),d&&w.jsx(ht,{className:"border-yellow-200 bg-yellow-50",children:w.jsxs(St,{className:"pt-6",children:[w.jsxs("h4",{className:"mb-3 flex items-center gap-2",children:[w.jsx(Wi,{className:"w-4 h-4"}),"Solution"]}),w.jsx(ht,{className:"bg-gray-900",children:w.jsx(St,{className:"p-4",children:w.jsx("pre",{className:"text-sm text-gray-100 overflow-x-auto",children:w.jsx("code",{children:e.solution})})})})]})})]})})}),w.jsx(zs,{value:"hints",className:"space-y-4",children:w.jsx(ht,{children:w.jsxs(St,{className:"pt-6",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx(yC,{className:"w-5 h-5 text-yellow-500"}),w.jsx("h3",{children:"Hints"})]}),l?w.jsx("div",{className:"space-y-3",children:e.hints.map((_,b)=>w.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:w.jsxs("div",{className:"flex gap-3",children:[w.jsx(Rr,{className:"bg-blue-500 shrink-0",children:b+1}),w.jsx("p",{className:"text-gray-700",children:_})]})},b))}):w.jsxs("div",{className:"text-center py-8",children:[w.jsx("p",{className:"text-gray-600 mb-4",children:"Try solving the challenge on your own first!"}),w.jsx(vr,{onClick:()=>c(!0),variant:"outline",children:"Show Hints"})]})]})})})]}),w.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[w.jsx(vr,{variant:"outline",onClick:r,children:"Close"}),p.every(_=>_.passed)&&p.length>0&&w.jsx(Rr,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-lg py-2 px-4",children:"Challenge Complete! "})]})]})})}const EI=[{id:"challenge-1",title:"Double the Number",description:"Write a function that doubles a number",difficulty:"easy",xpReward:80,requiredLevel:2,topic:"Functions",problem:"Create a function called `doubleNumber` that takes a number as input and returns that number multiplied by 2.",starterCode:`function doubleNumber(num) {
  // Your code here
  
}

// Test your function
console.log(doubleNumber(5)); // Should output: 10`,solution:`function doubleNumber(num) {
  return num * 2;
}`,testCases:[{input:"5",expected:"10"},{input:"0",expected:"0"},{input:"-3",expected:"-6"}],hints:["Use the * operator to multiply","Remember to use the return keyword"]},{id:"challenge-2",title:"Even or Odd",description:"Determine if a number is even or odd",difficulty:"easy",xpReward:85,requiredLevel:3,topic:"Conditionals",problem:"Create a function called `isEven` that returns true if a number is even, and false if it is odd.",starterCode:`function isEven(num) {
  // Your code here
  
}

// Test your function
console.log(isEven(4)); // Should output: true
console.log(isEven(7)); // Should output: false`,solution:`function isEven(num) {
  return num % 2 === 0;
}`,testCases:[{input:"4",expected:"true"},{input:"7",expected:"false"},{input:"0",expected:"true"}],hints:["Use the modulo operator (%) to find the remainder","If num % 2 equals 0, the number is even"]},{id:"challenge-3",title:"Sum Array",description:"Calculate the sum of all numbers in an array",difficulty:"medium",xpReward:100,requiredLevel:5,topic:"Arrays & Loops",problem:"Create a function called `sumArray` that takes an array of numbers and returns their sum.",starterCode:`function sumArray(numbers) {
  // Your code here
  
}

// Test your function
console.log(sumArray([1, 2, 3, 4])); // Should output: 10`,solution:`function sumArray(numbers) {
  let sum = 0;
  for (let i = 0; i < numbers.length; i++) {
    sum += numbers[i];
  }
  return sum;
}`,testCases:[{input:"[1, 2, 3, 4]",expected:"10"},{input:"[0, 0, 0]",expected:"0"},{input:"[5, -3, 2]",expected:"4"}],hints:["Initialize a variable to store the sum","Use a for loop to iterate through the array","Add each element to your sum variable"]},{id:"challenge-4",title:"Reverse String",description:"Reverse the characters in a string",difficulty:"medium",xpReward:95,requiredLevel:4,topic:"Strings",problem:"Create a function called `reverseString` that takes a string and returns it reversed.",starterCode:`function reverseString(str) {
  // Your code here
  
}

// Test your function
console.log(reverseString("hello")); // Should output: "olleh"`,solution:`function reverseString(str) {
  return str.split('').reverse().join('');
}`,testCases:[{input:'"hello"',expected:'"olleh"'},{input:'"code"',expected:'"edoc"'},{input:'"a"',expected:'"a"'}],hints:["You can convert a string to an array using split()","Arrays have a reverse() method","Use join() to convert the array back to a string"]},{id:"challenge-5",title:"FizzBuzz",description:"The classic FizzBuzz challenge",difficulty:"hard",xpReward:120,requiredLevel:6,topic:"Logic",problem:'Create a function that prints numbers from 1 to n. For multiples of 3, print "Fizz" instead of the number. For multiples of 5, print "Buzz". For multiples of both 3 and 5, print "FizzBuzz".',starterCode:`function fizzBuzz(n) {
  // Your code here
  
}

// Test your function
fizzBuzz(15);`,solution:`function fizzBuzz(n) {
  for (let i = 1; i <= n; i++) {
    if (i % 3 === 0 && i % 5 === 0) {
      console.log("FizzBuzz");
    } else if (i % 3 === 0) {
      console.log("Fizz");
    } else if (i % 5 === 0) {
      console.log("Buzz");
    } else {
      console.log(i);
    }
  }
}`,testCases:[{input:"3",expected:"Fizz"},{input:"5",expected:"Buzz"},{input:"15",expected:"FizzBuzz"}],hints:["Check for divisibility by both 3 and 5 first","Use the modulo operator (%)","Use if-else statements for the conditions"]}];function SI({userProgress:e,onCompleteChallenge:t,onEarnBadge:r}){const[n,a]=N.useState(null),o=d=>e.level>=d.requiredLevel,l=d=>e.completedChallenges.includes(d),c=d=>{switch(d){case"easy":return"bg-green-500";case"medium":return"bg-yellow-500";case"hard":return"bg-red-500";default:return"bg-gray-500"}};return w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl mb-2",children:"Code Challenges"}),w.jsx("p",{className:"text-gray-600",children:"Test your skills with hands-on coding challenges"})]}),w.jsx(Wi,{className:"w-12 h-12 text-yellow-500"})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:EI.map(d=>{const f=o(d),p=l(d.id);return w.jsxs(ht,{className:`relative overflow-hidden transition-all hover:shadow-lg ${f?"":"opacity-60"} ${p?"border-2 border-yellow-500":""}`,children:[p&&w.jsx("div",{className:"absolute top-3 right-3",children:w.jsxs("div",{className:"relative",children:[w.jsx(xc,{className:"w-8 h-8 text-yellow-500 fill-yellow-500"}),w.jsx(qi,{className:"w-4 h-4 text-green-500 absolute -bottom-1 -right-1"})]})}),w.jsx(kn,{children:w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("div",{className:`p-3 rounded-lg ${f?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-400"}`,children:f?w.jsx(hC,{className:"w-6 h-6"}):w.jsx(Lw,{className:"w-6 h-6"})}),w.jsxs("div",{className:"flex-1",children:[w.jsx(Tn,{children:d.title}),w.jsx(_c,{className:"mt-1",children:d.description})]})]})}),w.jsxs(St,{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[w.jsx(Rr,{variant:"secondary",className:"text-xs",children:d.topic}),w.jsx(Rr,{className:`text-xs ${c(d.difficulty)}`,children:d.difficulty})]}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Ec,{className:"w-4 h-4 text-yellow-500"}),w.jsxs("span",{className:"text-sm",children:["+",d.xpReward," XP"]})]}),w.jsx(vr,{size:"sm",onClick:()=>a(d),disabled:!f,className:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",children:p?"Retry":f?"Start":`Level ${d.requiredLevel}`})]})]})]},d.id)})}),n&&w.jsx(xI,{challenge:n,isCompleted:l(n.id),onClose:()=>a(null),onComplete:d=>{t(n.id,d),e.completedChallenges.length+1===3&&r("challenge-master")}})]})}const tf=[{id:"first-lesson",name:"First Steps",description:"Complete your first lesson",icon:w.jsx(wc,{className:"w-6 h-6"}),color:"from-blue-400 to-blue-600"},{id:"first-five",name:"Learning Streak",description:"Complete 5 lessons",icon:w.jsx(xc,{className:"w-6 h-6"}),color:"from-yellow-400 to-orange-500"},{id:"challenge-master",name:"Challenge Master",description:"Complete 3 challenges",icon:w.jsx(Wi,{className:"w-6 h-6"}),color:"from-purple-400 to-pink-600"},{id:"level-five",name:"Rising Star",description:"Reach Level 5",icon:w.jsx(Ec,{className:"w-6 h-6"}),color:"from-green-400 to-emerald-600"},{id:"perfect-score",name:"Perfectionist",description:"Get 100% on any quiz",icon:w.jsx(Mw,{className:"w-6 h-6"}),color:"from-red-400 to-pink-600"},{id:"week-streak",name:"Dedicated Learner",description:"Maintain a 7-day streak",icon:w.jsx(pp,{className:"w-6 h-6"}),color:"from-orange-400 to-red-600"}];function kI({userProgress:e}){const n=(e.completedLessons.length+e.completedChallenges.length)/10*100,a=tf.filter(c=>e.badges.includes(c.id)),o=tf.filter(c=>!e.badges.includes(c.id)),l=[{label:"Total XP",value:e.xp+(e.level-1)*100,icon:w.jsx(xc,{className:"w-5 h-5 text-yellow-500"})},{label:"Current Level",value:e.level,icon:w.jsx(Ec,{className:"w-5 h-5 text-purple-500"})},{label:"Lessons Completed",value:`${e.completedLessons.length}/5`,icon:w.jsx(wc,{className:"w-5 h-5 text-blue-500"})},{label:"Challenges Completed",value:`${e.completedChallenges.length}/5`,icon:w.jsx(bc,{className:"w-5 h-5 text-green-500"})},{label:"Current Streak",value:`${e.streak} days`,icon:w.jsx(pp,{className:"w-5 h-5 text-orange-500"})},{label:"Badges Earned",value:`${e.badges.length}/${tf.length}`,icon:w.jsx(hp,{className:"w-5 h-5 text-pink-500"})}];return w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl mb-2",children:"Your Profile"}),w.jsx("p",{className:"text-gray-600",children:"Track your learning journey and achievements"})]}),w.jsxs(ht,{children:[w.jsxs(kn,{children:[w.jsx(Tn,{children:"Overall Progress"}),w.jsxs(_c,{children:[e.completedLessons.length+e.completedChallenges.length," of ",10," activities completed"]})]}),w.jsxs(St,{children:[w.jsx(Nw,{value:n,className:"h-4"}),w.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[Math.round(n),"% Complete"]})]})]}),w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map((c,d)=>w.jsx(ht,{children:w.jsx(St,{className:"pt-6",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-sm text-gray-600 mb-1",children:c.label}),w.jsx("p",{className:"text-2xl",children:c.value})]}),w.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:c.icon})]})})},d))}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-xl mb-2",children:"Achievements"}),w.jsx("p",{className:"text-sm text-gray-600",children:"Collect badges by completing milestones"})]}),a.length>0&&w.jsxs("div",{children:[w.jsx("h4",{className:"mb-3 text-sm",children:"Earned Badges"}),w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(c=>w.jsx(ht,{className:"border-2 border-yellow-200 bg-gradient-to-br from-yellow-50 to-orange-50",children:w.jsx(St,{className:"pt-6",children:w.jsxs("div",{className:"flex items-start gap-4",children:[w.jsx("div",{className:`p-4 rounded-full bg-gradient-to-br ${c.color} text-white`,children:c.icon}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h4",{className:"mb-1",children:c.name}),w.jsx("p",{className:"text-xs text-gray-600",children:c.description}),w.jsx(Rr,{className:"mt-2 bg-green-500",children:"Unlocked"})]})]})})},c.id))})]}),o.length>0&&w.jsxs("div",{children:[w.jsx("h4",{className:"mb-3 text-sm text-gray-500",children:"Locked Badges"}),w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(c=>w.jsx(ht,{className:"opacity-60",children:w.jsx(St,{className:"pt-6",children:w.jsxs("div",{className:"flex items-start gap-4",children:[w.jsx("div",{className:"p-4 rounded-full bg-gray-200 text-gray-400",children:c.icon}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h4",{className:"mb-1 text-gray-600",children:c.name}),w.jsx("p",{className:"text-xs text-gray-500",children:c.description}),w.jsx(Rr,{variant:"outline",className:"mt-2",children:"Locked"})]})]})})},c.id))})]})]})]})}function TI({className:e,type:t,...r}){return w.jsx("input",{type:t,"data-slot":"input",className:pt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}function CI(e,[t,r]){return Math.min(r,Math.max(t,e))}function NI(e,t){return N.useReducer((r,n)=>t[r][n]??r,e)}var vp="ScrollArea",[bb]=so(vp),[II,Ar]=bb(vp),xb=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:o=600,...l}=e,[c,d]=N.useState(null),[f,p]=N.useState(null),[m,y]=N.useState(null),[_,b]=N.useState(null),[x,E]=N.useState(null),[I,O]=N.useState(0),[A,D]=N.useState(0),[H,Z]=N.useState(!1),[K,C]=N.useState(!1),ce=Gt(t,ke=>d(ke)),Ne=ap(a);return w.jsx(II,{scope:r,type:n,dir:Ne,scrollHideDelay:o,scrollArea:c,viewport:f,onViewportChange:p,content:m,onContentChange:y,scrollbarX:_,onScrollbarXChange:b,scrollbarXEnabled:H,onScrollbarXEnabledChange:Z,scrollbarY:x,onScrollbarYChange:E,scrollbarYEnabled:K,onScrollbarYEnabledChange:C,onCornerWidthChange:O,onCornerHeightChange:D,children:w.jsx(Tt.div,{dir:Ne,...l,ref:ce,style:{position:"relative","--radix-scroll-area-corner-width":I+"px","--radix-scroll-area-corner-height":A+"px",...e.style}})})});xb.displayName=vp;var Eb="ScrollAreaViewport",Sb=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...o}=e,l=Ar(Eb,r),c=N.useRef(null),d=Gt(t,c,l.onViewportChange);return w.jsxs(w.Fragment,{children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),w.jsx(Tt.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:w.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});Sb.displayName=Eb;var fn="ScrollAreaScrollbar",kb=N.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Ar(fn,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=a,c=e.orientation==="horizontal";return N.useEffect(()=>(c?o(!0):l(!0),()=>{c?o(!1):l(!1)}),[c,o,l]),a.type==="hover"?w.jsx(RI,{...n,ref:t,forceMount:r}):a.type==="scroll"?w.jsx(AI,{...n,ref:t,forceMount:r}):a.type==="auto"?w.jsx(Tb,{...n,ref:t,forceMount:r}):a.type==="always"?w.jsx(_p,{...n,ref:t}):null});kb.displayName=fn;var RI=N.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Ar(fn,e.__scopeScrollArea),[o,l]=N.useState(!1);return N.useEffect(()=>{const c=a.scrollArea;let d=0;if(c){const f=()=>{window.clearTimeout(d),l(!0)},p=()=>{d=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return c.addEventListener("pointerenter",f),c.addEventListener("pointerleave",p),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",f),c.removeEventListener("pointerleave",p)}}},[a.scrollArea,a.scrollHideDelay]),w.jsx(jn,{present:r||o,children:w.jsx(Tb,{"data-state":o?"visible":"hidden",...n,ref:t})})}),AI=N.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Ar(fn,e.__scopeScrollArea),o=e.orientation==="horizontal",l=Cc(()=>d("SCROLL_END"),100),[c,d]=NI("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(c==="idle"){const f=window.setTimeout(()=>d("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(f)}},[c,a.scrollHideDelay,d]),N.useEffect(()=>{const f=a.viewport,p=o?"scrollLeft":"scrollTop";if(f){let m=f[p];const y=()=>{const _=f[p];m!==_&&(d("SCROLL"),l()),m=_};return f.addEventListener("scroll",y),()=>f.removeEventListener("scroll",y)}},[a.viewport,o,d,l]),w.jsx(jn,{present:r||c!=="hidden",children:w.jsx(_p,{"data-state":c==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:ut(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:ut(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),Tb=N.forwardRef((e,t)=>{const r=Ar(fn,e.__scopeScrollArea),{forceMount:n,...a}=e,[o,l]=N.useState(!1),c=e.orientation==="horizontal",d=Cc(()=>{if(r.viewport){const f=r.viewport.offsetWidth<r.viewport.scrollWidth,p=r.viewport.offsetHeight<r.viewport.scrollHeight;l(c?f:p)}},10);return Aa(r.viewport,d),Aa(r.content,d),w.jsx(jn,{present:n||o,children:w.jsx(_p,{"data-state":o?"visible":"hidden",...a,ref:t})})}),_p=N.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=Ar(fn,e.__scopeScrollArea),o=N.useRef(null),l=N.useRef(0),[c,d]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=Ab(c.viewport,c.content),p={...n,sizes:c,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:y=>o.current=y,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:y=>l.current=y};function m(y,_){return MI(y,l.current,c,_)}return r==="horizontal"?w.jsx(OI,{...p,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const y=a.viewport.scrollLeft,_=Av(y,c,a.dir);o.current.style.transform=`translate3d(${_}px, 0, 0)`}},onWheelScroll:y=>{a.viewport&&(a.viewport.scrollLeft=y)},onDragScroll:y=>{a.viewport&&(a.viewport.scrollLeft=m(y,a.dir))}}):r==="vertical"?w.jsx(PI,{...p,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const y=a.viewport.scrollTop,_=Av(y,c);o.current.style.transform=`translate3d(0, ${_}px, 0)`}},onWheelScroll:y=>{a.viewport&&(a.viewport.scrollTop=y)},onDragScroll:y=>{a.viewport&&(a.viewport.scrollTop=m(y))}}):null}),OI=N.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,o=Ar(fn,e.__scopeScrollArea),[l,c]=N.useState(),d=N.useRef(null),f=Gt(t,d,o.onScrollbarXChange);return N.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),w.jsx(Nb,{"data-orientation":"horizontal",...a,ref:f,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Tc(r)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.x),onDragScroll:p=>e.onDragScroll(p.x),onWheelScroll:(p,m)=>{if(o.viewport){const y=o.viewport.scrollLeft+p.deltaX;e.onWheelScroll(y),Pb(y,m)&&p.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Xl(l.paddingLeft),paddingEnd:Xl(l.paddingRight)}})}})}),PI=N.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,o=Ar(fn,e.__scopeScrollArea),[l,c]=N.useState(),d=N.useRef(null),f=Gt(t,d,o.onScrollbarYChange);return N.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),w.jsx(Nb,{"data-orientation":"vertical",...a,ref:f,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Tc(r)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.y),onDragScroll:p=>e.onDragScroll(p.y),onWheelScroll:(p,m)=>{if(o.viewport){const y=o.viewport.scrollTop+p.deltaY;e.onWheelScroll(y),Pb(y,m)&&p.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Xl(l.paddingTop),paddingEnd:Xl(l.paddingBottom)}})}})}),[$I,Cb]=bb(fn),Nb=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:p,onResize:m,...y}=e,_=Ar(fn,r),[b,x]=N.useState(null),E=Gt(t,ce=>x(ce)),I=N.useRef(null),O=N.useRef(""),A=_.viewport,D=n.content-n.viewport,H=ur(p),Z=ur(d),K=Cc(m,10);function C(ce){if(I.current){const Ne=ce.clientX-I.current.left,ke=ce.clientY-I.current.top;f({x:Ne,y:ke})}}return N.useEffect(()=>{const ce=Ne=>{const ke=Ne.target;b?.contains(ke)&&H(Ne,D)};return document.addEventListener("wheel",ce,{passive:!1}),()=>document.removeEventListener("wheel",ce,{passive:!1})},[A,b,D,H]),N.useEffect(Z,[n,Z]),Aa(b,K),Aa(_.content,K),w.jsx($I,{scope:r,scrollbar:b,hasThumb:a,onThumbChange:ur(o),onThumbPointerUp:ur(l),onThumbPositionChange:Z,onThumbPointerDown:ur(c),children:w.jsx(Tt.div,{...y,ref:E,style:{position:"absolute",...y.style},onPointerDown:ut(e.onPointerDown,ce=>{ce.button===0&&(ce.target.setPointerCapture(ce.pointerId),I.current=b.getBoundingClientRect(),O.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",_.viewport&&(_.viewport.style.scrollBehavior="auto"),C(ce))}),onPointerMove:ut(e.onPointerMove,C),onPointerUp:ut(e.onPointerUp,ce=>{const Ne=ce.target;Ne.hasPointerCapture(ce.pointerId)&&Ne.releasePointerCapture(ce.pointerId),document.body.style.webkitUserSelect=O.current,_.viewport&&(_.viewport.style.scrollBehavior=""),I.current=null})})})}),Yl="ScrollAreaThumb",Ib=N.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Cb(Yl,e.__scopeScrollArea);return w.jsx(jn,{present:r||a.hasThumb,children:w.jsx(jI,{ref:t,...n})})}),jI=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,o=Ar(Yl,r),l=Cb(Yl,r),{onThumbPositionChange:c}=l,d=Gt(t,m=>l.onThumbChange(m)),f=N.useRef(void 0),p=Cc(()=>{f.current&&(f.current(),f.current=void 0)},100);return N.useEffect(()=>{const m=o.viewport;if(m){const y=()=>{if(p(),!f.current){const _=DI(m,c);f.current=_,c()}};return c(),m.addEventListener("scroll",y),()=>m.removeEventListener("scroll",y)}},[o.viewport,p,c]),w.jsx(Tt.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ut(e.onPointerDownCapture,m=>{const _=m.target.getBoundingClientRect(),b=m.clientX-_.left,x=m.clientY-_.top;l.onThumbPointerDown({x:b,y:x})}),onPointerUp:ut(e.onPointerUp,l.onThumbPointerUp)})});Ib.displayName=Yl;var wp="ScrollAreaCorner",Rb=N.forwardRef((e,t)=>{const r=Ar(wp,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?w.jsx(LI,{...e,ref:t}):null});Rb.displayName=wp;var LI=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=Ar(wp,r),[o,l]=N.useState(0),[c,d]=N.useState(0),f=!!(o&&c);return Aa(a.scrollbarX,()=>{const p=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(p),d(p)}),Aa(a.scrollbarY,()=>{const p=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(p),l(p)}),f?w.jsx(Tt.div,{...n,ref:t,style:{width:o,height:c,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Xl(e){return e?parseInt(e,10):0}function Ab(e,t){const r=e/t;return isNaN(r)?0:r}function Tc(e){const t=Ab(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function MI(e,t,r,n="ltr"){const a=Tc(r),o=a/2,l=t||o,c=a-l,d=r.scrollbar.paddingStart+l,f=r.scrollbar.size-r.scrollbar.paddingEnd-c,p=r.content-r.viewport,m=n==="ltr"?[0,p]:[p*-1,0];return Ob([d,f],m)(e)}function Av(e,t,r="ltr"){const n=Tc(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-a,l=t.content-t.viewport,c=o-n,d=r==="ltr"?[0,l]:[l*-1,0],f=CI(e,d);return Ob([0,l],[0,c])(f)}function Ob(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Pb(e,t){return e>0&&e<t}var DI=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return(function a(){const o={left:e.scrollLeft,top:e.scrollTop},l=r.left!==o.left,c=r.top!==o.top;(l||c)&&t(),r=o,n=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(n)};function Cc(e,t){const r=ur(e),n=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),N.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Aa(e,t){const r=ur(t);Rn(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var zI=xb,FI=Sb,UI=Rb;function BI({className:e,children:t,...r}){return w.jsxs(zI,{"data-slot":"scroll-area",className:pt("relative",e),...r,children:[w.jsx(FI,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),w.jsx(VI,{}),w.jsx(UI,{})]})}function VI({className:e,orientation:t="vertical",...r}){return w.jsx(kb,{"data-slot":"scroll-area-scrollbar",orientation:t,className:pt("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...r,children:w.jsx(Ib,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var HI=Object.defineProperty,We=(e,t)=>{for(var r in t)HI(e,r,{get:t[r],enumerable:!0})};function gs(e){return typeof e=="object"&&e!==null&&"type"in e&&typeof e.type=="string"&&"source_type"in e&&(e.source_type==="url"||e.source_type==="base64"||e.source_type==="text"||e.source_type==="id")}function bp(e){return gs(e)&&e.source_type==="url"&&"url"in e&&typeof e.url=="string"}function xp(e){return gs(e)&&e.source_type==="base64"&&"data"in e&&typeof e.data=="string"}function GI(e){return gs(e)&&e.source_type==="text"&&"text"in e&&typeof e.text=="string"}function $b(e){return gs(e)&&e.source_type==="id"&&"id"in e&&typeof e.id=="string"}function jb(e){if(gs(e)){if(e.source_type==="url")return{type:"image_url",image_url:{url:e.url}};if(e.source_type==="base64"){if(!e.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${e.mime_type};base64,${e.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function qI(e){const t=e.split(";")[0].split("/");if(t.length!==2)throw new Error(`Invalid mime type: "${e}" - does not match type/subtype format.`);const r=t[0].trim(),n=t[1].trim();if(r===""||n==="")throw new Error(`Invalid mime type: "${e}" - type or subtype is empty.`);const a={};for(const o of e.split(";").slice(1)){const l=o.split("=");if(l.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${e}".`);const c=l[0].trim(),d=l[1].trim();if(c==="")throw new Error(`Invalid parameter syntax in mime type: "${e}".`);a[c]=d}return{type:r,subtype:n,parameters:a}}function Th({dataUrl:e,asTypedArray:t=!1}){const r=e.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let n;if(r){n=r[1].toLowerCase();const a=t?Uint8Array.from(atob(r[2]),o=>o.charCodeAt(0)):r[2];return{mime_type:n,data:a}}}function WI(e,t){if(e.type==="text"){if(!t.fromStandardTextBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardTextBlock\` method.`);return t.fromStandardTextBlock(e)}if(e.type==="image"){if(!t.fromStandardImageBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardImageBlock\` method.`);return t.fromStandardImageBlock(e)}if(e.type==="audio"){if(!t.fromStandardAudioBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardAudioBlock\` method.`);return t.fromStandardAudioBlock(e)}if(e.type==="file"){if(!t.fromStandardFileBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardFileBlock\` method.`);return t.fromStandardFileBlock(e)}throw new Error(`Unable to convert content block type '${e.type}' to provider-specific format: not recognized.`)}function Lb(e){return typeof e=="object"&&e!==null&&"type"in e&&"content"in e&&(typeof e.content=="string"||Array.isArray(e.content))}var rf,Ov;function ZI(){return Ov||(Ov=1,rf=function(e,t){if(typeof e!="string")throw new TypeError("Expected a string");return t=typeof t>"u"?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}),rf}var KI=ZI();const JI=Gs(KI);var Al={exports:{}},Pv;function YI(){if(Pv)return Al.exports;Pv=1;const e=/[\p{Lu}]/u,t=/[\p{Ll}]/u,r=/^[\p{Lu}](?![\p{Lu}])/gu,n=/([\p{Alpha}\p{N}_]|$)/u,a=/[_.\- ]+/,o=new RegExp("^"+a.source),l=new RegExp(a.source+n.source,"gu"),c=new RegExp("\\d+"+n.source,"gu"),d=(y,_,b)=>{let x=!1,E=!1,I=!1;for(let O=0;O<y.length;O++){const A=y[O];x&&e.test(A)?(y=y.slice(0,O)+"-"+y.slice(O),x=!1,I=E,E=!0,O++):E&&I&&t.test(A)?(y=y.slice(0,O-1)+"-"+y.slice(O-1),I=E,E=!1,x=!0):(x=_(A)===A&&b(A)!==A,I=E,E=b(A)===A&&_(A)!==A)}return y},f=(y,_)=>(r.lastIndex=0,y.replace(r,b=>_(b))),p=(y,_)=>(l.lastIndex=0,c.lastIndex=0,y.replace(l,(b,x)=>_(x)).replace(c,b=>_(b))),m=(y,_)=>{if(!(typeof y=="string"||Array.isArray(y)))throw new TypeError("Expected the input to be `string | string[]`");if(_={pascalCase:!1,preserveConsecutiveUppercase:!1,..._},Array.isArray(y)?y=y.map(I=>I.trim()).filter(I=>I.length).join("-"):y=y.trim(),y.length===0)return"";const b=_.locale===!1?I=>I.toLowerCase():I=>I.toLocaleLowerCase(_.locale),x=_.locale===!1?I=>I.toUpperCase():I=>I.toLocaleUpperCase(_.locale);return y.length===1?_.pascalCase?x(y):b(y):(y!==b(y)&&(y=d(y,b,x)),y=y.replace(o,""),_.preserveConsecutiveUppercase?y=f(y,b):y=b(y),_.pascalCase&&(y=x(y.charAt(0))+y.slice(1)),p(y,x))};return Al.exports=m,Al.exports.default=m,Al.exports}YI();function XI(e,t){return t?.[e]||JI(e)}function QI(e,t,r){const n={};for(const a in e)Object.hasOwn(e,a)&&(n[t(a,r)]=e[a]);return n}var eR={};We(eR,{Serializable:()=>Oa,get_lc_unique_name:()=>Ep});function $v(e){return Array.isArray(e)?[...e]:{...e}}function tR(e,t){const r=$v(e);for(const[n,a]of Object.entries(t)){const[o,...l]=n.split(".").reverse();let c=r;for(const d of l.reverse()){if(c[d]===void 0)break;c[d]=$v(c[d]),c=c[d]}c[o]!==void 0&&(c[o]={lc:1,type:"secret",id:[a]})}return r}function Ep(e){const t=Object.getPrototypeOf(e);return typeof e.lc_name=="function"&&(typeof t.lc_name!="function"||e.lc_name()!==t.lc_name())?e.lc_name():e.name}var Oa=class Mb{lc_serializable=!1;lc_kwargs;static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Ep(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(t,...r){this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(t||{}).filter(([n])=>this.lc_serializable_keys?.includes(n))):this.lc_kwargs=t??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Mb||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const t={},r={},n=Object.keys(this.lc_kwargs).reduce((a,o)=>(a[o]=o in this?this[o]:this.lc_kwargs[o],a),{});for(let a=Object.getPrototypeOf(this);a;a=Object.getPrototypeOf(a))Object.assign(t,Reflect.get(a,"lc_aliases",this)),Object.assign(r,Reflect.get(a,"lc_secrets",this)),Object.assign(n,Reflect.get(a,"lc_attributes",this));return Object.keys(r).forEach(a=>{let o=this,l=n;const[c,...d]=a.split(".").reverse();for(const f of d.reverse()){if(!(f in o)||o[f]===void 0)return;(!(f in l)||l[f]===void 0)&&(typeof o[f]=="object"&&o[f]!=null?l[f]={}:Array.isArray(o[f])&&(l[f]=[])),o=o[f],l=l[f]}c in o&&o[c]!==void 0&&(l[c]=l[c]||o[c])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:QI(Object.keys(r).length?tR(n,r):n,XI,t)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};function Ie(e,t){return Me(e)&&e.type===t}function Me(e){return typeof e=="object"&&e!==null}function cn(e){return Array.isArray(e)}function me(e){return typeof e=="string"}function Hr(e){return typeof e=="number"}function Sp(e){return e instanceof Uint8Array}function jv(e){try{return JSON.parse(e)}catch{return}}const Zi=e=>e();function rR(e){if(e.type==="char_location"&&me(e.document_title)&&Hr(e.start_char_index)&&Hr(e.end_char_index)&&me(e.cited_text)){const{document_title:t,start_char_index:r,end_char_index:n,cited_text:a,...o}=e;return{...o,type:"citation",source:"char",title:t??void 0,startIndex:r,endIndex:n,citedText:a}}if(e.type==="page_location"&&me(e.document_title)&&Hr(e.start_page_number)&&Hr(e.end_page_number)&&me(e.cited_text)){const{document_title:t,start_page_number:r,end_page_number:n,cited_text:a,...o}=e;return{...o,type:"citation",source:"page",title:t??void 0,startIndex:r,endIndex:n,citedText:a}}if(e.type==="content_block_location"&&me(e.document_title)&&Hr(e.start_block_index)&&Hr(e.end_block_index)&&me(e.cited_text)){const{document_title:t,start_block_index:r,end_block_index:n,cited_text:a,...o}=e;return{...o,type:"citation",source:"block",title:t??void 0,startIndex:r,endIndex:n,citedText:a}}if(e.type==="web_search_result_location"&&me(e.url)&&me(e.title)&&me(e.encrypted_index)&&me(e.cited_text)){const{url:t,title:r,encrypted_index:n,cited_text:a,...o}=e;return{...o,type:"citation",source:"url",url:t,title:r,startIndex:Number(n),endIndex:Number(n),citedText:a}}if(e.type==="search_result_location"&&me(e.source)&&me(e.title)&&Hr(e.start_block_index)&&Hr(e.end_block_index)&&me(e.cited_text)){const{source:t,title:r,start_block_index:n,end_block_index:a,cited_text:o,...l}=e;return{...l,type:"citation",source:"search",url:t,title:r??void 0,startIndex:n,endIndex:a,citedText:o}}}function Db(e){if(Ie(e,"document")&&Me(e.source)&&"type"in e.source){if(e.source.type==="base64"&&me(e.source.media_type)&&me(e.source.data))return{type:"file",mimeType:e.source.media_type,data:e.source.data};if(e.source.type==="url"&&me(e.source.url))return{type:"file",url:e.source.url};if(e.source.type==="file"&&me(e.source.file_id))return{type:"file",fileId:e.source.file_id};if(e.source.type==="text"&&me(e.source.data))return{type:"file",mimeType:String(e.source.media_type??"text/plain"),data:e.source.data}}else if(Ie(e,"image")&&Me(e.source)&&"type"in e.source){if(e.source.type==="base64"&&me(e.source.media_type)&&me(e.source.data))return{type:"image",mimeType:e.source.media_type,data:e.source.data};if(e.source.type==="url"&&me(e.source.url))return{type:"image",url:e.source.url};if(e.source.type==="file"&&me(e.source.file_id))return{type:"image",fileId:e.source.file_id}}}function nR(e){function*t(){for(const r of e){const n=Db(r);n?yield n:yield r}}return Array.from(t())}function Lv(e){function*t(){const r=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const n of r){if(Ie(n,"text")&&me(n.text)){const{text:a,citations:o,...l}=n;if(cn(o)&&o.length){const c=o.reduce((d,f)=>{const p=rR(f);return p?[...d,p]:d},[]);yield{...l,type:"text",text:a,annotations:c};continue}else{yield{...l,type:"text",text:a};continue}}else if(Ie(n,"thinking")&&me(n.thinking)){const{thinking:a,signature:o,...l}=n;yield{...l,type:"reasoning",reasoning:a,signature:o};continue}else if(Ie(n,"redacted_thinking")){yield{type:"non_standard",value:n};continue}else if(Ie(n,"tool_use")&&me(n.name)&&me(n.id)){yield{type:"tool_call",id:n.id,name:n.name,args:n.input};continue}else if(Ie(n,"input_json_delta")){if(aR(e)&&e.tool_call_chunks?.length){const a=e.tool_call_chunks[0];yield{type:"tool_call_chunk",id:a.id,name:a.name,args:a.args,index:a.index};continue}}else if(Ie(n,"server_tool_use")&&me(n.name)&&me(n.id)){const{name:a,id:o}=n;if(a==="web_search"){const l=Zi(()=>{if(typeof n.input=="string")return n.input;if(Me(n.input)&&me(n.input.query))return n.input.query;if(me(n.partial_json)){const c=jv(n.partial_json);if(c?.query)return c.query}return""});yield{id:o,type:"server_tool_call",name:"web_search",args:{query:l}};continue}else if(n.name==="code_execution"){const l=Zi(()=>{if(typeof n.input=="string")return n.input;if(Me(n.input)&&me(n.input.code))return n.input.code;if(me(n.partial_json)){const c=jv(n.partial_json);if(c?.code)return c.code}return""});yield{id:o,type:"server_tool_call",name:"code_execution",args:{code:l}};continue}}else if(Ie(n,"web_search_tool_result")&&me(n.tool_use_id)&&cn(n.content)){const{content:a,tool_use_id:o}=n,l=a.reduce((c,d)=>Ie(d,"web_search_result")?[...c,d.url]:c,[]);yield{type:"server_tool_call_result",name:"web_search",toolCallId:o,status:"success",output:{urls:l}};continue}else if(Ie(n,"code_execution_tool_result")&&me(n.tool_use_id)&&Me(n.content)){yield{type:"server_tool_call_result",name:"code_execution",toolCallId:n.tool_use_id,status:"success",output:n.content};continue}else if(Ie(n,"mcp_tool_use")){yield{id:n.id,type:"server_tool_call",name:"mcp_tool_use",args:n.input};continue}else if(Ie(n,"mcp_tool_result")&&me(n.tool_use_id)&&Me(n.content)){yield{type:"server_tool_call_result",name:"mcp_tool_use",toolCallId:n.tool_use_id,status:"success",output:n.content};continue}else if(Ie(n,"container_upload")){yield{type:"server_tool_call",name:"container_upload",args:n.input};continue}else if(Ie(n,"search_result")){yield{id:n.id,type:"non_standard",value:n};continue}else if(Ie(n,"tool_result")){yield{id:n.id,type:"non_standard",value:n};continue}else{const a=Db(n);if(a){yield a;continue}}yield{type:"non_standard",value:n}}}return Array.from(t())}const sR={translateContent:Lv,translateContentChunk:Lv};function aR(e){return typeof e?._getType=="function"&&typeof e.concat=="function"&&e._getType()==="ai"}function iR(e){return bp(e)?{type:e.type,mimeType:e.mime_type,url:e.url,metadata:e.metadata}:xp(e)?{type:e.type,mimeType:e.mime_type??"application/octet-stream",data:e.data,metadata:e.metadata}:$b(e)?{type:e.type,mimeType:e.mime_type,fileId:e.id,metadata:e.metadata}:e}function oR(e){return e.map(iR)}function lR(e){return!!(Ie(e,"image_url")&&Me(e.image_url)||Ie(e,"input_audio")&&Me(e.input_audio)||Ie(e,"file")&&Me(e.file))}function cR(e){if(Ie(e,"image_url")&&Me(e.image_url)&&me(e.image_url.url)){const t=Th({dataUrl:e.image_url.url});return t?{type:"image",mimeType:t.mime_type,data:t.data}:{type:"image",url:e.image_url.url}}else{if(Ie(e,"input_audio")&&Me(e.input_audio)&&me(e.input_audio.data)&&me(e.input_audio.format))return{type:"audio",data:e.input_audio.data,mimeType:`audio/${e.input_audio.format}`};if(Ie(e,"file")&&Me(e.file)&&me(e.file.data)){const t=Th({dataUrl:e.file.data});if(t)return{type:"file",data:t.data,mimeType:t.mime_type};if(me(e.file.file_id))return{type:"file",fileId:e.file.file_id}}}return e}function uR(e){const t=[];typeof e.content=="string"?t.push({type:"text",text:e.content}):t.push(...kp(e.content));for(const r of e.tool_calls??[])t.push({type:"tool_call",id:r.id,name:r.name,args:r.args});return t}function dR(e){const t=[];typeof e.content=="string"?t.push({type:"text",text:e.content}):t.push(...kp(e.content));for(const r of e.tool_calls??[])t.push({type:"tool_call",id:r.id,name:r.name,args:r.args});return t}function kp(e){const t=[];for(const r of e)lR(r)?t.push(cR(r)):t.push(r);return t}function fR(e){if(e.type==="url_citation"){const{url:t,title:r,start_index:n,end_index:a}=e;return{type:"citation",url:t,title:r,startIndex:n,endIndex:a}}if(e.type==="file_citation"){const{file_id:t,filename:r,index:n}=e;return{type:"citation",title:r,startIndex:n,endIndex:n,fileId:t}}return e}function zb(e){function*t(){Me(e.additional_kwargs?.reasoning)&&cn(e.additional_kwargs.reasoning.summary)&&(yield{type:"reasoning",reasoning:e.additional_kwargs.reasoning.summary.reduce((a,o)=>Me(o)&&me(o.text)?`${a}${o.text}`:a,"")});const r=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const n of r)if(Ie(n,"text")){const{text:a,annotations:o,...l}=n;Array.isArray(o)?yield{...l,type:"text",text:String(a),annotations:o.map(fR)}:yield{...l,type:"text",text:String(a)}}for(const n of e.tool_calls??[])yield{type:"tool_call",id:n.id,name:n.name,args:n.args};if(Me(e.additional_kwargs)&&cn(e.additional_kwargs.tool_outputs))for(const n of e.additional_kwargs.tool_outputs){if(Ie(n,"web_search_call")){yield{id:n.id,type:"server_tool_call",name:"web_search",args:{query:n.query}};continue}else if(Ie(n,"file_search_call")){yield{id:n.id,type:"server_tool_call",name:"file_search",args:{query:n.query}};continue}else if(Ie(n,"computer_call")){yield{type:"non_standard",value:n};continue}else if(Ie(n,"code_interpreter_call")){if(me(n.code)&&(yield{id:n.id,type:"server_tool_call",name:"code_interpreter",args:{code:n.code}}),cn(n.outputs)){const a=Zi(()=>{if(n.status!=="in_progress"){if(n.status==="completed")return 0;if(n.status==="incomplete")return 127;if(n.status!=="interpreting"&&n.status==="failed")return 1}});for(const o of n.outputs)if(Ie(o,"logs")){yield{type:"server_tool_call_result",toolCallId:n.id??"",status:"success",output:{type:"code_interpreter_output",returnCode:a??0,stderr:[0,void 0].includes(a)?void 0:String(o.logs),stdout:[0,void 0].includes(a)?String(o.logs):void 0}};continue}}continue}else if(Ie(n,"mcp_call")){yield{id:n.id,type:"server_tool_call",name:"mcp_call",args:n.input};continue}else if(Ie(n,"mcp_list_tools")){yield{id:n.id,type:"server_tool_call",name:"mcp_list_tools",args:n.input};continue}else if(Ie(n,"mcp_approval_request")){yield{type:"non_standard",value:n};continue}else if(Ie(n,"image_generation_call")){yield{type:"non_standard",value:n};continue}Me(n)&&(yield{type:"non_standard",value:n})}}return Array.from(t())}function hR(e){function*t(){yield*zb(e);for(const r of e.tool_call_chunks??[])yield{type:"tool_call_chunk",id:r.id,name:r.name,args:r.args}}return Array.from(t())}const pR={translateContent:e=>typeof e.content=="string"?uR(e):zb(e),translateContentChunk:e=>typeof e.content=="string"?dR(e):hR(e)};function mR(e,t="pretty"){return t==="pretty"?gR(e):JSON.stringify(e)}function gR(e){const t=[],r=` ${e.type.charAt(0).toUpperCase()+e.type.slice(1)} Message `,n=Math.floor((80-r.length)/2),a="=".repeat(n),o=r.length%2===0?a:`${a}=`;if(t.push(`${a}${r}${o}`),e.type==="ai"){const l=e;if(l.tool_calls&&l.tool_calls.length>0){t.push("Tool Calls:");for(const c of l.tool_calls){t.push(`  ${c.name} (${c.id})`),t.push(` Call ID: ${c.id}`),t.push("  Args:");for(const[d,f]of Object.entries(c.args))t.push(`    ${d}: ${f}`)}}}if(e.type==="tool"){const l=e;l.name&&t.push(`Name: ${l.name}`)}return typeof e.content=="string"&&e.content.trim()&&(t.length>1&&t.push(""),t.push(e.content)),t.join(`
`)}const nf=Symbol.for("langchain.message");function qs(e,t){return typeof e=="string"?e===""?t:typeof t=="string"?e+t:Array.isArray(t)&&t.some(r=>gs(r))?[{type:"text",source_type:"text",text:e},...t]:[{type:"text",text:e},...t]:Array.isArray(t)?oo(e,t)??[...e,...t]:t===""?e:Array.isArray(e)&&e.some(r=>gs(r))?[...e,{type:"file",source_type:"text",text:t}]:[...e,{type:"text",text:t}]}function Fb(e,t){return e==="error"||t==="error"?"error":"success"}function yR(e,t){function r(n,a){if(typeof n!="object"||n===null||n===void 0)return n;if(a>=t)return Array.isArray(n)?"[Array]":"[Object]";if(Array.isArray(n))return n.map(l=>r(l,a+1));const o={};for(const l of Object.keys(n))o[l]=r(n[l],a+1);return o}return JSON.stringify(r(e,0),null,2)}var Ln=class extends Oa{lc_namespace=["langchain_core","messages"];lc_serializable=!0;get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}[nf]=!0;id;name;content;additional_kwargs;response_metadata;_getType(){return this.type}getType(){return this._getType()}constructor(e){const t=typeof e=="string"||Array.isArray(e)?{content:e}:e;t.additional_kwargs||(t.additional_kwargs={}),t.response_metadata||(t.response_metadata={}),super(t),this.name=t.name,t.content===void 0&&t.contentBlocks!==void 0?(this.content=t.contentBlocks,this.response_metadata={output_version:"v1",...t.response_metadata}):t.content!==void 0?(this.content=t.content??[],this.response_metadata=t.response_metadata):(this.content=[],this.response_metadata=t.response_metadata),this.additional_kwargs=t.additional_kwargs,this.id=t.id}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}get contentBlocks(){const e=typeof this.content=="string"?[{type:"text",text:this.content}]:this.content;return[oR,kp,nR].reduce((n,a)=>a(n),e)}toDict(){return{type:this.getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}static isInstance(e){return typeof e=="object"&&e!==null&&nf in e&&e[nf]===!0&&Lb(e)}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const t=yR(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${t}`}toFormattedString(e="pretty"){return mR(this,e)}};function vR(e){return Array.isArray(e)&&e.every(t=>typeof t.index=="number")}function qt(e={},t={}){const r={...e};for(const[n,a]of Object.entries(t))if(r[n]==null)r[n]=a;else{if(a==null)continue;if(typeof r[n]!=typeof a||Array.isArray(r[n])!==Array.isArray(a))throw new Error(`field[${n}] already exists in the message chunk, but with a different type.`);if(typeof r[n]=="string"){if(n==="type")continue;["id","name","output_version","model_provider"].includes(n)?r[n]=a:r[n]+=a}else if(typeof r[n]=="object"&&!Array.isArray(r[n]))r[n]=qt(r[n],a);else if(Array.isArray(r[n]))r[n]=oo(r[n],a);else{if(r[n]===a)continue;console.warn(`field[${n}] already exists in this message chunk and value has unsupported type.`)}}return r}function oo(e,t){if(!(e===void 0&&t===void 0)){if(e===void 0||t===void 0)return e||t;{const r=[...e];for(const n of t)if(typeof n=="object"&&n!==null&&"index"in n&&typeof n.index=="number"){const a=r.findIndex(o=>{const l=typeof o=="object",c="index"in o&&o.index===n.index,d="id"in o&&"id"in n&&o?.id===n?.id,f=!("id"in o)||!o?.id||!("id"in n)||!n?.id;return l&&c&&(d||f)});a!==-1&&typeof r[a]=="object"&&r[a]!==null?r[a]=qt(r[a],n):r.push(n)}else{if(typeof n=="object"&&n!==null&&"text"in n&&n.text==="")continue;r.push(n)}return r}}}function Ub(e,t){if(!e&&!t)throw new Error("Cannot merge two undefined objects.");if(!e||!t)return e||t;if(typeof e!=typeof t)throw new Error(`Cannot merge objects of different types.
Left ${typeof e}
Right ${typeof t}`);if(typeof e=="string"&&typeof t=="string")return e+t;if(Array.isArray(e)&&Array.isArray(t))return oo(e,t);if(typeof e=="object"&&typeof t=="object")return qt(e,t);if(e===t)return e;throw new Error(`Can not merge objects of different types.
Left ${e}
Right ${t}`)}var Ws=class extends Ln{static isInstance(e){return super.isInstance(e)&&"concat"in e&&typeof e.concat=="function"}};function Bb(e){return typeof e.role=="string"}function Cn(e){return typeof e?._getType=="function"}function Tp(e){return Cn(e)&&typeof e.concat=="function"}function Vb(e,t){return qt(e??{},t??{})}function Hb(e,t){const r={};return(e?.audio!==void 0||t?.audio!==void 0)&&(r.audio=(e?.audio??0)+(t?.audio??0)),(e?.image!==void 0||t?.image!==void 0)&&(r.image=(e?.image??0)+(t?.image??0)),(e?.video!==void 0||t?.video!==void 0)&&(r.video=(e?.video??0)+(t?.video??0)),(e?.document!==void 0||t?.document!==void 0)&&(r.document=(e?.document??0)+(t?.document??0)),(e?.text!==void 0||t?.text!==void 0)&&(r.text=(e?.text??0)+(t?.text??0)),r}function _R(e,t){const r={...Hb(e,t)};return(e?.cache_read!==void 0||t?.cache_read!==void 0)&&(r.cache_read=(e?.cache_read??0)+(t?.cache_read??0)),(e?.cache_creation!==void 0||t?.cache_creation!==void 0)&&(r.cache_creation=(e?.cache_creation??0)+(t?.cache_creation??0)),r}function wR(e,t){const r={...Hb(e,t)};return(e?.reasoning!==void 0||t?.reasoning!==void 0)&&(r.reasoning=(e?.reasoning??0)+(t?.reasoning??0)),r}function Gb(e,t){return{input_tokens:(e?.input_tokens??0)+(t?.input_tokens??0),output_tokens:(e?.output_tokens??0)+(t?.output_tokens??0),total_tokens:(e?.total_tokens??0)+(t?.total_tokens??0),input_token_details:_R(e?.input_token_details,t?.input_token_details),output_token_details:wR(e?.output_token_details,t?.output_token_details)}}var bR={};We(bR,{ToolMessage:()=>ys,ToolMessageChunk:()=>Nc,defaultToolCallParser:()=>Np,isDirectToolOutput:()=>Cp,isToolMessage:()=>qb,isToolMessageChunk:()=>Wb});function Cp(e){return e!=null&&typeof e=="object"&&"lc_direct_tool_output"in e&&e.lc_direct_tool_output===!0}var ys=class extends Ln{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}lc_direct_tool_output=!0;type="tool";status;tool_call_id;metadata;artifact;constructor(e,t,r){const n=typeof e=="string"||Array.isArray(e)?{content:e,name:r,tool_call_id:t}:e;super(n),this.tool_call_id=n.tool_call_id,this.artifact=n.artifact,this.status=n.status,this.metadata=n.metadata}static isInstance(e){return super.isInstance(e)&&e.type==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}},Nc=class extends Ws{type="tool";tool_call_id;status;artifact;constructor(e){super(e),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}concat(e){const t=this.constructor;return new t({content:qs(this.content,e.content),additional_kwargs:qt(this.additional_kwargs,e.additional_kwargs),response_metadata:qt(this.response_metadata,e.response_metadata),artifact:Ub(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:Fb(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};function Np(e){const t=[],r=[];for(const n of e)if(n.function){const a=n.function.name;try{const o=JSON.parse(n.function.arguments);t.push({name:a||"",args:o||{},id:n.id})}catch{r.push({name:a,args:n.function.arguments,id:n.id,error:"Malformed args."})}}else continue;return[t,r]}function qb(e){return typeof e=="object"&&e!==null&&"getType"in e&&typeof e.getType=="function"&&e.getType()==="tool"}function Wb(e){return e._getType()==="tool"}function Ch(e,t=Ic){e=e.trim();const r=e.indexOf("```");if(r===-1)return t(e);let n=e.substring(r+3);n.startsWith(`json
`)?n=n.substring(5):n.startsWith("json")?n=n.substring(4):n.startsWith(`
`)&&(n=n.substring(1));const a=n.indexOf("```");let o=n;return a!==-1&&(o=n.substring(0,a)),t(o.trim())}function Ic(e){if(typeof e>"u")return null;try{return JSON.parse(e)}catch{}let t="";const r=[];let n=!1,a=!1;for(let o of e){if(n)o==='"'&&!a?n=!1:o===`
`&&!a?o="\\n":o==="\\"?a=!a:a=!1;else if(o==='"')n=!0,a=!1;else if(o==="{")r.push("}");else if(o==="[")r.push("]");else if(o==="}"||o==="]")if(r&&r[r.length-1]===o)r.pop();else return null;t+=o}n&&(t+='"');for(let o=r.length-1;o>=0;o-=1)t+=r[o];try{return JSON.parse(t)}catch{return null}}function Ip(e){switch(e){case"csv":return"text/csv";case"doc":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"html":return"text/html";case"md":return"text/markdown";case"pdf":return"application/pdf";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"gif":return"image/gif";case"jpeg":return"image/jpeg";case"jpg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"flv":return"video/flv";case"mkv":return"video/mkv";case"mov":return"video/mov";case"mp4":return"video/mp4";case"mpeg":return"video/mpeg";case"mpg":return"video/mpg";case"three_gp":return"video/three_gp";case"webm":return"video/webm";case"wmv":return"video/wmv";default:return"application/octet-stream"}}function xR(e){if(Me(e.document)&&Me(e.document.source)){const t=Me(e.document)&&me(e.document.format)?e.document.format:"",r=Ip(t);if(Me(e.document.source)){if(Me(e.document.source.s3Location)&&me(e.document.source.s3Location.uri))return{type:"file",mimeType:r,fileId:e.document.source.s3Location.uri};if(Sp(e.document.source.bytes))return{type:"file",mimeType:r,data:e.document.source.bytes};if(me(e.document.source.text))return{type:"file",mimeType:r,data:Buffer.from(e.document.source.text).toString("base64")};if(cn(e.document.source.content)){const n=e.document.source.content.reduce((a,o)=>Me(o)&&me(o.text)?a+o.text:a,"");return{type:"file",mimeType:r,data:n}}}}return{type:"non_standard",value:e}}function ER(e){if(Ie(e,"image")&&Me(e.image)){const t=Me(e.image)&&me(e.image.format)?e.image.format:"",r=Ip(t);if(Me(e.image.source)){if(Me(e.image.source.s3Location)&&me(e.image.source.s3Location.uri))return{type:"image",mimeType:r,fileId:e.image.source.s3Location.uri};if(Sp(e.image.source.bytes))return{type:"image",mimeType:r,data:e.image.source.bytes}}}return{type:"non_standard",value:e}}function SR(e){if(Ie(e,"video")&&Me(e.video)){const t=Me(e.video)&&me(e.video.format)?e.video.format:"",r=Ip(t);if(Me(e.video.source)){if(Me(e.video.source.s3Location)&&me(e.video.source.s3Location.uri))return{type:"video",mimeType:r,fileId:e.video.source.s3Location.uri};if(Sp(e.video.source.bytes))return{type:"video",mimeType:r,data:e.video.source.bytes}}}return{type:"non_standard",value:e}}function Mv(e){function*t(){const r=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const n of r){if(Ie(n,"cache_point")){yield{type:"non_standard",value:n};continue}else if(Ie(n,"citations_content")&&Me(n.citationsContent)){const a=cn(n.citationsContent.content)?n.citationsContent.content.reduce((l,c)=>Me(c)&&me(c.text)?l+c.text:l,""):"",o=cn(n.citationsContent.citations)?n.citationsContent.citations.reduce((l,c)=>{if(Me(c)){const d=cn(c.sourceContent)?c.sourceContent.reduce((p,m)=>Me(m)&&me(m.text)?p+m.text:p,""):"",f=Zi(()=>{if(Me(c.location)){const p=c.location.documentChar||c.location.documentPage||c.location.documentChunk;if(Me(p))return{source:Hr(p.documentIndex)?p.documentIndex.toString():void 0,startIndex:Hr(p.start)?p.start:void 0,endIndex:Hr(p.end)?p.end:void 0}}return{}});l.push({type:"citation",citedText:d,...f})}return l},[]):[];yield{type:"text",text:a,annotations:o};continue}else if(Ie(n,"document")&&Me(n.document)){yield xR(n);continue}else if(Ie(n,"guard_content")){yield{type:"non_standard",value:n};continue}else if(Ie(n,"image")&&Me(n.image)){yield ER(n);continue}else if(Ie(n,"reasoning_content")&&me(n.reasoningText)){yield{type:"reasoning",reasoning:n.reasoningText};continue}else if(Ie(n,"text")&&me(n.text)){yield{type:"text",text:n.text};continue}else if(Ie(n,"tool_result")){yield{type:"non_standard",value:n};continue}else{if(Ie(n,"tool_call"))continue;if(Ie(n,"video")&&Me(n.video)){yield SR(n);continue}}yield{type:"non_standard",value:n}}}return Array.from(t())}const kR={translateContent:Mv,translateContentChunk:Mv};function Dv(e){function*t(){const r=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const n of r){if(Ie(n,"text")&&me(n.text)){yield{type:"text",text:n.text};continue}else if(Ie(n,"inlineData")&&Me(n.inlineData)&&me(n.inlineData.mimeType)&&me(n.inlineData.data)){yield{type:"file",mimeType:n.inlineData.mimeType,data:n.inlineData.data};continue}else if(Ie(n,"functionCall")&&Me(n.functionCall)&&me(n.functionCall.name)&&Me(n.functionCall.args)){yield{type:"tool_call",id:e.id,name:n.functionCall.name,args:n.functionCall.args};continue}else if(Ie(n,"functionResponse")){yield{type:"non_standard",value:n};continue}else if(Ie(n,"fileData")&&Me(n.fileData)&&me(n.fileData.mimeType)&&me(n.fileData.fileUri)){yield{type:"file",mimeType:n.fileData.mimeType,fileId:n.fileData.fileUri};continue}else if(Ie(n,"executableCode")){yield{type:"non_standard",value:n};continue}else if(Ie(n,"codeExecutionResult")){yield{type:"non_standard",value:n};continue}yield{type:"non_standard",value:n}}}return Array.from(t())}const TR={translateContent:Dv,translateContentChunk:Dv};function zv(e){function*t(){const r=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const n of r){if(Ie(n,"reasoning")&&me(n.reasoning)){const a=Zi(()=>{const o=r.indexOf(n);if(cn(e.additional_kwargs?.signatures)&&o>=0)return e.additional_kwargs.signatures.at(o)});me(a)?yield{type:"reasoning",reasoning:n.reasoning,signature:a}:yield{type:"reasoning",reasoning:n.reasoning};continue}else if(Ie(n,"text")&&me(n.text)){yield{type:"text",text:n.text};continue}else if(Ie(n,"image_url")){if(me(n.image_url))if(n.image_url.startsWith("data:")){const a=/^data:([^;]+);base64,(.+)$/,o=n.image_url.match(a);o?yield{type:"image",data:o[2],mimeType:o[1]}:yield{type:"image",url:n.image_url}}else yield{type:"image",url:n.image_url};continue}else if(Ie(n,"media")&&me(n.mimeType)&&me(n.data)){yield{type:"file",mimeType:n.mimeType,data:n.data};continue}yield{type:"non_standard",value:n}}}return Array.from(t())}const CR={translateContent:zv,translateContentChunk:zv};globalThis.lc_block_translators_registry??=new Map([["anthropic",sR],["bedrock-converse",kR],["google-genai",TR],["google-vertexai",CR],["openai",pR]]);function Zb(e){return globalThis.lc_block_translators_registry.get(e)}var An=class extends Ln{type="ai";tool_calls=[];invalid_tool_calls=[];usage_metadata;get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e){let t;if(typeof e=="string"||Array.isArray(e))t={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:{}};else{t=e;const r=t.additional_kwargs?.tool_calls,n=t.tool_calls;r!=null&&r.length>0&&(n===void 0||n.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `pnpm install @langchain/anthropic`,","pnpm install @langchain/openai`, etc."].join(" "));try{if(r!=null&&n===void 0){const[a,o]=Np(r);t.tool_calls=a??[],t.invalid_tool_calls=o??[]}else t.tool_calls=t.tool_calls??[],t.invalid_tool_calls=t.invalid_tool_calls??[]}catch{t.tool_calls=[],t.invalid_tool_calls=[]}if(t.response_metadata!==void 0&&"output_version"in t.response_metadata&&t.response_metadata.output_version==="v1"&&(t.contentBlocks=t.content,t.content=void 0),t.contentBlocks!==void 0){t.contentBlocks.push(...t.tool_calls.map(o=>({type:"tool_call",id:o.id,name:o.name,args:o.args})));const a=t.contentBlocks.filter(o=>o.type==="tool_call").filter(o=>!t.tool_calls?.some(l=>l.id===o.id&&l.name===o.name));a.length>0&&(t.tool_calls=a.map(o=>({type:"tool_call",id:o.id,name:o.name,args:o.args})))}}super(t),typeof t!="string"&&(this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=t.usage_metadata}static lc_name(){return"AIMessage"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const t=Zb(this.response_metadata.model_provider);if(t)return t.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls){const t=this.tool_calls.filter(r=>!e.some(n=>n.id===r.id&&n.name===r.name));e.push(...t.map(r=>({...r,type:"tool_call",id:r.id,name:r.name,args:r.args})))}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};function Rp(e){return e._getType()==="ai"}function Nh(e){return e._getType()==="ai"}var Zs=class extends Ws{type="ai";tool_calls=[];invalid_tool_calls=[];tool_call_chunks=[];usage_metadata;constructor(e){let t;if(typeof e=="string"||Array.isArray(e))t={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0||e.tool_call_chunks.length===0)t={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const n=(e.tool_call_chunks??[]).reduce((l,c)=>{const d=l.findIndex(([f])=>"id"in c&&c.id&&"index"in c&&c.index!==void 0?c.id===f.id&&c.index===f.index:"id"in c&&c.id?c.id===f.id:"index"in c&&c.index!==void 0?c.index===f.index:!1);return d!==-1?l[d].push(c):l.push([c]),l},[]),a=[],o=[];for(const l of n){let c=null;const d=l[0]?.name??"",f=l.map(y=>y.args||"").join(""),p=f.length?f:"{}",m=l[0]?.id;try{if(c=Ic(p),!m||c===null||typeof c!="object"||Array.isArray(c))throw new Error("Malformed tool call chunk args.");a.push({name:d,args:c,id:m,type:"tool_call"})}catch{o.push({name:d,args:p,id:m,error:"Malformed args.",type:"invalid_tool_call"})}}t={...e,tool_calls:a,invalid_tool_calls:o,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(t),this.tool_call_chunks=t.tool_call_chunks??this.tool_call_chunks,this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=t.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const t=Zb(this.response_metadata.model_provider);if(t)return t.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls&&typeof this.content!="string"){const t=this.content.filter(r=>r.type==="tool_call").map(r=>r.id);for(const r of this.tool_calls)r.id&&!t.includes(r.id)&&e.push({...r,type:"tool_call",id:r.id,name:r.name,args:r.args})}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){const t={content:qs(this.content,e.content),additional_kwargs:qt(this.additional_kwargs,e.additional_kwargs),response_metadata:Vb(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const n=oo(this.tool_call_chunks,e.tool_call_chunks);n!==void 0&&n.length>0&&(t.tool_call_chunks=n)}(this.usage_metadata!==void 0||e.usage_metadata!==void 0)&&(t.usage_metadata=Gb(this.usage_metadata,e.usage_metadata));const r=this.constructor;return new r(t)}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}},lo=class Kb extends Ln{static lc_name(){return"ChatMessage"}type="generic";role;static _chatMessageClass(){return Kb}constructor(t,r){(typeof t=="string"||Array.isArray(t))&&(t={content:t,role:r}),super(t),this.role=t.role}static isInstance(t){return super.isInstance(t)&&t.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},Rc=class extends Ws{static lc_name(){return"ChatMessageChunk"}type="generic";role;constructor(e,t){(typeof e=="string"||Array.isArray(e))&&(e={content:e,role:t}),super(e),this.role=e.role}concat(e){const t=this.constructor;return new t({content:qs(this.content,e.content),additional_kwargs:qt(this.additional_kwargs,e.additional_kwargs),response_metadata:qt(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}};function NR(e){return e._getType()==="generic"}function IR(e){return e._getType()==="generic"}var Ac=class extends Ln{static lc_name(){return"FunctionMessage"}type="function";name;constructor(e){super(e),this.name=e.name}},Oc=class extends Ws{static lc_name(){return"FunctionMessageChunk"}type="function";concat(e){const t=this.constructor;return new t({content:qs(this.content,e.content),additional_kwargs:qt(this.additional_kwargs,e.additional_kwargs),response_metadata:qt(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}};function RR(e){return e._getType()==="function"}function AR(e){return e._getType()==="function"}var Wr=class extends Ln{static lc_name(){return"HumanMessage"}type="human";constructor(e){super(e)}static isInstance(e){return super.isInstance(e)&&e.type==="human"}},Pc=class extends Ws{static lc_name(){return"HumanMessageChunk"}type="human";constructor(e){super(e)}concat(e){const t=this.constructor;return new t({content:qs(this.content,e.content),additional_kwargs:qt(this.additional_kwargs,e.additional_kwargs),response_metadata:qt(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="human"}};function OR(e){return e.getType()==="human"}function PR(e){return e.getType()==="human"}var On=class extends Ln{static lc_name(){return"SystemMessage"}type="system";constructor(e){super(e)}static isInstance(e){return super.isInstance(e)&&e.type==="system"}},Pa=class extends Ws{static lc_name(){return"SystemMessageChunk"}type="system";constructor(e){super(e)}concat(e){const t=this.constructor;return new t({content:qs(this.content,e.content),additional_kwargs:qt(this.additional_kwargs,e.additional_kwargs),response_metadata:qt(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="system"}};function $R(e){return e._getType()==="system"}function jR(e){return e._getType()==="system"}var Ql=class extends Ln{type="remove";id;constructor(e){super({...e,content:[]}),this.id=e.id}get _printableFields(){return{...super._printableFields,id:this.id}}static isInstance(e){return super.isInstance(e)&&e.type==="remove"}};function Jb(e,t){return e.lc_error_code=t,e.message=`${e.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${t}/
`,e}function Fi(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="tool_call")}function LR(e){return!!(e&&typeof e=="object"&&"toolCall"in e&&e.toolCall!=null&&typeof e.toolCall=="object"&&"id"in e.toolCall&&typeof e.toolCall.id=="string")}var ec=class extends Error{output;constructor(e,t){super(e),this.output=t}};const MR=e=>e();function DR(e){return Fi(e)?e:typeof e.id=="string"&&e.type==="function"&&typeof e.function=="object"&&e.function!==null&&"arguments"in e.function&&typeof e.function.arguments=="string"&&"name"in e.function&&typeof e.function.name=="string"?{id:e.id,args:JSON.parse(e.function.arguments),name:e.function.name,type:"tool_call"}:e}function zR(e){return typeof e=="object"&&e!=null&&e.lc===1&&Array.isArray(e.id)&&e.kwargs!=null&&typeof e.kwargs=="object"}function sf(e){let t,r;if(zR(e)){const n=e.id.at(-1);n==="HumanMessage"||n==="HumanMessageChunk"?t="user":n==="AIMessage"||n==="AIMessageChunk"?t="assistant":n==="SystemMessage"||n==="SystemMessageChunk"?t="system":n==="FunctionMessage"||n==="FunctionMessageChunk"?t="function":n==="ToolMessage"||n==="ToolMessageChunk"?t="tool":t="unknown",r=e.kwargs}else{const{type:n,...a}=e;t=n,r=a}if(t==="human"||t==="user")return new Wr(r);if(t==="ai"||t==="assistant"){const{tool_calls:n,...a}=r;if(!Array.isArray(n))return new An(r);const o=n.map(DR);return new An({...a,tool_calls:o})}else{if(t==="system")return new On(r);if(t==="developer")return new On({...r,additional_kwargs:{...r.additional_kwargs,__openai_role__:"developer"}});if(t==="tool"&&"tool_call_id"in r)return new ys({...r,content:r.content,tool_call_id:r.tool_call_id,name:r.name});if(t==="remove"&&"id"in r&&typeof r.id=="string")return new Ql({...r,id:r.id});throw Jb(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(e,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function Ui(e){if(typeof e=="string")return new Wr(e);if(Cn(e))return e;if(Array.isArray(e)){const[t,r]=e;return sf({type:t,content:r})}else if(Bb(e)){const{role:t,...r}=e;return sf({...r,type:t})}else return sf(e)}function Ap(e,t="Human",r="AI"){const n=[];for(const a of e){let o;if(a._getType()==="human")o=t;else if(a._getType()==="ai")o=r;else if(a._getType()==="system")o="System";else if(a._getType()==="tool")o="Tool";else if(a._getType()==="generic")o=a.role;else throw new Error(`Got unsupported message type: ${a._getType()}`);const l=a.name?`${a.name}, `:"",c=typeof a.content=="string"?a.content:JSON.stringify(a.content,null,2);n.push(`${o}: ${l}${c}`)}return n.join(`
`)}function FR(e){if(e.data!==void 0)return e;{const t=e;return{type:t.type,data:{content:t.text,role:t.role,name:void 0,tool_call_id:void 0}}}}function Op(e){const t=FR(e);switch(t.type){case"human":return new Wr(t.data);case"ai":return new An(t.data);case"system":return new On(t.data);case"function":if(t.data.name===void 0)throw new Error("Name must be defined for function messages");return new Ac(t.data);case"tool":if(t.data.tool_call_id===void 0)throw new Error("Tool call ID must be defined for tool messages");return new ys(t.data);case"generic":if(t.data.role===void 0)throw new Error("Role must be defined for chat messages");return new lo(t.data);default:throw new Error(`Got unexpected type: ${t.type}`)}}function UR(e){return e.map(Op)}function BR(e){return e.map(t=>t.toDict())}function tc(e){const t=e._getType();if(t==="human")return new Pc({...e});if(t==="ai"){let r={...e};return"tool_calls"in r&&(r={...r,tool_call_chunks:r.tool_calls?.map(n=>({...n,type:"tool_call_chunk",index:void 0,args:JSON.stringify(n.args)}))}),new Zs({...r})}else{if(t==="system")return new Pa({...e});if(t==="function")return new Oc({...e});if(lo.isInstance(e))return new Rc({...e});throw new Error("Unknown message type.")}}const Yb=Symbol.for("ls:tracing_async_local_storage"),Bi=Symbol.for("lc:context_variables"),VR=e=>{globalThis[Yb]=e},Ki=()=>globalThis[Yb];var HR={},GR={};We(GR,{getEnv:()=>rx,getEnvironmentVariable:()=>ps,getRuntimeEnvironment:()=>nx,isBrowser:()=>Xb,isDeno:()=>$c,isJsDom:()=>ex,isNode:()=>tx,isWebWorker:()=>Qb});const Xb=()=>typeof window<"u"&&typeof window.document<"u",Qb=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",ex=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),$c=()=>typeof Deno<"u",tx=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!$c(),rx=()=>{let e;return Xb()?e="browser":tx()?e="node":Qb()?e="webworker":ex()?e="jsdom":$c()?e="deno":e="other",e};let af;function nx(){return af===void 0&&(af={library:"langchain-js",runtime:rx()}),af}function ps(e){try{return typeof process<"u"?HR?.[e]:$c()?Deno?.env.get(e):void 0}catch{return}}const qR=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Vi(e){return typeof e=="string"&&qR.test(e)}function WR(e){if(!Vi(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var zt=[];for(var of=0;of<256;++of)zt.push((of+256).toString(16).slice(1));function sx(e,t=0){return(zt[e[t+0]]+zt[e[t+1]]+zt[e[t+2]]+zt[e[t+3]]+"-"+zt[e[t+4]]+zt[e[t+5]]+"-"+zt[e[t+6]]+zt[e[t+7]]+"-"+zt[e[t+8]]+zt[e[t+9]]+"-"+zt[e[t+10]]+zt[e[t+11]]+zt[e[t+12]]+zt[e[t+13]]+zt[e[t+14]]+zt[e[t+15]]).toLowerCase()}var Ol,ZR=new Uint8Array(16);function KR(){if(!Ol&&(Ol=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ol))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ol(ZR)}function JR(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var YR="6ba7b810-9dad-11d1-80b4-00c04fd430c8",XR="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function QR(e,t,r){function n(a,o,l,c){var d;if(typeof a=="string"&&(a=JR(a)),typeof o=="string"&&(o=WR(o)),((d=o)===null||d===void 0?void 0:d.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+a.length);if(f.set(o),f.set(a,o.length),f=r(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,l){c=c||0;for(var p=0;p<16;++p)l[c+p]=f[p];return l}return sx(f)}try{n.name=e}catch{}return n.DNS=YR,n.URL=XR,n}var eA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Fv={randomUUID:eA};function Yt(e,t,r){if(Fv.randomUUID&&!e)return Fv.randomUUID();e=e||{};var n=e.random||(e.rng||KR)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,sx(n)}function tA(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function lf(e,t){return e<<t|e>>>32-t}function rA(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var n=unescape(encodeURIComponent(e));e=[];for(var a=0;a<n.length;++a)e.push(n.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,l=Math.ceil(o/16),c=new Array(l),d=0;d<l;++d){for(var f=new Uint32Array(16),p=0;p<16;++p)f[p]=e[d*64+p*4]<<24|e[d*64+p*4+1]<<16|e[d*64+p*4+2]<<8|e[d*64+p*4+3];c[d]=f}c[l-1][14]=(e.length-1)*8/Math.pow(2,32),c[l-1][14]=Math.floor(c[l-1][14]),c[l-1][15]=(e.length-1)*8&4294967295;for(var m=0;m<l;++m){for(var y=new Uint32Array(80),_=0;_<16;++_)y[_]=c[m][_];for(var b=16;b<80;++b)y[b]=lf(y[b-3]^y[b-8]^y[b-14]^y[b-16],1);for(var x=r[0],E=r[1],I=r[2],O=r[3],A=r[4],D=0;D<80;++D){var H=Math.floor(D/20),Z=lf(x,5)+tA(H,E,I,O)+A+t[H]+y[D]>>>0;A=O,O=I,I=lf(E,30)>>>0,E=x,x=Z}r[0]=r[0]+x>>>0,r[1]=r[1]+E>>>0,r[2]=r[2]+I>>>0,r[3]=r[3]+O>>>0,r[4]=r[4]+A>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Uv=QR("v5",80,rA),nA={};We(nA,{BaseCallbackHandler:()=>co,callbackHandlerPrefersStreaming:()=>Pp,isBaseCallbackHandler:()=>ax});var sA=class{};function Pp(e){return"lc_prefer_streaming"in e&&e.lc_prefer_streaming}var co=class extends sA{lc_serializable=!1;get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Ep(this.constructor)]}lc_kwargs;ignoreLLM=!1;ignoreChain=!1;ignoreAgent=!1;ignoreRetriever=!1;ignoreCustomEvent=!1;raiseError=!1;awaitHandlers=ps("LANGCHAIN_CALLBACKS_BACKGROUND")==="false";constructor(e){super(),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Oa.prototype.toJSON.call(this)}toJSONNotImplemented(){return Oa.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class t extends co{name=Yt();constructor(){super(),Object.assign(this,e)}}return new t}};const ax=e=>{const t=e;return t!==void 0&&typeof t.copy=="function"&&typeof t.name=="string"&&typeof t.awaitHandlers=="boolean"},aA="gen_ai.operation.name",iA="gen_ai.system",Bv="gen_ai.request.model",oA="gen_ai.response.model",Vv="gen_ai.usage.input_tokens",Hv="gen_ai.usage.output_tokens",Gv="gen_ai.usage.total_tokens",lA="gen_ai.request.max_tokens",cA="gen_ai.request.temperature",uA="gen_ai.request.top_p",dA="gen_ai.request.frequency_penalty",fA="gen_ai.request.presence_penalty",hA="gen_ai.response.finish_reasons",pA="gen_ai.prompt",mA="gen_ai.completion",gA="gen_ai.request.extra_query",yA="gen_ai.request.extra_body",vA="gen_ai.serialized.name",_A="gen_ai.serialized.signature",wA="gen_ai.serialized.doc",bA="gen_ai.response.id",xA="gen_ai.response.service_tier",EA="gen_ai.response.system_fingerprint",SA="gen_ai.usage.input_token_details",kA="gen_ai.usage.output_token_details",TA="langsmith.trace.session_id",CA="langsmith.trace.session_name",NA="langsmith.span.kind",IA="langsmith.trace.name",RA="langsmith.metadata",qv="langsmith.span.tags",AA="langsmith.request.streaming",OA="langsmith.request.headers",PA=(...e)=>fetch(...e),ix=Symbol.for("ls:fetch_implementation"),$A=()=>{const e=globalThis[ix];return e?typeof e=="function"&&"Headers"in e&&"Request"in e&&"Response"in e:!1},jA=e=>async(...t)=>{if(e||cr("DEBUG")==="true"){const[n,a]=t;console.log(` ${a?.method||"GET"} ${n}`)}const r=await(globalThis[ix]??PA)(...t);return(e||cr("DEBUG")==="true")&&console.log(` ${r.status} ${r.statusText} ${r.url}`),r},ox=()=>cr("PROJECT")??dn("LANGCHAIN_SESSION")??"default",lx="0.3.79";var Ih={};let an;const LA=()=>typeof window<"u"&&typeof window.document<"u",MA=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",DA=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),cx=()=>typeof Deno<"u",zA=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!cx(),ux=()=>an||(typeof Bun<"u"?an="bun":LA()?an="browser":zA()?an="node":MA()?an="webworker":DA()?an="jsdom":cx()?an="deno":an="other",an);let cf;function dx(){if(cf===void 0){const e=ux(),t=UA();cf={library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:lx,...t}}return cf}function fx(){const e=FA(),t={},r=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[n,a]of Object.entries(e))typeof a=="string"&&!r.includes(n)&&!n.toLowerCase().includes("key")&&!n.toLowerCase().includes("secret")&&!n.toLowerCase().includes("token")&&(n==="LANGCHAIN_REVISION_ID"?t.revision_id=a:t[n]=a);return t}function FA(){const e={};try{if(typeof process<"u"&&Ih)for(const[t,r]of Object.entries(Ih))(t.startsWith("LANGCHAIN_")||t.startsWith("LANGSMITH_"))&&r!=null&&((t.toLowerCase().includes("key")||t.toLowerCase().includes("secret")||t.toLowerCase().includes("token"))&&typeof r=="string"?e[t]=r.slice(0,2)+"*".repeat(r.length-4)+r.slice(-2):e[t]=r)}catch{}return e}function dn(e){try{return typeof process<"u"?Ih?.[e]:void 0}catch{return}}function cr(e){return dn(`LANGSMITH_${e}`)||dn(`LANGCHAIN_${e}`)}let uf;function UA(){if(uf!==void 0)return uf;const e=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(const r of e){const n=dn(r);n!==void 0&&(t[r]=n)}return uf=t,t}function hx(){return dn("OTEL_ENABLED")==="true"||cr("OTEL_ENABLED")==="true"}class BA{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(t,...r){!this.hasWarned&&hx()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let n;if(r.length===1&&typeof r[0]=="function"?n=r[0]:r.length===2&&typeof r[1]=="function"?n=r[1]:r.length===3&&typeof r[2]=="function"&&(n=r[2]),typeof n=="function")return n()}}class VA{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new BA})}getTracer(t,r){return this.mockTracer}getActiveSpan(){}setSpan(t,r){return t}getSpan(t){}setSpanContext(t,r){return t}getTracerProvider(){}setGlobalTracerProvider(t){return!1}}class HA{active(){return{}}with(t,r){return r()}}const df=Symbol.for("ls:otel_trace"),ff=Symbol.for("ls:otel_context"),Wv=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),GA=new VA,qA=new HA;class WA{getTraceInstance(){return globalThis[df]??GA}getContextInstance(){return globalThis[ff]??qA}initializeGlobalInstances(t){globalThis[df]===void 0&&(globalThis[df]=t.trace),globalThis[ff]===void 0&&(globalThis[ff]=t.context)}setDefaultOTLPTracerComponents(t){globalThis[Wv]=t}getDefaultOTLPTracerComponents(){return globalThis[Wv]??void 0}}const $p=new WA;function px(){return $p.getTraceInstance()}function ZA(){return $p.getContextInstance()}function KA(){return $p.getDefaultOTLPTracerComponents()}const JA={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function YA(e){return JA[e]||e}class XA{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(t,r){for(const n of t)try{if(!n.run)continue;if(n.operation==="post"){const a=this.createSpanForRun(n,n.run,r.get(n.id));a&&!n.run.end_time&&this.spans.set(n.id,a)}else this.updateSpanForRun(n,n.run)}catch(a){console.error(`Error processing operation ${n.id}:`,a)}}createSpanForRun(t,r,n){const a=n&&px().getSpan(n);if(a)try{return this.finishSpanSetup(a,r,t)}catch(o){console.error(`Failed to create span for run ${t.id}:`,o);return}}finishSpanSetup(t,r,n){return this.setSpanAttributes(t,r,n),r.error?(t.setStatus({code:2}),t.recordException(new Error(r.error))):t.setStatus({code:1}),r.end_time&&t.end(new Date(r.end_time)),t}updateSpanForRun(t,r){try{const n=this.spans.get(t.id);if(!n){console.debug(`No span found for run ${t.id} during update`);return}this.setSpanAttributes(n,r,t),r.error?(n.setStatus({code:2}),n.recordException(new Error(r.error))):n.setStatus({code:1});const a=r.end_time;a&&(n.end(new Date(a)),this.spans.delete(t.id))}catch(n){console.error(`Failed to update span for run ${t.id}:`,n)}}extractModelName(t){if(t.extra?.metadata){const r=t.extra.metadata;if(r.ls_model_name)return r.ls_model_name;if(r.invocation_params){const n=r.invocation_params;if(n.model)return n.model;if(n.model_name)return n.model_name}}}setSpanAttributes(t,r,n){if("run_type"in r&&r.run_type){t.setAttribute(NA,r.run_type);const c=YA(r.run_type||"chain");t.setAttribute(aA,c)}"name"in r&&r.name&&t.setAttribute(IA,r.name),"session_id"in r&&r.session_id&&t.setAttribute(TA,r.session_id),"session_name"in r&&r.session_name&&t.setAttribute(CA,r.session_name),this.setGenAiSystem(t,r);const a=this.extractModelName(r);a&&t.setAttribute(Bv,a),"prompt_tokens"in r&&typeof r.prompt_tokens=="number"&&t.setAttribute(Vv,r.prompt_tokens),"completion_tokens"in r&&typeof r.completion_tokens=="number"&&t.setAttribute(Hv,r.completion_tokens),"total_tokens"in r&&typeof r.total_tokens=="number"&&t.setAttribute(Gv,r.total_tokens),this.setInvocationParameters(t,r);const o=r.extra?.metadata||{};for(const[c,d]of Object.entries(o))d!=null&&t.setAttribute(`${RA}.${c}`,String(d));const l=r.tags;if(l&&Array.isArray(l)?t.setAttribute(qv,l.join(", ")):l&&t.setAttribute(qv,String(l)),"serialized"in r&&typeof r.serialized=="object"){const c=r.serialized;c.name&&t.setAttribute(vA,String(c.name)),c.signature&&t.setAttribute(_A,String(c.signature)),c.doc&&t.setAttribute(wA,String(c.doc))}this.setIOAttributes(t,n)}setGenAiSystem(t,r){let n="langchain";const a=this.extractModelName(r);if(a){const o=a.toLowerCase();o.includes("anthropic")||o.startsWith("claude")?n="anthropic":o.includes("bedrock")?n="aws.bedrock":o.includes("azure")&&o.includes("openai")?n="az.ai.openai":o.includes("azure")&&o.includes("inference")?n="az.ai.inference":o.includes("cohere")?n="cohere":o.includes("deepseek")?n="deepseek":o.includes("gemini")?n="gemini":o.includes("groq")?n="groq":o.includes("watson")||o.includes("ibm")?n="ibm.watsonx.ai":o.includes("mistral")?n="mistral_ai":o.includes("gpt")||o.includes("openai")?n="openai":o.includes("perplexity")||o.includes("sonar")?n="perplexity":o.includes("vertex")?n="vertex_ai":(o.includes("xai")||o.includes("grok"))&&(n="xai")}t.setAttribute(iA,n)}setInvocationParameters(t,r){if(!r.extra?.metadata?.invocation_params)return;const n=r.extra.metadata.invocation_params;n.max_tokens!==void 0&&t.setAttribute(lA,n.max_tokens),n.temperature!==void 0&&t.setAttribute(cA,n.temperature),n.top_p!==void 0&&t.setAttribute(uA,n.top_p),n.frequency_penalty!==void 0&&t.setAttribute(dA,n.frequency_penalty),n.presence_penalty!==void 0&&t.setAttribute(fA,n.presence_penalty)}setIOAttributes(t,r){if(r.run.inputs)try{const n=r.run.inputs;typeof n=="object"&&n!==null&&(n.model&&Array.isArray(n.messages)&&t.setAttribute(Bv,n.model),n.stream!==void 0&&t.setAttribute(AA,n.stream),n.extra_headers&&t.setAttribute(OA,JSON.stringify(n.extra_headers)),n.extra_query&&t.setAttribute(gA,JSON.stringify(n.extra_query)),n.extra_body&&t.setAttribute(yA,JSON.stringify(n.extra_body))),t.setAttribute(pA,JSON.stringify(n))}catch(n){console.debug(`Failed to process inputs for run ${r.id}`,n)}if(r.run.outputs)try{const n=r.run.outputs,a=this.getUnifiedRunTokens(n);if(a&&(t.setAttribute(Vv,a[0]),t.setAttribute(Hv,a[1]),t.setAttribute(Gv,a[0]+a[1])),n&&typeof n=="object"){if(n.model&&t.setAttribute(oA,String(n.model)),n.id&&t.setAttribute(bA,n.id),n.choices&&Array.isArray(n.choices)){const o=n.choices.map(l=>l.finish_reason).filter(l=>l).map(String);o.length>0&&t.setAttribute(hA,o.join(", "))}if(n.service_tier&&t.setAttribute(xA,n.service_tier),n.system_fingerprint&&t.setAttribute(EA,n.system_fingerprint),n.usage_metadata&&typeof n.usage_metadata=="object"){const o=n.usage_metadata;o.input_token_details&&t.setAttribute(SA,JSON.stringify(o.input_token_details)),o.output_token_details&&t.setAttribute(kA,JSON.stringify(o.output_token_details))}}t.setAttribute(mA,JSON.stringify(n))}catch(n){console.debug(`Failed to process outputs for run ${r.id}`,n)}}getUnifiedRunTokens(t){if(!t)return null;let r=this.extractUnifiedRunTokens(t.usage_metadata);if(r)return r;const n=Object.keys(t);for(const l of n){const c=t[l];if(!(!c||typeof c!="object")&&(r=this.extractUnifiedRunTokens(c.usage_metadata),r||c.lc===1&&c.kwargs&&typeof c.kwargs=="object"&&(r=this.extractUnifiedRunTokens(c.kwargs.usage_metadata),r)))return r}const a=t.generations||[];if(!Array.isArray(a))return null;const o=Array.isArray(a[0])?a.flat():a;for(const l of o)if(typeof l=="object"&&l.message&&typeof l.message=="object"&&l.message.kwargs&&typeof l.message.kwargs=="object"&&(r=this.extractUnifiedRunTokens(l.message.kwargs.usage_metadata),r))return r;return null}extractUnifiedRunTokens(t){return!t||typeof t!="object"||typeof t.input_tokens!="number"||typeof t.output_tokens!="number"?null:[t.input_tokens,t.output_tokens]}}var Ai={exports:{}},hf={},pf,Zv;function QA(){if(Zv)return pf;Zv=1;function e(t,r){typeof r=="boolean"&&(r={forever:r}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=r||{},this._maxRetryTime=r&&r.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return pf=e,e.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},e.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},e.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var r=new Date().getTime();if(t&&r-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var a=this;return this._timer=setTimeout(function(){a._attempts++,a._operationTimeoutCb&&(a._timeout=setTimeout(function(){a._operationTimeoutCb(a._attempts)},a._operationTimeout),a._options.unref&&a._timeout.unref()),a._fn(a._attempts)},n),this._options.unref&&this._timer.unref(),!0},e.prototype.attempt=function(t,r){this._fn=t,r&&(r.timeout&&(this._operationTimeout=r.timeout),r.cb&&(this._operationTimeoutCb=r.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},e.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},e.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},e.prototype.start=e.prototype.try,e.prototype.errors=function(){return this._errors},e.prototype.attempts=function(){return this._attempts},e.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},r=null,n=0,a=0;a<this._errors.length;a++){var o=this._errors[a],l=o.message,c=(t[l]||0)+1;t[l]=c,c>=n&&(r=o,n=c)}return r},pf}var Kv;function eO(){return Kv||(Kv=1,(function(e){var t=QA();e.operation=function(r){var n=e.timeouts(r);return new t(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},e.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var a in r)n[a]=r[a];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],l=0;l<n.retries;l++)o.push(this.createTimeout(l,n));return r&&r.forever&&!o.length&&o.push(this.createTimeout(l,n)),o.sort(function(c,d){return c-d}),o},e.createTimeout=function(r,n){var a=n.randomize?Math.random()+1:1,o=Math.round(a*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return o=Math.min(o,n.maxTimeout),o},e.wrap=function(r,n,a){if(n instanceof Array&&(a=n,n=null),!a){a=[];for(var o in r)typeof r[o]=="function"&&a.push(o)}for(var l=0;l<a.length;l++){var c=a[l],d=r[c];r[c]=function(p){var m=e.operation(n),y=Array.prototype.slice.call(arguments,1),_=y.pop();y.push(function(b){m.retry(b)||(b&&(arguments[0]=m.mainError()),_.apply(this,arguments))}),m.attempt(function(){p.apply(r,y)})}.bind(r,d),r[c].options=n}}})(hf)),hf}var mf,Jv;function tO(){return Jv||(Jv=1,mf=eO()),mf}var Yv;function rO(){if(Yv)return Ai.exports;Yv=1;const e=tO(),t=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class r extends Error{constructor(c){super(),c instanceof Error?(this.originalError=c,{message:c}=c):(this.originalError=new Error(c),this.originalError.stack=this.stack),this.name="AbortError",this.message=c}}const n=(l,c,d)=>{const f=d.retries-(c-1);return l.attemptNumber=c,l.retriesLeft=f,l},a=l=>t.includes(l),o=(l,c)=>new Promise((d,f)=>{c={onFailedAttempt:()=>{},retries:10,...c};const p=e.operation(c);p.attempt(async m=>{try{d(await l(m))}catch(y){if(!(y instanceof Error)){f(new TypeError(`Non-error was thrown: "${y}". You should only throw errors.`));return}if(y instanceof r)p.stop(),f(y.originalError);else if(y instanceof TypeError&&!a(y.message))p.stop(),f(y);else{n(y,m,c);try{await c.onFailedAttempt(y)}catch(_){f(_);return}p.retry(y)||f(p.mainError())}}})});return Ai.exports=o,Ai.exports.default=o,Ai.exports.AbortError=r,Ai.exports}var nO=rO();const rc=Gs(nO);var Pl={},gf={exports:{}},Xv;function sO(){return Xv||(Xv=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,f,p){this.fn=d,this.context=f,this.once=p||!1}function o(d,f,p,m,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var _=new a(p,m||d,y),b=r?r+f:f;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],_]:d._events[b].push(_):(d._events[b]=_,d._eventsCount++),d}function l(d,f){--d._eventsCount===0?d._events=new n:delete d._events[f]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],p,m;if(this._eventsCount===0)return f;for(m in p=this._events)t.call(p,m)&&f.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(p)):f},c.prototype.listeners=function(f){var p=r?r+f:f,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,_=m.length,b=new Array(_);y<_;y++)b[y]=m[y].fn;return b},c.prototype.listenerCount=function(f){var p=r?r+f:f,m=this._events[p];return m?m.fn?1:m.length:0},c.prototype.emit=function(f,p,m,y,_,b){var x=r?r+f:f;if(!this._events[x])return!1;var E=this._events[x],I=arguments.length,O,A;if(E.fn){switch(E.once&&this.removeListener(f,E.fn,void 0,!0),I){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,p),!0;case 3:return E.fn.call(E.context,p,m),!0;case 4:return E.fn.call(E.context,p,m,y),!0;case 5:return E.fn.call(E.context,p,m,y,_),!0;case 6:return E.fn.call(E.context,p,m,y,_,b),!0}for(A=1,O=new Array(I-1);A<I;A++)O[A-1]=arguments[A];E.fn.apply(E.context,O)}else{var D=E.length,H;for(A=0;A<D;A++)switch(E[A].once&&this.removeListener(f,E[A].fn,void 0,!0),I){case 1:E[A].fn.call(E[A].context);break;case 2:E[A].fn.call(E[A].context,p);break;case 3:E[A].fn.call(E[A].context,p,m);break;case 4:E[A].fn.call(E[A].context,p,m,y);break;default:if(!O)for(H=1,O=new Array(I-1);H<I;H++)O[H-1]=arguments[H];E[A].fn.apply(E[A].context,O)}}return!0},c.prototype.on=function(f,p,m){return o(this,f,p,m,!1)},c.prototype.once=function(f,p,m){return o(this,f,p,m,!0)},c.prototype.removeListener=function(f,p,m,y){var _=r?r+f:f;if(!this._events[_])return this;if(!p)return l(this,_),this;var b=this._events[_];if(b.fn)b.fn===p&&(!y||b.once)&&(!m||b.context===m)&&l(this,_);else{for(var x=0,E=[],I=b.length;x<I;x++)(b[x].fn!==p||y&&!b[x].once||m&&b[x].context!==m)&&E.push(b[x]);E.length?this._events[_]=E.length===1?E[0]:E:l(this,_)}return this},c.prototype.removeAllListeners=function(f){var p;return f?(p=r?r+f:f,this._events[p]&&l(this,p)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,e.exports=c})(gf)),gf.exports}var Oi={exports:{}},yf,Qv;function aO(){return Qv||(Qv=1,yf=(e,t)=>(t=t||(()=>{}),e.then(r=>new Promise(n=>{n(t())}).then(()=>r),r=>new Promise(n=>{n(t())}).then(()=>{throw r})))),yf}var e_;function iO(){if(e_)return Oi.exports;e_=1;const e=aO();class t extends Error{constructor(a){super(a),this.name="TimeoutError"}}const r=(n,a,o)=>new Promise((l,c)=>{if(typeof a!="number"||a<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(a===1/0){l(n);return}const d=setTimeout(()=>{if(typeof o=="function"){try{l(o())}catch(m){c(m)}return}const f=typeof o=="string"?o:`Promise timed out after ${a} milliseconds`,p=o instanceof Error?o:new t(f);typeof n.cancel=="function"&&n.cancel(),c(p)},a);e(n.then(l,c),()=>{clearTimeout(d)})});return Oi.exports=r,Oi.exports.default=r,Oi.exports.TimeoutError=t,Oi.exports}var $l={},jl={},t_;function oO(){if(t_)return jl;t_=1,Object.defineProperty(jl,"__esModule",{value:!0});function e(t,r,n){let a=0,o=t.length;for(;o>0;){const l=o/2|0;let c=a+l;n(t[c],r)<=0?(a=++c,o-=l+1):o=l}return a}return jl.default=e,jl}var r_;function lO(){if(r_)return $l;r_=1,Object.defineProperty($l,"__esModule",{value:!0});const e=oO();class t{constructor(){this._queue=[]}enqueue(n,a){a=Object.assign({priority:0},a);const o={priority:a.priority,run:n};if(this.size&&this._queue[this.size-1].priority>=a.priority){this._queue.push(o);return}const l=e.default(this._queue,o,(c,d)=>d.priority-c.priority);this._queue.splice(l,0,o)}dequeue(){const n=this._queue.shift();return n?.run}filter(n){return this._queue.filter(a=>a.priority===n.priority).map(a=>a.run)}get size(){return this._queue.length}}return $l.default=t,$l}var n_;function cO(){if(n_)return Pl;n_=1,Object.defineProperty(Pl,"__esModule",{value:!0});const e=sO(),t=iO(),r=lO(),n=()=>{},a=new t.TimeoutError;class o extends e{constructor(c){var d,f,p,m;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=n,this._resolveIdle=n,c=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:r.default},c),!(typeof c.intervalCap=="number"&&c.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(f=(d=c.intervalCap)===null||d===void 0?void 0:d.toString())!==null&&f!==void 0?f:""}\` (${typeof c.intervalCap})`);if(c.interval===void 0||!(Number.isFinite(c.interval)&&c.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(m=(p=c.interval)===null||p===void 0?void 0:p.toString())!==null&&m!==void 0?m:""}\` (${typeof c.interval})`);this._carryoverConcurrencyCount=c.carryoverConcurrencyCount,this._isIntervalIgnored=c.intervalCap===1/0||c.interval===0,this._intervalCap=c.intervalCap,this._interval=c.interval,this._queue=new c.queueClass,this._queueClass=c.queueClass,this.concurrency=c.concurrency,this._timeout=c.timeout,this._throwOnTimeout=c.throwOnTimeout===!0,this._isPaused=c.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=n,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=n,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const c=Date.now();if(this._intervalId===void 0){const d=this._intervalEnd-c;if(d<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},d)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const c=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const d=this._queue.dequeue();return d?(this.emit("active"),d(),c&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(c){if(!(typeof c=="number"&&c>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${c}\` (${typeof c})`);this._concurrency=c,this._processQueue()}async add(c,d={}){return new Promise((f,p)=>{const m=async()=>{this._pendingCount++,this._intervalCount++;try{const y=this._timeout===void 0&&d.timeout===void 0?c():t.default(Promise.resolve(c()),d.timeout===void 0?this._timeout:d.timeout,()=>{(d.throwOnTimeout===void 0?this._throwOnTimeout:d.throwOnTimeout)&&p(a)});f(await y)}catch(y){p(y)}this._next()};this._queue.enqueue(m,d),this._tryToStartAnother(),this.emit("add")})}async addAll(c,d){return Promise.all(c.map(async f=>this.add(f,d)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(c=>{const d=this._resolveEmpty;this._resolveEmpty=()=>{d(),c()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(c=>{const d=this._resolveIdle;this._resolveIdle=()=>{d(),c()}})}get size(){return this._queue.size}sizeBy(c){return this._queue.filter(c).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(c){this._timeout=c}}return Pl.default=o,Pl}var uO=cO();const Nn=Gs(uO),dO=[429,500,502,503,504];let s_=class{constructor(t){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,"default"in Nn?this.queue=new Nn.default({concurrency:this.maxConcurrency}):this.queue=new Nn({concurrency:this.maxConcurrency}),this.onFailedResponseHook=t?.onFailedResponseHook}call(t,...r){const n=this.onFailedResponseHook;return this.queue.add(()=>rc(()=>t(...r).catch(a=>{throw a instanceof Error?a:new Error(a)}),{async onFailedAttempt(a){if(a.message.startsWith("Cancel")||a.message.startsWith("TimeoutError")||a.name==="TimeoutError"||a.message.startsWith("AbortError")||a?.code==="ECONNABORTED")throw a;const o=a?.response;if(n&&await n(o))return;const l=o?.status??a?.status;if(l&&!dO.includes(+l))throw a},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(t,r,...n){return t.signal?Promise.race([this.call(r,...n),new Promise((a,o)=>{t.signal?.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(r,...n)}};function a_(e){return typeof e?._getType=="function"}function i_(e){const t={type:e._getType(),data:{content:e.content}};return e?.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs={...e.additional_kwargs}),t}const fO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function ze(e,t){if(!fO.test(e)){const r=t!==void 0?`Invalid UUID for ${t}: ${e}`:`Invalid UUID: ${e}`;throw new Error(r)}return e}const o_={};function Rh(e){o_[e]||(console.warn(e),o_[e]=!0)}var Ll={exports:{}},vf,l_;function jc(){if(l_)return vf;l_=1;const e="2.0.0",t=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,n=16,a=t-6;return vf={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},vf}var _f,c_;function Lc(){if(c_)return _f;c_=1;var e={};return _f=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{},_f}var u_;function uo(){return u_||(u_=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:a}=jc(),o=Lc();t=e.exports={};const l=t.re=[],c=t.safeRe=[],d=t.src=[],f=t.safeSrc=[],p=t.t={};let m=0;const y="[a-zA-Z0-9-]",_=[["\\s",1],["\\d",a],[y,n]],b=E=>{for(const[I,O]of _)E=E.split(`${I}*`).join(`${I}{0,${O}}`).split(`${I}+`).join(`${I}{1,${O}}`);return E},x=(E,I,O)=>{const A=b(I),D=m++;o(E,D,I),p[E]=D,d[D]=I,f[D]=A,l[D]=new RegExp(I,O?"g":void 0),c[D]=new RegExp(A,O?"g":void 0)};x("NUMERICIDENTIFIER","0|[1-9]\\d*"),x("NUMERICIDENTIFIERLOOSE","\\d+"),x("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${y}*`),x("MAINVERSION",`(${d[p.NUMERICIDENTIFIER]})\\.(${d[p.NUMERICIDENTIFIER]})\\.(${d[p.NUMERICIDENTIFIER]})`),x("MAINVERSIONLOOSE",`(${d[p.NUMERICIDENTIFIERLOOSE]})\\.(${d[p.NUMERICIDENTIFIERLOOSE]})\\.(${d[p.NUMERICIDENTIFIERLOOSE]})`),x("PRERELEASEIDENTIFIER",`(?:${d[p.NONNUMERICIDENTIFIER]}|${d[p.NUMERICIDENTIFIER]})`),x("PRERELEASEIDENTIFIERLOOSE",`(?:${d[p.NONNUMERICIDENTIFIER]}|${d[p.NUMERICIDENTIFIERLOOSE]})`),x("PRERELEASE",`(?:-(${d[p.PRERELEASEIDENTIFIER]}(?:\\.${d[p.PRERELEASEIDENTIFIER]})*))`),x("PRERELEASELOOSE",`(?:-?(${d[p.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${d[p.PRERELEASEIDENTIFIERLOOSE]})*))`),x("BUILDIDENTIFIER",`${y}+`),x("BUILD",`(?:\\+(${d[p.BUILDIDENTIFIER]}(?:\\.${d[p.BUILDIDENTIFIER]})*))`),x("FULLPLAIN",`v?${d[p.MAINVERSION]}${d[p.PRERELEASE]}?${d[p.BUILD]}?`),x("FULL",`^${d[p.FULLPLAIN]}$`),x("LOOSEPLAIN",`[v=\\s]*${d[p.MAINVERSIONLOOSE]}${d[p.PRERELEASELOOSE]}?${d[p.BUILD]}?`),x("LOOSE",`^${d[p.LOOSEPLAIN]}$`),x("GTLT","((?:<|>)?=?)"),x("XRANGEIDENTIFIERLOOSE",`${d[p.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),x("XRANGEIDENTIFIER",`${d[p.NUMERICIDENTIFIER]}|x|X|\\*`),x("XRANGEPLAIN",`[v=\\s]*(${d[p.XRANGEIDENTIFIER]})(?:\\.(${d[p.XRANGEIDENTIFIER]})(?:\\.(${d[p.XRANGEIDENTIFIER]})(?:${d[p.PRERELEASE]})?${d[p.BUILD]}?)?)?`),x("XRANGEPLAINLOOSE",`[v=\\s]*(${d[p.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[p.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[p.XRANGEIDENTIFIERLOOSE]})(?:${d[p.PRERELEASELOOSE]})?${d[p.BUILD]}?)?)?`),x("XRANGE",`^${d[p.GTLT]}\\s*${d[p.XRANGEPLAIN]}$`),x("XRANGELOOSE",`^${d[p.GTLT]}\\s*${d[p.XRANGEPLAINLOOSE]}$`),x("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),x("COERCE",`${d[p.COERCEPLAIN]}(?:$|[^\\d])`),x("COERCEFULL",d[p.COERCEPLAIN]+`(?:${d[p.PRERELEASE]})?(?:${d[p.BUILD]})?(?:$|[^\\d])`),x("COERCERTL",d[p.COERCE],!0),x("COERCERTLFULL",d[p.COERCEFULL],!0),x("LONETILDE","(?:~>?)"),x("TILDETRIM",`(\\s*)${d[p.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",x("TILDE",`^${d[p.LONETILDE]}${d[p.XRANGEPLAIN]}$`),x("TILDELOOSE",`^${d[p.LONETILDE]}${d[p.XRANGEPLAINLOOSE]}$`),x("LONECARET","(?:\\^)"),x("CARETTRIM",`(\\s*)${d[p.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",x("CARET",`^${d[p.LONECARET]}${d[p.XRANGEPLAIN]}$`),x("CARETLOOSE",`^${d[p.LONECARET]}${d[p.XRANGEPLAINLOOSE]}$`),x("COMPARATORLOOSE",`^${d[p.GTLT]}\\s*(${d[p.LOOSEPLAIN]})$|^$`),x("COMPARATOR",`^${d[p.GTLT]}\\s*(${d[p.FULLPLAIN]})$|^$`),x("COMPARATORTRIM",`(\\s*)${d[p.GTLT]}\\s*(${d[p.LOOSEPLAIN]}|${d[p.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",x("HYPHENRANGE",`^\\s*(${d[p.XRANGEPLAIN]})\\s+-\\s+(${d[p.XRANGEPLAIN]})\\s*$`),x("HYPHENRANGELOOSE",`^\\s*(${d[p.XRANGEPLAINLOOSE]})\\s+-\\s+(${d[p.XRANGEPLAINLOOSE]})\\s*$`),x("STAR","(<|>)?=?\\s*\\*"),x("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),x("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Ll,Ll.exports)),Ll.exports}var wf,d_;function jp(){if(d_)return wf;d_=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return wf=n=>n?typeof n!="object"?e:n:t,wf}var bf,f_;function mx(){if(f_)return bf;f_=1;const e=/^[0-9]+$/,t=(n,a)=>{if(typeof n=="number"&&typeof a=="number")return n===a?0:n<a?-1:1;const o=e.test(n),l=e.test(a);return o&&l&&(n=+n,a=+a),n===a?0:o&&!l?-1:l&&!o?1:n<a?-1:1};return bf={compareIdentifiers:t,rcompareIdentifiers:(n,a)=>t(a,n)},bf}var xf,h_;function Xt(){if(h_)return xf;h_=1;const e=Lc(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:r}=jc(),{safeRe:n,t:a}=uo(),o=jp(),{compareIdentifiers:l}=mx();class c{constructor(f,p){if(p=o(p),f instanceof c){if(f.loose===!!p.loose&&f.includePrerelease===!!p.includePrerelease)return f;f=f.version}else if(typeof f!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof f}".`);if(f.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",f,p),this.options=p,this.loose=!!p.loose,this.includePrerelease=!!p.includePrerelease;const m=f.trim().match(p.loose?n[a.LOOSE]:n[a.FULL]);if(!m)throw new TypeError(`Invalid Version: ${f}`);if(this.raw=f,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map(y=>{if(/^[0-9]+$/.test(y)){const _=+y;if(_>=0&&_<r)return _}return y}):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(f){if(e("SemVer.compare",this.version,this.options,f),!(f instanceof c)){if(typeof f=="string"&&f===this.version)return 0;f=new c(f,this.options)}return f.version===this.version?0:this.compareMain(f)||this.comparePre(f)}compareMain(f){return f instanceof c||(f=new c(f,this.options)),this.major<f.major?-1:this.major>f.major?1:this.minor<f.minor?-1:this.minor>f.minor?1:this.patch<f.patch?-1:this.patch>f.patch?1:0}comparePre(f){if(f instanceof c||(f=new c(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;let p=0;do{const m=this.prerelease[p],y=f.prerelease[p];if(e("prerelease compare",p,m,y),m===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(m===void 0)return-1;if(m===y)continue;return l(m,y)}while(++p)}compareBuild(f){f instanceof c||(f=new c(f,this.options));let p=0;do{const m=this.build[p],y=f.build[p];if(e("build compare",p,m,y),m===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(m===void 0)return-1;if(m===y)continue;return l(m,y)}while(++p)}inc(f,p,m){if(f.startsWith("pre")){if(!p&&m===!1)throw new Error("invalid increment argument: identifier is empty");if(p){const y=`-${p}`.match(this.options.loose?n[a.PRERELEASELOOSE]:n[a.PRERELEASE]);if(!y||y[1]!==p)throw new Error(`invalid identifier: ${p}`)}}switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",p,m);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",p,m);break;case"prepatch":this.prerelease.length=0,this.inc("patch",p,m),this.inc("pre",p,m);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",p,m),this.inc("pre",p,m);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const y=Number(m)?1:0;if(this.prerelease.length===0)this.prerelease=[y];else{let _=this.prerelease.length;for(;--_>=0;)typeof this.prerelease[_]=="number"&&(this.prerelease[_]++,_=-2);if(_===-1){if(p===this.prerelease.join(".")&&m===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(y)}}if(p){let _=[p,y];m===!1&&(_=[p]),l(this.prerelease[0],p)===0?isNaN(this.prerelease[1])&&(this.prerelease=_):this.prerelease=_}break}default:throw new Error(`invalid increment argument: ${f}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return xf=c,xf}var Ef,p_;function Va(){if(p_)return Ef;p_=1;const e=Xt();return Ef=(r,n,a=!1)=>{if(r instanceof e)return r;try{return new e(r,n)}catch(o){if(!a)return null;throw o}},Ef}var Sf,m_;function hO(){if(m_)return Sf;m_=1;const e=Va();return Sf=(r,n)=>{const a=e(r,n);return a?a.version:null},Sf}var kf,g_;function pO(){if(g_)return kf;g_=1;const e=Va();return kf=(r,n)=>{const a=e(r.trim().replace(/^[=v]+/,""),n);return a?a.version:null},kf}var Tf,y_;function mO(){if(y_)return Tf;y_=1;const e=Xt();return Tf=(r,n,a,o,l)=>{typeof a=="string"&&(l=o,o=a,a=void 0);try{return new e(r instanceof e?r.version:r,a).inc(n,o,l).version}catch{return null}},Tf}var Cf,v_;function gO(){if(v_)return Cf;v_=1;const e=Va();return Cf=(r,n)=>{const a=e(r,null,!0),o=e(n,null,!0),l=a.compare(o);if(l===0)return null;const c=l>0,d=c?a:o,f=c?o:a,p=!!d.prerelease.length;if(!!f.prerelease.length&&!p){if(!f.patch&&!f.minor)return"major";if(f.compareMain(d)===0)return f.minor&&!f.patch?"minor":"patch"}const y=p?"pre":"";return a.major!==o.major?y+"major":a.minor!==o.minor?y+"minor":a.patch!==o.patch?y+"patch":"prerelease"},Cf}var Nf,__;function yO(){if(__)return Nf;__=1;const e=Xt();return Nf=(r,n)=>new e(r,n).major,Nf}var If,w_;function vO(){if(w_)return If;w_=1;const e=Xt();return If=(r,n)=>new e(r,n).minor,If}var Rf,b_;function _O(){if(b_)return Rf;b_=1;const e=Xt();return Rf=(r,n)=>new e(r,n).patch,Rf}var Af,x_;function wO(){if(x_)return Af;x_=1;const e=Va();return Af=(r,n)=>{const a=e(r,n);return a&&a.prerelease.length?a.prerelease:null},Af}var Of,E_;function Xr(){if(E_)return Of;E_=1;const e=Xt();return Of=(r,n,a)=>new e(r,a).compare(new e(n,a)),Of}var Pf,S_;function bO(){if(S_)return Pf;S_=1;const e=Xr();return Pf=(r,n,a)=>e(n,r,a),Pf}var $f,k_;function xO(){if(k_)return $f;k_=1;const e=Xr();return $f=(r,n)=>e(r,n,!0),$f}var jf,T_;function Lp(){if(T_)return jf;T_=1;const e=Xt();return jf=(r,n,a)=>{const o=new e(r,a),l=new e(n,a);return o.compare(l)||o.compareBuild(l)},jf}var Lf,C_;function EO(){if(C_)return Lf;C_=1;const e=Lp();return Lf=(r,n)=>r.sort((a,o)=>e(a,o,n)),Lf}var Mf,N_;function SO(){if(N_)return Mf;N_=1;const e=Lp();return Mf=(r,n)=>r.sort((a,o)=>e(o,a,n)),Mf}var Df,I_;function Mc(){if(I_)return Df;I_=1;const e=Xr();return Df=(r,n,a)=>e(r,n,a)>0,Df}var zf,R_;function Mp(){if(R_)return zf;R_=1;const e=Xr();return zf=(r,n,a)=>e(r,n,a)<0,zf}var Ff,A_;function gx(){if(A_)return Ff;A_=1;const e=Xr();return Ff=(r,n,a)=>e(r,n,a)===0,Ff}var Uf,O_;function yx(){if(O_)return Uf;O_=1;const e=Xr();return Uf=(r,n,a)=>e(r,n,a)!==0,Uf}var Bf,P_;function Dp(){if(P_)return Bf;P_=1;const e=Xr();return Bf=(r,n,a)=>e(r,n,a)>=0,Bf}var Vf,$_;function zp(){if($_)return Vf;$_=1;const e=Xr();return Vf=(r,n,a)=>e(r,n,a)<=0,Vf}var Hf,j_;function vx(){if(j_)return Hf;j_=1;const e=gx(),t=yx(),r=Mc(),n=Dp(),a=Mp(),o=zp();return Hf=(c,d,f,p)=>{switch(d){case"===":return typeof c=="object"&&(c=c.version),typeof f=="object"&&(f=f.version),c===f;case"!==":return typeof c=="object"&&(c=c.version),typeof f=="object"&&(f=f.version),c!==f;case"":case"=":case"==":return e(c,f,p);case"!=":return t(c,f,p);case">":return r(c,f,p);case">=":return n(c,f,p);case"<":return a(c,f,p);case"<=":return o(c,f,p);default:throw new TypeError(`Invalid operator: ${d}`)}},Hf}var Gf,L_;function kO(){if(L_)return Gf;L_=1;const e=Xt(),t=Va(),{safeRe:r,t:n}=uo();return Gf=(o,l)=>{if(o instanceof e)return o;if(typeof o=="number"&&(o=String(o)),typeof o!="string")return null;l=l||{};let c=null;if(!l.rtl)c=o.match(l.includePrerelease?r[n.COERCEFULL]:r[n.COERCE]);else{const _=l.includePrerelease?r[n.COERCERTLFULL]:r[n.COERCERTL];let b;for(;(b=_.exec(o))&&(!c||c.index+c[0].length!==o.length);)(!c||b.index+b[0].length!==c.index+c[0].length)&&(c=b),_.lastIndex=b.index+b[1].length+b[2].length;_.lastIndex=-1}if(c===null)return null;const d=c[2],f=c[3]||"0",p=c[4]||"0",m=l.includePrerelease&&c[5]?`-${c[5]}`:"",y=l.includePrerelease&&c[6]?`+${c[6]}`:"";return t(`${d}.${f}.${p}${m}${y}`,l)},Gf}var qf,M_;function TO(){if(M_)return qf;M_=1;class e{constructor(){this.max=1e3,this.map=new Map}get(r){const n=this.map.get(r);if(n!==void 0)return this.map.delete(r),this.map.set(r,n),n}delete(r){return this.map.delete(r)}set(r,n){if(!this.delete(r)&&n!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(r,n)}return this}}return qf=e,qf}var Wf,D_;function Qr(){if(D_)return Wf;D_=1;const e=/\s+/g;class t{constructor(J,W){if(W=a(W),J instanceof t)return J.loose===!!W.loose&&J.includePrerelease===!!W.includePrerelease?J:new t(J.raw,W);if(J instanceof o)return this.raw=J.value,this.set=[[J]],this.formatted=void 0,this;if(this.options=W,this.loose=!!W.loose,this.includePrerelease=!!W.includePrerelease,this.raw=J.trim().replace(e," "),this.set=this.raw.split("||").map(te=>this.parseRange(te.trim())).filter(te=>te.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const te=this.set[0];if(this.set=this.set.filter(M=>!x(M[0])),this.set.length===0)this.set=[te];else if(this.set.length>1){for(const M of this.set)if(M.length===1&&E(M[0])){this.set=[M];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let J=0;J<this.set.length;J++){J>0&&(this.formatted+="||");const W=this.set[J];for(let te=0;te<W.length;te++)te>0&&(this.formatted+=" "),this.formatted+=W[te].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(J){const te=((this.options.includePrerelease&&_)|(this.options.loose&&b))+":"+J,M=n.get(te);if(M)return M;const q=this.options.loose,G=q?d[f.HYPHENRANGELOOSE]:d[f.HYPHENRANGE];J=J.replace(G,Ve(this.options.includePrerelease)),l("hyphen replace",J),J=J.replace(d[f.COMPARATORTRIM],p),l("comparator trim",J),J=J.replace(d[f.TILDETRIM],m),l("tilde trim",J),J=J.replace(d[f.CARETTRIM],y),l("caret trim",J);let P=J.split(" ").map(ue=>O(ue,this.options)).join(" ").split(/\s+/).map(ue=>ke(ue,this.options));q&&(P=P.filter(ue=>(l("loose invalid filter",ue,this.options),!!ue.match(d[f.COMPARATORLOOSE])))),l("range list",P);const U=new Map,se=P.map(ue=>new o(ue,this.options));for(const ue of se){if(x(ue))return[ue];U.set(ue.value,ue)}U.size>1&&U.has("")&&U.delete("");const le=[...U.values()];return n.set(te,le),le}intersects(J,W){if(!(J instanceof t))throw new TypeError("a Range is required");return this.set.some(te=>I(te,W)&&J.set.some(M=>I(M,W)&&te.every(q=>M.every(G=>q.intersects(G,W)))))}test(J){if(!J)return!1;if(typeof J=="string")try{J=new c(J,this.options)}catch{return!1}for(let W=0;W<this.set.length;W++)if(tt(this.set[W],J,this.options))return!0;return!1}}Wf=t;const r=TO(),n=new r,a=jp(),o=Dc(),l=Lc(),c=Xt(),{safeRe:d,t:f,comparatorTrimReplace:p,tildeTrimReplace:m,caretTrimReplace:y}=uo(),{FLAG_INCLUDE_PRERELEASE:_,FLAG_LOOSE:b}=jc(),x=ee=>ee.value==="<0.0.0-0",E=ee=>ee.value==="",I=(ee,J)=>{let W=!0;const te=ee.slice();let M=te.pop();for(;W&&te.length;)W=te.every(q=>M.intersects(q,J)),M=te.pop();return W},O=(ee,J)=>(ee=ee.replace(d[f.BUILD],""),l("comp",ee,J),ee=Z(ee,J),l("caret",ee),ee=D(ee,J),l("tildes",ee),ee=C(ee,J),l("xrange",ee),ee=Ne(ee,J),l("stars",ee),ee),A=ee=>!ee||ee.toLowerCase()==="x"||ee==="*",D=(ee,J)=>ee.trim().split(/\s+/).map(W=>H(W,J)).join(" "),H=(ee,J)=>{const W=J.loose?d[f.TILDELOOSE]:d[f.TILDE];return ee.replace(W,(te,M,q,G,P)=>{l("tilde",ee,te,M,q,G,P);let U;return A(M)?U="":A(q)?U=`>=${M}.0.0 <${+M+1}.0.0-0`:A(G)?U=`>=${M}.${q}.0 <${M}.${+q+1}.0-0`:P?(l("replaceTilde pr",P),U=`>=${M}.${q}.${G}-${P} <${M}.${+q+1}.0-0`):U=`>=${M}.${q}.${G} <${M}.${+q+1}.0-0`,l("tilde return",U),U})},Z=(ee,J)=>ee.trim().split(/\s+/).map(W=>K(W,J)).join(" "),K=(ee,J)=>{l("caret",ee,J);const W=J.loose?d[f.CARETLOOSE]:d[f.CARET],te=J.includePrerelease?"-0":"";return ee.replace(W,(M,q,G,P,U)=>{l("caret",ee,M,q,G,P,U);let se;return A(q)?se="":A(G)?se=`>=${q}.0.0${te} <${+q+1}.0.0-0`:A(P)?q==="0"?se=`>=${q}.${G}.0${te} <${q}.${+G+1}.0-0`:se=`>=${q}.${G}.0${te} <${+q+1}.0.0-0`:U?(l("replaceCaret pr",U),q==="0"?G==="0"?se=`>=${q}.${G}.${P}-${U} <${q}.${G}.${+P+1}-0`:se=`>=${q}.${G}.${P}-${U} <${q}.${+G+1}.0-0`:se=`>=${q}.${G}.${P}-${U} <${+q+1}.0.0-0`):(l("no pr"),q==="0"?G==="0"?se=`>=${q}.${G}.${P}${te} <${q}.${G}.${+P+1}-0`:se=`>=${q}.${G}.${P}${te} <${q}.${+G+1}.0-0`:se=`>=${q}.${G}.${P} <${+q+1}.0.0-0`),l("caret return",se),se})},C=(ee,J)=>(l("replaceXRanges",ee,J),ee.split(/\s+/).map(W=>ce(W,J)).join(" ")),ce=(ee,J)=>{ee=ee.trim();const W=J.loose?d[f.XRANGELOOSE]:d[f.XRANGE];return ee.replace(W,(te,M,q,G,P,U)=>{l("xRange",ee,te,M,q,G,P,U);const se=A(q),le=se||A(G),ue=le||A(P),T=ue;return M==="="&&T&&(M=""),U=J.includePrerelease?"-0":"",se?M===">"||M==="<"?te="<0.0.0-0":te="*":M&&T?(le&&(G=0),P=0,M===">"?(M=">=",le?(q=+q+1,G=0,P=0):(G=+G+1,P=0)):M==="<="&&(M="<",le?q=+q+1:G=+G+1),M==="<"&&(U="-0"),te=`${M+q}.${G}.${P}${U}`):le?te=`>=${q}.0.0${U} <${+q+1}.0.0-0`:ue&&(te=`>=${q}.${G}.0${U} <${q}.${+G+1}.0-0`),l("xRange return",te),te})},Ne=(ee,J)=>(l("replaceStars",ee,J),ee.trim().replace(d[f.STAR],"")),ke=(ee,J)=>(l("replaceGTE0",ee,J),ee.trim().replace(d[J.includePrerelease?f.GTE0PRE:f.GTE0],"")),Ve=ee=>(J,W,te,M,q,G,P,U,se,le,ue,T)=>(A(te)?W="":A(M)?W=`>=${te}.0.0${ee?"-0":""}`:A(q)?W=`>=${te}.${M}.0${ee?"-0":""}`:G?W=`>=${W}`:W=`>=${W}${ee?"-0":""}`,A(se)?U="":A(le)?U=`<${+se+1}.0.0-0`:A(ue)?U=`<${se}.${+le+1}.0-0`:T?U=`<=${se}.${le}.${ue}-${T}`:ee?U=`<${se}.${le}.${+ue+1}-0`:U=`<=${U}`,`${W} ${U}`.trim()),tt=(ee,J,W)=>{for(let te=0;te<ee.length;te++)if(!ee[te].test(J))return!1;if(J.prerelease.length&&!W.includePrerelease){for(let te=0;te<ee.length;te++)if(l(ee[te].semver),ee[te].semver!==o.ANY&&ee[te].semver.prerelease.length>0){const M=ee[te].semver;if(M.major===J.major&&M.minor===J.minor&&M.patch===J.patch)return!0}return!1}return!0};return Wf}var Zf,z_;function Dc(){if(z_)return Zf;z_=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(p,m){if(m=r(m),p instanceof t){if(p.loose===!!m.loose)return p;p=p.value}p=p.trim().split(/\s+/).join(" "),l("comparator",p,m),this.options=m,this.loose=!!m.loose,this.parse(p),this.semver===e?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(p){const m=this.options.loose?n[a.COMPARATORLOOSE]:n[a.COMPARATOR],y=p.match(m);if(!y)throw new TypeError(`Invalid comparator: ${p}`);this.operator=y[1]!==void 0?y[1]:"",this.operator==="="&&(this.operator=""),y[2]?this.semver=new c(y[2],this.options.loose):this.semver=e}toString(){return this.value}test(p){if(l("Comparator.test",p,this.options.loose),this.semver===e||p===e)return!0;if(typeof p=="string")try{p=new c(p,this.options)}catch{return!1}return o(p,this.operator,this.semver,this.options)}intersects(p,m){if(!(p instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new d(p.value,m).test(this.value):p.operator===""?p.value===""?!0:new d(this.value,m).test(p.semver):(m=r(m),m.includePrerelease&&(this.value==="<0.0.0-0"||p.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||p.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&p.operator.startsWith(">")||this.operator.startsWith("<")&&p.operator.startsWith("<")||this.semver.version===p.semver.version&&this.operator.includes("=")&&p.operator.includes("=")||o(this.semver,"<",p.semver,m)&&this.operator.startsWith(">")&&p.operator.startsWith("<")||o(this.semver,">",p.semver,m)&&this.operator.startsWith("<")&&p.operator.startsWith(">")))}}Zf=t;const r=jp(),{safeRe:n,t:a}=uo(),o=vx(),l=Lc(),c=Xt(),d=Qr();return Zf}var Kf,F_;function zc(){if(F_)return Kf;F_=1;const e=Qr();return Kf=(r,n,a)=>{try{n=new e(n,a)}catch{return!1}return n.test(r)},Kf}var Jf,U_;function CO(){if(U_)return Jf;U_=1;const e=Qr();return Jf=(r,n)=>new e(r,n).set.map(a=>a.map(o=>o.value).join(" ").trim().split(" ")),Jf}var Yf,B_;function NO(){if(B_)return Yf;B_=1;const e=Xt(),t=Qr();return Yf=(n,a,o)=>{let l=null,c=null,d=null;try{d=new t(a,o)}catch{return null}return n.forEach(f=>{d.test(f)&&(!l||c.compare(f)===-1)&&(l=f,c=new e(l,o))}),l},Yf}var Xf,V_;function IO(){if(V_)return Xf;V_=1;const e=Xt(),t=Qr();return Xf=(n,a,o)=>{let l=null,c=null,d=null;try{d=new t(a,o)}catch{return null}return n.forEach(f=>{d.test(f)&&(!l||c.compare(f)===1)&&(l=f,c=new e(l,o))}),l},Xf}var Qf,H_;function RO(){if(H_)return Qf;H_=1;const e=Xt(),t=Qr(),r=Mc();return Qf=(a,o)=>{a=new t(a,o);let l=new e("0.0.0");if(a.test(l)||(l=new e("0.0.0-0"),a.test(l)))return l;l=null;for(let c=0;c<a.set.length;++c){const d=a.set[c];let f=null;d.forEach(p=>{const m=new e(p.semver.version);switch(p.operator){case">":m.prerelease.length===0?m.patch++:m.prerelease.push(0),m.raw=m.format();case"":case">=":(!f||r(m,f))&&(f=m);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${p.operator}`)}}),f&&(!l||r(l,f))&&(l=f)}return l&&a.test(l)?l:null},Qf}var eh,G_;function AO(){if(G_)return eh;G_=1;const e=Qr();return eh=(r,n)=>{try{return new e(r,n).range||"*"}catch{return null}},eh}var th,q_;function Fp(){if(q_)return th;q_=1;const e=Xt(),t=Dc(),{ANY:r}=t,n=Qr(),a=zc(),o=Mc(),l=Mp(),c=zp(),d=Dp();return th=(p,m,y,_)=>{p=new e(p,_),m=new n(m,_);let b,x,E,I,O;switch(y){case">":b=o,x=c,E=l,I=">",O=">=";break;case"<":b=l,x=d,E=o,I="<",O="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(p,m,_))return!1;for(let A=0;A<m.set.length;++A){const D=m.set[A];let H=null,Z=null;if(D.forEach(K=>{K.semver===r&&(K=new t(">=0.0.0")),H=H||K,Z=Z||K,b(K.semver,H.semver,_)?H=K:E(K.semver,Z.semver,_)&&(Z=K)}),H.operator===I||H.operator===O||(!Z.operator||Z.operator===I)&&x(p,Z.semver))return!1;if(Z.operator===O&&E(p,Z.semver))return!1}return!0},th}var rh,W_;function OO(){if(W_)return rh;W_=1;const e=Fp();return rh=(r,n,a)=>e(r,n,">",a),rh}var nh,Z_;function PO(){if(Z_)return nh;Z_=1;const e=Fp();return nh=(r,n,a)=>e(r,n,"<",a),nh}var sh,K_;function $O(){if(K_)return sh;K_=1;const e=Qr();return sh=(r,n,a)=>(r=new e(r,a),n=new e(n,a),r.intersects(n,a)),sh}var ah,J_;function jO(){if(J_)return ah;J_=1;const e=zc(),t=Xr();return ah=(r,n,a)=>{const o=[];let l=null,c=null;const d=r.sort((y,_)=>t(y,_,a));for(const y of d)e(y,n,a)?(c=y,l||(l=y)):(c&&o.push([l,c]),c=null,l=null);l&&o.push([l,null]);const f=[];for(const[y,_]of o)y===_?f.push(y):!_&&y===d[0]?f.push("*"):_?y===d[0]?f.push(`<=${_}`):f.push(`${y} - ${_}`):f.push(`>=${y}`);const p=f.join(" || "),m=typeof n.raw=="string"?n.raw:String(n);return p.length<m.length?p:n},ah}var ih,Y_;function LO(){if(Y_)return ih;Y_=1;const e=Qr(),t=Dc(),{ANY:r}=t,n=zc(),a=Xr(),o=(m,y,_={})=>{if(m===y)return!0;m=new e(m,_),y=new e(y,_);let b=!1;e:for(const x of m.set){for(const E of y.set){const I=d(x,E,_);if(b=b||I!==null,I)continue e}if(b)return!1}return!0},l=[new t(">=0.0.0-0")],c=[new t(">=0.0.0")],d=(m,y,_)=>{if(m===y)return!0;if(m.length===1&&m[0].semver===r){if(y.length===1&&y[0].semver===r)return!0;_.includePrerelease?m=l:m=c}if(y.length===1&&y[0].semver===r){if(_.includePrerelease)return!0;y=c}const b=new Set;let x,E;for(const C of m)C.operator===">"||C.operator===">="?x=f(x,C,_):C.operator==="<"||C.operator==="<="?E=p(E,C,_):b.add(C.semver);if(b.size>1)return null;let I;if(x&&E){if(I=a(x.semver,E.semver,_),I>0)return null;if(I===0&&(x.operator!==">="||E.operator!=="<="))return null}for(const C of b){if(x&&!n(C,String(x),_)||E&&!n(C,String(E),_))return null;for(const ce of y)if(!n(C,String(ce),_))return!1;return!0}let O,A,D,H,Z=E&&!_.includePrerelease&&E.semver.prerelease.length?E.semver:!1,K=x&&!_.includePrerelease&&x.semver.prerelease.length?x.semver:!1;Z&&Z.prerelease.length===1&&E.operator==="<"&&Z.prerelease[0]===0&&(Z=!1);for(const C of y){if(H=H||C.operator===">"||C.operator===">=",D=D||C.operator==="<"||C.operator==="<=",x){if(K&&C.semver.prerelease&&C.semver.prerelease.length&&C.semver.major===K.major&&C.semver.minor===K.minor&&C.semver.patch===K.patch&&(K=!1),C.operator===">"||C.operator===">="){if(O=f(x,C,_),O===C&&O!==x)return!1}else if(x.operator===">="&&!n(x.semver,String(C),_))return!1}if(E){if(Z&&C.semver.prerelease&&C.semver.prerelease.length&&C.semver.major===Z.major&&C.semver.minor===Z.minor&&C.semver.patch===Z.patch&&(Z=!1),C.operator==="<"||C.operator==="<="){if(A=p(E,C,_),A===C&&A!==E)return!1}else if(E.operator==="<="&&!n(E.semver,String(C),_))return!1}if(!C.operator&&(E||x)&&I!==0)return!1}return!(x&&D&&!E&&I!==0||E&&H&&!x&&I!==0||K||Z)},f=(m,y,_)=>{if(!m)return y;const b=a(m.semver,y.semver,_);return b>0?m:b<0||y.operator===">"&&m.operator===">="?y:m},p=(m,y,_)=>{if(!m)return y;const b=a(m.semver,y.semver,_);return b<0?m:b>0||y.operator==="<"&&m.operator==="<="?y:m};return ih=o,ih}var oh,X_;function MO(){if(X_)return oh;X_=1;const e=uo(),t=jc(),r=Xt(),n=mx(),a=Va(),o=hO(),l=pO(),c=mO(),d=gO(),f=yO(),p=vO(),m=_O(),y=wO(),_=Xr(),b=bO(),x=xO(),E=Lp(),I=EO(),O=SO(),A=Mc(),D=Mp(),H=gx(),Z=yx(),K=Dp(),C=zp(),ce=vx(),Ne=kO(),ke=Dc(),Ve=Qr(),tt=zc(),ee=CO(),J=NO(),W=IO(),te=RO(),M=AO(),q=Fp(),G=OO(),P=PO(),U=$O(),se=jO(),le=LO();return oh={parse:a,valid:o,clean:l,inc:c,diff:d,major:f,minor:p,patch:m,prerelease:y,compare:_,rcompare:b,compareLoose:x,compareBuild:E,sort:I,rsort:O,gt:A,lt:D,eq:H,neq:Z,gte:K,lte:C,cmp:ce,coerce:Ne,Comparator:ke,Range:Ve,satisfies:tt,toComparators:ee,maxSatisfying:J,minSatisfying:W,minVersion:te,validRange:M,outside:q,gtr:G,ltr:P,intersects:U,simplifyRange:se,subset:le,SemVer:r,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers},oh}MO();function os(e){if(!e||e.split("/").length>2||e.startsWith("/")||e.endsWith("/")||e.split(":").length>2)throw new Error(`Invalid identifier format: ${e}`);const[t,r]=e.split(":"),n=r||"latest";if(t.includes("/")){const[a,o]=t.split("/",2);if(!a||!o)throw new Error(`Invalid identifier format: ${e}`);return[a,o,n]}else{if(!t)throw new Error(`Invalid identifier format: ${e}`);return["-",t,n]}}class DO extends Error{constructor(t){super(t),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function Ce(e,t,r){let n;if(e.ok){r&&(n=await e.text());return}if(e.status===403)try{(await e.json())?.error==="org_scoped_key_requires_workspace"&&(n="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch{const c=new Error(`${e.status} ${e.statusText}`);throw c.status=e?.status,c}if(n===void 0)try{n=await e.text()}catch{n=""}const a=`Failed to ${t}. Received status [${e.status}]: ${e.statusText}. Message: ${n}`;if(e.status===409)throw new DO(a);const o=new Error(a);throw o.status=e.status,o}const _x="ERR_CONFLICTING_ENDPOINTS";class zO extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:_x}),this.name="ConflictingEndpointsError"}}function FO(e){return typeof e=="object"&&e!==null&&e.code===_x}var Q_="[...]",UO={result:"[Circular]"},nc=[],Ca=[];const BO=new TextEncoder;function VO(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Ml(e){return BO.encode(e)}function wx(e){if(e&&typeof e=="object"&&e!==null){if(e instanceof Map)return Object.fromEntries(e);if(e instanceof Set)return Array.from(e);if(e instanceof Date)return e.toISOString();if(e instanceof RegExp)return e.toString();if(e instanceof Error)return{name:e.name,message:e.message}}else if(typeof e=="bigint")return e.toString();return e}function HO(e){return function(t,r){return wx(r)}}function gr(e,t,r,n,a){try{const o=JSON.stringify(e,HO(r),n);return Ml(o)}catch(o){if(!o.message?.includes("Converting circular structure to JSON"))return console.warn(`[WARNING]: LangSmith received unserializable value.${t?`
Context: ${t}`:""}`),Ml("[Unserializable]");cr("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${t?`
Context: ${t}`:""}`),typeof a>"u"&&(a=VO()),Ah(e,"",0,[],void 0,0,a);let l;try{Ca.length===0?l=JSON.stringify(e,r,n):l=JSON.stringify(e,GO(r),n)}catch{return Ml("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;nc.length!==0;){const c=nc.pop();c.length===4?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return Ml(l)}}function lh(e,t,r,n){var a=Object.getOwnPropertyDescriptor(n,r);a.get!==void 0?a.configurable?(Object.defineProperty(n,r,{value:e}),nc.push([n,r,t,a])):Ca.push([t,r,e]):(n[r]=e,nc.push([n,r,t]))}function Ah(e,t,r,n,a,o,l){o+=1;var c;if(typeof e=="object"&&e!==null){for(c=0;c<n.length;c++)if(n[c]===e){lh(UO,e,t,a);return}if(typeof l.depthLimit<"u"&&o>l.depthLimit){lh(Q_,e,t,a);return}if(typeof l.edgesLimit<"u"&&r+1>l.edgesLimit){lh(Q_,e,t,a);return}if(n.push(e),Array.isArray(e))for(c=0;c<e.length;c++)Ah(e[c],c,c,n,e,o,l);else{e=wx(e);var d=Object.keys(e);for(c=0;c<d.length;c++){var f=d[c];Ah(e[f],f,c,n,e,o,l)}}n.pop()}}function GO(e){return e=typeof e<"u"?e:function(t,r){return r},function(t,r){if(Ca.length>0)for(var n=0;n<Ca.length;n++){var a=Ca[n];if(a[1]===t&&a[0]===r){r=a[2],Ca.splice(n,1);break}}return e.call(this,t,r)}}function e0(e,t){const r=dx(),n=t??fx(),a=e.extra??{},o=a.metadata;return e.extra={...a,runtime:{...r,...a?.runtime},metadata:{...n,...n.revision_id||"revision_id"in e&&e.revision_id?{revision_id:("revision_id"in e?e.revision_id:void 0)??n.revision_id}:{},...o}},e}const qO=e=>{const t=e?.toString()??cr("TRACING_SAMPLING_RATE");if(t===void 0)return;const r=parseFloat(t);if(r<0||r>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${r}`);return r},WO=e=>{const r=e.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return r==="localhost"||r==="127.0.0.1"||r==="::1"};async function ZO(e){const t=[];for await(const r of e)t.push(r);return t}function Dl(e){if(e!==void 0)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const KO=async e=>{if(e?.status===429){const t=parseInt(e.headers.get("retry-after")??"10",10)*1e3;if(t>0)return await new Promise(r=>setTimeout(r,t)),!0}return!1};function t0(e){return typeof e=="number"?Number(e.toFixed(4)):e}class JO{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(t){let r;const n=new Promise(o=>{r=o}),a=gr(t.item,`Serializing run with id: ${t.item.id}`).length;return this.items.push({action:t.action,payload:t.item,otelContext:t.otelContext,apiKey:t.apiKey,apiUrl:t.apiUrl,itemPromiseResolve:r,itemPromise:n,size:a}),this.sizeBytes+=a,n}pop({upToSizeBytes:t,upToSize:r}){if(t<1)throw new Error("Number of bytes to pop off may not be less than 1.");const n=[];let a=0;for(;a+(this.peek()?.size??0)<t&&this.items.length>0&&n.length<r;){const o=this.items.shift();o&&(n.push(o),a+=o.size,this.sizeBytes-=o.size)}if(n.length===0&&this.items.length>0){const o=this.items.shift();n.push(o),a+=o.size,this.sizeBytes-=o.size}return[n.map(o=>({action:o.action,item:o.payload,otelContext:o.otelContext,apiKey:o.apiKey,apiUrl:o.apiUrl})),()=>n.forEach(o=>o.itemPromiseResolve())]}}const YO=24*1024*1024,XO=1e4,QO=100,r0="https://api.smith.langchain.com";class Ji{get _fetch(){return this.fetchImplementation||jA(this.debug)}constructor(t={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new JO}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSizeLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:dn("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachedLSEnvVarsForMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:dn("LANGSMITH_DEBUG")==="true"});const r=Ji.getDefaultClientConfig();if(this.tracingSampleRate=qO(t.tracingSamplingRate),this.apiUrl=Dl(t.apiUrl??r.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=Dl(t.apiKey??r.apiKey),this.webUrl=Dl(t.webUrl??r.webUrl),this.webUrl?.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=Dl(t.workspaceId??cr("WORKSPACE_ID")),this.timeout_ms=t.timeout_ms??9e4,this.caller=new s_({...t.callerOptions??{},maxRetries:4,debug:t.debug??this.debug}),this.traceBatchConcurrency=t.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=t.debug??this.debug,this.fetchImplementation=t.fetchImplementation,this.batchIngestCaller=new s_({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...t.callerOptions??{},onFailedResponseHook:KO,debug:t.debug??this.debug}),this.hideInputs=t.hideInputs??t.anonymizer??r.hideInputs,this.hideOutputs=t.hideOutputs??t.anonymizer??r.hideOutputs,this.autoBatchTracing=t.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=t.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=t.batchSizeBytesLimit,this.batchSizeLimit=t.batchSizeLimit,this.fetchOptions=t.fetchOptions||{},this.manualFlushMode=t.manualFlushMode??this.manualFlushMode,hx()&&(this.langSmithToOTELTranslator=new XA),this.cachedLSEnvVarsForMetadata=fx()}static getDefaultClientConfig(){const t=cr("API_KEY"),r=cr("ENDPOINT")??r0,n=cr("HIDE_INPUTS")==="true",a=cr("HIDE_OUTPUTS")==="true";return{apiUrl:r,apiKey:t,webUrl:void 0,hideInputs:n,hideOutputs:a}}getHostUrl(){return this.webUrl?this.webUrl:WO(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const t={"User-Agent":`langsmith-js/${lx}`};return this.apiKey&&(t["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(t["x-tenant-id"]=this.workspaceId),t}_getPlatformEndpointPath(t){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${t}`:`/platform/${t}`}async processInputs(t){return this.hideInputs===!1?t:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(t):t}async processOutputs(t){return this.hideOutputs===!1?t:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(t):t}async prepareRunCreateOrUpdateInputs(t){const r={...t};return r.inputs!==void 0&&(r.inputs=await this.processInputs(r.inputs)),r.outputs!==void 0&&(r.outputs=await this.processOutputs(r.outputs)),r}async _getResponse(t,r){const n=r?.toString()??"",a=`${this.apiUrl}${t}?${n}`;return await this.caller.call(async()=>{const l=await this._fetch(a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(l,`fetch ${t}`),l})}async _get(t,r){return(await this._getResponse(t,r)).json()}async*_getPaginated(t,r=new URLSearchParams,n){let a=Number(r.get("offset"))||0;const o=Number(r.get("limit"))||100;for(;;){r.set("offset",String(a)),r.set("limit",String(o));const l=`${this.apiUrl}${t}?${r}`,c=await this.caller.call(async()=>{const f=await this._fetch(l,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(f,`fetch ${t}`),f}),d=n?n(await c.json()):await c.json();if(d.length===0||(yield d,d.length<o))break;a+=d.length}}async*_getCursorPaginatedList(t,r=null,n="POST",a="runs"){const o=r?{...r}:{};for(;;){const l=JSON.stringify(o),d=await(await this.caller.call(async()=>{const p=await this._fetch(`${this.apiUrl}${t}`,{method:n,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Ce(p,`fetch ${t}`),p})).json();if(!d||!d[a])break;yield d[a];const f=d.cursors;if(!f||!f.next)break;o.cursor=f.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(t,r=!1){if(this.tracingSampleRate===void 0)return t;if(r){const n=[];for(const a of t)this.filteredPostUuids.has(a.trace_id)?a.id===a.trace_id&&this.filteredPostUuids.delete(a.trace_id):n.push(a);return n}else{const n=[];for(const a of t){const o=a.trace_id??a.id;this.filteredPostUuids.has(o)||(a.id===o?this._shouldSample()?n.push(a):this.filteredPostUuids.add(o):n.push(a))}return n}}async _getBatchSizeLimitBytes(){const t=await this._ensureServerInfo();return this.batchSizeBytesLimit??t.batch_ingest_config?.size_limit_bytes??YO}async _getBatchSizeLimit(){const t=await this._ensureServerInfo();return this.batchSizeLimit??t.batch_ingest_config?.size_limit??QO}async _getDatasetExamplesMultiPartSupport(){return(await this._ensureServerInfo()).instance_flags?.dataset_examples_multipart_enabled??!1}drainAutoBatchQueue({batchSizeLimitBytes:t,batchSizeLimit:r}){const n=[];for(;this.autoBatchQueue.items.length>0;){const[a,o]=this.autoBatchQueue.pop({upToSizeBytes:t,upToSize:r});if(!a.length){o();break}const l=a.reduce((f,p)=>{const m=p.apiUrl??this.apiUrl,y=p.apiKey??this.apiKey,b=p.apiKey===this.apiKey&&p.apiUrl===this.apiUrl?"default":`${m}|${y}`;return f[b]||(f[b]=[]),f[b].push(p),f},{}),c=[];for(const[f,p]of Object.entries(l)){const m=this._processBatch(p,{apiUrl:f==="default"?void 0:f.split("|")[0],apiKey:f==="default"?void 0:f.split("|")[1]});c.push(m)}const d=Promise.all(c).finally(o);n.push(d)}return Promise.all(n)}async _processBatch(t,r){if(t.length)try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(t);else{const n={runCreates:t.filter(o=>o.action==="create").map(o=>o.item),runUpdates:t.filter(o=>o.action==="update").map(o=>o.item)},a=await this._ensureServerInfo();if(a?.batch_ingest_config?.use_multipart_endpoint){const o=a?.instance_flags?.gzip_body_enabled;await this.multipartIngestRuns(n,{...r,useGzip:o})}else await this.batchIngestRuns(n,r)}}catch(n){console.error("Error exporting batch:",n)}}_sendBatchToOTELTranslator(t){if(this.langSmithToOTELTranslator!==void 0){const r=new Map,n=[];for(const a of t)a.item.id&&a.otelContext&&(r.set(a.item.id,a.otelContext),a.action==="create"?n.push({operation:"post",id:a.item.id,trace_id:a.item.trace_id??a.item.id,run:a.item}):n.push({operation:"patch",id:a.item.id,trace_id:a.item.trace_id??a.item.id,run:a.item}));this.langSmithToOTELTranslator.exportBatch(n,r)}}async processRunOperation(t){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,t.item=e0(t.item,this.cachedLSEnvVarsForMetadata);const r=this.autoBatchQueue.push(t);if(this.manualFlushMode)return r;const n=await this._getBatchSizeLimitBytes(),a=await this._getBatchSizeLimit();return(this.autoBatchQueue.sizeBytes>n||this.autoBatchQueue.items.length>a)&&this.drainAutoBatchQueue({batchSizeLimitBytes:n,batchSizeLimit:a}),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue({batchSizeLimitBytes:n,batchSizeLimit:a})},this.autoBatchAggregationDelayMs)),r}async _getServerInfo(){const r=await(await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(XO),...this.fetchOptions});return await Ce(n,"get server info"),n})).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(r,null,2)+`
`),r}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(t){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${t.status??"Unspecified status code"} ${t.message}`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(t=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),t))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const t=await this._getBatchSizeLimitBytes(),r=await this._getBatchSizeLimit();await this.drainAutoBatchQueue({batchSizeLimitBytes:t,batchSizeLimit:r})}_cloneCurrentOTELContext(){const t=px(),r=ZA();if(this.langSmithToOTELTranslator!==void 0){const n=t.getActiveSpan();if(n)return t.setSpan(r.active(),n)}}async createRun(t,r){if(!this._filterForSampling([t]).length)return;const n={...this.headers,"Content-Type":"application/json"},a=t.project_name;delete t.project_name;const o=await this.prepareRunCreateOrUpdateInputs({session_name:a,...t,start_time:t.start_time??Date.now()});if(this.autoBatchTracing&&o.trace_id!==void 0&&o.dotted_order!==void 0){const d=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:o,otelContext:d,apiKey:r?.apiKey,apiUrl:r?.apiUrl}).catch(console.error);return}const l=e0(o,this.cachedLSEnvVarsForMetadata);r?.apiKey!==void 0&&(n["x-api-key"]=r.apiKey),r?.workspaceId!==void 0&&(n["x-tenant-id"]=r.workspaceId);const c=gr(l,`Creating run with id: ${l.id}`);await this.caller.call(async()=>{const d=await this._fetch(`${r?.apiUrl??this.apiUrl}/runs`,{method:"POST",headers:n,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Ce(d,"create run",!0),d})}async batchIngestRuns({runCreates:t,runUpdates:r},n){if(t===void 0&&r===void 0)return;let a=await Promise.all(t?.map(d=>this.prepareRunCreateOrUpdateInputs(d))??[]),o=await Promise.all(r?.map(d=>this.prepareRunCreateOrUpdateInputs(d))??[]);if(a.length>0&&o.length>0){const d=a.reduce((p,m)=>(m.id&&(p[m.id]=m),p),{}),f=[];for(const p of o)p.id!==void 0&&d[p.id]?d[p.id]={...d[p.id],...p}:f.push(p);a=Object.values(d),o=f}const l={post:a,patch:o};if(!l.post.length&&!l.patch.length)return;const c={post:[],patch:[]};for(const d of["post","patch"]){const f=d,p=l[f].reverse();let m=p.pop();for(;m!==void 0;)c[f].push(m),m=p.pop()}if(c.post.length>0||c.patch.length>0){const d=c.post.map(f=>f.id).concat(c.patch.map(f=>f.id)).join(",");await this._postBatchIngestRuns(gr(c,`Ingesting runs with ids: ${d}`),n)}}async _postBatchIngestRuns(t,r){const n={...this.headers,"Content-Type":"application/json",Accept:"application/json"};r?.apiKey!==void 0&&(n["x-api-key"]=r.apiKey),await this.batchIngestCaller.call(async()=>{const a=await this._fetch(`${r?.apiUrl??this.apiUrl}/runs/batch`,{method:"POST",headers:n,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:t});return await Ce(a,"batch create run",!0),a})}async multipartIngestRuns({runCreates:t,runUpdates:r},n){if(t===void 0&&r===void 0)return;const a={};let o=[];for(const m of t??[]){const y=await this.prepareRunCreateOrUpdateInputs(m);y.id!==void 0&&y.attachments!==void 0&&(a[y.id]=y.attachments),delete y.attachments,o.push(y)}let l=[];for(const m of r??[])l.push(await this.prepareRunCreateOrUpdateInputs(m));if(o.find(m=>m.trace_id===void 0||m.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(l.find(m=>m.trace_id===void 0||m.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(o.length>0&&l.length>0){const m=o.reduce((_,b)=>(b.id&&(_[b.id]=b),_),{}),y=[];for(const _ of l)_.id!==void 0&&m[_.id]?m[_.id]={...m[_.id],..._}:y.push(_);o=Object.values(m),l=y}if(o.length===0&&l.length===0)return;const f=[],p=[];for(const[m,y]of[["post",o],["patch",l]])for(const _ of y){const{inputs:b,outputs:x,events:E,extra:I,error:O,serialized:A,attachments:D,...H}=_,Z={inputs:b,outputs:x,events:E,extra:I,error:O,serialized:A},K=gr(H,`Serializing for multipart ingestion of run with id: ${H.id}`);p.push({name:`${m}.${H.id}`,payload:new Blob([K],{type:`application/json; length=${K.length}`})});for(const[C,ce]of Object.entries(Z)){if(ce===void 0)continue;const Ne=gr(ce,`Serializing ${C} for multipart ingestion of run with id: ${H.id}`);p.push({name:`${m}.${H.id}.${C}`,payload:new Blob([Ne],{type:`application/json; length=${Ne.length}`})})}if(H.id!==void 0){const C=a[H.id];if(C){delete a[H.id];for(const[ce,Ne]of Object.entries(C)){let ke,Ve;if(Array.isArray(Ne)?[ke,Ve]=Ne:(ke=Ne.mimeType,Ve=Ne.data),ce.includes(".")){console.warn(`Skipping attachment '${ce}' for run ${H.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}p.push({name:`attachment.${H.id}.${ce}`,payload:new Blob([Ve],{type:`${ke}; length=${Ve.byteLength}`})})}}}f.push(`trace=${H.trace_id},id=${H.id}`)}await this._sendMultipartRequest(p,f.join("; "),n)}async _createNodeFetchBody(t,r){const n=[];for(const l of t)n.push(new Blob([`--${r}\r
`])),n.push(new Blob([`Content-Disposition: form-data; name="${l.name}"\r
`,`Content-Type: ${l.payload.type}\r
\r
`])),n.push(l.payload),n.push(new Blob([`\r
`]));return n.push(new Blob([`--${r}--\r
`])),await new Blob(n).arrayBuffer()}async _createMultipartStream(t,r){const n=new TextEncoder;return new ReadableStream({async start(o){const l=async c=>{typeof c=="string"?o.enqueue(n.encode(c)):o.enqueue(c)};for(const c of t){await l(`--${r}\r
`),await l(`Content-Disposition: form-data; name="${c.name}"\r
`),await l(`Content-Type: ${c.payload.type}\r
\r
`);const f=c.payload.stream().getReader();try{let p;for(;!(p=await f.read()).done;)o.enqueue(p.value)}finally{f.releaseLock()}await l(`\r
`)}await l(`--${r}--\r
`),o.close()}})}async _sendMultipartRequest(t,r,n){const a="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),o=$A(),l=()=>this._createNodeFetchBody(t,a),c=()=>this._createMultipartStream(t,a),d=async f=>this.batchIngestCaller.call(async()=>{const p=await f(),m={...this.headers,"Content-Type":`multipart/form-data; boundary=${a}`};n?.apiKey!==void 0&&(m["x-api-key"]=n.apiKey);let y=p;n?.useGzip&&typeof p=="object"&&"pipeThrough"in p&&(y=p.pipeThrough(new CompressionStream("gzip")),m["Content-Encoding"]="gzip");const _=await this._fetch(`${n?.apiUrl??this.apiUrl}/runs/multipart`,{method:"POST",headers:m,body:y,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(_,"Failed to send multipart request",!0),_});try{let f,p=!1;!o&&!this.multipartStreamingDisabled&&ux()!=="bun"?(p=!0,f=await d(c)):f=await d(l),(!this.multipartStreamingDisabled||p)&&f.status===422&&(n?.apiUrl??this.apiUrl)!==r0&&(console.warn(`Streaming multipart upload to ${n?.apiUrl??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${r}".`),this.multipartStreamingDisabled=!0,f=await d(l))}catch(f){console.warn(`${f.message.trim()}

Context: ${r}`)}}async updateRun(t,r,n){ze(t),r.inputs&&(r.inputs=await this.processInputs(r.inputs)),r.outputs&&(r.outputs=await this.processOutputs(r.outputs));const a={...r,id:t};if(!this._filterForSampling([a],!0).length)return;if(this.autoBatchTracing&&a.trace_id!==void 0&&a.dotted_order!==void 0){const c=this._cloneCurrentOTELContext();if(r.end_time!==void 0&&a.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:a,otelContext:c,apiKey:n?.apiKey,apiUrl:n?.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:a,otelContext:c,apiKey:n?.apiKey,apiUrl:n?.apiUrl}).catch(console.error);return}const o={...this.headers,"Content-Type":"application/json"};n?.apiKey!==void 0&&(o["x-api-key"]=n.apiKey),n?.workspaceId!==void 0&&(o["x-tenant-id"]=n.workspaceId);const l=gr(r,`Serializing payload to update run with id: ${t}`);await this.caller.call(async()=>{const c=await this._fetch(`${n?.apiUrl??this.apiUrl}/runs/${t}`,{method:"PATCH",headers:o,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Ce(c,"update run",!0),c})}async readRun(t,{loadChildRuns:r}={loadChildRuns:!1}){ze(t);let n=await this._get(`/runs/${t}`);return r&&(n=await this._loadChildRuns(n)),n}async getRunUrl({runId:t,run:r,projectOpts:n}){if(r!==void 0){let a;r.session_id?a=r.session_id:n?.projectName?a=(await this.readProject({projectName:n?.projectName})).id:n?.projectId?a=n?.projectId:a=(await this.readProject({projectName:cr("PROJECT")||"default"})).id;const o=await this._getTenantId();return`${this.getHostUrl()}/o/${o}/projects/p/${a}/r/${r.id}?poll=true`}else if(t!==void 0){const a=await this.readRun(t);if(!a.app_path)throw new Error(`Run ${t} has no app_path`);return`${this.getHostUrl()}${a.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(t){const r=await ZO(this.listRuns({isRoot:!1,projectId:t.session_id,traceId:t.trace_id})),n={},a={};r.sort((o,l)=>(o?.dotted_order??"").localeCompare(l?.dotted_order??""));for(const o of r){if(o.parent_run_id===null||o.parent_run_id===void 0)throw new Error(`Child run ${o.id} has no parent`);o.dotted_order?.startsWith(t.dotted_order??"")&&o.id!==t.id&&(o.parent_run_id in n||(n[o.parent_run_id]=[]),n[o.parent_run_id].push(o),a[o.id]=o)}t.child_runs=n[t.id]||[];for(const o in n)o!==t.id&&(a[o].child_runs=n[o]);return t}async*listRuns(t){const{projectId:r,projectName:n,parentRunId:a,traceId:o,referenceExampleId:l,startTime:c,executionOrder:d,isRoot:f,runType:p,error:m,id:y,query:_,filter:b,traceFilter:x,treeFilter:E,limit:I,select:O,order:A}=t;let D=[];if(r&&(D=Array.isArray(r)?r:[r]),n){const C=Array.isArray(n)?n:[n],ce=await Promise.all(C.map(Ne=>this.readProject({projectName:Ne}).then(ke=>ke.id)));D.push(...ce)}const H=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],Z={session:D.length?D:null,run_type:p,reference_example:l,query:_,filter:b,trace_filter:x,tree_filter:E,execution_order:d,parent_run:a,start_time:c?c.toISOString():null,error:m,id:y,limit:I,trace:o,select:O||H,is_root:f,order:A};Z.select.includes("child_run_ids")&&Rh("Deprecated: 'child_run_ids' in the listRuns select parameter is deprecated and will be removed in a future version.");let K=0;for await(const C of this._getCursorPaginatedList("/runs/query",Z))if(I){if(K>=I)break;if(C.length+K>I){yield*C.slice(0,I-K);break}K+=C.length,yield*C}else yield*C}async*listGroupRuns(t){const{projectId:r,projectName:n,groupBy:a,filter:o,startTime:l,endTime:c,limit:d,offset:f}=t,m={session_id:r||(await this.readProject({projectName:n})).id,group_by:a,filter:o,start_time:l?l.toISOString():null,end_time:c?c.toISOString():null,limit:Number(d)||100};let y=Number(f)||0;const _="/runs/group",b=`${this.apiUrl}${_}`;for(;;){const x={...m,offset:y},E=Object.fromEntries(Object.entries(x).filter(([Z,K])=>K!==void 0)),I=JSON.stringify(E),A=await(await this.caller.call(async()=>{const Z=await this._fetch(b,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:I});return await Ce(Z,`Failed to fetch ${_}`),Z})).json(),{groups:D,total:H}=A;if(D.length===0)break;for(const Z of D)yield Z;if(y+=D.length,y>=H)break}}async getRunStats({id:t,trace:r,parentRun:n,runType:a,projectNames:o,projectIds:l,referenceExampleIds:c,startTime:d,endTime:f,error:p,query:m,filter:y,traceFilter:_,treeFilter:b,isRoot:x,dataSourceType:E}){let I=l||[];o&&(I=[...l||[],...await Promise.all(o.map(K=>this.readProject({projectName:K}).then(C=>C.id)))]);const A=Object.fromEntries(Object.entries({id:t,trace:r,parent_run:n,run_type:a,session:I,reference_example:c,start_time:d,end_time:f,error:p,query:m,filter:y,trace_filter:_,tree_filter:b,is_root:x,data_source_type:E}).filter(([K,C])=>C!==void 0)),D=JSON.stringify(A);return await(await this.caller.call(async()=>{const K=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:D});return await Ce(K,"get run stats"),K})).json()}async shareRun(t,{shareId:r}={}){const n={run_id:t,share_token:r||Yt()};ze(t);const a=JSON.stringify(n),l=await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/runs/${t}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Ce(c,"share run"),c})).json();if(l===null||!("share_token"in l))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${l.share_token}/r`}async unshareRun(t){ze(t),await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/runs/${t}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(r,"unshare run",!0),r})}async readRunSharedLink(t){ze(t);const n=await(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/runs/${t}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(a,"read run shared link"),a})).json();if(!(n===null||!("share_token"in n)))return`${this.getHostUrl()}/public/${n.share_token}/r`}async listSharedRuns(t,{runIds:r}={}){const n=new URLSearchParams({share_token:t});if(r!==void 0)for(const l of r)n.append("id",l);return ze(t),await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/public/${t}/runs${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(l,"list shared runs"),l})).json()}async readDatasetSharedSchema(t,r){if(!t&&!r)throw new Error("Either datasetId or datasetName must be given");t||(t=(await this.readDataset({datasetName:r})).id),ze(t);const a=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${t}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(o,"read dataset shared schema"),o})).json();return a.url=`${this.getHostUrl()}/public/${a.share_token}/d`,a}async shareDataset(t,r){if(!t&&!r)throw new Error("Either datasetId or datasetName must be given");t||(t=(await this.readDataset({datasetName:r})).id);const n={dataset_id:t};ze(t);const a=JSON.stringify(n),l=await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets/${t}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Ce(c,"share dataset"),c})).json();return l.url=`${this.getHostUrl()}/public/${l.share_token}/d`,l}async unshareDataset(t){ze(t),await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/datasets/${t}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(r,"unshare dataset",!0),r})}async readSharedDataset(t){return ze(t),await(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/public/${t}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(a,"read shared dataset"),a})).json()}async listSharedExamples(t,r){const n={};r?.exampleIds&&(n.id=r.exampleIds);const a=new URLSearchParams;Object.entries(n).forEach(([c,d])=>{Array.isArray(d)?d.forEach(f=>a.append(c,f)):a.append(c,d)});const o=await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/public/${t}/examples?${a.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(c,"list shared examples"),c}),l=await o.json();if(!o.ok)throw"detail"in l?new Error(`Failed to list shared examples.
Status: ${o.status}
Message: ${Array.isArray(l.detail)?l.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${o.status} ${o.statusText}`);return l.map(c=>({...c,_hostUrl:this.getHostUrl()}))}async createProject({projectName:t,description:r=null,metadata:n=null,upsert:a=!1,projectExtra:o=null,referenceDatasetId:l=null}){const c=a?"?upsert=true":"",d=`${this.apiUrl}/sessions${c}`,f=o||{};n&&(f.metadata=n);const p={name:t,extra:f,description:r};l!==null&&(p.reference_dataset_id=l);const m=JSON.stringify(p);return await(await this.caller.call(async()=>{const b=await this._fetch(d,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:m});return await Ce(b,"create project"),b})).json()}async updateProject(t,{name:r=null,description:n=null,metadata:a=null,projectExtra:o=null,endTime:l=null}){const c=`${this.apiUrl}/sessions/${t}`;let d=o;a&&(d={...d||{},metadata:a});const f=JSON.stringify({name:r,extra:d,description:n,end_time:l?new Date(l).toISOString():null});return await(await this.caller.call(async()=>{const y=await this._fetch(c,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Ce(y,"update project"),y})).json()}async hasProject({projectId:t,projectName:r}){let n="/sessions";const a=new URLSearchParams;if(t!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(t!==void 0)ze(t),n+=`/${t}`;else if(r!==void 0)a.append("name",r);else throw new Error("Must provide projectName or projectId");const o=await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}${n}?${a}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(l,"has project"),l});try{const l=await o.json();return o.ok?Array.isArray(l)?l.length>0:!0:!1}catch{return!1}}async readProject({projectId:t,projectName:r,includeStats:n}){let a="/sessions";const o=new URLSearchParams;if(t!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(t!==void 0)ze(t),a+=`/${t}`;else if(r!==void 0)o.append("name",r);else throw new Error("Must provide projectName or projectId");n!==void 0&&o.append("include_stats",n.toString());const l=await this._get(a,o);let c;if(Array.isArray(l)){if(l.length===0)throw new Error(`Project[id=${t}, name=${r}] not found`);c=l[0]}else c=l;return c}async getProjectUrl({projectId:t,projectName:r}){if(t===void 0&&r===void 0)throw new Error("Must provide either projectName or projectId");const n=await this.readProject({projectId:t,projectName:r}),a=await this._getTenantId();return`${this.getHostUrl()}/o/${a}/projects/p/${n.id}`}async getDatasetUrl({datasetId:t,datasetName:r}){if(t===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");const n=await this.readDataset({datasetId:t,datasetName:r}),a=await this._getTenantId();return`${this.getHostUrl()}/o/${a}/datasets/${n.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const t=new URLSearchParams({limit:"1"});for await(const r of this._getPaginated("/sessions",t))return this._tenantId=r[0].tenant_id,r[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:t,name:r,nameContains:n,referenceDatasetId:a,referenceDatasetName:o,includeStats:l,datasetVersion:c,referenceFree:d,metadata:f}={}){const p=new URLSearchParams;if(t!==void 0)for(const m of t)p.append("id",m);if(r!==void 0&&p.append("name",r),n!==void 0&&p.append("name_contains",n),a!==void 0)p.append("reference_dataset",a);else if(o!==void 0){const m=await this.readDataset({datasetName:o});p.append("reference_dataset",m.id)}l!==void 0&&p.append("include_stats",l.toString()),c!==void 0&&p.append("dataset_version",c),d!==void 0&&p.append("reference_free",d.toString()),f!==void 0&&p.append("metadata",JSON.stringify(f));for await(const m of this._getPaginated("/sessions",p))yield*m}async deleteProject({projectId:t,projectName:r}){let n;if(t===void 0&&r===void 0)throw new Error("Must provide projectName or projectId");if(t!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");t===void 0?n=(await this.readProject({projectName:r})).id:n=t,ze(n),await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(a,`delete session ${n} (${r})`,!0),a})}async uploadCsv({csvFile:t,fileName:r,inputKeys:n,outputKeys:a,description:o,dataType:l,name:c}){const d=`${this.apiUrl}/datasets/upload`,f=new FormData;return f.append("file",t,r),n.forEach(y=>{f.append("input_keys",y)}),a.forEach(y=>{f.append("output_keys",y)}),o&&f.append("description",o),l&&f.append("data_type",l),c&&f.append("name",c),await(await this.caller.call(async()=>{const y=await this._fetch(d,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Ce(y,"upload CSV"),y})).json()}async createDataset(t,{description:r,dataType:n,inputsSchema:a,outputsSchema:o,metadata:l}={}){const c={name:t,description:r,extra:l?{metadata:l}:void 0};n&&(c.data_type=n),a&&(c.inputs_schema_definition=a),o&&(c.outputs_schema_definition=o);const d=JSON.stringify(c);return await(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:d});return await Ce(m,"create dataset"),m})).json()}async readDataset({datasetId:t,datasetName:r}){let n="/datasets";const a=new URLSearchParams({limit:"1"});if(t&&r)throw new Error("Must provide either datasetName or datasetId, not both");if(t)ze(t),n+=`/${t}`;else if(r)a.append("name",r);else throw new Error("Must provide datasetName or datasetId");const o=await this._get(n,a);let l;if(Array.isArray(o)){if(o.length===0)throw new Error(`Dataset[id=${t}, name=${r}] not found`);l=o[0]}else l=o;return l}async hasDataset({datasetId:t,datasetName:r}){try{return await this.readDataset({datasetId:t,datasetName:r}),!0}catch(n){if(n instanceof Error&&n.message.toLocaleLowerCase().includes("not found"))return!1;throw n}}async diffDatasetVersions({datasetId:t,datasetName:r,fromVersion:n,toVersion:a}){let o=t;if(o===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:r})).id);const l=new URLSearchParams({from_version:typeof n=="string"?n:n.toISOString(),to_version:typeof a=="string"?a:a.toISOString()});return await this._get(`/datasets/${o}/versions/diff`,l)}async readDatasetOpenaiFinetuning({datasetId:t,datasetName:r}){const n="/datasets";if(t===void 0)if(r!==void 0)t=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${n}/${t}/openai_ft`)).text()).trim().split(`
`).map(c=>JSON.parse(c))}async*listDatasets({limit:t=100,offset:r=0,datasetIds:n,datasetName:a,datasetNameContains:o,metadata:l}={}){const c="/datasets",d=new URLSearchParams({limit:t.toString(),offset:r.toString()});if(n!==void 0)for(const f of n)d.append("id",f);a!==void 0&&d.append("name",a),o!==void 0&&d.append("name_contains",o),l!==void 0&&d.append("metadata",JSON.stringify(l));for await(const f of this._getPaginated(c,d))yield*f}async updateDataset(t){const{datasetId:r,datasetName:n,...a}=t;if(!r&&!n)throw new Error("Must provide either datasetName or datasetId");const o=r??(await this.readDataset({datasetName:n})).id;ze(o);const l=JSON.stringify(a);return await(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/datasets/${o}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Ce(d,"update dataset"),d})).json()}async updateDatasetTag(t){const{datasetId:r,datasetName:n,asOf:a,tag:o}=t;if(!r&&!n)throw new Error("Must provide either datasetName or datasetId");const l=r??(await this.readDataset({datasetName:n})).id;ze(l);const c=JSON.stringify({as_of:typeof a=="string"?a:a.toISOString(),tag:o});await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/datasets/${l}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Ce(d,"update dataset tags",!0),d})}async deleteDataset({datasetId:t,datasetName:r}){let n="/datasets",a=t;if(t!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(r!==void 0&&(a=(await this.readDataset({datasetName:r})).id),a!==void 0)ze(a),n+=`/${a}`;else throw new Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{const o=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(o,`delete ${n}`,!0),o})}async indexDataset({datasetId:t,datasetName:r,tag:n}){let a=t;if(!a&&!r)throw new Error("Must provide either datasetName or datasetId");if(a&&r)throw new Error("Must provide either datasetName or datasetId, not both");a||(a=(await this.readDataset({datasetName:r})).id),ze(a);const l=JSON.stringify({tag:n});await(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/datasets/${a}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Ce(d,"index dataset"),d})).json()}async similarExamples(t,r,n,{filter:a}={}){const o={limit:n,inputs:t};a!==void 0&&(o.filter=a),ze(r);const l=JSON.stringify(o);return(await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets/${r}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:l});return await Ce(f,"fetch similar examples"),f})).json()).examples}async createExample(t,r,n){if(n0(t)&&(r!==void 0||n!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let a=r?n?.datasetId:t.dataset_id;const o=r?n?.datasetName:t.dataset_name;if(a===void 0&&o===void 0)throw new Error("Must provide either datasetName or datasetId");if(a!==void 0&&o!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");a===void 0&&(a=(await this.readDataset({datasetName:o})).id);const l=(r?n?.createdAt:t.created_at)||new Date;let c;n0(t)?c=t:c={inputs:t,outputs:r,created_at:l?.toISOString(),id:n?.exampleId,metadata:n?.metadata,split:n?.split,source_run_id:n?.sourceRunId,use_source_run_io:n?.useSourceRunIO,use_source_run_attachments:n?.useSourceRunAttachments,attachments:n?.attachments};const d=await this._uploadExamplesMultipart(a,[c]);return await this.readExample(d.example_ids?.[0]??Yt())}async createExamples(t){if(Array.isArray(t)){if(t.length===0)return[];const O=t;let A=O[0].dataset_id;const D=O[0].dataset_name;if(A===void 0&&D===void 0)throw new Error("Must provide either datasetName or datasetId");if(A!==void 0&&D!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");A===void 0&&(A=(await this.readDataset({datasetName:D})).id);const H=await this._uploadExamplesMultipart(A,O);return await Promise.all(H.example_ids.map(K=>this.readExample(K)))}const{inputs:r,outputs:n,metadata:a,splits:o,sourceRunIds:l,useSourceRunIOs:c,useSourceRunAttachments:d,attachments:f,exampleIds:p,datasetId:m,datasetName:y}=t;if(r===void 0)throw new Error("Must provide inputs when using legacy parameters");let _=m;const b=y;if(_===void 0&&b===void 0)throw new Error("Must provide either datasetName or datasetId");if(_!==void 0&&b!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");_===void 0&&(_=(await this.readDataset({datasetName:b})).id);const x=r.map((O,A)=>({dataset_id:_,inputs:O,outputs:n?.[A],metadata:a?.[A],split:o?.[A],id:p?.[A],attachments:f?.[A],source_run_id:l?.[A],use_source_run_io:c?.[A],use_source_run_attachments:d?.[A]})),E=await this._uploadExamplesMultipart(_,x);return await Promise.all(E.example_ids.map(O=>this.readExample(O)))}async createLLMExample(t,r,n){return this.createExample({input:t},{output:r},n)}async createChatExample(t,r,n){const a=t.map(l=>a_(l)?i_(l):l),o=a_(r)?i_(r):r;return this.createExample({input:a},{output:o},n)}async readExample(t){ze(t);const r=`/examples/${t}`,n=await this._get(r),{attachment_urls:a,...o}=n,l=o;return a&&(l.attachments=Object.entries(a).reduce((c,[d,f])=>(c[d.slice(11)]={presigned_url:f.presigned_url,mime_type:f.mime_type},c),{})),l}async*listExamples({datasetId:t,datasetName:r,exampleIds:n,asOf:a,splits:o,inlineS3Urls:l,metadata:c,limit:d,offset:f,filter:p,includeAttachments:m}={}){let y;if(t!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0)y=t;else if(r!==void 0)y=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide a datasetName or datasetId");const _=new URLSearchParams({dataset:y}),b=a?typeof a=="string"?a:a?.toISOString():void 0;b&&_.append("as_of",b);const x=l??!0;if(_.append("inline_s3_urls",x.toString()),n!==void 0)for(const I of n)_.append("id",I);if(o!==void 0)for(const I of o)_.append("splits",I);if(c!==void 0){const I=JSON.stringify(c);_.append("metadata",I)}d!==void 0&&_.append("limit",d.toString()),f!==void 0&&_.append("offset",f.toString()),p!==void 0&&_.append("filter",p),m===!0&&["attachment_urls","outputs","metadata"].forEach(I=>_.append("select",I));let E=0;for await(const I of this._getPaginated("/examples",_)){for(const O of I){const{attachment_urls:A,...D}=O,H=D;A&&(H.attachments=Object.entries(A).reduce((Z,[K,C])=>(Z[K.slice(11)]={presigned_url:C.presigned_url,mime_type:C.mime_type||void 0},Z),{})),yield H,E++}if(d!==void 0&&E>=d)break}}async deleteExample(t){ze(t);const r=`/examples/${t}`;await this.caller.call(async()=>{const n=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(n,`delete ${r}`,!0),n})}async updateExample(t,r){let n;r?n=t:n=t.id,ze(n);let a;r?a={id:n,...r}:a=t;let o;return a.dataset_id!==void 0?o=a.dataset_id:o=(await this.readExample(n)).dataset_id,this._updateExamplesMultipart(o,[a])}async updateExamples(t){let r;return t[0].dataset_id===void 0?r=(await this.readExample(t[0].id)).dataset_id:r=t[0].dataset_id,this._updateExamplesMultipart(r,t)}async readDatasetVersion({datasetId:t,datasetName:r,asOf:n,tag:a}){let o;if(t?o=t:o=(await this.readDataset({datasetName:r})).id,ze(o),n&&a||!n&&!a)throw new Error("Exactly one of asOf and tag must be specified.");const l=new URLSearchParams;return n!==void 0&&l.append("as_of",typeof n=="string"?n:n.toISOString()),a!==void 0&&l.append("tag",a),await(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/datasets/${o}/version?${l.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(d,"read dataset version"),d})).json()}async listDatasetSplits({datasetId:t,datasetName:r,asOf:n}){let a;if(t===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(t!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");t===void 0?a=(await this.readDataset({datasetName:r})).id:a=t,ze(a);const o=new URLSearchParams,l=n?typeof n=="string"?n:n?.toISOString():void 0;return l&&o.append("as_of",l),await this._get(`/datasets/${a}/splits`,o)}async updateDatasetSplits({datasetId:t,datasetName:r,splitName:n,exampleIds:a,remove:o=!1}){let l;if(t===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(t!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");t===void 0?l=(await this.readDataset({datasetName:r})).id:l=t,ze(l);const c={split_name:n,examples:a.map(f=>(ze(f),f)),remove:o},d=JSON.stringify(c);await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets/${l}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:d});return await Ce(f,"update dataset splits",!0),f})}async evaluateRun(t,r,{sourceInfo:n,loadChildRuns:a,referenceExample:o}={loadChildRuns:!1}){Rh("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let l;if(typeof t=="string")l=await this.readRun(t,{loadChildRuns:a});else if(typeof t=="object"&&"id"in t)l=t;else throw new Error(`Invalid run type: ${typeof t}`);l.reference_example_id!==null&&l.reference_example_id!==void 0&&(o=await this.readExample(l.reference_example_id));const c=await r.evaluateRun(l,o),[d,f]=await this._logEvaluationFeedback(c,l,n);return f[0]}async createFeedback(t,r,{score:n,value:a,correction:o,comment:l,sourceInfo:c,feedbackSourceType:d="api",sourceRunId:f,feedbackId:p,feedbackConfig:m,projectId:y,comparativeExperimentId:_}){if(!t&&!y)throw new Error("One of runId or projectId must be provided");if(t&&y)throw new Error("Only one of runId or projectId can be provided");const b={type:d??"api",metadata:c??{}};f!==void 0&&b?.metadata!==void 0&&!b.metadata.__run&&(b.metadata.__run={run_id:f}),b?.metadata!==void 0&&b.metadata.__run?.run_id!==void 0&&ze(b.metadata.__run.run_id);const x={id:p??Yt(),run_id:t,key:r,score:t0(n),value:a,correction:o,comment:l,feedback_source:b,comparative_experiment_id:_,feedbackConfig:m,session_id:y},E=JSON.stringify(x),I=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{const O=await this._fetch(I,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:E});return await Ce(O,"create feedback",!0),O}),x}async updateFeedback(t,{score:r,value:n,correction:a,comment:o}){const l={};r!=null&&(l.score=t0(r)),n!=null&&(l.value=n),a!=null&&(l.correction=a),o!=null&&(l.comment=o),ze(t);const c=JSON.stringify(l);await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/feedback/${t}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Ce(d,"update feedback",!0),d})}async readFeedback(t){ze(t);const r=`/feedback/${t}`;return await this._get(r)}async deleteFeedback(t){ze(t);const r=`/feedback/${t}`;await this.caller.call(async()=>{const n=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(n,`delete ${r}`,!0),n})}async*listFeedback({runIds:t,feedbackKeys:r,feedbackSourceTypes:n}={}){const a=new URLSearchParams;if(t)for(const o of t)ze(o),a.append("run",o);if(r)for(const o of r)a.append("key",o);if(n)for(const o of n)a.append("source",o);for await(const o of this._getPaginated("/feedback",a))yield*o}async createPresignedFeedbackToken(t,r,{expiration:n,feedbackConfig:a}={}){const o={run_id:t,feedback_key:r,feedback_config:a};n?typeof n=="string"?o.expires_at=n:(n?.hours||n?.minutes||n?.days)&&(o.expires_in=n):o.expires_in={hours:3};const l=JSON.stringify(o);return await(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Ce(d,"create presigned feedback token"),d})).json()}async createComparativeExperiment({name:t,experimentIds:r,referenceDatasetId:n,createdAt:a,description:o,metadata:l,id:c}){if(r.length===0)throw new Error("At least one experiment is required");if(n||(n=(await this.readProject({projectId:r[0]})).reference_dataset_id),!n==null)throw new Error("A reference dataset is required");const d={id:c,name:t,experiment_ids:r,reference_dataset_id:n,description:o,created_at:(a??new Date)?.toISOString(),extra:{}};l&&(d.extra.metadata=l);const f=JSON.stringify(d);return(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Ce(m,"create comparative experiment"),m})).json()}async*listPresignedFeedbackTokens(t){ze(t);const r=new URLSearchParams({run_id:t});for await(const n of this._getPaginated("/feedback/tokens",r))yield*n}_selectEvalResults(t){let r;return"results"in t?r=t.results:Array.isArray(t)?r=t:r=[t],r}async _logEvaluationFeedback(t,r,n){const a=this._selectEvalResults(t),o=[];for(const l of a){let c=n||{};l.evaluatorInfo&&(c={...l.evaluatorInfo,...c});let d=null;l.targetRunId?d=l.targetRunId:r&&(d=r.id),o.push(await this.createFeedback(d,l.key,{score:l.score,value:l.value,comment:l.comment,correction:l.correction,sourceInfo:c,sourceRunId:l.sourceRunId,feedbackConfig:l.feedbackConfig,feedbackSourceType:"model"}))}return[a,o]}async logEvaluationFeedback(t,r,n){const[a]=await this._logEvaluationFeedback(t,r,n);return a}async*listAnnotationQueues(t={}){const{queueIds:r,name:n,nameContains:a,limit:o}=t,l=new URLSearchParams;r&&r.forEach((d,f)=>{ze(d,`queueIds[${f}]`),l.append("ids",d)}),n&&l.append("name",n),a&&l.append("name_contains",a),l.append("limit",(o!==void 0?Math.min(o,100):100).toString());let c=0;for await(const d of this._getPaginated("/annotation-queues",l))if(yield*d,c++,o!==void 0&&c>=o)break}async createAnnotationQueue(t){const{name:r,description:n,queueId:a,rubricInstructions:o}=t,l={name:r,description:n,id:a||Yt(),rubric_instructions:o},c=JSON.stringify(Object.fromEntries(Object.entries(l).filter(([f,p])=>p!==void 0)));return(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Ce(f,"create annotation queue"),f})).json()}async readAnnotationQueue(t){return(await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${ze(t,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(n,"read annotation queue"),n})).json()}async updateAnnotationQueue(t,r){const{name:n,description:a,rubricInstructions:o}=r,l=JSON.stringify({name:n,description:a,rubric_instructions:o});await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/annotation-queues/${ze(t,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Ce(c,"update annotation queue",!0),c})}async deleteAnnotationQueue(t){await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${ze(t,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(r,"delete annotation queue",!0),r})}async addRunsToAnnotationQueue(t,r){const n=JSON.stringify(r.map((a,o)=>ze(a,`runIds[${o}]`).toString()));await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/annotation-queues/${ze(t,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await Ce(a,"add runs to annotation queue",!0),a})}async getRunFromAnnotationQueue(t,r){const n=`/annotation-queues/${ze(t,"queueId")}/run`;return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(o,"get run from annotation queue"),o})).json()}async deleteRunFromAnnotationQueue(t,r){await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${ze(t,"queueId")}/runs/${ze(r,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(n,"delete run from annotation queue",!0),n})}async getSizeFromAnnotationQueue(t){return(await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${ze(t,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(n,"get size from annotation queue"),n})).json()}async _currentTenantIsOwner(t){const r=await this._getSettings();return t=="-"||r.tenant_handle===t}async _ownerConflictError(t,r){const n=await this._getSettings();return new Error(`Cannot ${t} for another tenant.

      Current tenant: ${n.tenant_handle}

      Requested tenant: ${r}`)}async _getLatestCommitHash(t){const n=await(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/commits/${t}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(a,"get latest commit hash"),a})).json();if(n.commits.length!==0)return n.commits[0].commit_hash}async _likeOrUnlikePrompt(t,r){const[n,a,o]=os(t),l=JSON.stringify({like:r});return(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/likes/${n}/${a}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Ce(d,`${r?"like":"unlike"} prompt`),d})).json()}async _getPromptUrl(t){const[r,n,a]=os(t);if(await this._currentTenantIsOwner(r)){const o=await this._getSettings();return a!=="latest"?`${this.getHostUrl()}/prompts/${n}/${a.substring(0,8)}?organizationId=${o.id}`:`${this.getHostUrl()}/prompts/${n}?organizationId=${o.id}`}else return a!=="latest"?`${this.getHostUrl()}/hub/${r}/${n}/${a.substring(0,8)}`:`${this.getHostUrl()}/hub/${r}/${n}`}async promptExists(t){return!!await this.getPrompt(t)}async likePrompt(t){return this._likeOrUnlikePrompt(t,!0)}async unlikePrompt(t){return this._likeOrUnlikePrompt(t,!1)}async*listCommits(t){for await(const r of this._getPaginated(`/commits/${t}/`,new URLSearchParams,n=>n.commits))yield*r}async*listPrompts(t){const r=new URLSearchParams;r.append("sort_field",t?.sortField??"updated_at"),r.append("sort_direction","desc"),r.append("is_archived",(!!t?.isArchived).toString()),t?.isPublic!==void 0&&r.append("is_public",t.isPublic.toString()),t?.query&&r.append("query",t.query);for await(const n of this._getPaginated("/repos",r,a=>a.repos))yield*n}async getPrompt(t){const[r,n,a]=os(t),l=await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/repos/${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return c?.status===404?null:(await Ce(c,"get prompt"),c)}))?.json();return l?.repo?l.repo:null}async createPrompt(t,r){const n=await this._getSettings();if(r?.isPublic&&!n.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[a,o,l]=os(t);if(!await this._currentTenantIsOwner(a))throw await this._ownerConflictError("create a prompt",a);const c={repo_handle:o,...r?.description&&{description:r.description},...r?.readme&&{readme:r.readme},...r?.tags&&{tags:r.tags},is_public:!!r?.isPublic},d=JSON.stringify(c),f=await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:d});return await Ce(m,"create prompt"),m}),{repo:p}=await f.json();return p}async createCommit(t,r,n){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[a,o,l]=os(t),c=n?.parentCommitHash==="latest"||!n?.parentCommitHash?await this._getLatestCommitHash(`${a}/${o}`):n?.parentCommitHash,d={manifest:JSON.parse(JSON.stringify(r)),parent_commit:c},f=JSON.stringify(d),m=await(await this.caller.call(async()=>{const y=await this._fetch(`${this.apiUrl}/commits/${a}/${o}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Ce(y,"create commit"),y})).json();return this._getPromptUrl(`${a}/${o}${m.commit_hash?`:${m.commit_hash}`:""}`)}async updateExamplesMultipart(t,r=[]){return this._updateExamplesMultipart(t,r)}async _updateExamplesMultipart(t,r=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const n=new FormData;for(const l of r){const c=l.id,d={...l.metadata&&{metadata:l.metadata},...l.split&&{split:l.split}},f=gr(d,`Serializing body for example with id: ${c}`),p=new Blob([f],{type:"application/json"});if(n.append(c,p),l.inputs){const m=gr(l.inputs,`Serializing inputs for example with id: ${c}`),y=new Blob([m],{type:"application/json"});n.append(`${c}.inputs`,y)}if(l.outputs){const m=gr(l.outputs,`Serializing outputs whle updating example with id: ${c}`),y=new Blob([m],{type:"application/json"});n.append(`${c}.outputs`,y)}if(l.attachments)for(const[m,y]of Object.entries(l.attachments)){let _,b;Array.isArray(y)?[_,b]=y:(_=y.mimeType,b=y.data);const x=new Blob([b],{type:`${_}; length=${b.byteLength}`});n.append(`${c}.attachment.${m}`,x)}if(l.attachments_operations){const m=gr(l.attachments_operations,`Serializing attachments while updating example with id: ${c}`),y=new Blob([m],{type:"application/json"});n.append(`${c}.attachments_operations`,y)}}const a=t??r[0]?.dataset_id;return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${a}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await Ce(l,"update examples"),l})).json()}async uploadExamplesMultipart(t,r=[]){return this._uploadExamplesMultipart(t,r)}async _uploadExamplesMultipart(t,r=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const n=new FormData;for(const o of r){const l=(o.id??Yt()).toString(),c={created_at:o.created_at,...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split},...o.source_run_id&&{source_run_id:o.source_run_id},...o.use_source_run_io&&{use_source_run_io:o.use_source_run_io},...o.use_source_run_attachments&&{use_source_run_attachments:o.use_source_run_attachments}},d=gr(c,`Serializing body for uploaded example with id: ${l}`),f=new Blob([d],{type:"application/json"});if(n.append(l,f),o.inputs){const p=gr(o.inputs,`Serializing inputs for uploaded example with id: ${l}`),m=new Blob([p],{type:"application/json"});n.append(`${l}.inputs`,m)}if(o.outputs){const p=gr(o.outputs,`Serializing outputs for uploaded example with id: ${l}`),m=new Blob([p],{type:"application/json"});n.append(`${l}.outputs`,m)}if(o.attachments)for(const[p,m]of Object.entries(o.attachments)){let y,_;Array.isArray(m)?[y,_]=m:(y=m.mimeType,_=m.data);const b=new Blob([_],{type:`${y}; length=${_.byteLength}`});n.append(`${l}.attachment.${p}`,b)}}return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${t}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await Ce(o,"upload examples"),o})).json()}async updatePrompt(t,r){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[n,a]=os(t);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("update a prompt",n);const o={};if(r?.description!==void 0&&(o.description=r.description),r?.readme!==void 0&&(o.readme=r.readme),r?.tags!==void 0&&(o.tags=r.tags),r?.isPublic!==void 0&&(o.is_public=r.isPublic),r?.isArchived!==void 0&&(o.is_archived=r.isArchived),Object.keys(o).length===0)throw new Error("No valid update options provided");const l=JSON.stringify(o);return(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/repos/${n}/${a}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Ce(d,"update prompt"),d})).json()}async deletePrompt(t){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[r,n,a]=os(t);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("delete a prompt",r);return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/repos/${r}/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(l,"delete prompt"),l})).json()}async pullPromptCommit(t,r){const[n,a,o]=os(t),c=await(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/commits/${n}/${a}/${o}${r?.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ce(d,"pull prompt commit"),d})).json();return{owner:n,repo:a,commit_hash:c.commit_hash,manifest:c.manifest,examples:c.examples}}async _pullPrompt(t,r){const n=await this.pullPromptCommit(t,{includeModel:r?.includeModel});return JSON.stringify(n.manifest)}async pushPrompt(t,r){return await this.promptExists(t)?r&&Object.keys(r).some(a=>a!=="object")&&await this.updatePrompt(t,{description:r?.description,readme:r?.readme,tags:r?.tags,isPublic:r?.isPublic}):await this.createPrompt(t,{description:r?.description,readme:r?.readme,tags:r?.tags,isPublic:r?.isPublic}),r?.object?await this.createCommit(t,r?.object,{parentCommitHash:r?.parentCommitHash}):await this._getPromptUrl(t)}async clonePublicDataset(t,r={}){const{sourceApiUrl:n=this.apiUrl,datasetName:a}=r,[o,l]=this.parseTokenOrUrl(t,n),c=new Ji({apiUrl:o,apiKey:"placeholder"}),d=await c.readSharedDataset(l),f=a||d.name;try{if(await this.hasDataset({datasetId:f})){console.log(`Dataset ${f} already exists in your tenant. Skipping.`);return}}catch{}const p=await c.listSharedExamples(l),m=await this.createDataset(f,{description:d.description,dataType:d.data_type||"kv",inputsSchema:d.inputs_schema_definition??void 0,outputsSchema:d.outputs_schema_definition??void 0});try{await this.createExamples({inputs:p.map(y=>y.inputs),outputs:p.flatMap(y=>y.outputs?[y.outputs]:[]),datasetId:m.id})}catch(y){throw console.error(`An error occurred while creating dataset ${f}. You should delete it manually.`),y}}parseTokenOrUrl(t,r,n=2,a="dataset"){try{return ze(t),[r,t]}catch{}try{const l=new URL(t).pathname.split("/").filter(c=>c!=="");if(l.length>=n){const c=l[l.length-n];return[r,c]}else throw new Error(`Invalid public ${a} URL: ${t}`)}catch{throw new Error(`Invalid public ${a} URL or token: ${t}`)}}async awaitPendingTraceBatches(){if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:t})=>t),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&await KA()?.DEFAULT_LANGSMITH_SPAN_PROCESSOR?.forceFlush()}}function n0(e){return"dataset_id"in e||"dataset_name"in e}const e2=e=>!!["TRACING_V2","TRACING"].find(r=>cr(r)==="true"),ch=Symbol.for("lc:context_variables");function t2(e){return e.replace(/[-:.]/g,"")}function bx(e,t,r=1){const n=r.toFixed(0).slice(0,3).padStart(3,"0"),a=`${new Date(e).toISOString().slice(0,-1)}${n}Z`;return{dottedOrder:t2(a)+t,microsecondPrecisionDatestring:a}}class sc{constructor(t,r,n,a){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=t,this.tags=r,this.project_name=n,this.replicas=a}static fromHeader(t){const r=t.split(",");let n={},a=[],o,l;for(const c of r){const[d,f]=c.split("="),p=decodeURIComponent(f);d==="langsmith-metadata"?n=JSON.parse(p):d==="langsmith-tags"?a=p.split(","):d==="langsmith-project"?o=p:d==="langsmith-replicas"&&(l=JSON.parse(p))}return new sc(n,a,o,l)}toHeader(){const t=[];return this.metadata&&Object.keys(this.metadata).length>0&&t.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&t.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&t.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),t.join(",")}}class lr{constructor(t){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r2(t)){Object.assign(this,{...t});return}const r=lr.getDefaultConfig(),{metadata:n,...a}=t,o=a.client??lr.getSharedClient(),l={...n,...a?.extra?.metadata};if(a.extra={...a.extra,metadata:l},"id"in a&&a.id==null&&delete a.id,Object.assign(this,{...r,...a,client:o}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=o2(this.replicas),this.execution_order??=1,this.child_execution_order??=1,!this.dotted_order){const{dottedOrder:c,microsecondPrecisionDatestring:d}=bx(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+c:this.dotted_order=c,this._serialized_start_time=d}}set metadata(t){this.extra={...this.extra,metadata:{...this.extra?.metadata,...t}}}get metadata(){return this.extra?.metadata}static getDefaultConfig(){return{id:Yt(),run_type:"chain",project_name:ox(),child_runs:[],api_url:dn("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:dn("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return lr.sharedClient||(lr.sharedClient=new Ji),lr.sharedClient}createChild(t){const r=this.child_execution_order+1,n=new lr({...t,parent_run:this,project_name:this.project_name,replicas:this.replicas,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:r,child_execution_order:r});ch in this&&(n[ch]=this[ch]);const a=Symbol.for("lc:child_config"),o=t.extra?.[a]??this.extra[a];if(s2(o)){const d={...o},f=n2(d.callbacks)?d.callbacks.copy?.():void 0;f&&(Object.assign(f,{_parentRunId:n.id}),f.handlers?.find(xx)?.updateFromRunTree?.(n),d.callbacks=f),n.extra[a]=d}const l=new Set;let c=this;for(;c!=null&&!l.has(c.id);)l.add(c.id),c.child_execution_order=Math.max(c.child_execution_order,r),c=c.parent_run;return this.child_runs.push(n),n}async end(t,r,n=Date.now(),a){this.outputs=this.outputs??t,this.error=this.error??r,this.end_time=this.end_time??n,a&&Object.keys(a).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...a}}:{metadata:a})}_convertToCreate(t,r,n=!0){const a=t.extra??{};if(a?.runtime?.library===void 0&&(a.runtime||(a.runtime={}),r))for(const[c,d]of Object.entries(r))a.runtime[c]||(a.runtime[c]=d);let o,l;return n?(l=t.parent_run?.id??t.parent_run_id,o=[]):(o=t.child_runs.map(c=>this._convertToCreate(c,r,n)),l=void 0),{id:t.id,name:t.name,start_time:t._serialized_start_time??t.start_time,end_time:t.end_time,run_type:t.run_type,reference_example_id:t.reference_example_id,extra:a,serialized:t.serialized,error:t.error,inputs:t.inputs,outputs:t.outputs,session_name:t.project_name,child_runs:o,parent_run_id:l,trace_id:t.trace_id,dotted_order:t.dotted_order,tags:t.tags,attachments:t.attachments,events:t.events}}_remapForProject(t,r,n=!0){const a=this._convertToCreate(this,r,n);if(t===this.project_name)return a;const o=m=>Uv(`${m}:${t}`,Uv.DNS),l=o(a.id),c=a.trace_id?o(a.trace_id):void 0,d=a.parent_run_id?o(a.parent_run_id):void 0;let f;if(a.dotted_order){const m=a2(a.dotted_order),y=[];for(let b=0;b<m.length-1;b++){const[x,E]=m[b],I=o(E);y.push(x.toISOString().replace(/[-:]/g,"").replace(".","")+I)}const[_]=m[m.length-1];y.push(_.toISOString().replace(/[-:]/g,"").replace(".","")+l),f=y.join(".")}else f=void 0;return{...a,id:l,trace_id:c,parent_run_id:d,dotted_order:f,session_name:t}}async postRun(t=!0){try{const r=dx();if(this.replicas&&this.replicas.length>0)for(const{projectName:n,apiKey:a,apiUrl:o,workspaceId:l}of this.replicas){const c=this._remapForProject(n??this.project_name,r,!0);await this.client.createRun(c,{apiKey:a,apiUrl:o,workspaceId:l})}else{const n=this._convertToCreate(this,r,t);await this.client.createRun(n)}if(!t){Rh("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const n of this.child_runs)await n.postRun(!1)}}catch(r){console.error(`Error in postRun for run ${this.id}:`,r)}}async patchRun(t){if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:n,apiUrl:a,workspaceId:o,updates:l}of this.replicas){const c=this._remapForProject(r??this.project_name),d={id:c.id,outputs:c.outputs,error:c.error,parent_run_id:c.parent_run_id,session_name:c.session_name,reference_example_id:c.reference_example_id,end_time:c.end_time,dotted_order:c.dotted_order,trace_id:c.trace_id,events:c.events,tags:c.tags,extra:c.extra,attachments:this.attachments,...l};t?.excludeInputs||(d.inputs=c.inputs),await this.client.updateRun(c.id,d,{apiKey:n,apiUrl:a,workspaceId:o})}else try{const r={end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:this.parent_run?.id??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};t?.excludeInputs||(r.inputs=this.inputs),await this.client.updateRun(this.id,r)}catch(r){console.error(`Error in patchRun for run ${this.id}`,r)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(t){this.events||(this.events=[]),typeof t=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:t}):this.events.push({...t,time:t.time??new Date().toISOString()})}static fromRunnableConfig(t,r){const n=t?.callbacks;let a,o,l,c=e2();if(n){const f=n?.getParentRunId?.()??"",p=n?.handlers?.find(m=>m?.name=="langchain_tracer");a=p?.getRun?.(f),o=p?.projectName,l=p?.client,c=c||!!p}return a?new lr({name:a.name,id:a.id,trace_id:a.trace_id,dotted_order:a.dotted_order,client:l,tracingEnabled:c,project_name:o,tags:[...new Set((a?.tags??[]).concat(t?.tags??[]))],extra:{metadata:{...a?.extra?.metadata,...t?.metadata}}}).createChild(r):new lr({...r,client:l,tracingEnabled:c,project_name:o})}static fromDottedOrder(t){return this.fromHeaders({"langsmith-trace":t})}static fromHeaders(t,r){const n="get"in t&&typeof t.get=="function"?{"langsmith-trace":t.get("langsmith-trace"),baggage:t.get("baggage")}:t,a=n["langsmith-trace"];if(!a||typeof a!="string")return;const o=a.trim(),l=o.split(".").map(f=>{const[p,m]=f.split("Z");return{strTime:p,time:Date.parse(p+"Z"),uuid:m}}),c=l[0].uuid,d={...r,name:r?.name??"parent",run_type:r?.run_type??"chain",start_time:r?.start_time??Date.now(),id:l.at(-1)?.uuid,trace_id:c,dotted_order:o};if(n.baggage&&typeof n.baggage=="string"){const f=sc.fromHeader(n.baggage);d.metadata=f.metadata,d.tags=f.tags,d.project_name=f.project_name,d.replicas=f.replicas}return new lr(d)}toHeaders(t){const r={"langsmith-trace":this.dotted_order,baggage:new sc(this.extra?.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(t)for(const[n,a]of Object.entries(r))t.set(n,a);return r}}Object.defineProperty(lr,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function r2(e){return e!=null&&typeof e.createChild=="function"&&typeof e.postRun=="function"}function xx(e){return typeof e=="object"&&e!=null&&typeof e.name=="string"&&e.name==="langchain_tracer"}function s0(e){return Array.isArray(e)&&e.some(t=>xx(t))}function n2(e){return typeof e=="object"&&e!=null&&Array.isArray(e.handlers)}function s2(e){return e!=null&&typeof e.callbacks=="object"&&(s0(e.callbacks?.handlers)||s0(e.callbacks))}function a2(e){return e.split(".").map(r=>{const n=r.slice(0,-36),a=r.slice(-36),o=parseInt(n.slice(0,4)),l=parseInt(n.slice(4,6))-1,c=parseInt(n.slice(6,8)),d=parseInt(n.slice(9,11)),f=parseInt(n.slice(11,13)),p=parseInt(n.slice(13,15)),m=parseInt(n.slice(15,21));return[new Date(o,l,c,d,f,p,m/1e3),a]})}function i2(){const e=dn("LANGSMITH_RUNS_ENDPOINTS");if(!e)return[];try{const t=JSON.parse(e);if(Array.isArray(t)){const r=[];for(const n of t){if(typeof n!="object"||n===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof n}`);continue}if(typeof n.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof n.api_url}`);continue}if(typeof n.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof n.api_key}`);continue}r.push({apiUrl:n.api_url.replace(/\/$/,""),apiKey:n.api_key})}return r}else if(typeof t=="object"&&t!==null){l2(t);const r=[];for(const[n,a]of Object.entries(t)){const o=n.replace(/\/$/,"");if(typeof a=="string")r.push({apiUrl:o,apiKey:a});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${n}: expected string, got ${typeof a}`);continue}}return r}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof t}`),[]}catch(t){if(FO(t))throw t;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function o2(e){return e?e.map(t=>Array.isArray(t)?{projectName:t[0],updates:t[1]}:t):i2()}function l2(e){if(Object.keys(e).length>0&&cr("ENDPOINT"))throw new zO}var c2={};We(c2,{BaseTracer:()=>Ha,isBaseTracer:()=>ka});const u2=e=>{if(e)return e.events=e.events??[],e.child_runs=e.child_runs??[],e};function Oh(e,t){if(e)return new lr({...e,start_time:e._serialized_start_time??e.start_time,parent_run:Oh(t),child_runs:e.child_runs.map(r=>Oh(r)).filter(r=>r!==void 0),extra:{...e.extra,runtime:nx()},tracingEnabled:!1})}function uh(e,t){return e&&!Array.isArray(e)&&typeof e=="object"?e:{[t]:e}}function ka(e){return typeof e._addRunToRunMap=="function"}var Ha=class extends co{runMap=new Map;runTreeMap=new Map;usesRunTreeMap=!1;constructor(e){super(...arguments)}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?u2(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){const{dottedOrder:t,microsecondPrecisionDatestring:r}=bx(new Date(e.start_time).getTime(),e.id,e.execution_order),n={...e},a=this.getRunById(n.parent_run_id);if(n.parent_run_id!==void 0?a&&(this._addChildRun(a,n),a.child_execution_order=Math.max(a.child_execution_order,n.child_execution_order),n.trace_id=a.trace_id,a.dotted_order!==void 0&&(n.dotted_order=[a.dotted_order,t].join("."),n._serialized_start_time=r)):(n.trace_id=n.id,n.dotted_order=t,n._serialized_start_time=r),this.usesRunTreeMap){const o=Oh(n,a);o!==void 0&&this.runTreeMap.set(n.id,o)}else this.runMap.set(n.id,n);return n}async _endTrace(e){const t=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),await this.onRunUpdate?.(e),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const t=e!==void 0&&this.getRunById(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,r,n,a,o,l,c){const d=this._getExecutionOrder(n),f=Date.now(),p=l?{...a,metadata:l}:a,m={id:r,name:c??e.id[e.id.length-1],parent_run_id:n,start_time:f,serialized:e,events:[{name:"start",time:new Date(f).toISOString()}],inputs:{prompts:t},execution_order:d,child_runs:[],child_execution_order:d,run_type:"llm",extra:p??{},tags:o||[]};return this._addRunToRunMap(m)}async handleLLMStart(e,t,r,n,a,o,l,c){const d=this.getRunById(r)??this._createRunForLLMStart(e,t,r,n,a,o,l,c);return await this.onRunCreate?.(d),await this.onLLMStart?.(d),d}_createRunForChatModelStart(e,t,r,n,a,o,l,c){const d=this._getExecutionOrder(n),f=Date.now(),p=l?{...a,metadata:l}:a,m={id:r,name:c??e.id[e.id.length-1],parent_run_id:n,start_time:f,serialized:e,events:[{name:"start",time:new Date(f).toISOString()}],inputs:{messages:t},execution_order:d,child_runs:[],child_execution_order:d,run_type:"llm",extra:p??{},tags:o||[]};return this._addRunToRunMap(m)}async handleChatModelStart(e,t,r,n,a,o,l,c){const d=this.getRunById(r)??this._createRunForChatModelStart(e,t,r,n,a,o,l,c);return await this.onRunCreate?.(d),await this.onLLMStart?.(d),d}async handleLLMEnd(e,t,r,n,a){const o=this.getRunById(t);if(!o||o?.run_type!=="llm")throw new Error("No LLM run to end.");return o.end_time=Date.now(),o.outputs=e,o.events.push({name:"end",time:new Date(o.end_time).toISOString()}),o.extra={...o.extra,...a},await this.onLLMEnd?.(o),await this._endTrace(o),o}async handleLLMError(e,t,r,n,a){const o=this.getRunById(t);if(!o||o?.run_type!=="llm")throw new Error("No LLM run to end.");return o.end_time=Date.now(),o.error=this.stringifyError(e),o.events.push({name:"error",time:new Date(o.end_time).toISOString()}),o.extra={...o.extra,...a},await this.onLLMError?.(o),await this._endTrace(o),o}_createRunForChainStart(e,t,r,n,a,o,l,c){const d=this._getExecutionOrder(n),f=Date.now(),p={id:r,name:c??e.id[e.id.length-1],parent_run_id:n,start_time:f,serialized:e,events:[{name:"start",time:new Date(f).toISOString()}],inputs:t,execution_order:d,child_execution_order:d,run_type:l??"chain",child_runs:[],extra:o?{metadata:o}:{},tags:a||[]};return this._addRunToRunMap(p)}async handleChainStart(e,t,r,n,a,o,l,c){const d=this.getRunById(r)??this._createRunForChainStart(e,t,r,n,a,o,l,c);return await this.onRunCreate?.(d),await this.onChainStart?.(d),d}async handleChainEnd(e,t,r,n,a){const o=this.getRunById(t);if(!o)throw new Error("No chain run to end.");return o.end_time=Date.now(),o.outputs=uh(e,"output"),o.events.push({name:"end",time:new Date(o.end_time).toISOString()}),a?.inputs!==void 0&&(o.inputs=uh(a.inputs,"input")),await this.onChainEnd?.(o),await this._endTrace(o),o}async handleChainError(e,t,r,n,a){const o=this.getRunById(t);if(!o)throw new Error("No chain run to end.");return o.end_time=Date.now(),o.error=this.stringifyError(e),o.events.push({name:"error",time:new Date(o.end_time).toISOString()}),a?.inputs!==void 0&&(o.inputs=uh(a.inputs,"input")),await this.onChainError?.(o),await this._endTrace(o),o}_createRunForToolStart(e,t,r,n,a,o,l){const c=this._getExecutionOrder(n),d=Date.now(),f={id:r,name:l??e.id[e.id.length-1],parent_run_id:n,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:{input:t},execution_order:c,child_execution_order:c,run_type:"tool",child_runs:[],extra:o?{metadata:o}:{},tags:a||[]};return this._addRunToRunMap(f)}async handleToolStart(e,t,r,n,a,o,l){const c=this.getRunById(r)??this._createRunForToolStart(e,t,r,n,a,o,l);return await this.onRunCreate?.(c),await this.onToolStart?.(c),c}async handleToolEnd(e,t){const r=this.getRunById(t);if(!r||r?.run_type!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await this.onToolEnd?.(r),await this._endTrace(r),r}async handleToolError(e,t){const r=this.getRunById(t);if(!r||r?.run_type!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await this.onToolError?.(r),await this._endTrace(r),r}async handleAgentAction(e,t){const r=this.getRunById(t);if(!r||r?.run_type!=="chain")return;const n=r;n.actions=n.actions||[],n.actions.push(e),n.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentAction?.(r)}async handleAgentEnd(e,t){const r=this.getRunById(t);!r||r?.run_type!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentEnd?.(r))}_createRunForRetrieverStart(e,t,r,n,a,o,l){const c=this._getExecutionOrder(n),d=Date.now(),f={id:r,name:l??e.id[e.id.length-1],parent_run_id:n,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:{query:t},execution_order:c,child_execution_order:c,run_type:"retriever",child_runs:[],extra:o?{metadata:o}:{},tags:a||[]};return this._addRunToRunMap(f)}async handleRetrieverStart(e,t,r,n,a,o,l){const c=this.getRunById(r)??this._createRunForRetrieverStart(e,t,r,n,a,o,l);return await this.onRunCreate?.(c),await this.onRetrieverStart?.(c),c}async handleRetrieverEnd(e,t){const r=this.getRunById(t);if(!r||r?.run_type!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await this.onRetrieverEnd?.(r),await this._endTrace(r),r}async handleRetrieverError(e,t){const r=this.getRunById(t);if(!r||r?.run_type!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await this.onRetrieverError?.(r),await this._endTrace(r),r}async handleText(e,t){const r=this.getRunById(t);!r||r?.run_type!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await this.onText?.(r))}async handleLLMNewToken(e,t,r,n,a,o){const l=this.getRunById(r);if(!l||l?.run_type!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return l.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:t,chunk:o?.chunk}}),await this.onLLMNewToken?.(l,e,{chunk:o?.chunk}),l}},Gl={exports:{}};Gl.exports;var a0;function d2(){return a0||(a0=1,(function(e){const r=(o=0)=>l=>`\x1B[${38+o};5;${l}m`,n=(o=0)=>(l,c,d)=>`\x1B[${38+o};2;${l};${c};${d}m`;function a(){const o=new Map,l={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};l.color.gray=l.color.blackBright,l.bgColor.bgGray=l.bgColor.bgBlackBright,l.color.grey=l.color.blackBright,l.bgColor.bgGrey=l.bgColor.bgBlackBright;for(const[c,d]of Object.entries(l)){for(const[f,p]of Object.entries(d))l[f]={open:`\x1B[${p[0]}m`,close:`\x1B[${p[1]}m`},d[f]=l[f],o.set(p[0],p[1]);Object.defineProperty(l,c,{value:d,enumerable:!1})}return Object.defineProperty(l,"codes",{value:o,enumerable:!1}),l.color.close="\x1B[39m",l.bgColor.close="\x1B[49m",l.color.ansi256=r(),l.color.ansi16m=n(),l.bgColor.ansi256=r(10),l.bgColor.ansi16m=n(10),Object.defineProperties(l,{rgbToAnsi256:{value:(c,d,f)=>c===d&&d===f?c<8?16:c>248?231:Math.round((c-8)/247*24)+232:16+36*Math.round(c/255*5)+6*Math.round(d/255*5)+Math.round(f/255*5),enumerable:!1},hexToRgb:{value:c=>{const d=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(c.toString(16));if(!d)return[0,0,0];let{colorString:f}=d.groups;f.length===3&&(f=f.split("").map(m=>m+m).join(""));const p=Number.parseInt(f,16);return[p>>16&255,p>>8&255,p&255]},enumerable:!1},hexToAnsi256:{value:c=>l.rgbToAnsi256(...l.hexToRgb(c)),enumerable:!1}}),l}Object.defineProperty(e,"exports",{enumerable:!0,get:a})})(Gl)),Gl.exports}var f2=d2();const Ex=Gs(f2);var h2={};We(h2,{ConsoleCallbackHandler:()=>Ph});function Kt(e,t){return`${e.open}${t}${e.close}`}function Nr(e,t){try{return JSON.stringify(e,null,2)}catch{return t}}function i0(e){return typeof e=="string"?e.trim():e==null?e:Nr(e,e.toString())}function ls(e){if(!e.end_time)return"";const t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}const{color:or}=Ex;var Ph=class extends Ha{name="console_callback_handler";persistRun(e){return Promise.resolve()}getParents(e){const t=[];let r=e;for(;r.parent_run_id;){const n=this.runMap.get(r.parent_run_id);if(n)t.push(n),r=n;else break}return t}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((n,a,o)=>{const l=`${n.execution_order}:${n.run_type}:${n.name}`;return a===o.length-1?Kt(Ex.bold,l):l}).join(" > ");return Kt(or.grey,r)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${Kt(or.green,"[chain/start]")} [${t}] Entering Chain run with input: ${Nr(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Kt(or.cyan,"[chain/end]")} [${t}] [${ls(e)}] Exiting Chain run with output: ${Nr(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${Kt(or.red,"[chain/error]")} [${t}] [${ls(e)}] Chain run errored with error: ${Nr(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(n=>n.trim())}:e.inputs;console.log(`${Kt(or.green,"[llm/start]")} [${t}] Entering LLM run with input: ${Nr(r,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Kt(or.cyan,"[llm/end]")} [${t}] [${ls(e)}] Exiting LLM run with output: ${Nr(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${Kt(or.red,"[llm/error]")} [${t}] [${ls(e)}] LLM run errored with error: ${Nr(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${Kt(or.green,"[tool/start]")} [${t}] Entering Tool run with input: "${i0(e.inputs.input)}"`)}onToolEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Kt(or.cyan,"[tool/end]")} [${t}] [${ls(e)}] Exiting Tool run with output: "${i0(e.outputs?.output)}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${Kt(or.red,"[tool/error]")} [${t}] [${ls(e)}] Tool run errored with error: ${Nr(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${Kt(or.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${Nr(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Kt(or.cyan,"[retriever/end]")} [${t}] [${ls(e)}] Exiting Retriever run with output: ${Nr(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${Kt(or.red,"[retriever/error]")} [${t}] [${ls(e)}] Retriever run errored with error: ${Nr(e.error,"[error]")}`)}onAgentAction(e){const t=e,r=this.getBreadcrumbs(e);console.log(`${Kt(or.blue,"[agent/action]")} [${r}] Agent selected action: ${Nr(t.actions[t.actions.length-1],"[action]")}`)}};let dh;const Sx=()=>{if(dh===void 0){const e=ps("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};dh=new Ji(e)}return dh};let p2=class{getStore(){}run(t,r){return r()}};const fh=Symbol.for("ls:tracing_async_local_storage"),m2=new p2;let g2=class{getInstance(){return globalThis[fh]??m2}initializeGlobalInstance(t){globalThis[fh]===void 0&&(globalThis[fh]=t)}};const y2=new g2;function v2(e=!1){const t=y2.getInstance().getStore();if(!e&&t===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return t}function Up(e){return typeof e=="function"&&"langsmith:traceable"in e}var _2={};We(_2,{LangChainTracer:()=>ql});var ql=class kx extends Ha{name="langchain_tracer";projectName;exampleId;client;replicas;usesRunTreeMap=!0;constructor(t={}){super(t);const{exampleId:r,projectName:n,client:a,replicas:o}=t;this.projectName=n??ox(),this.replicas=o,this.exampleId=r,this.client=a??Sx();const l=kx.getTraceableRunTree();l&&this.updateFromRunTree(l)}async persistRun(t){}async onRunCreate(t){await this.getRunTreeWithTracingConfig(t.id)?.postRun()}async onRunUpdate(t){await this.getRunTreeWithTracingConfig(t.id)?.patchRun()}getRun(t){return this.runTreeMap.get(t)}updateFromRunTree(t){this.runTreeMap.set(t.id,t);let r=t;const n=new Set;for(;r.parent_run&&!(n.has(r.id)||(n.add(r.id),!r.parent_run));)r=r.parent_run;n.clear();const a=[r];for(;a.length>0;){const o=a.shift();!o||n.has(o.id)||(n.add(o.id),this.runTreeMap.set(o.id,o),o.child_runs&&a.push(...o.child_runs))}this.client=t.client??this.client,this.replicas=t.replicas??this.replicas,this.projectName=t.project_name??this.projectName,this.exampleId=t.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(t){const r=this.runTreeMap.get(t);if(r)return new lr({...r,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return v2(!0)}catch{return}}};let Fs;function w2(){const e="default"in Nn?Nn.default:Nn;return new e({autoStart:!0,concurrency:1})}function b2(){return typeof Fs>"u"&&(Fs=w2()),Fs}async function kt(e,t){if(t===!0){const r=Ki();r!==void 0?await r.run(void 0,async()=>e()):await e()}else Fs=b2(),Fs.add(async()=>{const r=Ki();r!==void 0?await r.run(void 0,async()=>e()):await e()})}async function x2(){const e=Sx();await Promise.allSettled([typeof Fs<"u"?Fs.onIdle():Promise.resolve(),e.awaitPendingTraceBatches()])}var E2={};We(E2,{awaitAllCallbacks:()=>x2,consumeCallback:()=>kt});const S2=e=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(r=>ps(r)==="true");function Tx(e){const t=Ki();return t===void 0?void 0:t.getStore()?.[Bi]?.[e]}const k2=Symbol("lc:configure_hooks"),T2=()=>Tx(k2)||[];var C2={};We(C2,{BaseCallbackManager:()=>Cx,BaseRunManager:()=>fo,CallbackManager:()=>dr,CallbackManagerForChainRun:()=>Ix,CallbackManagerForLLMRun:()=>$h,CallbackManagerForRetrieverRun:()=>Nx,CallbackManagerForToolRun:()=>Rx,ensureHandler:()=>Yi,parseCallbackConfigArg:()=>Fc});function Fc(e){return e?Array.isArray(e)||"name"in e?{callbacks:e}:e:{}}var Cx=class{setHandler(e){return this.setHandlers([e])}},fo=class{constructor(e,t,r,n,a,o,l,c){this.runId=e,this.handlers=t,this.inheritableHandlers=r,this.tags=n,this.inheritableTags=a,this.metadata=o,this.inheritableMetadata=l,this._parentRunId=c}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(t=>kt(async()=>{try{await t.handleText?.(e,this.runId,this._parentRunId,this.tags)}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${r}`),t.raiseError)throw r}},t.awaitHandlers)))}async handleCustomEvent(e,t,r,n,a){await Promise.all(this.handlers.map(o=>kt(async()=>{try{await o.handleCustomEvent?.(e,t,this.runId,this.tags,this.metadata)}catch(l){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${l}`),o.raiseError)throw l}},o.awaitHandlers)))}},Nx=class extends fo{getChild(e){const t=new dr(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>kt(async()=>{if(!t.ignoreRetriever)try{await t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw r}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>kt(async()=>{if(!t.ignoreRetriever)try{await t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags)}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${r}`),t.raiseError)throw e}},t.awaitHandlers)))}},$h=class extends fo{async handleLLMNewToken(e,t,r,n,a,o){await Promise.all(this.handlers.map(l=>kt(async()=>{if(!l.ignoreLLM)try{await l.handleLLMNewToken?.(e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,o)}catch(c){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleLLMNewToken: ${c}`),l.raiseError)throw c}},l.awaitHandlers)))}async handleLLMError(e,t,r,n,a){await Promise.all(this.handlers.map(o=>kt(async()=>{if(!o.ignoreLLM)try{await o.handleLLMError?.(e,this.runId,this._parentRunId,this.tags,a)}catch(l){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMError: ${l}`),o.raiseError)throw l}},o.awaitHandlers)))}async handleLLMEnd(e,t,r,n,a){await Promise.all(this.handlers.map(o=>kt(async()=>{if(!o.ignoreLLM)try{await o.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags,a)}catch(l){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMEnd: ${l}`),o.raiseError)throw l}},o.awaitHandlers)))}},Ix=class extends fo{getChild(e){const t=new dr(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,r,n,a){await Promise.all(this.handlers.map(o=>kt(async()=>{if(!o.ignoreChain)try{await o.handleChainError?.(e,this.runId,this._parentRunId,this.tags,a)}catch(l){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainError: ${l}`),o.raiseError)throw l}},o.awaitHandlers)))}async handleChainEnd(e,t,r,n,a){await Promise.all(this.handlers.map(o=>kt(async()=>{if(!o.ignoreChain)try{await o.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,a)}catch(l){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainEnd: ${l}`),o.raiseError)throw l}},o.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>kt(async()=>{if(!t.ignoreAgent)try{await t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags)}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${r}`),t.raiseError)throw r}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>kt(async()=>{if(!t.ignoreAgent)try{await t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${r}`),t.raiseError)throw r}},t.awaitHandlers)))}},Rx=class extends fo{getChild(e){const t=new dr(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>kt(async()=>{if(!t.ignoreAgent)try{await t.handleToolError?.(e,this.runId,this._parentRunId,this.tags)}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${r}`),t.raiseError)throw r}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>kt(async()=>{if(!t.ignoreAgent)try{await t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${r}`),t.raiseError)throw r}},t.awaitHandlers)))}},dr=class $i extends Cx{handlers=[];inheritableHandlers=[];tags=[];inheritableTags=[];metadata={};inheritableMetadata={};name="callback_manager";_parentRunId;constructor(t,r){super(),this.handlers=r?.handlers??this.handlers,this.inheritableHandlers=r?.inheritableHandlers??this.inheritableHandlers,this.tags=r?.tags??this.tags,this.inheritableTags=r?.inheritableTags??this.inheritableTags,this.metadata=r?.metadata??this.metadata,this.inheritableMetadata=r?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=t}getParentRunId(){return this._parentRunId}async handleLLMStart(t,r,n=void 0,a=void 0,o=void 0,l=void 0,c=void 0,d=void 0){return Promise.all(r.map(async(f,p)=>{const m=p===0&&n?n:Yt();return await Promise.all(this.handlers.map(y=>{if(!y.ignoreLLM)return ka(y)&&y._createRunForLLMStart(t,[f],m,this._parentRunId,o,this.tags,this.metadata,d),kt(async()=>{try{await y.handleLLMStart?.(t,[f],m,this._parentRunId,o,this.tags,this.metadata,d)}catch(_){if((y.raiseError?console.error:console.warn)(`Error in handler ${y.constructor.name}, handleLLMStart: ${_}`),y.raiseError)throw _}},y.awaitHandlers)})),new $h(m,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(t,r,n=void 0,a=void 0,o=void 0,l=void 0,c=void 0,d=void 0){return Promise.all(r.map(async(f,p)=>{const m=p===0&&n?n:Yt();return await Promise.all(this.handlers.map(y=>{if(!y.ignoreLLM)return ka(y)&&y._createRunForChatModelStart(t,[f],m,this._parentRunId,o,this.tags,this.metadata,d),kt(async()=>{try{if(y.handleChatModelStart)await y.handleChatModelStart?.(t,[f],m,this._parentRunId,o,this.tags,this.metadata,d);else if(y.handleLLMStart){const _=Ap(f);await y.handleLLMStart?.(t,[_],m,this._parentRunId,o,this.tags,this.metadata,d)}}catch(_){if((y.raiseError?console.error:console.warn)(`Error in handler ${y.constructor.name}, handleLLMStart: ${_}`),y.raiseError)throw _}},y.awaitHandlers)})),new $h(m,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(t,r,n=Yt(),a=void 0,o=void 0,l=void 0,c=void 0){return await Promise.all(this.handlers.map(d=>{if(!d.ignoreChain)return ka(d)&&d._createRunForChainStart(t,r,n,this._parentRunId,this.tags,this.metadata,a,c),kt(async()=>{try{await d.handleChainStart?.(t,r,n,this._parentRunId,this.tags,this.metadata,a,c)}catch(f){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleChainStart: ${f}`),d.raiseError)throw f}},d.awaitHandlers)})),new Ix(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(t,r,n=Yt(),a=void 0,o=void 0,l=void 0,c=void 0){return await Promise.all(this.handlers.map(d=>{if(!d.ignoreAgent)return ka(d)&&d._createRunForToolStart(t,r,n,this._parentRunId,this.tags,this.metadata,c),kt(async()=>{try{await d.handleToolStart?.(t,r,n,this._parentRunId,this.tags,this.metadata,c)}catch(f){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleToolStart: ${f}`),d.raiseError)throw f}},d.awaitHandlers)})),new Rx(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(t,r,n=Yt(),a=void 0,o=void 0,l=void 0,c=void 0){return await Promise.all(this.handlers.map(d=>{if(!d.ignoreRetriever)return ka(d)&&d._createRunForRetrieverStart(t,r,n,this._parentRunId,this.tags,this.metadata,c),kt(async()=>{try{await d.handleRetrieverStart?.(t,r,n,this._parentRunId,this.tags,this.metadata,c)}catch(f){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleRetrieverStart: ${f}`),d.raiseError)throw f}},d.awaitHandlers)})),new Nx(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(t,r,n,a,o){await Promise.all(this.handlers.map(l=>kt(async()=>{if(!l.ignoreCustomEvent)try{await l.handleCustomEvent?.(t,r,n,this.tags,this.metadata)}catch(c){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleCustomEvent: ${c}`),l.raiseError)throw c}},l.awaitHandlers)))}addHandler(t,r=!0){this.handlers.push(t),r&&this.inheritableHandlers.push(t)}removeHandler(t){this.handlers=this.handlers.filter(r=>r!==t),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==t)}setHandlers(t,r=!0){this.handlers=[],this.inheritableHandlers=[];for(const n of t)this.addHandler(n,r)}addTags(t,r=!0){this.removeTags(t),this.tags.push(...t),r&&this.inheritableTags.push(...t)}removeTags(t){this.tags=this.tags.filter(r=>!t.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!t.includes(r))}addMetadata(t,r=!0){this.metadata={...this.metadata,...t},r&&(this.inheritableMetadata={...this.inheritableMetadata,...t})}removeMetadata(t){for(const r of Object.keys(t))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(t=[],r=!0){const n=new $i(this._parentRunId);for(const a of this.handlers){const o=this.inheritableHandlers.includes(a);n.addHandler(a,o)}for(const a of this.tags){const o=this.inheritableTags.includes(a);n.addTags([a],o)}for(const a of Object.keys(this.metadata)){const o=Object.keys(this.inheritableMetadata).includes(a);n.addMetadata({[a]:this.metadata[a]},o)}for(const a of t)n.handlers.filter(o=>o.name==="console_callback_handler").some(o=>o.name===a.name)||n.addHandler(a,r);return n}static fromHandlers(t){class r extends co{name=Yt();constructor(){super(),Object.assign(this,t)}}const n=new this;return n.addHandler(new r),n}static configure(t,r,n,a,o,l,c){return this._configureSync(t,r,n,a,o,l,c)}static _configureSync(t,r,n,a,o,l,c){let d;(t||r)&&(Array.isArray(t)||!t?(d=new $i,d.setHandlers(t?.map(Yi)??[],!0)):d=t,d=d.copy(Array.isArray(r)?r.map(Yi):r?.handlers,!1));const f=ps("LANGCHAIN_VERBOSE")==="true"||c?.verbose,p=ql.getTraceableRunTree()?.tracingEnabled||S2(),m=p||(ps("LANGCHAIN_TRACING")??!1);if(f||m){if(d||(d=new $i),f&&!d.handlers.some(y=>y.name===Ph.prototype.name)){const y=new Ph;d.addHandler(y,!0)}if(m&&!d.handlers.some(y=>y.name==="langchain_tracer")&&p){const y=new ql;d.addHandler(y,!0)}if(p){const y=ql.getTraceableRunTree();y&&d._parentRunId===void 0&&(d._parentRunId=y.id,d.handlers.find(b=>b.name==="langchain_tracer")?.updateFromRunTree(y))}}for(const{contextVar:y,inheritable:_=!0,handlerClass:b,envVar:x}of T2()){const E=x&&ps(x)==="true"&&b;let I;const O=y!==void 0?Tx(y):void 0;O&&ax(O)?I=O:E&&(I=new b({})),I!==void 0&&(d||(d=new $i),d.handlers.some(A=>A.name===I.name)||d.addHandler(I,_))}return(n||a)&&d&&(d.addTags(n??[]),d.addTags(a??[],!1)),(o||l)&&d&&(d.addMetadata(o??{}),d.addMetadata(l??{},!1)),d}};function Yi(e){return"name"in e?e:co.fromMethods(e)}var Ax=class{getStore(){}run(e,t){return t()}enterWith(e){}};const N2=new Ax,o0=Symbol.for("lc:child_config");var I2=class{getInstance(){return Ki()??N2}getRunnableConfig(){return this.getInstance().getStore()?.extra?.[o0]}runWithConfig(e,t,r){const n=dr._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata),a=this.getInstance(),o=a.getStore(),l=n?.getParentRunId(),c=n?.handlers?.find(f=>f?.name==="langchain_tracer");let d;return c&&l?d=c.getRunTreeWithTracingConfig(l):r||(d=new lr({name:"<runnable_lambda>",tracingEnabled:!1})),d&&(d.extra={...d.extra,[o0]:e}),o!==void 0&&o[Bi]!==void 0&&(d===void 0&&(d={}),d[Bi]=o[Bi]),a.run(d,t)}initializeGlobalInstance(e){Ki()===void 0&&VR(e)}};const Zr=new I2;var R2={};We(R2,{AsyncLocalStorageProviderSingleton:()=>Zr,MockAsyncLocalStorage:()=>Ax,_CONTEXT_VARIABLES_KEY:()=>Bi});const hh=25;async function _r(e){return dr._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)}function ac(...e){const t={};for(const r of e.filter(n=>!!n))for(const n of Object.keys(r))if(n==="metadata")t[n]={...t[n],...r[n]};else if(n==="tags"){const a=t[n]??[];t[n]=[...new Set(a.concat(r[n]??[]))]}else if(n==="configurable")t[n]={...t[n],...r[n]};else if(n==="timeout")t.timeout===void 0?t.timeout=r.timeout:r.timeout!==void 0&&(t.timeout=Math.min(t.timeout,r.timeout));else if(n==="signal")t.signal===void 0?t.signal=r.signal:r.signal!==void 0&&("any"in AbortSignal?t.signal=AbortSignal.any([t.signal,r.signal]):t.signal=r.signal);else if(n==="callbacks"){const a=t.callbacks,o=r.callbacks;if(Array.isArray(o))if(!a)t.callbacks=o;else if(Array.isArray(a))t.callbacks=a.concat(o);else{const l=a.copy();for(const c of o)l.addHandler(Yi(c),!0);t.callbacks=l}else if(o)if(!a)t.callbacks=o;else if(Array.isArray(a)){const l=o.copy();for(const c of a)l.addHandler(Yi(c),!0);t.callbacks=l}else t.callbacks=new dr(o._parentRunId,{handlers:a.handlers.concat(o.handlers),inheritableHandlers:a.inheritableHandlers.concat(o.inheritableHandlers),tags:Array.from(new Set(a.tags.concat(o.tags))),inheritableTags:Array.from(new Set(a.inheritableTags.concat(o.inheritableTags))),metadata:{...a.metadata,...o.metadata}})}else{const a=n;t[a]=r[a]??t[a]}return t}const A2=new Set(["string","number","boolean"]);function Je(e){const t=Zr.getRunnableConfig();let r={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(t){const{runId:n,runName:a,...o}=t;r=Object.entries(o).reduce((l,[c,d])=>(d!==void 0&&(l[c]=d),l),r)}if(e&&(r=Object.entries(e).reduce((n,[a,o])=>(o!==void 0&&(n[a]=o),n),r)),r?.configurable)for(const n of Object.keys(r.configurable))A2.has(typeof r.configurable[n])&&!r.metadata?.[n]&&(r.metadata||(r.metadata={}),r.metadata[n]=r.configurable[n]);if(r.timeout!==void 0){if(r.timeout<=0)throw new Error("Timeout must be a positive number");const n=AbortSignal.timeout(r.timeout);r.signal!==void 0?"any"in AbortSignal&&(r.signal=AbortSignal.any([r.signal,n])):r.signal=n,delete r.timeout}return r}function ot(e={},{callbacks:t,maxConcurrency:r,recursionLimit:n,runName:a,configurable:o,runId:l}={}){const c=Je(e);return t!==void 0&&(delete c.runName,c.callbacks=t),n!==void 0&&(c.recursionLimit=n),r!==void 0&&(c.maxConcurrency=r),a!==void 0&&(c.runName=a),o!==void 0&&(c.configurable={...c.configurable,...o}),l!==void 0&&delete c.runId,c}function Pn(e){return e?{configurable:e.configurable,recursionLimit:e.recursionLimit,callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,maxConcurrency:e.maxConcurrency,timeout:e.timeout,signal:e.signal}:void 0}async function vs(e,t){if(t===void 0)return e;let r;return Promise.race([e.catch(n=>{if(!t?.aborted)throw n}),new Promise((n,a)=>{r=()=>{a(Xi(t))},t.addEventListener("abort",r),t.aborted&&a(Xi(t))})]).finally(()=>t.removeEventListener("abort",r))}function Xi(e){return e?.reason instanceof Error?e.reason:typeof e?.reason=="string"?new Error(e.reason):new Error("Aborted")}var O2={};We(O2,{AsyncGeneratorWithSetup:()=>Ks,IterableReadableStream:()=>Kr,atee:()=>Bp,concat:()=>_s,pipeGeneratorWithSetup:()=>Ox});var Kr=class jh extends ReadableStream{reader;ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const t=await this.reader.read();return t.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:t.value}}catch(t){throw this.reader.releaseLock(),t}}async return(){if(this.ensureReader(),this.locked){const t=this.reader.cancel();this.reader.releaseLock(),await t}return{done:!0,value:void 0}}async throw(t){if(this.ensureReader(),this.locked){const r=this.reader.cancel();this.reader.releaseLock(),await r}throw t}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(t){const r=t.getReader();return new jh({start(n){return a();function a(){return r.read().then(({done:o,value:l})=>{if(o){n.close();return}return n.enqueue(l),a()})}},cancel(){r.releaseLock()}})}static fromAsyncGenerator(t){return new jh({async pull(r){const{value:n,done:a}=await t.next();a&&r.close(),r.enqueue(n)},async cancel(r){await t.return(r)}})}};function Bp(e,t=2){const r=Array.from({length:t},()=>[]);return r.map(async function*(a){for(;;)if(a.length===0){const o=await e.next();for(const l of r)l.push(o)}else{if(a[0].done)return;yield a.shift().value}})}function _s(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.concat(t);if(typeof e=="string"&&typeof t=="string")return e+t;if(typeof e=="number"&&typeof t=="number")return e+t;if("concat"in e&&typeof e.concat=="function")return e.concat(t);if(typeof e=="object"&&typeof t=="object"){const r={...e};for(const[n,a]of Object.entries(t))n in r&&!Array.isArray(r[n])?r[n]=_s(r[n],a):r[n]=a;return r}else throw new Error(`Cannot concat ${typeof e} and ${typeof t}`)}var Ks=class{generator;setup;config;signal;firstResult;firstResultUsed=!1;constructor(e){this.generator=e.generator,this.config=e.config,this.signal=e.signal??this.config?.signal,this.setup=new Promise((t,r)=>{Zr.runWithConfig(Pn(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(t,r):this.firstResult.then(n=>t(void 0),r)},!0)})}async next(...e){return this.signal?.throwIfAborted(),this.firstResultUsed?Zr.runWithConfig(Pn(this.config),this.signal?async()=>vs(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}};async function Ox(e,t,r,n,...a){const o=new Ks({generator:t,startSetup:r,signal:n}),l=await o.setup;return{output:e(o,l,...a),setup:l}}/*!
* https://github.com/Starcounter-Jack/JSON-Patch
* (c) 2017-2022 Joachim Wester
* MIT licensed
*/const P2=Object.prototype.hasOwnProperty;function Lh(e,t){return P2.call(e,t)}function Mh(e){if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<r.length;n++)r[n]=""+n;return r}if(Object.keys)return Object.keys(e);let t=[];for(let r in e)Lh(e,r)&&t.push(r);return t}function Gr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Dh(e){let t=0;const r=e.length;let n;for(;t<r;){if(n=e.charCodeAt(t),n>=48&&n<=57){t++;continue}return!1}return!0}function Sa(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function $2(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function zh(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(zh(e[r]))return!0}else if(typeof e=="object"){const r=Mh(e),n=r.length;for(var t=0;t<n;t++)if(zh(e[r[t]]))return!0}}return!1}function l0(e,t){const r=[e];for(const n in t){const a=typeof t[n]=="object"?JSON.stringify(t[n],null,2):t[n];typeof a<"u"&&r.push(`${n}: ${a}`)}return r.join(`
`)}var j2=class extends Error{constructor(e,t,r,n,a){super(l0(e,{name:t,index:r,operation:n,tree:a})),this.name=t,this.index=r,this.operation=n,this.tree=a,Object.setPrototypeOf(this,new.target.prototype),this.message=l0(e,{name:t,index:r,operation:n,tree:a})}},Px={};We(Px,{JsonPatchError:()=>gt,_areEquals:()=>Qi,applyOperation:()=>Us,applyPatch:()=>$a,applyReducer:()=>D2,deepClone:()=>L2,getValueByPointer:()=>ic,validate:()=>$x,validator:()=>oc});const gt=j2,L2=Gr,Na={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){let n=ic(r,this.path);n&&(n=Gr(n));const a=Us(r,{op:"remove",path:this.from}).removed;return Us(r,{op:"add",path:this.path,value:a}),{newDocument:r,removed:n}},copy:function(e,t,r){const n=ic(r,this.from);return Us(r,{op:"add",path:this.path,value:Gr(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:Qi(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}};var M2={add:function(e,t,r){return Dh(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){var n=e.splice(t,1);return{newDocument:r,removed:n[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:Na.move,copy:Na.copy,test:Na.test,_get:Na._get};function ic(e,t){if(t=="")return e;var r={op:"_get",path:t};return Us(e,r),r.value}function Us(e,t,r=!1,n=!0,a=!0,o=0){if(r&&(typeof r=="function"?r(t,0,e,t.path):oc(t,0)),t.path===""){let l={newDocument:e};if(t.op==="add")return l.newDocument=t.value,l;if(t.op==="replace")return l.newDocument=t.value,l.removed=e,l;if(t.op==="move"||t.op==="copy")return l.newDocument=ic(e,t.from),t.op==="move"&&(l.removed=e),l;if(t.op==="test"){if(l.test=Qi(e,t.value),l.test===!1)throw new gt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return l.newDocument=e,l}else{if(t.op==="remove")return l.removed=e,l.newDocument=null,l;if(t.op==="_get")return t.value=e,l;if(r)throw new gt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return l}}else{n||(e=Gr(e));const c=(t.path||"").split("/");let d=e,f=1,p=c.length,m,y,_;for(typeof r=="function"?_=r:_=oc;;){if(y=c[f],y&&y.indexOf("~")!=-1&&(y=$2(y)),a&&(y=="__proto__"||y=="prototype"&&f>0&&c[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&m===void 0&&(d[y]===void 0?m=c.slice(0,f).join("/"):f==p-1&&(m=t.path),m!==void 0&&_(t,0,e,m)),f++,Array.isArray(d)){if(y==="-")y=d.length;else{if(r&&!Dh(y))throw new gt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);Dh(y)&&(y=~~y)}if(f>=p){if(r&&t.op==="add"&&y>d.length)throw new gt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);const b=M2[t.op].call(t,d,y,e);if(b.test===!1)throw new gt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return b}}else if(f>=p){const b=Na[t.op].call(t,d,y,e);if(b.test===!1)throw new gt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return b}if(d=d[y],r&&f<p&&(!d||typeof d!="object"))throw new gt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function $a(e,t,r,n=!0,a=!0){if(r&&!Array.isArray(t))throw new gt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=Gr(e));const o=new Array(t.length);for(let l=0,c=t.length;l<c;l++)o[l]=Us(e,t[l],r,!0,a,l),e=o[l].newDocument;return o.newDocument=e,o}function D2(e,t,r){const n=Us(e,t);if(n.test===!1)throw new gt("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return n.newDocument}function oc(e,t,r,n){if(typeof e!="object"||e===null||Array.isArray(e))throw new gt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(Na[e.op]){if(typeof e.path!="string")throw new gt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new gt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new gt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new gt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);if((e.op==="add"||e.op==="replace"||e.op==="test")&&zh(e.value))throw new gt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);if(r){if(e.op=="add"){var a=e.path.split("/").length,o=n.split("/").length;if(a!==o+1&&a!==o)throw new gt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==n)throw new gt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if(e.op==="move"||e.op==="copy"){var l={op:"_get",path:e.from,value:void 0},c=$x([l],r);if(c&&c.name==="OPERATION_PATH_UNRESOLVABLE")throw new gt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}}else throw new gt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r)}function $x(e,t,r){try{if(!Array.isArray(e))throw new gt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)$a(Gr(t),Gr(e),r||!0);else{r=r||oc;for(var n=0;n<e.length;n++)r(e[n],n,t,void 0)}}catch(a){if(a instanceof gt)return a;throw a}}function Qi(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=Array.isArray(e),n=Array.isArray(t),a,o,l;if(r&&n){if(o=e.length,o!=t.length)return!1;for(a=o;a--!==0;)if(!Qi(e[a],t[a]))return!1;return!0}if(r!=n)return!1;var c=Object.keys(e);if(o=c.length,o!==Object.keys(t).length)return!1;for(a=o;a--!==0;)if(!t.hasOwnProperty(c[a]))return!1;for(a=o;a--!==0;)if(l=c[a],!Qi(e[l],t[l]))return!1;return!0}return e!==e&&t!==t}function jx(e,t,r,n,a){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=Mh(t),l=Mh(e),c=!1,d=l.length-1;d>=0;d--){var f=l[d],p=e[f];if(Lh(t,f)&&!(t[f]===void 0&&p!==void 0&&Array.isArray(t)===!1)){var m=t[f];typeof p=="object"&&p!=null&&typeof m=="object"&&m!=null&&Array.isArray(p)===Array.isArray(m)?jx(p,m,r,n+"/"+Sa(f),a):p!==m&&(a&&r.push({op:"test",path:n+"/"+Sa(f),value:Gr(p)}),r.push({op:"replace",path:n+"/"+Sa(f),value:Gr(m)}))}else Array.isArray(e)===Array.isArray(t)?(a&&r.push({op:"test",path:n+"/"+Sa(f),value:Gr(p)}),r.push({op:"remove",path:n+"/"+Sa(f)}),c=!0):(a&&r.push({op:"test",path:n,value:e}),r.push({op:"replace",path:n,value:t}))}if(!(!c&&o.length==l.length))for(var d=0;d<o.length;d++){var f=o[d];!Lh(e,f)&&t[f]!==void 0&&r.push({op:"add",path:n+"/"+Sa(f),value:Gr(t[f])})}}}function Vp(e,t,r=!1){var n=[];return jx(e,t,n,"",r),n}({...Px});var z2={};We(z2,{LogStreamCallbackHandler:()=>Uh,RunLog:()=>Hp,RunLogPatch:()=>Sn,isLogStreamHandler:()=>Lx});var Sn=class{ops;constructor(e){this.ops=e.ops??[]}concat(e){const t=this.ops.concat(e.ops),r=$a({},t);return new Hp({ops:t,state:r[r.length-1].newDocument})}},Hp=class Fh extends Sn{state;constructor(t){super(t),this.state=t.state}concat(t){const r=this.ops.concat(t.ops),n=$a(this.state,t.ops);return new Fh({ops:r,state:n[n.length-1].newDocument})}static fromRunLogPatch(t){const r=$a({},t.ops);return new Fh({ops:t.ops,state:r[r.length-1].newDocument})}};const Lx=e=>e.name==="log_stream_tracer";async function c0(e,t){if(t==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:r}=e;if(["retriever","llm","prompt"].includes(e.run_type))return r;if(!(Object.keys(r).length===1&&r?.input===""))return r.input}async function u0(e,t){const{outputs:r}=e;return t==="original"||["retriever","llm","prompt"].includes(e.run_type)?r:r!==void 0&&Object.keys(r).length===1&&r?.output!==void 0?r.output:r}function F2(e){return e!==void 0&&e.message!==void 0}var Uh=class extends Ha{autoClose=!0;includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;_schemaFormat="original";rootId;keyMapByRunId={};counterMapByRunName={};transformStream;writer;receiveStream;name="log_stream_tracer";lc_prefer_streaming=!0;constructor(e){super({_awaitHandler:!0,...e}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this._schemaFormat=e?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Kr.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const t=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||t.find(n=>this.includeTags?.includes(n))!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&t.every(n=>!this.excludeTags?.includes(n))),r}async*tapOutputIterable(e,t){for await(const r of t){if(e!==this.rootId){const n=this.keyMapByRunId[e];n&&await this.writer.write(new Sn({ops:[{op:"add",path:`/logs/${n}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new Sn({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=t===1?e.name:`${e.name}:${t}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await c0(e,this._schemaFormat)),await this.writer.write(new Sn({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const t=this.keyMapByRunId[e.id];if(t===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${t}/inputs`,value:await c0(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${t}/final_output`,value:await u0(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});const n=new Sn({ops:r});await this.writer.write(n)}finally{if(e.id===this.rootId){const t=new Sn({ops:[{op:"replace",path:"/final_output",value:await u0(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,r){const n=this.keyMapByRunId[e.id];if(n===void 0)return;const a=e.inputs.messages!==void 0;let o;a?F2(r?.chunk)?o=r?.chunk:o=new Zs({id:`run-${e.id}`,content:t}):o=t;const l=new Sn({ops:[{op:"add",path:`/logs/${n}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${n}/streamed_output/-`,value:o}]});await this.writer.write(l)}},U2={};We(U2,{ChatGenerationChunk:()=>Bh,GenerationChunk:()=>ja,RUN_KEY:()=>eo});const eo="__run";var ja=class Mx{text;generationInfo;constructor(t){this.text=t.text,this.generationInfo=t.generationInfo}concat(t){return new Mx({text:this.text+t.text,generationInfo:{...this.generationInfo,...t.generationInfo}})}},Bh=class Dx extends ja{message;constructor(t){super(t),this.message=t.message}concat(t){return new Dx({text:this.text+t.text,generationInfo:{...this.generationInfo,...t.generationInfo},message:this.message.concat(t.message)})}};function zl({name:e,serialized:t}){return e!==void 0?e:t?.name!==void 0?t.name:t?.id!==void 0&&Array.isArray(t?.id)?t.id[t.id.length-1]:"Unnamed"}const B2=e=>e.name==="event_stream_tracer";var V2=class extends Ha{autoClose=!0;includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;runInfoMap=new Map;tappedPromises=new Map;transformStream;writer;receiveStream;name="event_stream_tracer";lc_prefer_streaming=!0;constructor(e){super({_awaitHandler:!0,...e}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Kr.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const t=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||t.find(n=>this.includeTags?.includes(n))!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&t.every(n=>!this.excludeTags?.includes(n))),r}async*tapOutputIterable(e,t){const r=await t.next();if(r.done)return;const n=this.runInfoMap.get(e);if(n===void 0){yield r.value;return}function a(l,c){return l==="llm"&&typeof c=="string"?new ja({text:c}):c}let o=this.tappedPromises.get(e);if(o===void 0){let l;o=new Promise(c=>{l=c}),this.tappedPromises.set(e,o);try{const c={event:`on_${n.runType}_stream`,run_id:e,name:n.name,tags:n.tags,metadata:n.metadata,data:{}};await this.send({...c,data:{chunk:a(n.runType,r.value)}},n),yield r.value;for await(const d of t)n.runType!=="tool"&&n.runType!=="retriever"&&await this.send({...c,data:{chunk:a(n.runType,d)}},n),yield d}finally{l?.()}}else{yield r.value;for await(const l of t)yield l}}async send(e,t){this._includeRun(t)&&await this.writer.write(e)}async sendEndEvent(e,t){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,t)}):await this.send(e,t)}async onLLMStart(e){const t=zl(e),r=e.inputs.messages!==void 0?"chat_model":"llm",n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,n);const a=`on_${r}_start`;await this.send({event:a,data:{input:e.inputs},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onLLMNewToken(e,t,r){const n=this.runInfoMap.get(e.id);let a,o;if(n===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(n.runType==="chat_model")o="on_chat_model_stream",r?.chunk===void 0?a=new Zs({content:t,id:`run-${e.id}`}):a=r.chunk.message;else if(n.runType==="llm")o="on_llm_stream",r?.chunk===void 0?a=new ja({text:t}):a=r.chunk;else throw new Error(`Unexpected run type ${n.runType}`);await this.send({event:o,data:{chunk:a},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}}async onLLMEnd(e){const t=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(t===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const n=e.outputs?.generations;let a;if(t.runType==="chat_model"){for(const o of n??[]){if(a!==void 0)break;a=o[0]?.message}r="on_chat_model_end"}else if(t.runType==="llm")a={generations:n?.map(o=>o.map(l=>({text:l.text,generationInfo:l.generationInfo}))),llmOutput:e.outputs?.llmOutput??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${t.runType}`);await this.sendEndEvent({event:r,data:{output:a,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onChainStart(e){const t=zl(e),r=e.run_type??"chain",n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:e.run_type};let a={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(a={},n.inputs={}):e.inputs.input!==void 0?(a.input=e.inputs.input,n.inputs=e.inputs.input):(a.input=e.inputs,n.inputs=e.inputs),this.runInfoMap.set(e.id,n),await this.send({event:`on_${r}_start`,data:a,name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onChainEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,n=e.inputs??t.inputs??{},o={output:e.outputs?.output??e.outputs,input:n};n.input&&Object.keys(n).length===1&&(o.input=n.input,t.inputs=n.input),await this.sendEndEvent({event:r,data:o,run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata??{}},t)}async onToolStart(e){const t=zl(e),r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:t,run_id:e.id,tags:e.tags??[],metadata:e.extra?.metadata??{}},r)}async onToolEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(t.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=e.outputs?.output===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onRetrieverStart(e){const t=zl(e),n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,n),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onRetrieverEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:e.outputs?.documents??e.outputs,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async handleCustomEvent(e,t,r){const n=this.runInfoMap.get(r);if(n===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:n.tags,metadata:n.metadata,data:t},n)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}},H2={};We(H2,{AsyncCaller:()=>ho});const G2=[400,401,402,403,404,405,406,407,409],q2=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||e.name==="AbortError"||e?.code==="ECONNABORTED")throw e;const t=e?.response?.status??e?.status;if(t&&G2.includes(+t))throw e;if(e?.error?.code==="insufficient_quota"){const r=new Error(e?.message);throw r.name="InsufficientQuotaError",r}};var ho=class{maxConcurrency;maxRetries;onFailedAttempt;queue;constructor(e){this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??q2;const t="default"in Nn?Nn.default:Nn;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>rc(()=>e(...t).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){if(e.signal){let n;return Promise.race([this.call(t,...r),new Promise((a,o)=>{n=()=>{o(Xi(e.signal))},e.signal?.addEventListener("abort",n)})]).finally(()=>{e.signal&&n&&e.signal.removeEventListener("abort",n)})}return this.call(t,...r)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}},zx=class extends Ha{name="RootListenersTracer";rootId;config;argOnStart;argOnEnd;argOnError;constructor({config:e,onStart:t,onEnd:r,onError:n}){super({_awaitHandler:!0}),this.config=e,this.argOnStart=t,this.argOnEnd=r,this.argOnError=n}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}};function Gp(e){return e?e.lc_runnable:!1}var W2=class{includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;constructor(e){this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const n=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(t)),this.includeTags!==void 0&&(r=r||n.some(a=>this.includeTags?.includes(a))),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(t)),this.excludeTags!==void 0&&(r=r&&n.every(a=>!this.excludeTags?.includes(a))),r}};function Uc(e,t,r){function n(c,d){var f;Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(f=c._zod).traits??(f.traits=new Set),c._zod.traits.add(e),t(c,d);for(const p in l.prototype)p in c||Object.defineProperty(c,p,{value:l.prototype[p].bind(c)});c._zod.constr=l,c._zod.def=d}const a=r?.Parent??Object;class o extends a{}Object.defineProperty(o,"name",{value:e});function l(c){var d;const f=r?.Parent?new o:this;n(f,c),(d=f._zod).deferred??(d.deferred=[]);for(const p of f._zod.deferred)p();return f}return Object.defineProperty(l,"init",{value:n}),Object.defineProperty(l,Symbol.hasInstance,{value:c=>r?.Parent&&c instanceof r.Parent?!0:c?._zod?.traits?.has(e)}),Object.defineProperty(l,"name",{value:e}),l}class Vh extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Z2={};function qp(e){return Z2}function K2(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,a])=>t.indexOf(+n)===-1).map(([n,a])=>a)}function J2(e,t){return typeof t=="bigint"?t.toString():t}const Y2=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function lc(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function X2(e){return{}}function ph(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function Fl(e){return typeof e=="string"?e:e?.message}function Wp(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const a=Fl(e.inst?._zod.def?.error?.(e))??Fl(t?.error?.(e))??Fl(r.customError?.(e))??Fl(r.localeError?.(e))??"Invalid input";n.message=a}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}const Fx=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,J2,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Q2=Uc("$ZodError",Fx),Zp=Uc("$ZodError",Fx,{Parent:Error});function eP(e){const t=[];for(const r of e)typeof r=="number"?t.push(`[${r}]`):typeof r=="symbol"?t.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?t.push(`[${JSON.stringify(r)}]`):(t.length&&t.push("."),t.push(r));return t.join("")}function tP(e){const t=[],r=[...e.issues].sort((n,a)=>n.path.length-a.path.length);for(const n of r)t.push(` ${n.message}`),n.path?.length&&t.push(`   at ${eP(n.path)}`);return t.join(`
`)}const rP=e=>async(t,r,n,a)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let l=t._zod.run({value:r,issues:[]},o);if(l instanceof Promise&&(l=await l),l.issues.length){const c=new(a?.Err??e)(l.issues.map(d=>Wp(d,o,qp())));throw Y2(c,a?.callee),c}return l.value},Ux=rP(Zp),nP=e=>(t,r,n)=>{const a=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},a);if(o instanceof Promise)throw new Vh;return o.issues.length?{success:!1,error:new(e??Q2)(o.issues.map(l=>Wp(l,a,qp())))}:{success:!0,data:o.value}},sP=nP(Zp),aP=e=>async(t,r,n)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},a);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(l=>Wp(l,a,qp())))}:{success:!0,data:o.value}},iP=aP(Zp),oP={major:4,minor:0,patch:0},lP=Uc("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=oP;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const a of n)for(const o of a._zod.onattach)o(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const a=(o,l,c)=>{let d=ph(o),f;for(const p of l){if(p._zod.def.when){if(!p._zod.def.when(o))continue}else if(d)continue;const m=o.issues.length,y=p._zod.check(o);if(y instanceof Promise&&c?.async===!1)throw new Vh;if(f||y instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await y,o.issues.length!==m&&(d||(d=ph(o,m)))});else{if(o.issues.length===m)continue;d||(d=ph(o,m))}}return f?f.then(()=>o):o};e._zod.run=(o,l)=>{const c=e._zod.parse(o,l);if(c instanceof Promise){if(l.async===!1)throw new Vh;return c.then(d=>a(d,n,l))}return a(c,n,l)}}e["~standard"]={validate:a=>{try{const o=sP(e,a);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return iP(e,a).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}}),cP=Uc("$ZodNever",(e,t)=>{lP.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});class Bx{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};return delete n.id,{...n,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function uP(){return new Bx}const ds=uP();function dP(e,t){return new e({type:"never",...X2()})}class d0{constructor(t){this.counter=0,this.metadataRegistry=t?.metadata??ds,this.target=t?.target??"draft-2020-12",this.unrepresentable=t?.unrepresentable??"throw",this.override=t?.override??(()=>{}),this.io=t?.io??"output",this.seen=new Map}process(t,r={path:[],schemaPath:[]}){var n;const a=t._zod.def,o={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},l=this.seen.get(t);if(l)return l.count++,r.schemaPath.includes(t)&&(l.cycle=r.path),l.schema;const c={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(t,c);const d=t._zod.toJSONSchema?.();if(d)c.schema=d;else{const m={...r,schemaPath:[...r.schemaPath,t],path:r.path},y=t._zod.parent;if(y)c.ref=y,this.process(y,m),this.seen.get(y).isParent=!0;else{const _=c.schema;switch(a.type){case"string":{const b=_;b.type="string";const{minimum:x,maximum:E,format:I,patterns:O,contentEncoding:A}=t._zod.bag;if(typeof x=="number"&&(b.minLength=x),typeof E=="number"&&(b.maxLength=E),I&&(b.format=o[I]??I,b.format===""&&delete b.format),A&&(b.contentEncoding=A),O&&O.size>0){const D=[...O];D.length===1?b.pattern=D[0].source:D.length>1&&(c.schema.allOf=[...D.map(H=>({...this.target==="draft-7"?{type:"string"}:{},pattern:H.source}))])}break}case"number":{const b=_,{minimum:x,maximum:E,format:I,multipleOf:O,exclusiveMaximum:A,exclusiveMinimum:D}=t._zod.bag;typeof I=="string"&&I.includes("int")?b.type="integer":b.type="number",typeof D=="number"&&(b.exclusiveMinimum=D),typeof x=="number"&&(b.minimum=x,typeof D=="number"&&(D>=x?delete b.minimum:delete b.exclusiveMinimum)),typeof A=="number"&&(b.exclusiveMaximum=A),typeof E=="number"&&(b.maximum=E,typeof A=="number"&&(A<=E?delete b.maximum:delete b.exclusiveMaximum)),typeof O=="number"&&(b.multipleOf=O);break}case"boolean":{const b=_;b.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{_.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{_.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const b=_,{minimum:x,maximum:E}=t._zod.bag;typeof x=="number"&&(b.minItems=x),typeof E=="number"&&(b.maxItems=E),b.type="array",b.items=this.process(a.element,{...m,path:[...m.path,"items"]});break}case"object":{const b=_;b.type="object",b.properties={};const x=a.shape;for(const O in x)b.properties[O]=this.process(x[O],{...m,path:[...m.path,"properties",O]});const E=new Set(Object.keys(x)),I=new Set([...E].filter(O=>{const A=a.shape[O]._zod;return this.io==="input"?A.optin===void 0:A.optout===void 0}));I.size>0&&(b.required=Array.from(I)),a.catchall?._zod.def.type==="never"?b.additionalProperties=!1:a.catchall?a.catchall&&(b.additionalProperties=this.process(a.catchall,{...m,path:[...m.path,"additionalProperties"]})):this.io==="output"&&(b.additionalProperties=!1);break}case"union":{const b=_;b.anyOf=a.options.map((x,E)=>this.process(x,{...m,path:[...m.path,"anyOf",E]}));break}case"intersection":{const b=_,x=this.process(a.left,{...m,path:[...m.path,"allOf",0]}),E=this.process(a.right,{...m,path:[...m.path,"allOf",1]}),I=A=>"allOf"in A&&Object.keys(A).length===1,O=[...I(x)?x.allOf:[x],...I(E)?E.allOf:[E]];b.allOf=O;break}case"tuple":{const b=_;b.type="array";const x=a.items.map((O,A)=>this.process(O,{...m,path:[...m.path,"prefixItems",A]}));if(this.target==="draft-2020-12"?b.prefixItems=x:b.items=x,a.rest){const O=this.process(a.rest,{...m,path:[...m.path,"items"]});this.target==="draft-2020-12"?b.items=O:b.additionalItems=O}a.rest&&(b.items=this.process(a.rest,{...m,path:[...m.path,"items"]}));const{minimum:E,maximum:I}=t._zod.bag;typeof E=="number"&&(b.minItems=E),typeof I=="number"&&(b.maxItems=I);break}case"record":{const b=_;b.type="object",b.propertyNames=this.process(a.keyType,{...m,path:[...m.path,"propertyNames"]}),b.additionalProperties=this.process(a.valueType,{...m,path:[...m.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const b=_,x=K2(a.entries);x.every(E=>typeof E=="number")&&(b.type="number"),x.every(E=>typeof E=="string")&&(b.type="string"),b.enum=x;break}case"literal":{const b=_,x=[];for(const E of a.values)if(E===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof E=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");x.push(Number(E))}else x.push(E);if(x.length!==0)if(x.length===1){const E=x[0];b.type=E===null?"null":typeof E,b.const=E}else x.every(E=>typeof E=="number")&&(b.type="number"),x.every(E=>typeof E=="string")&&(b.type="string"),x.every(E=>typeof E=="boolean")&&(b.type="string"),x.every(E=>E===null)&&(b.type="null"),b.enum=x;break}case"file":{const b=_,x={type:"string",format:"binary",contentEncoding:"binary"},{minimum:E,maximum:I,mime:O}=t._zod.bag;E!==void 0&&(x.minLength=E),I!==void 0&&(x.maxLength=I),O?O.length===1?(x.contentMediaType=O[0],Object.assign(b,x)):b.anyOf=O.map(A=>({...x,contentMediaType:A})):Object.assign(b,x);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const b=this.process(a.innerType,m);_.anyOf=[b,{type:"null"}];break}case"nonoptional":{this.process(a.innerType,m),c.ref=a.innerType;break}case"success":{const b=_;b.type="boolean";break}case"default":{this.process(a.innerType,m),c.ref=a.innerType,_.default=JSON.parse(JSON.stringify(a.defaultValue));break}case"prefault":{this.process(a.innerType,m),c.ref=a.innerType,this.io==="input"&&(_._prefault=JSON.parse(JSON.stringify(a.defaultValue)));break}case"catch":{this.process(a.innerType,m),c.ref=a.innerType;let b;try{b=a.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}_.default=b;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const b=_,x=t._zod.pattern;if(!x)throw new Error("Pattern not found in template literal");b.type="string",b.pattern=x.source;break}case"pipe":{const b=this.io==="input"?a.in._zod.def.type==="transform"?a.out:a.in:a.out;this.process(b,m),c.ref=b;break}case"readonly":{this.process(a.innerType,m),c.ref=a.innerType,_.readOnly=!0;break}case"promise":{this.process(a.innerType,m),c.ref=a.innerType;break}case"optional":{this.process(a.innerType,m),c.ref=a.innerType;break}case"lazy":{const b=t._zod.innerType;this.process(b,m),c.ref=b;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const f=this.metadataRegistry.get(t);return f&&Object.assign(c.schema,f),this.io==="input"&&Rt(t)&&(delete c.schema.examples,delete c.schema.default),this.io==="input"&&c.schema._prefault&&((n=c.schema).default??(n.default=c.schema._prefault)),delete c.schema._prefault,this.seen.get(t).schema}emit(t,r){const n={cycles:r?.cycles??"ref",reused:r?.reused??"inline",external:r?.external??void 0},a=this.seen.get(t);if(!a)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=p=>{const m=this.target==="draft-2020-12"?"$defs":"definitions";if(n.external){const x=n.external.registry.get(p[0])?.id,E=n.external.uri??(O=>O);if(x)return{ref:E(x)};const I=p[1].defId??p[1].schema.id??`schema${this.counter++}`;return p[1].defId=I,{defId:I,ref:`${E("__shared")}#/${m}/${I}`}}if(p[1]===a)return{ref:"#"};const _=`#/${m}/`,b=p[1].schema.id??`__schema${this.counter++}`;return{defId:b,ref:_+b}},l=p=>{if(p[1].schema.$ref)return;const m=p[1],{ref:y,defId:_}=o(p);m.def={...m.schema},_&&(m.defId=_);const b=m.schema;for(const x in b)delete b[x];b.$ref=y};if(n.cycles==="throw")for(const p of this.seen.entries()){const m=p[1];if(m.cycle)throw new Error(`Cycle detected: #/${m.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const p of this.seen.entries()){const m=p[1];if(t===p[0]){l(p);continue}if(n.external){const _=n.external.registry.get(p[0])?.id;if(t!==p[0]&&_){l(p);continue}}if(this.metadataRegistry.get(p[0])?.id){l(p);continue}if(m.cycle){l(p);continue}if(m.count>1&&n.reused==="ref"){l(p);continue}}const c=(p,m)=>{const y=this.seen.get(p),_=y.def??y.schema,b={..._};if(y.ref===null)return;const x=y.ref;if(y.ref=null,x){c(x,m);const E=this.seen.get(x).schema;E.$ref&&m.target==="draft-7"?(_.allOf=_.allOf??[],_.allOf.push(E)):(Object.assign(_,E),Object.assign(_,b))}y.isParent||this.override({zodSchema:p,jsonSchema:_,path:y.path??[]})};for(const p of[...this.seen.entries()].reverse())c(p[0],{target:this.target});const d={};if(this.target==="draft-2020-12"?d.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?d.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),n.external?.uri){const p=n.external.registry.get(t)?.id;if(!p)throw new Error("Schema is missing an `id` property");d.$id=n.external.uri(p)}Object.assign(d,a.def);const f=n.external?.defs??{};for(const p of this.seen.entries()){const m=p[1];m.def&&m.defId&&(f[m.defId]=m.def)}n.external||Object.keys(f).length>0&&(this.target==="draft-2020-12"?d.$defs=f:d.definitions=f);try{return JSON.parse(JSON.stringify(d))}catch{throw new Error("Error converting schema to JSON.")}}}function f0(e,t){if(e instanceof Bx){const n=new d0(t),a={};for(const c of e._idmap.entries()){const[d,f]=c;n.process(f)}const o={},l={registry:e,uri:t?.uri,defs:a};for(const c of e._idmap.entries()){const[d,f]=c;o[d]=n.emit(f,{...t,external:l})}if(Object.keys(a).length>0){const c=n.target==="draft-2020-12"?"$defs":"definitions";o.__shared={[c]:a}}return{schemas:o}}const r=new d0(t);return r.process(e),r.emit(e,t)}function Rt(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const a=e._zod.def;switch(a.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return Rt(a.element,r);case"object":{for(const o in a.shape)if(Rt(a.shape[o],r))return!0;return!1}case"union":{for(const o of a.options)if(Rt(o,r))return!0;return!1}case"intersection":return Rt(a.left,r)||Rt(a.right,r);case"tuple":{for(const o of a.items)if(Rt(o,r))return!0;return!!(a.rest&&Rt(a.rest,r))}case"record":return Rt(a.keyType,r)||Rt(a.valueType,r);case"map":return Rt(a.keyType,r)||Rt(a.valueType,r);case"set":return Rt(a.valueType,r);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return Rt(a.innerType,r);case"lazy":return Rt(a.getter(),r);case"default":return Rt(a.innerType,r);case"prefault":return Rt(a.innerType,r);case"custom":return!1;case"transform":return!0;case"pipe":return Rt(a.in,r)||Rt(a.out,r);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${a.type}`)}function hn(e){if(typeof e!="object"||e===null)return!1;const t=e;if(!("_zod"in t))return!1;const r=t._zod;return typeof r=="object"&&r!==null&&"def"in r}function Mn(e){if(typeof e!="object"||e===null)return!1;const t=e;if(!("_def"in t)||"_zod"in t)return!1;const r=t._def;return typeof r=="object"&&r!=null&&"typeName"in r}function Bc(e){return!e||typeof e!="object"||Array.isArray(e)?!1:!!(hn(e)||Mn(e))}async function fP(e,t){if(hn(e))try{return{success:!0,data:await Ux(e,t)}}catch(r){return{success:!1,error:r}}if(Mn(e))return await e.safeParseAsync(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function Kp(e,t){if(hn(e))return await Ux(e,t);if(Mn(e))return await e.parseAsync(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function Vx(e){if(hn(e))return ds.get(e)?.description;if(Mn(e)||"description"in e&&typeof e.description=="string")return e.description}function Hx(e){return Bc(e)?Mn(e)?e._def.typeName==="ZodString":hn(e)?e._zod.def.type==="string":!1:!1}function Hi(e){return hn(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="object":!1}function Gx(e){return hn(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="array":!1}function Hh(e,t=!1){if(Mn(e))return e.strict();if(Hi(e)){const r=e._zod.def.shape;if(t)for(const[o,l]of Object.entries(e._zod.def.shape)){if(Hi(l)){const d=Hh(l,t);r[o]=d}else if(Gx(l)){let d=l._zod.def.element;Hi(d)&&(d=Hh(d,t)),r[o]=lc(l,{...l._zod.def,element:d})}else r[o]=l;const c=ds.get(l);c&&ds.add(r[o],c)}const n=lc(e,{...e._zod.def,shape:r,catchall:dP(cP)}),a=ds.get(e);return a&&ds.add(n,a),n}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function hP(e){return Mn(e)&&"typeName"in e._def&&e._def.typeName==="ZodEffects"}function pP(e){return hn(e)&&e._zod.def.type==="pipe"}function ji(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(Mn(e))return hP(e)?ji(e._def.schema,t,r):e;if(hn(e)){let a=e;if(pP(e)&&(a=ji(e._zod.def.in,t,r)),t){if(Hi(a)){const l=a._zod.def.shape;for(const[c,d]of Object.entries(a._zod.def.shape))l[c]=ji(d,t,r);a=lc(a,{...a._zod.def,shape:l})}else if(Gx(a)){const l=ji(a._zod.def.element,t,r);a=lc(a,{...a._zod.def,element:l})}}const o=ds.get(e);return o&&ds.add(a,o),r.set(e,a),a}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function mP(e,t=!1){return ji(e,t,new WeakMap)}function mh(e){return e.replace(/[^a-zA-Z-_0-9]/g,"_")}const gP=["*","_","`"];function yP(e){let t="";for(const[r,n]of Object.entries(e))t+=`	classDef ${r} ${n};
`;return t}function vP(e,t,r){const{firstNode:n,lastNode:a,nodeColors:o,withStyles:l=!0,curveStyle:c="linear",wrapLabelNWords:d=9}=r??{};let f=l?`%%{init: {'flowchart': {'curve': '${c}'}}}%%
graph TD;
`:`graph TD;
`;if(l){const _="default",b={[_]:"{0}({1})"};n!==void 0&&(b[n]="{0}([{1}]):::first"),a!==void 0&&(b[a]="{0}([{1}]):::last");for(const[x,E]of Object.entries(e)){const I=E.name.split(":").pop()??"";let A=gP.some(H=>I.startsWith(H)&&I.endsWith(H))?`<p>${I}</p>`:I;Object.keys(E.metadata??{}).length&&(A+=`<hr/><small><em>${Object.entries(E.metadata??{}).map(([H,Z])=>`${H} = ${Z}`).join(`
`)}</em></small>`);const D=(b[x]??b[_]).replace("{0}",mh(x)).replace("{1}",A);f+=`	${D}
`}}const p={};for(const _ of t){const b=_.source.split(":"),x=_.target.split(":"),E=b.filter((I,O)=>I===x[O]).join(":");p[E]||(p[E]=[]),p[E].push(_)}const m=new Set;function y(_,b){const x=_.length===1&&_[0].source===_[0].target;if(b&&!x){const E=b.split(":").pop();if(m.has(E))throw new Error(`Found duplicate subgraph '${E}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);m.add(E),f+=`	subgraph ${E}
`}for(const E of _){const{source:I,target:O,data:A,conditional:D}=E;let H="";if(A!==void 0){let Z=A;const K=Z.split(" ");K.length>d&&(Z=Array.from({length:Math.ceil(K.length/d)},(C,ce)=>K.slice(ce*d,(ce+1)*d).join(" ")).join("&nbsp;<br>&nbsp;")),H=D?` -. &nbsp;${Z}&nbsp; .-> `:` -- &nbsp;${Z}&nbsp; --> `}else H=D?" -.-> ":" --> ";f+=`	${mh(I)}${H}${mh(O)};
`}for(const E in p)E.startsWith(`${b}:`)&&E!==b&&y(p[E],E);b&&!x&&(f+=`	end
`)}y(p[""]??[],"");for(const _ in p)!_.includes(":")&&_!==""&&y(p[_],_);return l&&(f+=yP(o??{})),f}async function _P(e,t){let r=t?.backgroundColor??"white";const n=t?.imageType??"png",a=btoa(e);r!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)||(r=`!${r}`));const o=`https://mermaid.ink/img/${a}?bgColor=${r}&type=${n}`,l=await fetch(o);if(!l.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${l.status}`,`Status text: ${l.statusText}`].join(`
`));return await l.blob()}const wP=Symbol("Let zodToJsonSchema decide on which parser to use"),bP={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},xP=e=>({...bP,...e}),EP=e=>{const t=xP(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([n,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]))}},qx=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function wr(e){if(e.target!=="openAi")return{};const t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:e.$refStrategy==="relative"?qx(t,e.currentPath):t.join("/")}}function Wx(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function et(e,t,r,n,a){e[t]=r,Wx(e,t,n,a)}var Ye;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const o={};for(const l of a)o[l]=l;return o},e.getValidEnumValues=a=>{const o=e.objectKeys(a).filter(c=>typeof a[a[c]]!="number"),l={};for(const c of o)l[c]=a[c];return e.objectValues(l)},e.objectValues=a=>e.objectKeys(a).map(function(o){return a[o]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const o=[];for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&o.push(l);return o},e.find=(a,o)=>{for(const l of a)if(o(l))return l},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,o=" | "){return a.map(l=>typeof l=="string"?`'${l}'`:l).join(o)}e.joinValues=n,e.jsonStringifyReplacer=(a,o)=>typeof o=="bigint"?o.toString():o})(Ye||(Ye={}));var h0;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(h0||(h0={}));const be=Ye.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),us=e=>{switch(typeof e){case"undefined":return be.undefined;case"string":return be.string;case"number":return Number.isNaN(e)?be.nan:be.number;case"boolean":return be.boolean;case"function":return be.function;case"bigint":return be.bigint;case"symbol":return be.symbol;case"object":return Array.isArray(e)?be.array:e===null?be.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?be.promise:typeof Map<"u"&&e instanceof Map?be.map:typeof Set<"u"&&e instanceof Set?be.set:typeof Date<"u"&&e instanceof Date?be.date:be.object;default:return be.unknown}},ne=Ye.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class $n extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(o){return o.message},n={_errors:[]},a=o=>{for(const l of o.issues)if(l.code==="invalid_union")l.unionErrors.map(a);else if(l.code==="invalid_return_type")a(l.returnTypeError);else if(l.code==="invalid_arguments")a(l.argumentsError);else if(l.path.length===0)n._errors.push(r(l));else{let c=n,d=0;for(;d<l.path.length;){const f=l.path[d];d===l.path.length-1?(c[f]=c[f]||{_errors:[]},c[f]._errors.push(r(l))):c[f]=c[f]||{_errors:[]},c=c[f],d++}}};return a(this),n}static assert(t){if(!(t instanceof $n))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ye.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const o=a.path[0];r[o]=r[o]||[],r[o].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}$n.create=e=>new $n(e);const Gh=(e,t)=>{let r;switch(e.code){case ne.invalid_type:e.received===be.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case ne.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Ye.jsonStringifyReplacer)}`;break;case ne.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ye.joinValues(e.keys,", ")}`;break;case ne.invalid_union:r="Invalid input";break;case ne.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ye.joinValues(e.options)}`;break;case ne.invalid_enum_value:r=`Invalid enum value. Expected ${Ye.joinValues(e.options)}, received '${e.received}'`;break;case ne.invalid_arguments:r="Invalid function arguments";break;case ne.invalid_return_type:r="Invalid function return type";break;case ne.invalid_date:r="Invalid date";break;case ne.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Ye.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case ne.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case ne.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case ne.custom:r="Invalid input";break;case ne.invalid_intersection_types:r="Intersection results could not be merged";break;case ne.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case ne.not_finite:r="Number must be finite";break;default:r=t.defaultError,Ye.assertNever(e)}return{message:r}};let SP=Gh;function kP(){return SP}const TP=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,o=[...r,...a.path||[]],l={...a,path:o};if(a.message!==void 0)return{...a,path:o,message:a.message};let c="";const d=n.filter(f=>!!f).slice().reverse();for(const f of d)c=f(l,{data:t,defaultError:c}).message;return{...a,path:o,message:c}};function fe(e,t){const r=kP(),n=TP({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Gh?void 0:Gh].filter(a=>!!a)});e.common.issues.push(n)}class br{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return De;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const o=await a.key,l=await a.value;n.push({key:o,value:l})}return br.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:o,value:l}=a;if(o.status==="aborted"||l.status==="aborted")return De;o.status==="dirty"&&t.dirty(),l.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof l.value<"u"||a.alwaysSet)&&(n[o.value]=l.value)}return{status:t.value,value:n}}}const De=Object.freeze({status:"aborted"}),Li=e=>({status:"dirty",value:e}),Or=e=>({status:"valid",value:e}),p0=e=>e.status==="aborted",m0=e=>e.status==="dirty",La=e=>e.status==="valid",cc=e=>typeof Promise<"u"&&e instanceof Promise;var Ee;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(Ee||(Ee={}));class ws{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const g0=(e,t)=>{if(La(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new $n(e.common.issues);return this._error=r,this._error}}};function Be(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(l,c)=>{const{message:d}=e;return l.code==="invalid_enum_value"?{message:d??c.defaultError}:typeof c.data>"u"?{message:d??n??c.defaultError}:l.code!=="invalid_type"?{message:c.defaultError}:{message:d??r??c.defaultError}},description:a}}class Ze{get description(){return this._def.description}_getType(t){return us(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:us(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new br,ctx:{common:t.parent.common,data:t.data,parsedType:us(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(cc(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:us(t)},a=this._parseSync({data:t,path:n.path,parent:n});return g0(n,a)}"~validate"(t){const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:us(t)};if(!this["~standard"].async)try{const n=this._parseSync({data:t,path:[],parent:r});return La(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(n=>La(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:us(t)},a=this._parse({data:t,path:n.path,parent:n}),o=await(cc(a)?a:Promise.resolve(a));return g0(n,o)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,o)=>{const l=t(a),c=()=>o.addIssue({code:ne.custom,...n(a)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(c(),!1)):l?!0:(c(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new Da({schema:this,typeName:ae.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return ms.create(this,this._def)}nullable(){return za.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return un.create(this)}promise(){return hc.create(this,this._def)}or(t){return dc.create([this,t],this._def)}and(t){return fc.create(this,t,this._def)}transform(t){return new Da({...Be(this._def),schema:this,typeName:ae.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new Zh({...Be(this._def),innerType:this,defaultValue:r,typeName:ae.ZodDefault})}brand(){return new KP({typeName:ae.ZodBranded,type:this,...Be(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new Kh({...Be(this._def),innerType:this,catchValue:r,typeName:ae.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Jp.create(this,t)}readonly(){return Jh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const CP=/^c[^\s-]{8,}$/i,NP=/^[0-9a-z]+$/,IP=/^[0-9A-HJKMNP-TV-Z]{26}$/i,RP=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,AP=/^[a-z0-9_-]{21}$/i,OP=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,PP=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$P=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,jP="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let gh;const LP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,MP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,DP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,zP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,FP=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,UP=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Zx="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",BP=new RegExp(`^${Zx}$`);function Kx(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function VP(e){return new RegExp(`^${Kx(e)}$`)}function HP(e){let t=`${Zx}T${Kx(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function GP(e,t){return!!((t==="v4"||!t)&&LP.test(e)||(t==="v6"||!t)&&DP.test(e))}function qP(e,t){if(!OP.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&a?.typ!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function WP(e,t){return!!((t==="v4"||!t)&&MP.test(e)||(t==="v6"||!t)&&zP.test(e))}class fs extends Ze{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==be.string){const o=this._getOrReturnCtx(t);return fe(o,{code:ne.invalid_type,expected:be.string,received:o.parsedType}),De}const n=new br;let a;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(a=this._getOrReturnCtx(t,a),fe(a,{code:ne.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")t.data.length>o.value&&(a=this._getOrReturnCtx(t,a),fe(a,{code:ne.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){const l=t.data.length>o.value,c=t.data.length<o.value;(l||c)&&(a=this._getOrReturnCtx(t,a),l?fe(a,{code:ne.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&fe(a,{code:ne.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")$P.test(t.data)||(a=this._getOrReturnCtx(t,a),fe(a,{validation:"email",code:ne.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")gh||(gh=new RegExp(jP,"u")),gh.test(t.data)||(a=this._getOrReturnCtx(t,a),fe(a,{validation:"emoji",code:ne.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")RP.test(t.data)||(a=this._getOrReturnCtx(t,a),fe(a,{validation:"uuid",code:ne.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")AP.test(t.data)||(a=this._getOrReturnCtx(t,a),fe(a,{validation:"nanoid",code:ne.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")CP.test(t.data)||(a=this._getOrReturnCtx(t,a),fe(a,{validation:"cuid",code:ne.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")NP.test(t.data)||(a=this._getOrReturnCtx(t,a),fe(a,{validation:"cuid2",code:ne.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")IP.test(t.data)||(a=this._getOrReturnCtx(t,a),fe(a,{validation:"ulid",code:ne.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),fe(a,{validation:"url",code:ne.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),fe(a,{validation:"regex",code:ne.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(a=this._getOrReturnCtx(t,a),fe(a,{code:ne.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(a=this._getOrReturnCtx(t,a),fe(a,{code:ne.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(a=this._getOrReturnCtx(t,a),fe(a,{code:ne.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?HP(o).test(t.data)||(a=this._getOrReturnCtx(t,a),fe(a,{code:ne.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?BP.test(t.data)||(a=this._getOrReturnCtx(t,a),fe(a,{code:ne.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?VP(o).test(t.data)||(a=this._getOrReturnCtx(t,a),fe(a,{code:ne.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?PP.test(t.data)||(a=this._getOrReturnCtx(t,a),fe(a,{validation:"duration",code:ne.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?GP(t.data,o.version)||(a=this._getOrReturnCtx(t,a),fe(a,{validation:"ip",code:ne.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?qP(t.data,o.alg)||(a=this._getOrReturnCtx(t,a),fe(a,{validation:"jwt",code:ne.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?WP(t.data,o.version)||(a=this._getOrReturnCtx(t,a),fe(a,{validation:"cidr",code:ne.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?FP.test(t.data)||(a=this._getOrReturnCtx(t,a),fe(a,{validation:"base64",code:ne.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?UP.test(t.data)||(a=this._getOrReturnCtx(t,a),fe(a,{validation:"base64url",code:ne.invalid_string,message:o.message}),n.dirty()):Ye.assertNever(o);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:ne.invalid_string,...Ee.errToObj(n)})}_addCheck(t){return new fs({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ee.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ee.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ee.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ee.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ee.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ee.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ee.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ee.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ee.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ee.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ee.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ee.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ee.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...Ee.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...Ee.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...Ee.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Ee.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...Ee.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Ee.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Ee.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Ee.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Ee.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Ee.errToObj(r)})}nonempty(t){return this.min(1,Ee.errToObj(t))}trim(){return new fs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new fs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new fs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}fs.create=e=>new fs({checks:[],typeName:ae.ZodString,coerce:e?.coerce??!1,...Be(e)});function ZP(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,o=Number.parseInt(e.toFixed(a).replace(".","")),l=Number.parseInt(t.toFixed(a).replace(".",""));return o%l/10**a}class to extends Ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==be.number){const o=this._getOrReturnCtx(t);return fe(o,{code:ne.invalid_type,expected:be.number,received:o.parsedType}),De}let n;const a=new br;for(const o of this._def.checks)o.kind==="int"?Ye.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),fe(n,{code:ne.invalid_type,expected:"integer",received:"float",message:o.message}),a.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(n=this._getOrReturnCtx(t,n),fe(n,{code:ne.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(n=this._getOrReturnCtx(t,n),fe(n,{code:ne.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="multipleOf"?ZP(t.data,o.value)!==0&&(n=this._getOrReturnCtx(t,n),fe(n,{code:ne.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),fe(n,{code:ne.not_finite,message:o.message}),a.dirty()):Ye.assertNever(o);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Ee.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ee.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ee.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ee.toString(r))}setLimit(t,r,n,a){return new to({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ee.toString(a)}]})}_addCheck(t){return new to({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ee.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ee.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ee.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ee.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ee.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ee.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Ee.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ee.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ee.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Ye.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}to.create=e=>new to({checks:[],typeName:ae.ZodNumber,coerce:e?.coerce||!1,...Be(e)});class ro extends Ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==be.bigint)return this._getInvalidInput(t);let n;const a=new br;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(n=this._getOrReturnCtx(t,n),fe(n,{code:ne.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(n=this._getOrReturnCtx(t,n),fe(n,{code:ne.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),fe(n,{code:ne.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):Ye.assertNever(o);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return fe(r,{code:ne.invalid_type,expected:be.bigint,received:r.parsedType}),De}gte(t,r){return this.setLimit("min",t,!0,Ee.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ee.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ee.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ee.toString(r))}setLimit(t,r,n,a){return new ro({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ee.toString(a)}]})}_addCheck(t){return new ro({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ee.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ee.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ee.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ee.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ee.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}ro.create=e=>new ro({checks:[],typeName:ae.ZodBigInt,coerce:e?.coerce??!1,...Be(e)});class y0 extends Ze{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==be.boolean){const n=this._getOrReturnCtx(t);return fe(n,{code:ne.invalid_type,expected:be.boolean,received:n.parsedType}),De}return Or(t.data)}}y0.create=e=>new y0({typeName:ae.ZodBoolean,coerce:e?.coerce||!1,...Be(e)});class uc extends Ze{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==be.date){const o=this._getOrReturnCtx(t);return fe(o,{code:ne.invalid_type,expected:be.date,received:o.parsedType}),De}if(Number.isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return fe(o,{code:ne.invalid_date}),De}const n=new br;let a;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(a=this._getOrReturnCtx(t,a),fe(a,{code:ne.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(a=this._getOrReturnCtx(t,a),fe(a,{code:ne.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ye.assertNever(o);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new uc({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Ee.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Ee.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}uc.create=e=>new uc({checks:[],coerce:e?.coerce||!1,typeName:ae.ZodDate,...Be(e)});class v0 extends Ze{_parse(t){if(this._getType(t)!==be.symbol){const n=this._getOrReturnCtx(t);return fe(n,{code:ne.invalid_type,expected:be.symbol,received:n.parsedType}),De}return Or(t.data)}}v0.create=e=>new v0({typeName:ae.ZodSymbol,...Be(e)});class _0 extends Ze{_parse(t){if(this._getType(t)!==be.undefined){const n=this._getOrReturnCtx(t);return fe(n,{code:ne.invalid_type,expected:be.undefined,received:n.parsedType}),De}return Or(t.data)}}_0.create=e=>new _0({typeName:ae.ZodUndefined,...Be(e)});class w0 extends Ze{_parse(t){if(this._getType(t)!==be.null){const n=this._getOrReturnCtx(t);return fe(n,{code:ne.invalid_type,expected:be.null,received:n.parsedType}),De}return Or(t.data)}}w0.create=e=>new w0({typeName:ae.ZodNull,...Be(e)});class qh extends Ze{constructor(){super(...arguments),this._any=!0}_parse(t){return Or(t.data)}}qh.create=e=>new qh({typeName:ae.ZodAny,...Be(e)});class b0 extends Ze{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Or(t.data)}}b0.create=e=>new b0({typeName:ae.ZodUnknown,...Be(e)});class bs extends Ze{_parse(t){const r=this._getOrReturnCtx(t);return fe(r,{code:ne.invalid_type,expected:be.never,received:r.parsedType}),De}}bs.create=e=>new bs({typeName:ae.ZodNever,...Be(e)});class x0 extends Ze{_parse(t){if(this._getType(t)!==be.undefined){const n=this._getOrReturnCtx(t);return fe(n,{code:ne.invalid_type,expected:be.void,received:n.parsedType}),De}return Or(t.data)}}x0.create=e=>new x0({typeName:ae.ZodVoid,...Be(e)});class un extends Ze{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==be.array)return fe(r,{code:ne.invalid_type,expected:be.array,received:r.parsedType}),De;if(a.exactLength!==null){const l=r.data.length>a.exactLength.value,c=r.data.length<a.exactLength.value;(l||c)&&(fe(r,{code:l?ne.too_big:ne.too_small,minimum:c?a.exactLength.value:void 0,maximum:l?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(fe(r,{code:ne.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(fe(r,{code:ne.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((l,c)=>a.type._parseAsync(new ws(r,l,r.path,c)))).then(l=>br.mergeArray(n,l));const o=[...r.data].map((l,c)=>a.type._parseSync(new ws(r,l,r.path,c)));return br.mergeArray(n,o)}get element(){return this._def.type}min(t,r){return new un({...this._def,minLength:{value:t,message:Ee.toString(r)}})}max(t,r){return new un({...this._def,maxLength:{value:t,message:Ee.toString(r)}})}length(t,r){return new un({...this._def,exactLength:{value:t,message:Ee.toString(r)}})}nonempty(t){return this.min(1,t)}}un.create=(e,t)=>new un({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ae.ZodArray,...Be(t)});function Ta(e){if(e instanceof Et){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=ms.create(Ta(n))}return new Et({...e._def,shape:()=>t})}else return e instanceof un?new un({...e._def,type:Ta(e.element)}):e instanceof ms?ms.create(Ta(e.unwrap())):e instanceof za?za.create(Ta(e.unwrap())):e instanceof Hs?Hs.create(e.items.map(t=>Ta(t))):e}class Et extends Ze{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Ye.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==be.object){const f=this._getOrReturnCtx(t);return fe(f,{code:ne.invalid_type,expected:be.object,received:f.parsedType}),De}const{status:n,ctx:a}=this._processInputParams(t),{shape:o,keys:l}=this._getCached(),c=[];if(!(this._def.catchall instanceof bs&&this._def.unknownKeys==="strip"))for(const f in a.data)l.includes(f)||c.push(f);const d=[];for(const f of l){const p=o[f],m=a.data[f];d.push({key:{status:"valid",value:f},value:p._parse(new ws(a,m,a.path,f)),alwaysSet:f in a.data})}if(this._def.catchall instanceof bs){const f=this._def.unknownKeys;if(f==="passthrough")for(const p of c)d.push({key:{status:"valid",value:p},value:{status:"valid",value:a.data[p]}});else if(f==="strict")c.length>0&&(fe(a,{code:ne.unrecognized_keys,keys:c}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const p of c){const m=a.data[p];d.push({key:{status:"valid",value:p},value:f._parse(new ws(a,m,a.path,p)),alwaysSet:p in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const f=[];for(const p of d){const m=await p.key,y=await p.value;f.push({key:m,value:y,alwaysSet:p.alwaysSet})}return f}).then(f=>br.mergeObjectSync(n,f)):br.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(t){return Ee.errToObj,new Et({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{const a=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:Ee.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new Et({...this._def,unknownKeys:"strip"})}passthrough(){return new Et({...this._def,unknownKeys:"passthrough"})}extend(t){return new Et({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Et({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ae.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Et({...this._def,catchall:t})}pick(t){const r={};for(const n of Ye.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new Et({...this._def,shape:()=>r})}omit(t){const r={};for(const n of Ye.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new Et({...this._def,shape:()=>r})}deepPartial(){return Ta(this)}partial(t){const r={};for(const n of Ye.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}return new Et({...this._def,shape:()=>r})}required(t){const r={};for(const n of Ye.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof ms;)o=o._def.innerType;r[n]=o}return new Et({...this._def,shape:()=>r})}keyof(){return Jx(Ye.objectKeys(this.shape))}}Et.create=(e,t)=>new Et({shape:()=>e,unknownKeys:"strip",catchall:bs.create(),typeName:ae.ZodObject,...Be(t)});Et.strictCreate=(e,t)=>new Et({shape:()=>e,unknownKeys:"strict",catchall:bs.create(),typeName:ae.ZodObject,...Be(t)});Et.lazycreate=(e,t)=>new Et({shape:e,unknownKeys:"strip",catchall:bs.create(),typeName:ae.ZodObject,...Be(t)});class dc extends Ze{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;const l=o.map(c=>new $n(c.ctx.common.issues));return fe(r,{code:ne.invalid_union,unionErrors:l}),De}if(r.common.async)return Promise.all(n.map(async o=>{const l={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:l}),ctx:l}})).then(a);{let o;const l=[];for(const d of n){const f={...r,common:{...r.common,issues:[]},parent:null},p=d._parseSync({data:r.data,path:r.path,parent:f});if(p.status==="valid")return p;p.status==="dirty"&&!o&&(o={result:p,ctx:f}),f.common.issues.length&&l.push(f.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;const c=l.map(d=>new $n(d));return fe(r,{code:ne.invalid_union,unionErrors:c}),De}}get options(){return this._def.options}}dc.create=(e,t)=>new dc({options:e,typeName:ae.ZodUnion,...Be(t)});function Wh(e,t){const r=us(e),n=us(t);if(e===t)return{valid:!0,data:e};if(r===be.object&&n===be.object){const a=Ye.objectKeys(t),o=Ye.objectKeys(e).filter(c=>a.indexOf(c)!==-1),l={...e,...t};for(const c of o){const d=Wh(e[c],t[c]);if(!d.valid)return{valid:!1};l[c]=d.data}return{valid:!0,data:l}}else if(r===be.array&&n===be.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let o=0;o<e.length;o++){const l=e[o],c=t[o],d=Wh(l,c);if(!d.valid)return{valid:!1};a.push(d.data)}return{valid:!0,data:a}}else return r===be.date&&n===be.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class fc extends Ze{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(o,l)=>{if(p0(o)||p0(l))return De;const c=Wh(o.value,l.value);return c.valid?((m0(o)||m0(l))&&r.dirty(),{status:r.value,value:c.data}):(fe(n,{code:ne.invalid_intersection_types}),De)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,l])=>a(o,l)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}fc.create=(e,t,r)=>new fc({left:e,right:t,typeName:ae.ZodIntersection,...Be(r)});class Hs extends Ze{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==be.array)return fe(n,{code:ne.invalid_type,expected:be.array,received:n.parsedType}),De;if(n.data.length<this._def.items.length)return fe(n,{code:ne.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),De;!this._def.rest&&n.data.length>this._def.items.length&&(fe(n,{code:ne.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const o=[...n.data].map((l,c)=>{const d=this._def.items[c]||this._def.rest;return d?d._parse(new ws(n,l,n.path,c)):null}).filter(l=>!!l);return n.common.async?Promise.all(o).then(l=>br.mergeArray(r,l)):br.mergeArray(r,o)}get items(){return this._def.items}rest(t){return new Hs({...this._def,rest:t})}}Hs.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Hs({items:e,typeName:ae.ZodTuple,rest:null,...Be(t)})};class E0 extends Ze{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==be.map)return fe(n,{code:ne.invalid_type,expected:be.map,received:n.parsedType}),De;const a=this._def.keyType,o=this._def.valueType,l=[...n.data.entries()].map(([c,d],f)=>({key:a._parse(new ws(n,c,n.path,[f,"key"])),value:o._parse(new ws(n,d,n.path,[f,"value"]))}));if(n.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const d of l){const f=await d.key,p=await d.value;if(f.status==="aborted"||p.status==="aborted")return De;(f.status==="dirty"||p.status==="dirty")&&r.dirty(),c.set(f.value,p.value)}return{status:r.value,value:c}})}else{const c=new Map;for(const d of l){const f=d.key,p=d.value;if(f.status==="aborted"||p.status==="aborted")return De;(f.status==="dirty"||p.status==="dirty")&&r.dirty(),c.set(f.value,p.value)}return{status:r.value,value:c}}}}E0.create=(e,t,r)=>new E0({valueType:t,keyType:e,typeName:ae.ZodMap,...Be(r)});class no extends Ze{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==be.set)return fe(n,{code:ne.invalid_type,expected:be.set,received:n.parsedType}),De;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(fe(n,{code:ne.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(fe(n,{code:ne.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const o=this._def.valueType;function l(d){const f=new Set;for(const p of d){if(p.status==="aborted")return De;p.status==="dirty"&&r.dirty(),f.add(p.value)}return{status:r.value,value:f}}const c=[...n.data.values()].map((d,f)=>o._parse(new ws(n,d,n.path,f)));return n.common.async?Promise.all(c).then(d=>l(d)):l(c)}min(t,r){return new no({...this._def,minSize:{value:t,message:Ee.toString(r)}})}max(t,r){return new no({...this._def,maxSize:{value:t,message:Ee.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}no.create=(e,t)=>new no({valueType:e,minSize:null,maxSize:null,typeName:ae.ZodSet,...Be(t)});class S0 extends Ze{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}S0.create=(e,t)=>new S0({getter:e,typeName:ae.ZodLazy,...Be(t)});class k0 extends Ze{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return fe(r,{received:r.data,code:ne.invalid_literal,expected:this._def.value}),De}return{status:"valid",value:t.data}}get value(){return this._def.value}}k0.create=(e,t)=>new k0({value:e,typeName:ae.ZodLiteral,...Be(t)});function Jx(e,t){return new Ma({values:e,typeName:ae.ZodEnum,...Be(t)})}class Ma extends Ze{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return fe(r,{expected:Ye.joinValues(n),received:r.parsedType,code:ne.invalid_type}),De}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return fe(r,{received:r.data,code:ne.invalid_enum_value,options:n}),De}return Or(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Ma.create(t,{...this._def,...r})}exclude(t,r=this._def){return Ma.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Ma.create=Jx;class T0 extends Ze{_parse(t){const r=Ye.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==be.string&&n.parsedType!==be.number){const a=Ye.objectValues(r);return fe(n,{expected:Ye.joinValues(a),received:n.parsedType,code:ne.invalid_type}),De}if(this._cache||(this._cache=new Set(Ye.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=Ye.objectValues(r);return fe(n,{received:n.data,code:ne.invalid_enum_value,options:a}),De}return Or(t.data)}get enum(){return this._def.values}}T0.create=(e,t)=>new T0({values:e,typeName:ae.ZodNativeEnum,...Be(t)});class hc extends Ze{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==be.promise&&r.common.async===!1)return fe(r,{code:ne.invalid_type,expected:be.promise,received:r.parsedType}),De;const n=r.parsedType===be.promise?r.data:Promise.resolve(r.data);return Or(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}hc.create=(e,t)=>new hc({type:e,typeName:ae.ZodPromise,...Be(t)});class Da extends Ze{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ae.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,o={addIssue:l=>{fe(n,l),l.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),a.type==="preprocess"){const l=a.transform(n.data,o);if(n.common.async)return Promise.resolve(l).then(async c=>{if(r.value==="aborted")return De;const d=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return d.status==="aborted"?De:d.status==="dirty"||r.value==="dirty"?Li(d.value):d});{if(r.value==="aborted")return De;const c=this._def.schema._parseSync({data:l,path:n.path,parent:n});return c.status==="aborted"?De:c.status==="dirty"||r.value==="dirty"?Li(c.value):c}}if(a.type==="refinement"){const l=c=>{const d=a.refinement(c,o);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(n.common.async===!1){const c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?De:(c.status==="dirty"&&r.dirty(),l(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?De:(c.status==="dirty"&&r.dirty(),l(c.value).then(()=>({status:r.value,value:c.value}))))}if(a.type==="transform")if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!La(l))return De;const c=a.transform(l.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>La(l)?Promise.resolve(a.transform(l.value,o)).then(c=>({status:r.value,value:c})):De);Ye.assertNever(a)}}Da.create=(e,t,r)=>new Da({schema:e,typeName:ae.ZodEffects,effect:t,...Be(r)});Da.createWithPreprocess=(e,t,r)=>new Da({schema:t,effect:{type:"preprocess",transform:e},typeName:ae.ZodEffects,...Be(r)});class ms extends Ze{_parse(t){return this._getType(t)===be.undefined?Or(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ms.create=(e,t)=>new ms({innerType:e,typeName:ae.ZodOptional,...Be(t)});class za extends Ze{_parse(t){return this._getType(t)===be.null?Or(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}za.create=(e,t)=>new za({innerType:e,typeName:ae.ZodNullable,...Be(t)});class Zh extends Ze{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===be.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Zh.create=(e,t)=>new Zh({innerType:e,typeName:ae.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Be(t)});class Kh extends Ze{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return cc(a)?a.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new $n(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new $n(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Kh.create=(e,t)=>new Kh({innerType:e,typeName:ae.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Be(t)});class C0 extends Ze{_parse(t){if(this._getType(t)!==be.nan){const n=this._getOrReturnCtx(t);return fe(n,{code:ne.invalid_type,expected:be.nan,received:n.parsedType}),De}return{status:"valid",value:t.data}}}C0.create=e=>new C0({typeName:ae.ZodNaN,...Be(e)});class KP extends Ze{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Jp extends Ze{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?De:o.status==="dirty"?(r.dirty(),Li(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?De:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new Jp({in:t,out:r,typeName:ae.ZodPipeline})}}class Jh extends Ze{_parse(t){const r=this._def.innerType._parse(t),n=a=>(La(a)&&(a.value=Object.freeze(a.value)),a);return cc(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}Jh.create=(e,t)=>new Jh({innerType:e,typeName:ae.ZodReadonly,...Be(t)});var ae;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ae||(ae={}));const Vc=fs.create,N0=qh.create;bs.create;un.create;const Hc=Et.create;dc.create;fc.create;Hs.create;Ma.create;hc.create;ms.create;za.create;function JP(e,t){const r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==ae.ZodAny&&(r.items=Xe(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&et(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&et(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(et(r,"minItems",e.exactLength.value,e.exactLength.message,t),et(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}function YP(e,t){const r={type:"integer",format:"int64"};if(!e.checks)return r;for(const n of e.checks)switch(n.kind){case"min":t.target==="jsonSchema7"?n.inclusive?et(r,"minimum",n.value,n.message,t):et(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),et(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?et(r,"maximum",n.value,n.message,t):et(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),et(r,"maximum",n.value,n.message,t));break;case"multipleOf":et(r,"multipleOf",n.value,n.message,t);break}return r}function XP(){return{type:"boolean"}}function Yx(e,t){return Xe(e.type._def,t)}const QP=(e,t)=>Xe(e.innerType._def,t);function Xx(e,t,r){const n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map(a=>Xx(e,t,a))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return e$(e,t)}}const e$=(e,t)=>{const r={type:"integer",format:"unix-time"};if(t.target==="openApi3")return r;for(const n of e.checks)switch(n.kind){case"min":et(r,"minimum",n.value,n.message,t);break;case"max":et(r,"maximum",n.value,n.message,t);break}return r};function t$(e,t){return{...Xe(e.innerType._def,t),default:e.defaultValue()}}function r$(e,t){return t.effectStrategy==="input"?Xe(e.schema._def,t):wr(t)}function n$(e){return{type:"string",enum:Array.from(e.values)}}const s$=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function a$(e,t){const r=[Xe(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Xe(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(o=>!!o);let n=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return r.forEach(o=>{if(s$(o))a.push(...o.allOf),o.unevaluatedProperties===void 0&&(n=void 0);else{let l=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:c,...d}=o;l=d}else n=void 0;a.push(l)}}),a.length?{allOf:a,...n}:void 0}function i$(e,t){const r=typeof e.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[e.value]}:{type:r==="bigint"?"integer":r,const:e.value}}let yh;const Fr={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(yh===void 0&&(yh=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),yh),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Qx(e,t){const r={type:"string"};if(e.checks)for(const n of e.checks)switch(n.kind){case"min":et(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,t);break;case"max":et(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Ur(r,"email",n.message,t);break;case"format:idn-email":Ur(r,"idn-email",n.message,t);break;case"pattern:zod":Jt(r,Fr.email,n.message,t);break}break;case"url":Ur(r,"uri",n.message,t);break;case"uuid":Ur(r,"uuid",n.message,t);break;case"regex":Jt(r,n.regex,n.message,t);break;case"cuid":Jt(r,Fr.cuid,n.message,t);break;case"cuid2":Jt(r,Fr.cuid2,n.message,t);break;case"startsWith":Jt(r,RegExp(`^${vh(n.value,t)}`),n.message,t);break;case"endsWith":Jt(r,RegExp(`${vh(n.value,t)}$`),n.message,t);break;case"datetime":Ur(r,"date-time",n.message,t);break;case"date":Ur(r,"date",n.message,t);break;case"time":Ur(r,"time",n.message,t);break;case"duration":Ur(r,"duration",n.message,t);break;case"length":et(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,t),et(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"includes":Jt(r,RegExp(vh(n.value,t)),n.message,t);break;case"ip":n.version!=="v6"&&Ur(r,"ipv4",n.message,t),n.version!=="v4"&&Ur(r,"ipv6",n.message,t);break;case"base64url":Jt(r,Fr.base64url,n.message,t);break;case"jwt":Jt(r,Fr.jwt,n.message,t);break;case"cidr":n.version!=="v6"&&Jt(r,Fr.ipv4Cidr,n.message,t),n.version!=="v4"&&Jt(r,Fr.ipv6Cidr,n.message,t);break;case"emoji":Jt(r,Fr.emoji(),n.message,t);break;case"ulid":Jt(r,Fr.ulid,n.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":Ur(r,"binary",n.message,t);break;case"contentEncoding:base64":et(r,"contentEncoding","base64",n.message,t);break;case"pattern:zod":Jt(r,Fr.base64,n.message,t);break}break;case"nanoid":Jt(r,Fr.nanoid,n.message,t);break}return r}function vh(e,t){return t.patternStrategy==="escape"?l$(e):e}const o$=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function l$(e){let t="";for(let r=0;r<e.length;r++)o$.has(e[r])||(t+="\\"),t+=e[r];return t}function Ur(e,t,r,n){e.format||e.anyOf?.some(a=>a.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):et(e,"format",t,r,n)}function Jt(e,t,r,n){e.pattern||e.allOf?.some(a=>a.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:I0(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):et(e,"pattern",I0(t,n),r,n)}function I0(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;const r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=r.i?e.source.toLowerCase():e.source;let a="",o=!1,l=!1,c=!1;for(let d=0;d<n.length;d++){if(o){a+=n[d],o=!1;continue}if(r.i){if(l){if(n[d].match(/[a-z]/)){c?(a+=n[d],a+=`${n[d-2]}-${n[d]}`.toUpperCase(),c=!1):n[d+1]==="-"&&n[d+2]?.match(/[a-z]/)?(a+=n[d],c=!0):a+=`${n[d]}${n[d].toUpperCase()}`;continue}}else if(n[d].match(/[a-z]/)){a+=`[${n[d]}${n[d].toUpperCase()}]`;continue}}if(r.m){if(n[d]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(n[d]==="$"){a+=`($|(?=[\r
]))`;continue}}if(r.s&&n[d]==="."){a+=l?`${n[d]}\r
`:`[${n[d]}\r
]`;continue}a+=n[d],n[d]==="\\"?o=!0:l&&n[d]==="]"?l=!1:!l&&n[d]==="["&&(l=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function e1(e,t){if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&e.keyType?._def.typeName===ae.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((n,a)=>({...n,[a]:Xe(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",a]})??wr(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};const r={type:"object",additionalProperties:Xe(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return r;if(e.keyType?._def.typeName===ae.ZodString&&e.keyType._def.checks?.length){const{type:n,...a}=Qx(e.keyType._def,t);return{...r,propertyNames:a}}else{if(e.keyType?._def.typeName===ae.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===ae.ZodBranded&&e.keyType._def.type._def.typeName===ae.ZodString&&e.keyType._def.type._def.checks?.length){const{type:n,...a}=Yx(e.keyType._def,t);return{...r,propertyNames:a}}}return r}function c$(e,t){if(t.mapStrategy==="record")return e1(e,t);const r=Xe(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||wr(t),n=Xe(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||wr(t);return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function u$(e){const t=e.values,n=Object.keys(e.values).filter(o=>typeof t[t[o]]!="number").map(o=>t[o]),a=Array.from(new Set(n.map(o=>typeof o)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:n}}function d$(e){return e.target==="openAi"?void 0:{not:wr({...e,currentPath:[...e.currentPath,"not"]})}}function f$(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const pc={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function h$(e,t){if(t.target==="openApi3")return R0(e,t);const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(n=>n._def.typeName in pc&&(!n._def.checks||!n._def.checks.length))){const n=r.reduce((a,o)=>{const l=pc[o._def.typeName];return l&&!a.includes(l)?[...a,l]:a},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=r.reduce((a,o)=>{const l=typeof o._def.value;switch(l){case"string":case"number":case"boolean":return[...a,l];case"bigint":return[...a,"integer"];case"object":return o._def.value===null?[...a,"null"]:a;case"symbol":case"undefined":case"function":default:return a}},[]);if(n.length===r.length){const a=n.filter((o,l,c)=>c.indexOf(o)===l);return{type:a.length>1?a:a[0],enum:r.reduce((o,l)=>o.includes(l._def.value)?o:[...o,l._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,a)=>[...n,...a._def.values.filter(o=>!n.includes(o))],[])};return R0(e,t)}const R0=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((n,a)=>Xe(n._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(n=>!!n&&(!t.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function p$(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:pc[e.innerType._def.typeName],nullable:!0}:{type:[pc[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const n=Xe(e.innerType._def,{...t,currentPath:[...t.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const r=Xe(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function m$(e,t){const r={type:"number"};if(!e.checks)return r;for(const n of e.checks)switch(n.kind){case"int":r.type="integer",Wx(r,"type",n.message,t);break;case"min":t.target==="jsonSchema7"?n.inclusive?et(r,"minimum",n.value,n.message,t):et(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),et(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?et(r,"maximum",n.value,n.message,t):et(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),et(r,"maximum",n.value,n.message,t));break;case"multipleOf":et(r,"multipleOf",n.value,n.message,t);break}return r}function g$(e,t){const r=t.target==="openAi",n={type:"object",properties:{}},a=[],o=e.shape();for(const c in o){let d=o[c];if(d===void 0||d._def===void 0)continue;let f=v$(d);f&&r&&(d._def.typeName==="ZodOptional"&&(d=d._def.innerType),d.isNullable()||(d=d.nullable()),f=!1);const p=Xe(d._def,{...t,currentPath:[...t.currentPath,"properties",c],propertyPath:[...t.currentPath,"properties",c]});p!==void 0&&(n.properties[c]=p,f||a.push(c))}a.length&&(n.required=a);const l=y$(e,t);return l!==void 0&&(n.additionalProperties=l),n}function y$(e,t){if(e.catchall._def.typeName!=="ZodNever")return Xe(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function v$(e){try{return e.isOptional()}catch{return!0}}const _$=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return Xe(e.innerType._def,t);const r=Xe(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:wr(t)},r]}:wr(t)},w$=(e,t)=>{if(t.pipeStrategy==="input")return Xe(e.in._def,t);if(t.pipeStrategy==="output")return Xe(e.out._def,t);const r=Xe(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=Xe(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(a=>a!==void 0)}};function b$(e,t){return Xe(e.type._def,t)}function x$(e,t){const n={type:"array",uniqueItems:!0,items:Xe(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&et(n,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&et(n,"maxItems",e.maxSize.value,e.maxSize.message,t),n}function E$(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,n)=>Xe(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:Xe(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,n)=>Xe(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function S$(e){return{not:wr(e)}}function k$(e){return wr(e)}const T$=(e,t)=>Xe(e.innerType._def,t),C$=(e,t,r)=>{switch(t){case ae.ZodString:return Qx(e,r);case ae.ZodNumber:return m$(e,r);case ae.ZodObject:return g$(e,r);case ae.ZodBigInt:return YP(e,r);case ae.ZodBoolean:return XP();case ae.ZodDate:return Xx(e,r);case ae.ZodUndefined:return S$(r);case ae.ZodNull:return f$(r);case ae.ZodArray:return JP(e,r);case ae.ZodUnion:case ae.ZodDiscriminatedUnion:return h$(e,r);case ae.ZodIntersection:return a$(e,r);case ae.ZodTuple:return E$(e,r);case ae.ZodRecord:return e1(e,r);case ae.ZodLiteral:return i$(e,r);case ae.ZodEnum:return n$(e);case ae.ZodNativeEnum:return u$(e);case ae.ZodNullable:return p$(e,r);case ae.ZodOptional:return _$(e,r);case ae.ZodMap:return c$(e,r);case ae.ZodSet:return x$(e,r);case ae.ZodLazy:return()=>e.getter()._def;case ae.ZodPromise:return b$(e,r);case ae.ZodNaN:case ae.ZodNever:return d$(r);case ae.ZodEffects:return r$(e,r);case ae.ZodAny:return wr(r);case ae.ZodUnknown:return k$(r);case ae.ZodDefault:return t$(e,r);case ae.ZodBranded:return Yx(e,r);case ae.ZodReadonly:return T$(e,r);case ae.ZodCatch:return QP(e,r);case ae.ZodPipeline:return w$(e,r);case ae.ZodFunction:case ae.ZodVoid:case ae.ZodSymbol:return;default:return(n=>{})()}};function Xe(e,t,r=!1){const n=t.seen.get(e);if(t.override){const c=t.override?.(e,t,n,r);if(c!==wP)return c}if(n&&!r){const c=N$(n,t);if(c!==void 0)return c}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const o=C$(e,e.typeName,t),l=typeof o=="function"?Xe(o(),t):o;if(l&&I$(e,t,l),t.postProcess){const c=t.postProcess(l,e,t);return a.jsonSchema=l,c}return a.jsonSchema=l,l}const N$=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:qx(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,n)=>t.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),wr(t)):t.$refStrategy==="seen"?wr(t):void 0}},I$=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),R$=(e,t)=>{const r=EP(t);let n;const a=Xe(e._def,r,!1)??wr(r);r.flags.hasReferencedOpenAiAnyType&&(n||(n={}),n[r.openAiAnyTypeName]||(n[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:r.$refStrategy==="relative"?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));const o=n?{...a,[r.definitionPath]:n}:a;return r.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};function Bs(e,t){const r=typeof e;if(r!==typeof t)return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;const n=e.length;if(n!==t.length)return!1;for(let a=0;a<n;a++)if(!Bs(e[a],t[a]))return!1;return!0}if(r==="object"){if(!e||!t)return e===t;const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(const l of n)if(!Bs(e[l],t[l]))return!1;return!0}return e===t}function Vr(e){return encodeURI(A$(e))}function A$(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}const O$={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},P$={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},$$={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};let j$=typeof self<"u"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function hs(e,t=Object.create(null),r=j$,n=""){if(e&&typeof e=="object"&&!Array.isArray(e)){const o=e.$id||e.id;if(o){const l=new URL(o,r.href);l.hash.length>1?t[l.href]=e:(l.hash="",n===""?r=l:hs(e,t,r))}}else if(e!==!0&&e!==!1)return t;const a=r.href+(n?"#"+n:"");if(t[a]!==void 0)throw new Error(`Duplicate schema URI "${a}".`);if(t[a]=e,e===!0||e===!1)return t;if(e.__absolute_uri__===void 0&&Object.defineProperty(e,"__absolute_uri__",{enumerable:!1,value:a}),e.$ref&&e.__absolute_ref__===void 0){const o=new URL(e.$ref,r.href);o.hash=o.hash,Object.defineProperty(e,"__absolute_ref__",{enumerable:!1,value:o.href})}if(e.$recursiveRef&&e.__absolute_recursive_ref__===void 0){const o=new URL(e.$recursiveRef,r.href);o.hash=o.hash,Object.defineProperty(e,"__absolute_recursive_ref__",{enumerable:!1,value:o.href})}if(e.$anchor){const o=new URL("#"+e.$anchor,r.href);t[o.href]=e}for(let o in e){if($$[o])continue;const l=`${n}/${Vr(o)}`,c=e[o];if(Array.isArray(c)){if(O$[o]){const d=c.length;for(let f=0;f<d;f++)hs(c[f],t,r,`${l}/${f}`)}}else if(P$[o])for(let d in c)hs(c[d],t,r,`${l}/${Vr(d)}`);else hs(c,t,r,l)}return t}const L$=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,M$=[0,31,28,31,30,31,30,31,31,30,31,30,31],D$=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,z$=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,F$=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,U$=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,B$=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,V$=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,H$=/^(?:\/(?:[^~/]|~0|~1)*)*$/,G$=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,q$=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,W$=e=>{if(e[0]==='"')return!1;const[t,r,...n]=e.split("@");return!t||!r||n.length!==0||t.length>64||r.length>253||t[0]==="."||t.endsWith(".")||t.includes("..")||!/^[a-z0-9.-]+$/i.test(r)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t)?!1:r.split(".").every(a=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(a))},Z$=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,K$=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,J$=e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e));function on(e){return e.test.bind(e)}const A0={date:t1,time:r1.bind(void 0,!1),"date-time":Q$,duration:J$,uri:rj,"uri-reference":on(F$),"uri-template":on(U$),url:on(B$),email:W$,hostname:on(z$),ipv4:on(Z$),ipv6:on(K$),regex:sj,uuid:on(V$),"json-pointer":on(H$),"json-pointer-uri-fragment":on(G$),"relative-json-pointer":on(q$)};function Y$(e){return e%4===0&&(e%100!==0||e%400===0)}function t1(e){const t=e.match(L$);if(!t)return!1;const r=+t[1],n=+t[2],a=+t[3];return n>=1&&n<=12&&a>=1&&a<=(n==2&&Y$(r)?29:M$[n])}function r1(e,t){const r=t.match(D$);if(!r)return!1;const n=+r[1],a=+r[2],o=+r[3],l=!!r[5];return(n<=23&&a<=59&&o<=59||n==23&&a==59&&o==60)&&(!e||l)}const X$=/t|\s/i;function Q$(e){const t=e.split(X$);return t.length==2&&t1(t[0])&&r1(!0,t[1])}const ej=/\/|:/,tj=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function rj(e){return ej.test(e)&&tj.test(e)}const nj=/[^\\]\\Z/;function sj(e){if(nj.test(e))return!1;try{return new RegExp(e,"u"),!0}catch{return!1}}function aj(e){let t=0,r=e.length,n=0,a;for(;n<r;)t++,a=e.charCodeAt(n++),a>=55296&&a<=56319&&n<r&&(a=e.charCodeAt(n),(a&64512)==56320&&n++);return t}function ct(e,t,r="2019-09",n=hs(t),a=!0,o=null,l="#",c="#",d=Object.create(null)){if(t===!0)return{valid:!0,errors:[]};if(t===!1)return{valid:!1,errors:[{instanceLocation:l,keyword:"false",keywordLocation:l,error:"False boolean schema."}]};const f=typeof e;let p;switch(f){case"boolean":case"number":case"string":p=f;break;case"object":e===null?p="null":Array.isArray(e)?p="array":p="object";break;default:throw new Error(`Instances of "${f}" type are not supported.`)}const{$ref:m,$recursiveRef:y,$recursiveAnchor:_,type:b,const:x,enum:E,required:I,not:O,anyOf:A,allOf:D,oneOf:H,if:Z,then:K,else:C,format:ce,properties:Ne,patternProperties:ke,additionalProperties:Ve,unevaluatedProperties:tt,minProperties:ee,maxProperties:J,propertyNames:W,dependentRequired:te,dependentSchemas:M,dependencies:q,prefixItems:G,items:P,additionalItems:U,unevaluatedItems:se,contains:le,minContains:ue,maxContains:T,minItems:S,maxItems:V,uniqueItems:j,minimum:Te,maximum:He,exclusiveMinimum:Ge,exclusiveMaximum:nt,multipleOf:vt,minLength:Qt,maxLength:st,pattern:Ft,__absolute_ref__:pn,__absolute_recursive_ref__:Dn}=t,ie=[];if(_===!0&&o===null&&(o=t),y==="#"){const Pe=o===null?n[Dn]:o,Se=`${c}/$recursiveRef`,je=ct(e,o===null?t:o,r,n,a,Pe,l,Se,d);je.valid||ie.push({instanceLocation:l,keyword:"$recursiveRef",keywordLocation:Se,error:"A subschema had errors."},...je.errors)}if(m!==void 0){const Se=n[pn||m];if(Se===void 0){let oe=`Unresolved $ref "${m}".`;throw pn&&pn!==m&&(oe+=`  Absolute URI "${pn}".`),oe+=`
Known schemas:
- ${Object.keys(n).join(`
- `)}`,new Error(oe)}const je=`${c}/$ref`,he=ct(e,Se,r,n,a,o,l,je,d);if(he.valid||ie.push({instanceLocation:l,keyword:"$ref",keywordLocation:je,error:"A subschema had errors."},...he.errors),r==="4"||r==="7")return{valid:ie.length===0,errors:ie}}if(Array.isArray(b)){let Pe=b.length,Se=!1;for(let je=0;je<Pe;je++)if(p===b[je]||b[je]==="integer"&&p==="number"&&e%1===0&&e===e){Se=!0;break}Se||ie.push({instanceLocation:l,keyword:"type",keywordLocation:`${c}/type`,error:`Instance type "${p}" is invalid. Expected "${b.join('", "')}".`})}else b==="integer"?(p!=="number"||e%1||e!==e)&&ie.push({instanceLocation:l,keyword:"type",keywordLocation:`${c}/type`,error:`Instance type "${p}" is invalid. Expected "${b}".`}):b!==void 0&&p!==b&&ie.push({instanceLocation:l,keyword:"type",keywordLocation:`${c}/type`,error:`Instance type "${p}" is invalid. Expected "${b}".`});if(x!==void 0&&(p==="object"||p==="array"?Bs(e,x)||ie.push({instanceLocation:l,keyword:"const",keywordLocation:`${c}/const`,error:`Instance does not match ${JSON.stringify(x)}.`}):e!==x&&ie.push({instanceLocation:l,keyword:"const",keywordLocation:`${c}/const`,error:`Instance does not match ${JSON.stringify(x)}.`})),E!==void 0&&(p==="object"||p==="array"?E.some(Pe=>Bs(e,Pe))||ie.push({instanceLocation:l,keyword:"enum",keywordLocation:`${c}/enum`,error:`Instance does not match any of ${JSON.stringify(E)}.`}):E.some(Pe=>e===Pe)||ie.push({instanceLocation:l,keyword:"enum",keywordLocation:`${c}/enum`,error:`Instance does not match any of ${JSON.stringify(E)}.`})),O!==void 0){const Pe=`${c}/not`;ct(e,O,r,n,a,o,l,Pe).valid&&ie.push({instanceLocation:l,keyword:"not",keywordLocation:Pe,error:'Instance matched "not" schema.'})}let er=[];if(A!==void 0){const Pe=`${c}/anyOf`,Se=ie.length;let je=!1;for(let he=0;he<A.length;he++){const oe=A[he],$e=Object.create(d),Re=ct(e,oe,r,n,a,_===!0?o:null,l,`${Pe}/${he}`,$e);ie.push(...Re.errors),je=je||Re.valid,Re.valid&&er.push($e)}je?ie.length=Se:ie.splice(Se,0,{instanceLocation:l,keyword:"anyOf",keywordLocation:Pe,error:"Instance does not match any subschemas."})}if(D!==void 0){const Pe=`${c}/allOf`,Se=ie.length;let je=!0;for(let he=0;he<D.length;he++){const oe=D[he],$e=Object.create(d),Re=ct(e,oe,r,n,a,_===!0?o:null,l,`${Pe}/${he}`,$e);ie.push(...Re.errors),je=je&&Re.valid,Re.valid&&er.push($e)}je?ie.length=Se:ie.splice(Se,0,{instanceLocation:l,keyword:"allOf",keywordLocation:Pe,error:"Instance does not match every subschema."})}if(H!==void 0){const Pe=`${c}/oneOf`,Se=ie.length,je=H.filter((he,oe)=>{const $e=Object.create(d),Re=ct(e,he,r,n,a,_===!0?o:null,l,`${Pe}/${oe}`,$e);return ie.push(...Re.errors),Re.valid&&er.push($e),Re.valid}).length;je===1?ie.length=Se:ie.splice(Se,0,{instanceLocation:l,keyword:"oneOf",keywordLocation:Pe,error:`Instance does not match exactly one subschema (${je} matches).`})}if((p==="object"||p==="array")&&Object.assign(d,...er),Z!==void 0){const Pe=`${c}/if`;if(ct(e,Z,r,n,a,o,l,Pe,d).valid){if(K!==void 0){const je=ct(e,K,r,n,a,o,l,`${c}/then`,d);je.valid||ie.push({instanceLocation:l,keyword:"if",keywordLocation:Pe,error:'Instance does not match "then" schema.'},...je.errors)}}else if(C!==void 0){const je=ct(e,C,r,n,a,o,l,`${c}/else`,d);je.valid||ie.push({instanceLocation:l,keyword:"if",keywordLocation:Pe,error:'Instance does not match "else" schema.'},...je.errors)}}if(p==="object"){if(I!==void 0)for(const he of I)he in e||ie.push({instanceLocation:l,keyword:"required",keywordLocation:`${c}/required`,error:`Instance does not have required property "${he}".`});const Pe=Object.keys(e);if(ee!==void 0&&Pe.length<ee&&ie.push({instanceLocation:l,keyword:"minProperties",keywordLocation:`${c}/minProperties`,error:`Instance does not have at least ${ee} properties.`}),J!==void 0&&Pe.length>J&&ie.push({instanceLocation:l,keyword:"maxProperties",keywordLocation:`${c}/maxProperties`,error:`Instance does not have at least ${J} properties.`}),W!==void 0){const he=`${c}/propertyNames`;for(const oe in e){const $e=`${l}/${Vr(oe)}`,Re=ct(oe,W,r,n,a,o,$e,he);Re.valid||ie.push({instanceLocation:l,keyword:"propertyNames",keywordLocation:he,error:`Property name "${oe}" does not match schema.`},...Re.errors)}}if(te!==void 0){const he=`${c}/dependantRequired`;for(const oe in te)if(oe in e){const $e=te[oe];for(const Re of $e)Re in e||ie.push({instanceLocation:l,keyword:"dependentRequired",keywordLocation:he,error:`Instance has "${oe}" but does not have "${Re}".`})}}if(M!==void 0)for(const he in M){const oe=`${c}/dependentSchemas`;if(he in e){const $e=ct(e,M[he],r,n,a,o,l,`${oe}/${Vr(he)}`,d);$e.valid||ie.push({instanceLocation:l,keyword:"dependentSchemas",keywordLocation:oe,error:`Instance has "${he}" but does not match dependant schema.`},...$e.errors)}}if(q!==void 0){const he=`${c}/dependencies`;for(const oe in q)if(oe in e){const $e=q[oe];if(Array.isArray($e))for(const Re of $e)Re in e||ie.push({instanceLocation:l,keyword:"dependencies",keywordLocation:he,error:`Instance has "${oe}" but does not have "${Re}".`});else{const Re=ct(e,$e,r,n,a,o,l,`${he}/${Vr(oe)}`);Re.valid||ie.push({instanceLocation:l,keyword:"dependencies",keywordLocation:he,error:`Instance has "${oe}" but does not match dependant schema.`},...Re.errors)}}}const Se=Object.create(null);let je=!1;if(Ne!==void 0){const he=`${c}/properties`;for(const oe in Ne){if(!(oe in e))continue;const $e=`${l}/${Vr(oe)}`,Re=ct(e[oe],Ne[oe],r,n,a,o,$e,`${he}/${Vr(oe)}`);if(Re.valid)d[oe]=Se[oe]=!0;else if(je=a,ie.push({instanceLocation:l,keyword:"properties",keywordLocation:he,error:`Property "${oe}" does not match schema.`},...Re.errors),je)break}}if(!je&&ke!==void 0){const he=`${c}/patternProperties`;for(const oe in ke){const $e=new RegExp(oe,"u"),Re=ke[oe];for(const Lt in e){if(!$e.test(Lt))continue;const zn=`${l}/${Vr(Lt)}`,Fn=ct(e[Lt],Re,r,n,a,o,zn,`${he}/${Vr(oe)}`);Fn.valid?d[Lt]=Se[Lt]=!0:(je=a,ie.push({instanceLocation:l,keyword:"patternProperties",keywordLocation:he,error:`Property "${Lt}" matches pattern "${oe}" but does not match associated schema.`},...Fn.errors))}}}if(!je&&Ve!==void 0){const he=`${c}/additionalProperties`;for(const oe in e){if(Se[oe])continue;const $e=`${l}/${Vr(oe)}`,Re=ct(e[oe],Ve,r,n,a,o,$e,he);Re.valid?d[oe]=!0:(je=a,ie.push({instanceLocation:l,keyword:"additionalProperties",keywordLocation:he,error:`Property "${oe}" does not match additional properties schema.`},...Re.errors))}}else if(!je&&tt!==void 0){const he=`${c}/unevaluatedProperties`;for(const oe in e)if(!d[oe]){const $e=`${l}/${Vr(oe)}`,Re=ct(e[oe],tt,r,n,a,o,$e,he);Re.valid?d[oe]=!0:ie.push({instanceLocation:l,keyword:"unevaluatedProperties",keywordLocation:he,error:`Property "${oe}" does not match unevaluated properties schema.`},...Re.errors)}}}else if(p==="array"){V!==void 0&&e.length>V&&ie.push({instanceLocation:l,keyword:"maxItems",keywordLocation:`${c}/maxItems`,error:`Array has too many items (${e.length} > ${V}).`}),S!==void 0&&e.length<S&&ie.push({instanceLocation:l,keyword:"minItems",keywordLocation:`${c}/minItems`,error:`Array has too few items (${e.length} < ${S}).`});const Pe=e.length;let Se=0,je=!1;if(G!==void 0){const he=`${c}/prefixItems`,oe=Math.min(G.length,Pe);for(;Se<oe;Se++){const $e=ct(e[Se],G[Se],r,n,a,o,`${l}/${Se}`,`${he}/${Se}`);if(d[Se]=!0,!$e.valid&&(je=a,ie.push({instanceLocation:l,keyword:"prefixItems",keywordLocation:he,error:"Items did not match schema."},...$e.errors),je))break}}if(P!==void 0){const he=`${c}/items`;if(Array.isArray(P)){const oe=Math.min(P.length,Pe);for(;Se<oe;Se++){const $e=ct(e[Se],P[Se],r,n,a,o,`${l}/${Se}`,`${he}/${Se}`);if(d[Se]=!0,!$e.valid&&(je=a,ie.push({instanceLocation:l,keyword:"items",keywordLocation:he,error:"Items did not match schema."},...$e.errors),je))break}}else for(;Se<Pe;Se++){const oe=ct(e[Se],P,r,n,a,o,`${l}/${Se}`,he);if(d[Se]=!0,!oe.valid&&(je=a,ie.push({instanceLocation:l,keyword:"items",keywordLocation:he,error:"Items did not match schema."},...oe.errors),je))break}if(!je&&U!==void 0){const oe=`${c}/additionalItems`;for(;Se<Pe;Se++){const $e=ct(e[Se],U,r,n,a,o,`${l}/${Se}`,oe);d[Se]=!0,$e.valid||(je=a,ie.push({instanceLocation:l,keyword:"additionalItems",keywordLocation:oe,error:"Items did not match additional items schema."},...$e.errors))}}}if(le!==void 0)if(Pe===0&&ue===void 0)ie.push({instanceLocation:l,keyword:"contains",keywordLocation:`${c}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(ue!==void 0&&Pe<ue)ie.push({instanceLocation:l,keyword:"minContains",keywordLocation:`${c}/minContains`,error:`Array has less items (${Pe}) than minContains (${ue}).`});else{const he=`${c}/contains`,oe=ie.length;let $e=0;for(let Re=0;Re<Pe;Re++){const Lt=ct(e[Re],le,r,n,a,o,`${l}/${Re}`,he);Lt.valid?(d[Re]=!0,$e++):ie.push(...Lt.errors)}$e>=(ue||0)&&(ie.length=oe),ue===void 0&&T===void 0&&$e===0?ie.splice(oe,0,{instanceLocation:l,keyword:"contains",keywordLocation:he,error:"Array does not contain item matching schema."}):ue!==void 0&&$e<ue?ie.push({instanceLocation:l,keyword:"minContains",keywordLocation:`${c}/minContains`,error:`Array must contain at least ${ue} items matching schema. Only ${$e} items were found.`}):T!==void 0&&$e>T&&ie.push({instanceLocation:l,keyword:"maxContains",keywordLocation:`${c}/maxContains`,error:`Array may contain at most ${T} items matching schema. ${$e} items were found.`})}if(!je&&se!==void 0){const he=`${c}/unevaluatedItems`;for(Se;Se<Pe;Se++){if(d[Se])continue;const oe=ct(e[Se],se,r,n,a,o,`${l}/${Se}`,he);d[Se]=!0,oe.valid||ie.push({instanceLocation:l,keyword:"unevaluatedItems",keywordLocation:he,error:"Items did not match unevaluated items schema."},...oe.errors)}}if(j)for(let he=0;he<Pe;he++){const oe=e[he],$e=typeof oe=="object"&&oe!==null;for(let Re=0;Re<Pe;Re++){if(he===Re)continue;const Lt=e[Re];(oe===Lt||$e&&(typeof Lt=="object"&&Lt!==null)&&Bs(oe,Lt))&&(ie.push({instanceLocation:l,keyword:"uniqueItems",keywordLocation:`${c}/uniqueItems`,error:`Duplicate items at indexes ${he} and ${Re}.`}),he=Number.MAX_SAFE_INTEGER,Re=Number.MAX_SAFE_INTEGER)}}}else if(p==="number"){if(r==="4"?(Te!==void 0&&(Ge===!0&&e<=Te||e<Te)&&ie.push({instanceLocation:l,keyword:"minimum",keywordLocation:`${c}/minimum`,error:`${e} is less than ${Ge?"or equal to ":""} ${Te}.`}),He!==void 0&&(nt===!0&&e>=He||e>He)&&ie.push({instanceLocation:l,keyword:"maximum",keywordLocation:`${c}/maximum`,error:`${e} is greater than ${nt?"or equal to ":""} ${He}.`})):(Te!==void 0&&e<Te&&ie.push({instanceLocation:l,keyword:"minimum",keywordLocation:`${c}/minimum`,error:`${e} is less than ${Te}.`}),He!==void 0&&e>He&&ie.push({instanceLocation:l,keyword:"maximum",keywordLocation:`${c}/maximum`,error:`${e} is greater than ${He}.`}),Ge!==void 0&&e<=Ge&&ie.push({instanceLocation:l,keyword:"exclusiveMinimum",keywordLocation:`${c}/exclusiveMinimum`,error:`${e} is less than ${Ge}.`}),nt!==void 0&&e>=nt&&ie.push({instanceLocation:l,keyword:"exclusiveMaximum",keywordLocation:`${c}/exclusiveMaximum`,error:`${e} is greater than or equal to ${nt}.`})),vt!==void 0){const Pe=e%vt;Math.abs(0-Pe)>=11920929e-14&&Math.abs(vt-Pe)>=11920929e-14&&ie.push({instanceLocation:l,keyword:"multipleOf",keywordLocation:`${c}/multipleOf`,error:`${e} is not a multiple of ${vt}.`})}}else if(p==="string"){const Pe=Qt===void 0&&st===void 0?0:aj(e);Qt!==void 0&&Pe<Qt&&ie.push({instanceLocation:l,keyword:"minLength",keywordLocation:`${c}/minLength`,error:`String is too short (${Pe} < ${Qt}).`}),st!==void 0&&Pe>st&&ie.push({instanceLocation:l,keyword:"maxLength",keywordLocation:`${c}/maxLength`,error:`String is too long (${Pe} > ${st}).`}),Ft!==void 0&&!new RegExp(Ft,"u").test(e)&&ie.push({instanceLocation:l,keyword:"pattern",keywordLocation:`${c}/pattern`,error:"String does not match pattern."}),ce!==void 0&&A0[ce]&&!A0[ce](e)&&ie.push({instanceLocation:l,keyword:"format",keywordLocation:`${c}/format`,error:`String does not match format "${ce}".`})}return{valid:ie.length===0,errors:ie}}class ij{schema;draft;shortCircuit;lookup;constructor(t,r="2019-09",n=!0){this.schema=t,this.draft=r,this.shortCircuit=n,this.lookup=hs(t)}validate(t){return ct(t,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(t,r){r&&(t={...t,$id:r}),hs(t,this.lookup)}}var oj={};We(oj,{Validator:()=>ij,deepCompareStrict:()=>Bs,toJsonSchema:()=>Ga,validatesOnlyStrings:()=>Gi});function Ga(e){if(hn(e)){const t=mP(e,!0);if(Hi(t)){const r=Hh(t,!0);return f0(r)}else return f0(e)}return Mn(e)?R$(e):e}function Gi(e){if(!e||typeof e!="object"||Object.keys(e).length===0||Array.isArray(e))return!1;if("type"in e)return typeof e.type=="string"?e.type==="string":Array.isArray(e.type)?e.type.every(t=>t==="string"):!1;if("enum"in e)return Array.isArray(e.enum)&&e.enum.length>0&&e.enum.every(t=>typeof t=="string");if("const"in e)return typeof e.const=="string";if("allOf"in e&&Array.isArray(e.allOf))return e.allOf.some(t=>Gi(t));if("anyOf"in e&&Array.isArray(e.anyOf)||"oneOf"in e&&Array.isArray(e.oneOf)){const t="anyOf"in e?e.anyOf:e.oneOf;return t.length>0&&t.every(r=>Gi(r))}if("not"in e)return!1;if("$ref"in e&&typeof e.$ref=="string"){const t=e.$ref,r=hs(e);return r[t]?Gi(r[t]):!1}return!1}var lj={};We(lj,{Graph:()=>Yp});function cj(e,t){if(e!==void 0&&!Vi(e))return e;if(Gp(t))try{let r=t.getName();return r=r.startsWith("Runnable")?r.slice(8):r,r}catch{return t.getName()}else return t.name??"UnknownSchema"}function uj(e){return Gp(e.data)?{type:"runnable",data:{id:e.data.lc_id,name:e.data.getName()}}:{type:"schema",data:{...Ga(e.data.schema),title:e.data.name}}}var Yp=class n1{nodes={};edges=[];constructor(t){this.nodes=t?.nodes??this.nodes,this.edges=t?.edges??this.edges}toJSON(){const t={};return Object.values(this.nodes).forEach((r,n)=>{t[r.id]=Vi(r.id)?n:r.id}),{nodes:Object.values(this.nodes).map(r=>({id:t[r.id],...uj(r)})),edges:this.edges.map(r=>{const n={source:t[r.source],target:t[r.target]};return typeof r.data<"u"&&(n.data=r.data),typeof r.conditional<"u"&&(n.conditional=r.conditional),n})}}addNode(t,r,n){if(r!==void 0&&this.nodes[r]!==void 0)throw new Error(`Node with id ${r} already exists`);const a=r??Yt(),o={id:a,data:t,name:cj(r,t),metadata:n};return this.nodes[a]=o,o}removeNode(t){delete this.nodes[t.id],this.edges=this.edges.filter(r=>r.source!==t.id&&r.target!==t.id)}addEdge(t,r,n,a){if(this.nodes[t.id]===void 0)throw new Error(`Source node ${t.id} not in graph`);if(this.nodes[r.id]===void 0)throw new Error(`Target node ${r.id} not in graph`);const o={source:t.id,target:r.id,data:n,conditional:a};return this.edges.push(o),o}firstNode(){return O0(this)}lastNode(){return P0(this)}extend(t,r=""){let n=r;Object.values(t.nodes).map(f=>f.id).every(Vi)&&(n="");const o=f=>n?`${n}:${f}`:f;Object.entries(t.nodes).forEach(([f,p])=>{this.nodes[o(f)]={...p,id:o(f)}});const l=t.edges.map(f=>({...f,source:o(f.source),target:o(f.target)}));this.edges=[...this.edges,...l];const c=t.firstNode(),d=t.lastNode();return[c?{id:o(c.id),data:c.data}:void 0,d?{id:o(d.id),data:d.data}:void 0]}trimFirstNode(){const t=this.firstNode();t&&O0(this,[t.id])&&this.removeNode(t)}trimLastNode(){const t=this.lastNode();t&&P0(this,[t.id])&&this.removeNode(t)}reid(){const t=Object.fromEntries(Object.values(this.nodes).map(a=>[a.id,a.name])),r=new Map;Object.values(t).forEach(a=>{r.set(a,(r.get(a)||0)+1)});const n=a=>{const o=t[a];return Vi(a)&&r.get(o)===1?o:a};return new n1({nodes:Object.fromEntries(Object.entries(this.nodes).map(([a,o])=>[n(a),{...o,id:n(a)}])),edges:this.edges.map(a=>({...a,source:n(a.source),target:n(a.target)}))})}drawMermaid(t){const{withStyles:r,curveStyle:n,nodeColors:a={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:o}=t??{},l=this.reid(),c=l.firstNode(),d=l.lastNode();return vP(l.nodes,l.edges,{firstNode:c?.id,lastNode:d?.id,withStyles:r,curveStyle:n,nodeColors:a,wrapLabelNWords:o})}async drawMermaidPng(t){const r=this.drawMermaid(t);return _P(r,{backgroundColor:t?.backgroundColor})}};function O0(e,t=[]){const r=new Set(e.edges.filter(a=>!t.includes(a.source)).map(a=>a.target)),n=[];for(const a of Object.values(e.nodes))!t.includes(a.id)&&!r.has(a.id)&&n.push(a);return n.length===1?n[0]:void 0}function P0(e,t=[]){const r=new Set(e.edges.filter(a=>!t.includes(a.target)).map(a=>a.source)),n=[];for(const a of Object.values(e.nodes))!t.includes(a.id)&&!r.has(a.id)&&n.push(a);return n.length===1?n[0]:void 0}function dj(e){const t=new TextEncoder,r=new ReadableStream({async start(n){for await(const a of e)n.enqueue(t.encode(`event: data
data: ${JSON.stringify(a)}

`));n.enqueue(t.encode(`event: end

`)),n.close()}});return Kr.fromReadableStream(r)}function $0(e){return typeof e=="object"&&e!==null&&typeof e[Symbol.iterator]=="function"&&typeof e.next=="function"}const fj=e=>e!=null&&typeof e=="object"&&"next"in e&&typeof e.next=="function";function Yh(e){return typeof e=="object"&&e!==null&&typeof e[Symbol.asyncIterator]=="function"}function*j0(e,t){for(;;){const{value:r,done:n}=Zr.runWithConfig(Pn(e),t.next.bind(t),!0);if(n)break;yield r}}async function*Xh(e,t){const r=t[Symbol.asyncIterator]();for(;;){const{value:n,done:a}=await Zr.runWithConfig(Pn(e),r.next.bind(t),!0);if(a)break;yield n}}function At(e,t){return e&&!Array.isArray(e)&&!(e instanceof Date)&&typeof e=="object"?e:{[t]:e}}var bt=class extends Oa{lc_runnable=!0;name;getName(e){const t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}withRetry(e){return new Xp({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new Fa({bound:this,config:e,kwargs:{}})}withFallbacks(e){const t=Array.isArray(e)?e:e.fallbacks;return new c1({runnable:this,fallbacks:t})}_getOptionsList(e,t=0){if(Array.isArray(e)&&e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(Je);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([n])=>n!=="runId"));return Array.from({length:t},(n,a)=>Je(a===0?e:r))}return Array.from({length:t},()=>Je(e))}async batch(e,t,r){const n=this._getOptionsList(t??{},e.length),a=n[0]?.maxConcurrency??r?.maxConcurrency,o=new ho({maxConcurrency:a,onFailedAttempt:c=>{throw c}}),l=e.map((c,d)=>o.call(async()=>{try{return await this.invoke(c,n[d])}catch(f){if(r?.returnExceptions)return f;throw f}}));return Promise.all(l)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){const r=Je(t),n=new Ks({generator:this._streamIterator(e,r),config:r});return await n.setup,Kr.fromAsyncGenerator(n)}_separateRunnableConfigFromCallOptions(e){let t;e===void 0?t=Je(e):t=Je({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[t,r]}async _callWithConfig(e,t,r){const n=Je(r),o=await(await _r(n))?.handleChainStart(this.toJSON(),At(t,"input"),n.runId,n?.runType,void 0,void 0,n?.runName??this.getName());delete n.runId;let l;try{const c=e.call(this,t,n,o);l=await vs(c,r?.signal)}catch(c){throw await o?.handleChainError(c),c}return await o?.handleChainEnd(At(l,"output")),l}async _batchWithConfig(e,t,r,n){const a=this._getOptionsList(r??{},t.length),o=await Promise.all(a.map(_r)),l=await Promise.all(o.map(async(d,f)=>{const p=await d?.handleChainStart(this.toJSON(),At(t[f],"input"),a[f].runId,a[f].runType,void 0,void 0,a[f].runName??this.getName());return delete a[f].runId,p}));let c;try{const d=e.call(this,t,a,l,n);c=await vs(d,a?.[0]?.signal)}catch(d){throw await Promise.all(l.map(f=>f?.handleChainError(d))),d}return await Promise.all(l.map(d=>d?.handleChainEnd(At(c,"output")))),c}_concatOutputChunks(e,t){return _s(e,t)}async*_transformStreamWithConfig(e,t,r){let n,a=!0,o,l=!0;const c=Je(r),d=await _r(c),f=this;async function*p(){for await(const y of e){if(a)if(n===void 0)n=y;else try{n=f._concatOutputChunks(n,y)}catch{n=void 0,a=!1}yield y}}let m;try{const y=await Ox(t.bind(this),p(),async()=>d?.handleChainStart(this.toJSON(),{input:""},c.runId,c.runType,void 0,void 0,c.runName??this.getName()),r?.signal,c);delete c.runId,m=y.setup;const _=m?.handlers.find(B2);let b=y.output;_!==void 0&&m!==void 0&&(b=_.tapOutputIterable(m.runId,b));const x=m?.handlers.find(Lx);x!==void 0&&m!==void 0&&(b=x.tapOutputIterable(m.runId,b));for await(const E of b)if(yield E,l)if(o===void 0)o=E;else try{o=this._concatOutputChunks(o,E)}catch{o=void 0,l=!1}}catch(y){throw await m?.handleChainError(y,void 0,void 0,void 0,{inputs:At(n,"input")}),y}await m?.handleChainEnd(o??{},void 0,void 0,void 0,{inputs:At(n,"input")})}getGraph(e){const t=new Yp,r=t.addNode({name:`${this.getName()}Input`,schema:N0()}),n=t.addNode(this),a=t.addNode({name:`${this.getName()}Output`,schema:N0()});return t.addEdge(r,n),t.addEdge(n,a),t}pipe(e){return new Gc({first:this,last:qr(e)})}pick(e){return this.pipe(new u1(e))}assign(e){return this.pipe(new Qp(new qa({steps:e})))}async*transform(e,t){let r;for await(const n of e)r===void 0?r=n:r=this._concatOutputChunks(r,n);yield*this._streamIterator(r,Je(t))}async*streamLog(e,t,r){const n=new Uh({...r,autoClose:!1,_schemaFormat:"original"}),a=Je(t);yield*this._streamLog(e,n,a)}async*_streamLog(e,t,r){const{callbacks:n}=r;if(n===void 0)r.callbacks=[t];else if(Array.isArray(n))r.callbacks=n.concat([t]);else{const c=n.copy();c.addHandler(t,!0),r.callbacks=c}const a=this.stream(e,r);async function o(){try{const c=await a;for await(const d of c){const f=new Sn({ops:[{op:"add",path:"/streamed_output/-",value:d}]});await t.writer.write(f)}}finally{await t.writer.close()}}const l=o();try{for await(const c of t)yield c}finally{await l}}streamEvents(e,t,r){let n;if(t.version==="v1")n=this._streamEventsV1(e,t,r);else if(t.version==="v2")n=this._streamEventsV2(e,t,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return t.encoding==="text/event-stream"?dj(n):Kr.fromAsyncGenerator(n)}async*_streamEventsV2(e,t,r){const n=new V2({...r,autoClose:!1}),a=Je(t),o=a.runId??Yt();a.runId=o;const l=a.callbacks;if(l===void 0)a.callbacks=[n];else if(Array.isArray(l))a.callbacks=l.concat(n);else{const _=l.copy();_.addHandler(n,!0),a.callbacks=_}const c=new AbortController,d=this;async function f(){let _,b=null;try{t?.signal?"any"in AbortSignal?_=AbortSignal.any([c.signal,t.signal]):(_=t.signal,b=()=>{c.abort()},t.signal.addEventListener("abort",b,{once:!0})):_=c.signal;const x=await d.stream(e,{...a,signal:_}),E=n.tapOutputIterable(o,x);for await(const I of E)if(c.signal.aborted)break}finally{await n.finish(),_&&b&&_.removeEventListener("abort",b)}}const p=f();let m=!1,y;try{for await(const _ of n){if(!m){_.data.input=e,m=!0,y=_.run_id,yield _;continue}_.run_id===y&&_.event.endsWith("_end")&&_.data?.input&&delete _.data.input,yield _}}finally{c.abort(),await p}}async*_streamEventsV1(e,t,r){let n,a=!1;const o=Je(t),l=o.tags??[],c=o.metadata??{},d=o.runName??this.getName(),f=new Uh({...r,autoClose:!1,_schemaFormat:"streaming_events"}),p=new W2({...r}),m=this._streamLog(e,f,o);for await(const _ of m){if(n?n=n.concat(_):n=Hp.fromRunLogPatch(_),n.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!a){a=!0;const I={...n.state},O={run_id:I.id,event:`on_${I.type}_start`,name:d,tags:l,metadata:c,data:{input:e}};p.includeEvent(O,I.type)&&(yield O)}const b=_.ops.filter(I=>I.path.startsWith("/logs/")).map(I=>I.path.split("/")[2]),x=[...new Set(b)];for(const I of x){let O,A={};const D=n.state.logs[I];if(D.end_time===void 0?D.streamed_output.length>0?O="stream":O="start":O="end",O==="start")D.inputs!==void 0&&(A.input=D.inputs);else if(O==="end")D.inputs!==void 0&&(A.input=D.inputs),A.output=D.final_output;else if(O==="stream"){const H=D.streamed_output.length;if(H!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${H} instead. Encountered in: "${D.name}"`);A={chunk:D.streamed_output[0]},D.streamed_output=[]}yield{event:`on_${D.type}_${O}`,name:D.name,run_id:D.id,tags:D.tags,metadata:D.metadata,data:A}}const{state:E}=n;if(E.streamed_output.length>0){const I=E.streamed_output.length;if(I!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${I} instead. Encountered in: "${E.name}"`);const O={chunk:E.streamed_output[0]};E.streamed_output=[];const A={event:`on_${E.type}_stream`,run_id:E.id,tags:l,metadata:c,name:d,data:O};p.includeEvent(A,E.type)&&(yield A)}}const y=n?.state;if(y!==void 0){const _={event:`on_${y.type}_end`,name:d,run_id:y.id,tags:l,metadata:c,data:{output:y.final_output}};p.includeEvent(_,y.type)&&(yield _)}}static isRunnable(e){return Gp(e)}withListeners({onStart:e,onEnd:t,onError:r}){return new Fa({bound:this,config:{},configFactories:[n=>({callbacks:[new zx({config:n,onStart:e,onEnd:t,onError:r})]})]})}asTool(e){return yj(this,e)}},Fa=class s1 extends bt{static lc_name(){return"RunnableBinding"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;bound;config;kwargs;configFactories;constructor(t){super(t),this.bound=t.bound,this.kwargs=t.kwargs,this.config=t.config,this.configFactories=t.configFactories}getName(t){return this.bound.getName(t)}async _mergeConfig(...t){const r=ac(this.config,...t);return ac(r,...this.configFactories?await Promise.all(this.configFactories.map(async n=>await n(r))):[])}withConfig(t){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...t}})}withRetry(t){return new Xp({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:t?.stopAfterAttempt,...t})}async invoke(t,r){return this.bound.invoke(t,await this._mergeConfig(r,this.kwargs))}async batch(t,r,n){const a=Array.isArray(r)?await Promise.all(r.map(async o=>this._mergeConfig(Je(o),this.kwargs))):await this._mergeConfig(Je(r),this.kwargs);return this.bound.batch(t,a,n)}_concatOutputChunks(t,r){return this.bound._concatOutputChunks(t,r)}async*_streamIterator(t,r){yield*this.bound._streamIterator(t,await this._mergeConfig(Je(r),this.kwargs))}async stream(t,r){return this.bound.stream(t,await this._mergeConfig(Je(r),this.kwargs))}async*transform(t,r){yield*this.bound.transform(t,await this._mergeConfig(Je(r),this.kwargs))}streamEvents(t,r,n){const a=this,o=async function*(){yield*a.bound.streamEvents(t,{...await a._mergeConfig(Je(r),a.kwargs),version:r.version},n)};return Kr.fromAsyncGenerator(o())}static isRunnableBinding(t){return t.bound&&bt.isRunnable(t.bound)}withListeners({onStart:t,onEnd:r,onError:n}){return new s1({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[a=>({callbacks:[new zx({config:a,onStart:t,onEnd:r,onError:n})]})]})}},hj=class a1 extends bt{static lc_name(){return"RunnableEach"}lc_serializable=!0;lc_namespace=["langchain_core","runnables"];bound;constructor(t){super(t),this.bound=t.bound}async invoke(t,r){return this._callWithConfig(this._invoke.bind(this),t,r)}async _invoke(t,r,n){return this.bound.batch(t,ot(r,{callbacks:n?.getChild()}))}withListeners({onStart:t,onEnd:r,onError:n}){return new a1({bound:this.bound.withListeners({onStart:t,onEnd:r,onError:n})})}},Xp=class extends Fa{static lc_name(){return"RunnableRetry"}lc_namespace=["langchain_core","runnables"];maxAttemptNumber=3;onFailedAttempt=()=>{};constructor(e){super(e),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,r){const n=e>1?`retry:attempt:${e}`:void 0;return ot(t,{callbacks:r?.getChild(n)})}async _invoke(e,t,r){return rc(n=>super.invoke(e,this._patchConfigForRetry(n,t,r)),{onFailedAttempt:n=>this.onFailedAttempt(n,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _batch(e,t,r,n){const a={};try{await rc(async o=>{const l=e.map((m,y)=>y).filter(m=>a[m.toString()]===void 0||a[m.toString()]instanceof Error),c=l.map(m=>e[m]),d=l.map(m=>this._patchConfigForRetry(o,t?.[m],r?.[m])),f=await super.batch(c,d,{...n,returnExceptions:!0});let p;for(let m=0;m<f.length;m+=1){const y=f[m],_=l[m];y instanceof Error&&p===void 0&&(p=y,p.input=c[m]),a[_.toString()]=y}if(p)throw p;return f},{onFailedAttempt:o=>this.onFailedAttempt(o,o.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(o){if(n?.returnExceptions!==!0)throw o}return Object.keys(a).sort((o,l)=>parseInt(o,10)-parseInt(l,10)).map(o=>a[parseInt(o,10)])}async batch(e,t,r){return this._batchWithConfig(this._batch.bind(this),e,t,r)}},Gc=class Mi extends bt{static lc_name(){return"RunnableSequence"}first;middle=[];last;omitSequenceTags=!1;lc_serializable=!0;lc_namespace=["langchain_core","runnables"];constructor(t){super(t),this.first=t.first,this.middle=t.middle??this.middle,this.last=t.last,this.name=t.name,this.omitSequenceTags=t.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(t,r){const n=Je(r),o=await(await _r(n))?.handleChainStart(this.toJSON(),At(t,"input"),n.runId,void 0,void 0,void 0,n?.runName);delete n.runId;let l=t,c;try{const d=[this.first,...this.middle];for(let f=0;f<d.length;f+=1){const m=d[f].invoke(l,ot(n,{callbacks:o?.getChild(this.omitSequenceTags?void 0:`seq:step:${f+1}`)}));l=await vs(m,r?.signal)}if(r?.signal?.aborted)throw Xi(r.signal);c=await this.last.invoke(l,ot(n,{callbacks:o?.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(d){throw await o?.handleChainError(d),d}return await o?.handleChainEnd(At(c,"output")),c}async batch(t,r,n){const a=this._getOptionsList(r??{},t.length),o=await Promise.all(a.map(_r)),l=await Promise.all(o.map(async(d,f)=>{const p=await d?.handleChainStart(this.toJSON(),At(t[f],"input"),a[f].runId,void 0,void 0,void 0,a[f].runName);return delete a[f].runId,p}));let c=t;try{for(let d=0;d<this.steps.length;d+=1){const p=this.steps[d].batch(c,l.map((m,y)=>{const _=m?.getChild(this.omitSequenceTags?void 0:`seq:step:${d+1}`);return ot(a[y],{callbacks:_})}),n);c=await vs(p,a[0]?.signal)}}catch(d){throw await Promise.all(l.map(f=>f?.handleChainError(d))),d}return await Promise.all(l.map(d=>d?.handleChainEnd(At(c,"output")))),c}_concatOutputChunks(t,r){return this.last._concatOutputChunks(t,r)}async*_streamIterator(t,r){const n=await _r(r),{runId:a,...o}=r??{},l=await n?.handleChainStart(this.toJSON(),At(t,"input"),a,void 0,void 0,void 0,o?.runName),c=[this.first,...this.middle,this.last];let d=!0,f;async function*p(){yield t}try{let m=c[0].transform(p(),ot(o,{callbacks:l?.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let y=1;y<c.length;y+=1)m=await c[y].transform(m,ot(o,{callbacks:l?.getChild(this.omitSequenceTags?void 0:`seq:step:${y+1}`)}));for await(const y of m)if(r?.signal?.throwIfAborted(),yield y,d)if(f===void 0)f=y;else try{f=this._concatOutputChunks(f,y)}catch{f=void 0,d=!1}}catch(m){throw await l?.handleChainError(m),m}await l?.handleChainEnd(At(f,"output"))}getGraph(t){const r=new Yp;let n=null;return this.steps.forEach((a,o)=>{const l=a.getGraph(t);o!==0&&l.trimFirstNode(),o!==this.steps.length-1&&l.trimLastNode(),r.extend(l);const c=l.firstNode();if(!c)throw new Error(`Runnable ${a} has no first node`);n&&r.addEdge(n,c),n=l.lastNode()}),r}pipe(t){return Mi.isRunnableSequence(t)?new Mi({first:this.first,middle:this.middle.concat([this.last,t.first,...t.middle]),last:t.last,name:this.name??t.name}):new Mi({first:this.first,middle:[...this.middle,this.last],last:qr(t),name:this.name})}static isRunnableSequence(t){return Array.isArray(t.middle)&&bt.isRunnable(t)}static from([t,...r],n){let a={};return typeof n=="string"?a.name=n:n!==void 0&&(a=n),new Mi({...a,first:qr(t),middle:r.slice(0,-1).map(qr),last:qr(r[r.length-1])})}},qa=class i1 extends bt{static lc_name(){return"RunnableMap"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;steps;getStepsKeys(){return Object.keys(this.steps)}constructor(t){super(t),this.steps={};for(const[r,n]of Object.entries(t.steps))this.steps[r]=qr(n)}static from(t){return new i1({steps:t})}async invoke(t,r){const n=Je(r),o=await(await _r(n))?.handleChainStart(this.toJSON(),{input:t},n.runId,void 0,void 0,void 0,n?.runName);delete n.runId;const l={};try{const c=Object.entries(this.steps).map(async([d,f])=>{l[d]=await f.invoke(t,ot(n,{callbacks:o?.getChild(`map:key:${d}`)}))});await vs(Promise.all(c),r?.signal)}catch(c){throw await o?.handleChainError(c),c}return await o?.handleChainEnd(l),l}async*_transform(t,r,n){const a={...this.steps},o=Bp(t,Object.keys(a).length),l=new Map(Object.entries(a).map(([c,d],f)=>{const p=d.transform(o[f],ot(n,{callbacks:r?.getChild(`map:key:${c}`)}));return[c,p.next().then(m=>({key:c,gen:p,result:m}))]}));for(;l.size;){const c=Promise.race(l.values()),{key:d,result:f,gen:p}=await vs(c,n?.signal);l.delete(d),f.done||(yield{[d]:f.value},l.set(d,p.next().then(m=>({key:d,gen:p,result:m}))))}}transform(t,r){return this._transformStreamWithConfig(t,this._transform.bind(this),r)}async stream(t,r){async function*n(){yield t}const a=Je(r),o=new Ks({generator:this.transform(n(),a),config:a});return await o.setup,Kr.fromAsyncGenerator(o)}},pj=class o1 extends bt{lc_serializable=!1;lc_namespace=["langchain_core","runnables"];func;constructor(t){if(super(t),!Up(t.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=t.func}async invoke(t,r){const[n]=this._getOptionsList(r??{},1),a=await _r(n),o=this.func(ot(n,{callbacks:a}),t);return vs(o,n?.signal)}async*_streamIterator(t,r){const[n]=this._getOptionsList(r??{},1),a=await this.invoke(t,r);if(Yh(a)){for await(const o of a)n?.signal?.throwIfAborted(),yield o;return}if(fj(a)){for(;;){n?.signal?.throwIfAborted();const o=a.next();if(o.done)break;yield o.value}return}yield a}static from(t){return new o1({func:t})}};function mj(e){if(Up(e))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var xs=class l1 extends bt{static lc_name(){return"RunnableLambda"}lc_namespace=["langchain_core","runnables"];func;constructor(t){if(Up(t.func))return pj.from(t.func);super(t),mj(t.func),this.func=t.func}static from(t){return new l1({func:t})}async _invoke(t,r,n){return new Promise((a,o)=>{const l=ot(r,{callbacks:n?.getChild(),recursionLimit:(r?.recursionLimit??hh)-1});Zr.runWithConfig(Pn(l),async()=>{try{let c=await this.func(t,{...l});if(c&&bt.isRunnable(c)){if(r?.recursionLimit===0)throw new Error("Recursion limit reached.");c=await c.invoke(t,{...l,recursionLimit:(l.recursionLimit??hh)-1})}else if(Yh(c)){let d;for await(const f of Xh(l,c))if(r?.signal?.throwIfAborted(),d===void 0)d=f;else try{d=this._concatOutputChunks(d,f)}catch{d=f}c=d}else if($0(c)){let d;for(const f of j0(l,c))if(r?.signal?.throwIfAborted(),d===void 0)d=f;else try{d=this._concatOutputChunks(d,f)}catch{d=f}c=d}a(c)}catch(c){o(c)}})})}async invoke(t,r){return this._callWithConfig(this._invoke.bind(this),t,r)}async*_transform(t,r,n){let a;for await(const c of t)if(a===void 0)a=c;else try{a=this._concatOutputChunks(a,c)}catch{a=c}const o=ot(n,{callbacks:r?.getChild(),recursionLimit:(n?.recursionLimit??hh)-1}),l=await new Promise((c,d)=>{Zr.runWithConfig(Pn(o),async()=>{try{const f=await this.func(a,{...o,config:o});c(f)}catch(f){d(f)}})});if(l&&bt.isRunnable(l)){if(n?.recursionLimit===0)throw new Error("Recursion limit reached.");const c=await l.stream(a,o);for await(const d of c)yield d}else if(Yh(l))for await(const c of Xh(o,l))n?.signal?.throwIfAborted(),yield c;else if($0(l))for(const c of j0(o,l))n?.signal?.throwIfAborted(),yield c;else yield l}transform(t,r){return this._transformStreamWithConfig(t,this._transform.bind(this),r)}async stream(t,r){async function*n(){yield t}const a=Je(r),o=new Ks({generator:this.transform(n(),a),config:a});return await o.setup,Kr.fromAsyncGenerator(o)}},gj=class extends qa{},c1=class extends bt{static lc_name(){return"RunnableWithFallbacks"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;runnable;fallbacks;constructor(e){super(e),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const r=Je(t),n=await _r(r),{runId:a,...o}=r,l=await n?.handleChainStart(this.toJSON(),At(e,"input"),a,void 0,void 0,void 0,o?.runName),c=ot(o,{callbacks:l?.getChild()});return await Zr.runWithConfig(c,async()=>{let f;for(const p of this.runnables()){r?.signal?.throwIfAborted();try{const m=await p.invoke(e,c);return await l?.handleChainEnd(At(m,"output")),m}catch(m){f===void 0&&(f=m)}}throw f===void 0?new Error("No error stored at end of fallback."):(await l?.handleChainError(f),f)})}async*_streamIterator(e,t){const r=Je(t),n=await _r(r),{runId:a,...o}=r,l=await n?.handleChainStart(this.toJSON(),At(e,"input"),a,void 0,void 0,void 0,o?.runName);let c,d;for(const p of this.runnables()){r?.signal?.throwIfAborted();const m=ot(o,{callbacks:l?.getChild()});try{const y=await p.stream(e,m);d=Xh(m,y);break}catch(y){c===void 0&&(c=y)}}if(d===void 0){const p=c??new Error("No error stored at end of fallback.");throw await l?.handleChainError(p),p}let f;try{for await(const p of d){yield p;try{f=f===void 0?f:this._concatOutputChunks(f,p)}catch{f=void 0}}}catch(p){throw await l?.handleChainError(p),p}await l?.handleChainEnd(At(f,"output"))}async batch(e,t,r){if(r?.returnExceptions)throw new Error("Not implemented.");const n=this._getOptionsList(t??{},e.length),a=await Promise.all(n.map(c=>_r(c))),o=await Promise.all(a.map(async(c,d)=>{const f=await c?.handleChainStart(this.toJSON(),At(e[d],"input"),n[d].runId,void 0,void 0,void 0,n[d].runName);return delete n[d].runId,f}));let l;for(const c of this.runnables()){n[0].signal?.throwIfAborted();try{const d=await c.batch(e,o.map((f,p)=>ot(n[p],{callbacks:f?.getChild()})),r);return await Promise.all(o.map((f,p)=>f?.handleChainEnd(At(d[p],"output")))),d}catch(d){l===void 0&&(l=d)}}throw l?(await Promise.all(o.map(c=>c?.handleChainError(l))),l):new Error("No error stored at end of fallbacks.")}};function qr(e){if(typeof e=="function")return new xs({func:e});if(bt.isRunnable(e))return e;if(!Array.isArray(e)&&typeof e=="object"){const t={};for(const[r,n]of Object.entries(e))t[r]=qr(n);return new qa({steps:t})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var Qp=class extends bt{static lc_name(){return"RunnableAssign"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;mapper;constructor(e){e instanceof qa&&(e={mapper:e}),super(e),this.mapper=e.mapper}async invoke(e,t){const r=await this.mapper.invoke(e,t);return{...e,...r}}async*_transform(e,t,r){const n=this.mapper.getStepsKeys(),[a,o]=Bp(e),l=this.mapper.transform(o,ot(r,{callbacks:t?.getChild()})),c=l.next();for await(const d of a){if(typeof d!="object"||Array.isArray(d))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof d}`);const f=Object.fromEntries(Object.entries(d).filter(([p])=>!n.includes(p)));Object.keys(f).length>0&&(yield f)}yield(await c).value;for await(const d of l)yield d}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}const n=Je(t),a=new Ks({generator:this.transform(r(),n),config:n});return await a.setup,Kr.fromAsyncGenerator(a)}},u1=class extends bt{static lc_name(){return"RunnablePick"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;keys;constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const t=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return t.length===0?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(const t of e){const r=await this._pick(t);r!==void 0&&(yield r)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}const n=Je(t),a=new Ks({generator:this.transform(r(),n),config:n});return await a.setup,Kr.fromAsyncGenerator(a)}},Qh=class extends Fa{name;description;schema;constructor(e){const t=Gc.from([xs.from(async r=>{let n;if(Fi(r))try{n=await Kp(this.schema,r.args)}catch{throw new ec("Received tool input did not match expected schema",JSON.stringify(r.args))}else n=r;return n}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:t,config:e.config??{}}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}};function yj(e,t){const r=t.name??e.getName(),n=t.description??Vx(t.schema);return Hx(t.schema)?new Qh({name:r,description:n,schema:Hc({input:Vc()}).transform(a=>a.input),bound:e}):new Qh({name:r,description:n,schema:t.schema,bound:e})}const mc=(e,t)=>{const r=[...new Set(t?.map(a=>{if(typeof a=="string")return a;const o=new a({});if(!("getType"in o)||typeof o.getType!="function")throw new Error("Invalid type provided.");return o.getType()}))],n=e.getType();return r.some(a=>a===n)};function vj(e,t){return Array.isArray(e)?L0(e,t):xs.from(r=>L0(r,e))}function L0(e,t={}){const{includeNames:r,excludeNames:n,includeTypes:a,excludeTypes:o,includeIds:l,excludeIds:c}=t,d=[];for(const f of e)if(!(n&&f.name&&n.includes(f.name))){{if(o&&mc(f,o))continue;if(c&&f.id&&c.includes(f.id))continue}a||l||r?(r&&f.name&&r.some(p=>p===f.name)||a&&mc(f,a)||l&&f.id&&l.some(p=>p===f.id))&&d.push(f):d.push(f)}return d}function _j(e){return Array.isArray(e)?M0(e):xs.from(M0)}function M0(e){if(!e.length)return[];const t=[];for(const r of e){const n=r,a=t.pop();if(!a)t.push(n);else if(n.getType()==="tool"||n.getType()!==a.getType())t.push(a,n);else{const o=tc(a),l=tc(n),c=o.concat(l);typeof o.content=="string"&&typeof l.content=="string"&&(c.content=`${o.content}
${l.content}`),t.push(xj(c))}}return t}function wj(e,t){if(Array.isArray(e)){const r=e;if(!t)throw new Error("Options parameter is required when providing messages.");return D0(r,t)}else{const r=e;return xs.from(n=>D0(n,r)).withConfig({runName:"trim_messages"})}}async function D0(e,t){const{maxTokens:r,tokenCounter:n,strategy:a="last",allowPartial:o=!1,endOn:l,startOn:c,includeSystem:d=!1,textSplitter:f}=t;if(c&&a==="first")throw new Error("`startOn` should only be specified if `strategy` is 'last'.");if(d&&a==="first")throw new Error("`includeSystem` should only be specified if `strategy` is 'last'.");let p;"getNumTokens"in n?p=async y=>(await Promise.all(y.map(b=>n.getNumTokens(b.content)))).reduce((b,x)=>b+x,0):p=async y=>n(y);let m=f1;if(f&&("splitText"in f?m=f.splitText:m=async y=>f(y)),a==="first")return d1(e,{maxTokens:r,tokenCounter:p,textSplitter:m,partialStrategy:o?"first":void 0,endOn:l});if(a==="last")return bj(e,{maxTokens:r,tokenCounter:p,textSplitter:m,allowPartial:o,includeSystem:d,startOn:c,endOn:l});throw new Error(`Unrecognized strategy: '${a}'. Must be one of 'first' or 'last'.`)}async function d1(e,t){const{maxTokens:r,tokenCounter:n,textSplitter:a,partialStrategy:o,endOn:l}=t;let c=[...e],d=0;for(let f=0;f<c.length;f+=1){const p=f>0?c.slice(0,-f):c;if(await n(p)<=r){d=c.length-f;break}}if(d<c.length&&o){let f=!1;if(Array.isArray(c[d].content)){const p=c[d];if(typeof p.content=="string")throw new Error("Expected content to be an array.");const m=p.content.length,y=o==="last"?[...p.content].reverse():p.content;for(let _=1;_<=m;_+=1){const b=o==="first"?y.slice(0,_):y.slice(-_),x=Object.fromEntries(Object.entries(p).filter(([O])=>O!=="type"&&!O.startsWith("lc_"))),E=em(p.getType(),{...x,content:b}),I=[...c.slice(0,d),E];if(await n(I)<=r)c=I,d+=1,f=!0;else break}f&&o==="last"&&(p.content=[...y].reverse())}if(!f){const p=c[d];let m;if(Array.isArray(p.content)&&p.content.some(y=>typeof y=="string"||y.type==="text")?m=p.content.find(_=>_.type==="text"&&_.text)?.text:typeof p.content=="string"&&(m=p.content),m){const y=await a(m),_=y.length;o==="last"&&y.reverse();for(let b=0;b<_-1;b+=1)if(y.pop(),p.content=y.join(""),await n([...c.slice(0,d),p])<=r){o==="last"&&(p.content=[...y].reverse().join("")),c=[...c.slice(0,d),p],d+=1;break}}}}if(l){const f=Array.isArray(l)?l:[l];for(;d>0&&!mc(c[d-1],f);)d-=1}return c.slice(0,d)}async function bj(e,t){const{allowPartial:r=!1,includeSystem:n=!1,endOn:a,startOn:o,...l}=t;let c=e.map(p=>{const m=Object.fromEntries(Object.entries(p).filter(([y])=>y!=="type"&&!y.startsWith("lc_")));return em(p.getType(),m,Tp(p))});if(a){const p=Array.isArray(a)?a:[a];for(;c.length>0&&!mc(c[c.length-1],p);)c=c.slice(0,-1)}const d=n&&c[0]?.getType()==="system";let f=d?c.slice(0,1).concat(c.slice(1).reverse()):c.reverse();return f=await d1(f,{...l,partialStrategy:r?"last":void 0,endOn:o}),d?[f[0],...f.slice(1).reverse()]:f.reverse()}const z0={human:{message:Wr,messageChunk:Pc},ai:{message:An,messageChunk:Zs},system:{message:On,messageChunk:Pa},developer:{message:On,messageChunk:Pa},tool:{message:ys,messageChunk:Nc},function:{message:Ac,messageChunk:Oc},generic:{message:lo,messageChunk:Rc},remove:{message:Ql,messageChunk:Ql}};function em(e,t,r){let n,a;switch(e){case"human":r?n=new Pc(t):a=new Wr(t);break;case"ai":if(r){let o={...t};"tool_calls"in o&&(o={...o,tool_call_chunks:o.tool_calls?.map(l=>({...l,type:"tool_call_chunk",index:void 0,args:JSON.stringify(l.args)}))}),n=new Zs(o)}else a=new An(t);break;case"system":r?n=new Pa(t):a=new On(t);break;case"developer":r?n=new Pa({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}}):a=new On({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}});break;case"tool":if("tool_call_id"in t)r?n=new Nc(t):a=new ys(t);else throw new Error("Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.");break;case"function":if(r)n=new Oc(t);else{if(!t.name)throw new Error("FunctionMessage must have a 'name' field");a=new Ac(t)}break;case"generic":if("role"in t)r?n=new Rc(t):a=new lo(t);else throw new Error("Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.");break;default:throw new Error(`Unrecognized message type ${e}`)}if(r&&n)return n;if(a)return a;throw new Error(`Unrecognized message type ${e}`)}function xj(e){const t=e.getType();let r;const n=Object.fromEntries(Object.entries(e).filter(([a])=>!["type","tool_call_chunks"].includes(a)&&!a.startsWith("lc_")));if(t in z0&&(r=em(t,n)),!r)throw new Error(`Unrecognized message chunk class ${t}. Supported classes are ${Object.keys(z0)}`);return r}function f1(e){const t=e.split(`
`);return Promise.resolve([...t.slice(0,-1).map(r=>`${r}
`),t[t.length-1]])}const Ej=["tool_call","tool_call_chunk","invalid_tool_call","server_tool_call","server_tool_call_chunk","server_tool_call_result"],Sj=["image","video","audio","text-plain","file"],kj=["text","reasoning",...Ej,...Sj];var Tj={};We(Tj,{AIMessage:()=>An,AIMessageChunk:()=>Zs,BaseMessage:()=>Ln,BaseMessageChunk:()=>Ws,ChatMessage:()=>lo,ChatMessageChunk:()=>Rc,FunctionMessage:()=>Ac,FunctionMessageChunk:()=>Oc,HumanMessage:()=>Wr,HumanMessageChunk:()=>Pc,KNOWN_BLOCK_TYPES:()=>kj,RemoveMessage:()=>Ql,SystemMessage:()=>On,SystemMessageChunk:()=>Pa,ToolMessage:()=>ys,ToolMessageChunk:()=>Nc,_isMessageFieldWithRole:()=>Bb,_mergeDicts:()=>qt,_mergeLists:()=>oo,_mergeObj:()=>Ub,_mergeStatus:()=>Fb,coerceMessageLikeToMessage:()=>Ui,convertToChunk:()=>tc,convertToOpenAIImageBlock:()=>jb,convertToProviderContentBlock:()=>WI,defaultTextSplitter:()=>f1,defaultToolCallParser:()=>Np,filterMessages:()=>vj,getBufferString:()=>Ap,iife:()=>MR,isAIMessage:()=>Rp,isAIMessageChunk:()=>Nh,isBase64ContentBlock:()=>xp,isBaseMessage:()=>Cn,isBaseMessageChunk:()=>Tp,isChatMessage:()=>NR,isChatMessageChunk:()=>IR,isDataContentBlock:()=>gs,isDirectToolOutput:()=>Cp,isFunctionMessage:()=>RR,isFunctionMessageChunk:()=>AR,isHumanMessage:()=>OR,isHumanMessageChunk:()=>PR,isIDContentBlock:()=>$b,isMessage:()=>Lb,isOpenAIToolCallArray:()=>vR,isPlainTextContentBlock:()=>GI,isSystemMessage:()=>$R,isSystemMessageChunk:()=>jR,isToolMessage:()=>qb,isToolMessageChunk:()=>Wb,isURLContentBlock:()=>bp,mapChatMessagesToStoredMessages:()=>BR,mapStoredMessageToChatMessage:()=>Op,mapStoredMessagesToChatMessages:()=>UR,mergeContent:()=>qs,mergeMessageRuns:()=>_j,mergeResponseMetadata:()=>Vb,mergeUsageMetadata:()=>Gb,parseBase64DataUrl:()=>Th,parseMimeType:()=>qI,trimMessages:()=>wj});var Cj={};We(Cj,{BasePromptValue:()=>qc,ChatPromptValue:()=>p1,ImagePromptValue:()=>Nj,StringPromptValue:()=>h1});var qc=class extends Oa{},h1=class extends qc{static lc_name(){return"StringPromptValue"}lc_namespace=["langchain_core","prompt_values"];lc_serializable=!0;value;constructor(e){super({value:e}),this.value=e}toString(){return this.value}toChatMessages(){return[new Wr(this.value)]}},p1=class extends qc{lc_namespace=["langchain_core","prompt_values"];lc_serializable=!0;static lc_name(){return"ChatPromptValue"}messages;constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),this.messages=e.messages}toString(){return Ap(this.messages)}toChatMessages(){return this.messages}},Nj=class extends qc{lc_namespace=["langchain_core","prompt_values"];lc_serializable=!0;static lc_name(){return"ImagePromptValue"}imageUrl;value;constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new Wr({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}},ye="0123456789abcdef".split(""),Ij=[-2147483648,8388608,32768,128],Br=[24,16,8,0],Ul=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],jt=[];function Jr(e,t){t?(jt[0]=jt[16]=jt[1]=jt[2]=jt[3]=jt[4]=jt[5]=jt[6]=jt[7]=jt[8]=jt[9]=jt[10]=jt[11]=jt[12]=jt[13]=jt[14]=jt[15]=0,this.blocks=jt):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}Jr.prototype.update=function(e){if(!this.finalized){var t,r=typeof e;if(r!=="string"){if(r==="object"){if(e===null)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw new Error(ERROR)}else throw new Error(ERROR);t=!0}for(var n,a=0,o,l=e.length,c=this.blocks;a<l;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,this.block=c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),t)for(o=this.start;a<l&&o<64;++a)c[o>>>2]|=e[a]<<Br[o++&3];else for(o=this.start;a<l&&o<64;++a)n=e.charCodeAt(a),n<128?c[o>>>2]|=n<<Br[o++&3]:n<2048?(c[o>>>2]|=(192|n>>>6)<<Br[o++&3],c[o>>>2]|=(128|n&63)<<Br[o++&3]):n<55296||n>=57344?(c[o>>>2]|=(224|n>>>12)<<Br[o++&3],c[o>>>2]|=(128|n>>>6&63)<<Br[o++&3],c[o>>>2]|=(128|n&63)<<Br[o++&3]):(n=65536+((n&1023)<<10|e.charCodeAt(++a)&1023),c[o>>>2]|=(240|n>>>18)<<Br[o++&3],c[o>>>2]|=(128|n>>>12&63)<<Br[o++&3],c[o>>>2]|=(128|n>>>6&63)<<Br[o++&3],c[o>>>2]|=(128|n&63)<<Br[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=c[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Jr.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=Ij[t&3],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}};Jr.prototype.hash=function(){var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,l=this.h6,c=this.h7,d=this.blocks,f,p,m,y,_,b,x,E,I,O,A;for(f=16;f<64;++f)_=d[f-15],p=(_>>>7|_<<25)^(_>>>18|_<<14)^_>>>3,_=d[f-2],m=(_>>>17|_<<15)^(_>>>19|_<<13)^_>>>10,d[f]=d[f-16]+p+d[f-7]+m<<0;for(A=t&r,f=0;f<64;f+=4)this.first?(this.is224?(E=300032,_=d[0]-1413257819,c=_-150054599<<0,n=_+24177077<<0):(E=704751109,_=d[0]-210244248,c=_-1521486534<<0,n=_+143694565<<0),this.first=!1):(p=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),m=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),E=e&t,y=E^e&r^A,x=a&o^~a&l,_=c+m+x+Ul[f]+d[f],b=p+y,c=n+_<<0,n=_+b<<0),p=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),m=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),I=n&e,y=I^n&t^E,x=l&c^~l&a,_=o+m+x+Ul[f+1]+d[f+1],b=p+y,l=r+_<<0,r=_+b<<0,p=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),m=(l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7),O=r&n,y=O^r&e^I,x=o&l^~o&c,_=a+m+x+Ul[f+2]+d[f+2],b=p+y,o=t+_<<0,t=_+b<<0,p=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),m=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),A=t&r,y=A^t&n^O,x=o&l^~o&c,_=a+m+x+Ul[f+3]+d[f+3],b=p+y,a=e+_<<0,e=_+b<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+r<<0,this.h3=this.h3+n<<0,this.h4=this.h4+a<<0,this.h5=this.h5+o<<0,this.h6=this.h6+l<<0,this.h7=this.h7+c<<0};Jr.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,l=this.h6,c=this.h7,d=ye[e>>>28&15]+ye[e>>>24&15]+ye[e>>>20&15]+ye[e>>>16&15]+ye[e>>>12&15]+ye[e>>>8&15]+ye[e>>>4&15]+ye[e&15]+ye[t>>>28&15]+ye[t>>>24&15]+ye[t>>>20&15]+ye[t>>>16&15]+ye[t>>>12&15]+ye[t>>>8&15]+ye[t>>>4&15]+ye[t&15]+ye[r>>>28&15]+ye[r>>>24&15]+ye[r>>>20&15]+ye[r>>>16&15]+ye[r>>>12&15]+ye[r>>>8&15]+ye[r>>>4&15]+ye[r&15]+ye[n>>>28&15]+ye[n>>>24&15]+ye[n>>>20&15]+ye[n>>>16&15]+ye[n>>>12&15]+ye[n>>>8&15]+ye[n>>>4&15]+ye[n&15]+ye[a>>>28&15]+ye[a>>>24&15]+ye[a>>>20&15]+ye[a>>>16&15]+ye[a>>>12&15]+ye[a>>>8&15]+ye[a>>>4&15]+ye[a&15]+ye[o>>>28&15]+ye[o>>>24&15]+ye[o>>>20&15]+ye[o>>>16&15]+ye[o>>>12&15]+ye[o>>>8&15]+ye[o>>>4&15]+ye[o&15]+ye[l>>>28&15]+ye[l>>>24&15]+ye[l>>>20&15]+ye[l>>>16&15]+ye[l>>>12&15]+ye[l>>>8&15]+ye[l>>>4&15]+ye[l&15];return this.is224||(d+=ye[c>>>28&15]+ye[c>>>24&15]+ye[c>>>20&15]+ye[c>>>16&15]+ye[c>>>12&15]+ye[c>>>8&15]+ye[c>>>4&15]+ye[c&15]),d};Jr.prototype.toString=Jr.prototype.hex;Jr.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,l=this.h6,c=this.h7,d=[e>>>24&255,e>>>16&255,e>>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255,o>>>24&255,o>>>16&255,o>>>8&255,o&255,l>>>24&255,l>>>16&255,l>>>8&255,l&255];return this.is224||d.push(c>>>24&255,c>>>16&255,c>>>8&255,c&255),d};Jr.prototype.array=Jr.prototype.digest;Jr.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e};const m1=(...e)=>new Jr(!1,!0).update(e.join("")).hex();var Rj={};We(Rj,{sha256:()=>m1});var Aj={};We(Aj,{BaseCache:()=>y1,InMemoryCache:()=>v1,defaultHashKeyEncoder:()=>g1,deserializeStoredGeneration:()=>Oj,serializeGeneration:()=>Pj});const g1=(...e)=>m1(e.join("_"));function Oj(e){return e.message!==void 0?{text:e.text,message:Op(e.message)}:{text:e.text}}function Pj(e){const t={text:e.text};return e.message!==void 0&&(t.message=e.message.toDict()),t}var y1=class{keyEncoder=g1;makeDefaultKeyEncoder(e){this.keyEncoder=e}};const $j=new Map;var v1=class _1 extends y1{cache;constructor(t){super(),this.cache=t??new Map}lookup(t,r){return Promise.resolve(this.cache.get(this.keyEncoder(t,r))??null)}async update(t,r,n){this.cache.set(this.keyEncoder(t,r),n)}static global(){return new _1($j)}},Pi={},F0;function jj(){if(F0)return Pi;F0=1,Pi.byteLength=c,Pi.toByteArray=f,Pi.fromByteArray=y;for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=n.length;a<o;++a)e[a]=n[a],t[n.charCodeAt(a)]=a;t[45]=62,t[95]=63;function l(_){var b=_.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=_.indexOf("=");x===-1&&(x=b);var E=x===b?0:4-x%4;return[x,E]}function c(_){var b=l(_),x=b[0],E=b[1];return(x+E)*3/4-E}function d(_,b,x){return(b+x)*3/4-x}function f(_){var b,x=l(_),E=x[0],I=x[1],O=new r(d(_,E,I)),A=0,D=I>0?E-4:E,H;for(H=0;H<D;H+=4)b=t[_.charCodeAt(H)]<<18|t[_.charCodeAt(H+1)]<<12|t[_.charCodeAt(H+2)]<<6|t[_.charCodeAt(H+3)],O[A++]=b>>16&255,O[A++]=b>>8&255,O[A++]=b&255;return I===2&&(b=t[_.charCodeAt(H)]<<2|t[_.charCodeAt(H+1)]>>4,O[A++]=b&255),I===1&&(b=t[_.charCodeAt(H)]<<10|t[_.charCodeAt(H+1)]<<4|t[_.charCodeAt(H+2)]>>2,O[A++]=b>>8&255,O[A++]=b&255),O}function p(_){return e[_>>18&63]+e[_>>12&63]+e[_>>6&63]+e[_&63]}function m(_,b,x){for(var E,I=[],O=b;O<x;O+=3)E=(_[O]<<16&16711680)+(_[O+1]<<8&65280)+(_[O+2]&255),I.push(p(E));return I.join("")}function y(_){for(var b,x=_.length,E=x%3,I=[],O=16383,A=0,D=x-E;A<D;A+=O)I.push(m(_,A,A+O>D?D:A+O));return E===1?(b=_[x-1],I.push(e[b>>2]+e[b<<4&63]+"==")):E===2&&(b=(_[x-2]<<8)+_[x-1],I.push(e[b>>10]+e[b>>4&63]+e[b<<2&63]+"=")),I.join("")}return Pi}var Lj=jj();const Mj=Gs(Lj);var Dj=Object.defineProperty,zj=(e,t,r)=>t in e?Dj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fj=(e,t,r)=>(zj(e,t+"",r),r);function Uj(e,t){let r=Array.from({length:e.length},(n,a)=>({start:a,end:a+1}));for(;r.length>1;){let n=null;for(let a=0;a<r.length-1;a++){const o=e.slice(r[a].start,r[a+1].end),l=t.get(o.join(","));l!=null&&(n==null||l<n[0])&&(n=[l,a])}if(n!=null){const a=n[1];r[a]={start:r[a].start,end:r[a+1].end},r.splice(a+1,1)}else break}return r}function Bj(e,t){return e.length===1?[t.get(e.join(","))]:Uj(e,t).map(r=>t.get(e.slice(r.start,r.end).join(","))).filter(r=>r!=null)}function Vj(e){return e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var ep=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(e,t){this.patStr=e.pat_str;const r=e.bpe_ranks.split(`
`).filter(Boolean).reduce((n,a)=>{const[o,l,...c]=a.split(" "),d=Number.parseInt(l,10);return c.forEach((f,p)=>n[f]=d+p),n},{});for(const[n,a]of Object.entries(r)){const o=Mj.toByteArray(n);this.rankMap.set(o.join(","),a),this.textMap.set(a,o)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[a,o])=>(n[o]=this.textEncoder.encode(a),n),{})}encode(e,t=[],r="all"){const n=new RegExp(this.patStr,"ug"),a=ep.specialTokenRegex(Object.keys(this.specialTokens)),o=[],l=new Set(t==="all"?Object.keys(this.specialTokens):t),c=new Set(r==="all"?Object.keys(this.specialTokens).filter(f=>!l.has(f)):r);if(c.size>0){const f=ep.specialTokenRegex([...c]),p=e.match(f);if(p!=null)throw new Error(`The text contains a special token that is not allowed: ${p[0]}`)}let d=0;for(;;){let f=null,p=d;for(;a.lastIndex=p,f=a.exec(e),!(f==null||l.has(f[0]));)p=f.index+1;const m=f?.index??e.length;for(const _ of e.substring(d,m).matchAll(n)){const b=this.textEncoder.encode(_[0]),x=this.rankMap.get(b.join(","));if(x!=null){o.push(x);continue}o.push(...Bj(b,this.rankMap))}if(f==null)break;let y=this.specialTokens[f[0]];o.push(y),d=f.index+f[0].length}return o}decode(e){const t=[];let r=0;for(let o=0;o<e.length;++o){const l=e[o],c=this.textMap.get(l)??this.inverseSpecialTokens[l];c!=null&&(t.push(c),r+=c.length)}const n=new Uint8Array(r);let a=0;for(const o of t)n.set(o,a),a+=o.length;return this.textDecoder.decode(n)}},w1=ep;Fj(w1,"specialTokenRegex",e=>new RegExp(e.map(t=>Vj(t)).join("|"),"g"));function Hj(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}var Gj={};We(Gj,{encodingForModel:()=>tm,getEncoding:()=>b1});const Bl={},qj=new ho({});async function b1(e){return e in Bl||(Bl[e]=qj.fetch(`https://tiktoken.pages.dev/js/${e}.json`).then(t=>t.json()).then(t=>new w1(t)).catch(t=>{throw delete Bl[e],t})),await Bl[e]}async function tm(e){return b1(Hj(e))}var Wj={};We(Wj,{BaseLangChain:()=>rm,BaseLanguageModel:()=>nm,calculateMaxTokens:()=>Jj,getEmbeddingContextSize:()=>Zj,getModelContextSize:()=>x1,getModelNameForTiktoken:()=>Wc,isOpenAITool:()=>Kj});const Wc=e=>e.startsWith("gpt-5")?"gpt-5":e.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":e.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":e.startsWith("gpt-4-32k")?"gpt-4-32k":e.startsWith("gpt-4-")?"gpt-4":e.startsWith("gpt-4o")?"gpt-4o":e,Zj=e=>{switch(e){case"text-embedding-ada-002":return 8191;default:return 2046}},x1=e=>{switch(Wc(e)){case"gpt-5":case"gpt-5-turbo":case"gpt-5-turbo-preview":return 4e5;case"gpt-4o":case"gpt-4o-mini":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":return 128e3;case"gpt-4-turbo":case"gpt-4-turbo-preview":case"gpt-4-turbo-2024-04-09":case"gpt-4-0125-preview":case"gpt-4-1106-preview":return 128e3;case"gpt-4-32k":case"gpt-4-32k-0314":case"gpt-4-32k-0613":return 32768;case"gpt-4":case"gpt-4-0314":case"gpt-4-0613":return 8192;case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-16k-0613":return 16384;case"gpt-3.5-turbo":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-1106":case"gpt-3.5-turbo-0125":return 4096;case"text-davinci-003":case"text-davinci-002":return 4097;case"text-davinci-001":return 2049;case"text-curie-001":case"text-babbage-001":case"text-ada-001":return 2048;case"code-davinci-002":case"code-davinci-001":return 8e3;case"code-cushman-001":return 2048;case"claude-3-5-sonnet-20241022":case"claude-3-5-sonnet-20240620":case"claude-3-opus-20240229":case"claude-3-sonnet-20240229":case"claude-3-haiku-20240307":case"claude-2.1":return 2e5;case"claude-2.0":case"claude-instant-1.2":return 1e5;case"gemini-1.5-pro":case"gemini-1.5-pro-latest":case"gemini-1.5-flash":case"gemini-1.5-flash-latest":return 1e6;case"gemini-pro":case"gemini-pro-vision":return 32768;default:return 4097}};function Kj(e){return typeof e!="object"||!e?!1:!!("type"in e&&e.type==="function"&&"function"in e&&typeof e.function=="object"&&e.function&&"name"in e.function&&"parameters"in e.function)}const Jj=async({prompt:e,modelName:t})=>{let r;try{r=(await tm(Wc(t))).encode(e).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),r=Math.ceil(e.length/4)}return x1(t)-r},Yj=()=>!1;var rm=class extends bt{verbose;callbacks;tags;metadata;get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),this.verbose=e.verbose??Yj(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}},nm=class extends rm{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}caller;cache;constructor({callbacks:e,callbackManager:t,...r}){const{cache:n,...a}=r;super({callbacks:e??t,...a}),typeof n=="object"?this.cache=n:n?this.cache=v1.global():this.cache=void 0,this.caller=new ho(r??{})}_encoding;async getNumTokens(e){let t;typeof e=="string"?t=e:t=e.map(n=>typeof n=="string"?n:n.type==="text"&&"text"in n?n.text:"").join("");let r=Math.ceil(t.length/4);if(!this._encoding)try{this._encoding=await tm("modelName"in this?Wc(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}if(this._encoding)try{r=this._encoding.encode(t).length}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return r}static _convertInputToPromptValue(e){return typeof e=="string"?new h1(e):Array.isArray(e)?new p1(e.map(Ui)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...t}){const r={...this._identifyingParams(),...t,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([o,l])=>l!==void 0).map(([o,l])=>`${o}:${JSON.stringify(l)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}get profile(){return{}}},gc=class extends bt{static lc_name(){return"RunnablePassthrough"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;func;constructor(e){super(e),e&&(this.func=e.func)}async invoke(e,t){const r=Je(t);return this.func&&await this.func(e,r),this._callWithConfig(n=>Promise.resolve(n),e,r)}async*transform(e,t){const r=Je(t);let n,a=!0;for await(const o of this._transformStreamWithConfig(e,l=>l,r))if(yield o,a)if(n===void 0)n=o;else try{n=_s(n,o)}catch{n=void 0,a=!1}this.func&&n!==void 0&&await this.func(n,r)}static assign(e){return new Qp(new qa({steps:e}))}};const Xj=e=>e();function _h(e){const t=e.constructor;return new t({...e,content:e.contentBlocks,response_metadata:{...e.response_metadata,output_version:"v1"}})}var Qj={};We(Qj,{BaseChatModel:()=>E1,SimpleChatModel:()=>eL});function wh(e){const t=[];for(const r of e){let n=r;if(Array.isArray(r.content))for(let a=0;a<r.content.length;a++){const o=r.content[a];(bp(o)||xp(o))&&n===r&&(n=new r.constructor({...n,content:[...r.content.slice(0,a),jb(o),...r.content.slice(a+1)]}))}t.push(n)}return t}var E1=class Ms extends nm{lc_namespace=["langchain","chat_models",this._llmType()];disableStreaming=!1;outputVersion;get callKeys(){return[...super.callKeys,"outputVersion"]}constructor(t){super(t),this.outputVersion=Xj(()=>{const r=t.outputVersion??ps("LC_OUTPUT_VERSION");return r&&["v0","v1"].includes(r)?r:"v0"})}_separateRunnableConfigFromCallOptionsCompat(t){const[r,n]=super._separateRunnableConfigFromCallOptions(t);return n.signal=r.signal,[r,n]}async invoke(t,r){const n=Ms._convertInputToPromptValue(t);return(await this.generatePrompt([n],r,r?.callbacks)).generations[0][0].message}async*_streamResponseChunks(t,r,n){throw new Error("Not implemented.")}async*_streamIterator(t,r){if(this._streamResponseChunks===Ms.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(t,r);else{const a=Ms._convertInputToPromptValue(t).toChatMessages(),[o,l]=this._separateRunnableConfigFromCallOptionsCompat(r),c={...o.metadata,...this.getLsParams(l)},d=await dr.configure(o.callbacks,this.callbacks,o.tags,this.tags,c,this.metadata,{verbose:this.verbose}),f={options:l,invocation_params:this?.invocationParams(l),batch_size:1},p=l.outputVersion??this.outputVersion,m=await d?.handleChatModelStart(this.toJSON(),[wh(a)],o.runId,void 0,f,void 0,void 0,o.runName);let y,_;try{for await(const b of this._streamResponseChunks(a,l,m?.[0])){if(b.message.id==null){const x=m?.at(0)?.runId;x!=null&&b.message._updateId(`run-${x}`)}b.message.response_metadata={...b.generationInfo,...b.message.response_metadata},p==="v1"?yield _h(b.message):yield b.message,y?y=y.concat(b):y=b,Nh(b.message)&&b.message.usage_metadata!==void 0&&(_={tokenUsage:{promptTokens:b.message.usage_metadata.input_tokens,completionTokens:b.message.usage_metadata.output_tokens,totalTokens:b.message.usage_metadata.total_tokens}})}}catch(b){throw await Promise.all((m??[]).map(x=>x?.handleLLMError(b))),b}await Promise.all((m??[]).map(b=>b?.handleLLMEnd({generations:[[y]],llmOutput:_})))}}getLsParams(t){const r=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:t.stop,ls_provider:r}}async _generateUncached(t,r,n,a){const o=t.map(y=>y.map(Ui));let l;if(a!==void 0&&a.length===o.length)l=a;else{const y={...n.metadata,...this.getLsParams(r)},_=await dr.configure(n.callbacks,this.callbacks,n.tags,this.tags,y,this.metadata,{verbose:this.verbose}),b={options:r,invocation_params:this?.invocationParams(r),batch_size:1};l=await _?.handleChatModelStart(this.toJSON(),o.map(wh),n.runId,void 0,b,void 0,void 0,n.runName)}const c=r.outputVersion??this.outputVersion,d=[],f=[];if(!!l?.[0].handlers.find(Pp)&&!this.disableStreaming&&o.length===1&&this._streamResponseChunks!==Ms.prototype._streamResponseChunks)try{const y=await this._streamResponseChunks(o[0],r,l?.[0]);let _,b;for await(const x of y){if(x.message.id==null){const E=l?.at(0)?.runId;E!=null&&x.message._updateId(`run-${E}`)}_===void 0?_=x:_=_s(_,x),Nh(x.message)&&x.message.usage_metadata!==void 0&&(b={tokenUsage:{promptTokens:x.message.usage_metadata.input_tokens,completionTokens:x.message.usage_metadata.output_tokens,totalTokens:x.message.usage_metadata.total_tokens}})}if(_===void 0)throw new Error("Received empty response from chat model call.");d.push([_]),await l?.[0].handleLLMEnd({generations:d,llmOutput:b})}catch(y){throw await l?.[0].handleLLMError(y),y}else{const y=await Promise.allSettled(o.map(async(_,b)=>{const x=await this._generate(_,{...r,promptIndex:b},l?.[b]);if(c==="v1")for(const E of x.generations)E.message=_h(E.message);return x}));await Promise.all(y.map(async(_,b)=>{if(_.status==="fulfilled"){const x=_.value;for(const E of x.generations){if(E.message.id==null){const I=l?.at(0)?.runId;I!=null&&E.message._updateId(`run-${I}`)}E.message.response_metadata={...E.generationInfo,...E.message.response_metadata}}return x.generations.length===1&&(x.generations[0].message.response_metadata={...x.llmOutput,...x.generations[0].message.response_metadata}),d[b]=x.generations,f[b]=x.llmOutput,l?.[b]?.handleLLMEnd({generations:[x.generations],llmOutput:x.llmOutput})}else return await l?.[b]?.handleLLMError(_.reason),Promise.reject(_.reason)}))}const m={generations:d,llmOutput:f.length?this._combineLLMOutput?.(...f):void 0};return Object.defineProperty(m,eo,{value:l?{runIds:l?.map(y=>y.runId)}:void 0,configurable:!0}),m}async _generateCached({messages:t,cache:r,llmStringKey:n,parsedOptions:a,handledOptions:o}){const l=t.map(I=>I.map(Ui)),c={...o.metadata,...this.getLsParams(a)},d=await dr.configure(o.callbacks,this.callbacks,o.tags,this.tags,c,this.metadata,{verbose:this.verbose}),f={options:a,invocation_params:this?.invocationParams(a),batch_size:1},p=await d?.handleChatModelStart(this.toJSON(),l.map(wh),o.runId,void 0,f,void 0,void 0,o.runName),m=[],_=(await Promise.allSettled(l.map(async(I,O)=>{const A=Ms._convertInputToPromptValue(I).toString(),D=await r.lookup(A,n);return D==null&&m.push(O),D}))).map((I,O)=>({result:I,runManager:p?.[O]})).filter(({result:I})=>I.status==="fulfilled"&&I.value!=null||I.status==="rejected"),b=a.outputVersion??this.outputVersion,x=[];await Promise.all(_.map(async({result:I,runManager:O},A)=>{if(I.status==="fulfilled"){const D=I.value;return x[A]=D.map(H=>("message"in H&&Cn(H.message)&&Rp(H.message)&&(H.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0},b==="v1"&&(H.message=_h(H.message))),H.generationInfo={...H.generationInfo,tokenUsage:{}},H)),D.length&&await O?.handleLLMNewToken(D[0].text),O?.handleLLMEnd({generations:[D]},void 0,void 0,void 0,{cached:!0})}else return await O?.handleLLMError(I.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(I.reason)}));const E={generations:x,missingPromptIndices:m,startedRunManagers:p};return Object.defineProperty(E,eo,{value:p?{runIds:p?.map(I=>I.runId)}:void 0,configurable:!0}),E}async generate(t,r,n){let a;Array.isArray(r)?a={stop:r}:a=r;const o=t.map(b=>b.map(Ui)),[l,c]=this._separateRunnableConfigFromCallOptionsCompat(a);if(l.callbacks=l.callbacks??n,!this.cache)return this._generateUncached(o,c,l);const{cache:d}=this,f=this._getSerializedCacheKeyParametersForCall(c),{generations:p,missingPromptIndices:m,startedRunManagers:y}=await this._generateCached({messages:o,cache:d,llmStringKey:f,parsedOptions:c,handledOptions:l});let _={};if(m.length>0){const b=await this._generateUncached(m.map(x=>o[x]),c,l,y!==void 0?m.map(x=>y?.[x]):void 0);await Promise.all(b.generations.map(async(x,E)=>{const I=m[E];p[I]=x;const O=Ms._convertInputToPromptValue(o[I]).toString();return d.update(O,f,x)})),_=b.llmOutput??{}}return{generations:p,llmOutput:_}}invocationParams(t){return{}}_modelType(){return"base_chat_model"}async generatePrompt(t,r,n){const a=t.map(o=>o.toChatMessages());return this.generate(a,r,n)}withStructuredOutput(t,r){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(r?.strict)throw new Error('"strict" mode is not supported for this model by default.');const n=t,a=r?.name,o=Vx(n)??"A function available to call.",l=r?.method,c=r?.includeRaw;if(l==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let d=a??"extract",f;Bc(n)?f=[{type:"function",function:{name:d,description:o,parameters:Ga(n)}}]:("name"in n&&(d=n.name),f=[{type:"function",function:{name:d,description:o,parameters:n}}]);const p=this.bindTools(f),m=xs.from(x=>{if(!Zs.isInstance(x))throw new Error("Input is not an AIMessageChunk.");if(!x.tool_calls||x.tool_calls.length===0)throw new Error("No tool calls found in the response.");const E=x.tool_calls.find(I=>I.name===d);if(!E)throw new Error(`No tool call found with name ${d}.`);return E.args});if(!c)return p.pipe(m).withConfig({runName:"StructuredOutput"});const y=gc.assign({parsed:(x,E)=>m.invoke(x.raw,E)}),_=gc.assign({parsed:()=>null}),b=y.withFallbacks({fallbacks:[_]});return Gc.from([{raw:p},b]).withConfig({runName:"StructuredOutputRunnable"})}},eL=class extends E1{async _generate(e,t,r){const n=await this._call(e,t,r),a=new An(n);if(typeof a.content!="string")throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:a.content,message:a}]}}},tL=class extends bt{static lc_name(){return"RouterRunnable"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;runnables;constructor(e){super(e),this.runnables=e.runnables}async invoke(e,t){const{key:r,input:n}=e,a=this.runnables[r];if(a===void 0)throw new Error(`No runnable associated with key "${r}".`);return a.invoke(n,Je(t))}async batch(e,t,r){const n=e.map(m=>m.key),a=e.map(m=>m.input);if(n.find(m=>this.runnables[m]===void 0)!==void 0)throw new Error("One or more keys do not have a corresponding runnable.");const l=n.map(m=>this.runnables[m]),c=this._getOptionsList(t??{},e.length),d=c[0]?.maxConcurrency??r?.maxConcurrency,f=d&&d>0?d:e.length,p=[];for(let m=0;m<a.length;m+=f){const y=a.slice(m,m+f).map((b,x)=>l[x].invoke(b,c[x])),_=await Promise.all(y);p.push(_)}return p.flat()}async stream(e,t){const{key:r,input:n}=e,a=this.runnables[r];if(a===void 0)throw new Error(`No runnable associated with key "${r}".`);return a.stream(n,t)}},rL=class extends bt{static lc_name(){return"RunnableBranch"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;default;branches;constructor(e){super(e),this.branches=e.branches,this.default=e.default}static from(e){if(e.length<1)throw new Error("RunnableBranch requires at least one branch");const r=e.slice(0,-1).map(([a,o])=>[qr(a),qr(o)]),n=qr(e[e.length-1]);return new this({branches:r,default:n})}async _invoke(e,t,r){let n;for(let a=0;a<this.branches.length;a+=1){const[o,l]=this.branches[a];if(await o.invoke(e,ot(t,{callbacks:r?.getChild(`condition:${a+1}`)}))){n=await l.invoke(e,ot(t,{callbacks:r?.getChild(`branch:${a+1}`)}));break}}return n||(n=await this.default.invoke(e,ot(t,{callbacks:r?.getChild("branch:default")}))),n}async invoke(e,t={}){return this._callWithConfig(this._invoke,e,t)}async*_streamIterator(e,t){const n=await(await _r(t))?.handleChainStart(this.toJSON(),At(e,"input"),t?.runId,void 0,void 0,void 0,t?.runName);let a,o=!0,l;try{for(let c=0;c<this.branches.length;c+=1){const[d,f]=this.branches[c];if(await d.invoke(e,ot(t,{callbacks:n?.getChild(`condition:${c+1}`)}))){l=await f.stream(e,ot(t,{callbacks:n?.getChild(`branch:${c+1}`)}));for await(const m of l)if(yield m,o)if(a===void 0)a=m;else try{a=_s(a,m)}catch{a=void 0,o=!1}break}}if(l===void 0){l=await this.default.stream(e,ot(t,{callbacks:n?.getChild("branch:default")}));for await(const c of l)if(yield c,o)if(a===void 0)a=c;else try{a=_s(a,c)}catch{a=void 0,o=!1}}}catch(c){throw await n?.handleChainError(c),c}await n?.handleChainEnd(a??{})}},nL=class extends Fa{runnable;inputMessagesKey;outputMessagesKey;historyMessagesKey;getMessageHistory;constructor(e){let t=xs.from((o,l)=>this._enterHistory(o,l??{})).withConfig({runName:"loadHistory"});const r=e.historyMessagesKey??e.inputMessagesKey;r&&(t=gc.assign({[r]:t}).withConfig({runName:"insertHistory"}));const n=t.pipe(e.runnable.withListeners({onEnd:(o,l)=>this._exitHistory(o,l??{})})).withConfig({runName:"RunnableWithMessageHistory"}),a=e.config??{};super({...e,config:a,bound:n}),this.runnable=e.runnable,this.getMessageHistory=e.getMessageHistory,this.inputMessagesKey=e.inputMessagesKey,this.outputMessagesKey=e.outputMessagesKey,this.historyMessagesKey=e.historyMessagesKey}_getInputMessages(e){let t;if(typeof e=="object"&&!Array.isArray(e)&&!Cn(e)){let r;this.inputMessagesKey?r=this.inputMessagesKey:Object.keys(e).length===1?r=Object.keys(e)[0]:r="input",Array.isArray(e[r])&&Array.isArray(e[r][0])?t=e[r][0]:t=e[r]}else t=e;if(typeof t=="string")return[new Wr(t)];if(Array.isArray(t))return t;if(Cn(t))return[t];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.
Got ${JSON.stringify(t,null,2)}`)}_getOutputMessages(e){let t;if(!Array.isArray(e)&&!Cn(e)&&typeof e!="string"){let r;this.outputMessagesKey!==void 0?r=this.outputMessagesKey:Object.keys(e).length===1?r=Object.keys(e)[0]:r="output",e.generations!==void 0?t=e.generations[0][0].message:t=e[r]}else t=e;if(typeof t=="string")return[new An(t)];if(Array.isArray(t))return t;if(Cn(t))return[t];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(t,null,2)}`)}async _enterHistory(e,t){const n=await(t?.configurable?.messageHistory).getMessages();return this.historyMessagesKey===void 0?n.concat(this._getInputMessages(e)):n}async _exitHistory(e,t){const r=t.configurable?.messageHistory;let n;Array.isArray(e.inputs)&&Array.isArray(e.inputs[0])?n=e.inputs[0]:n=e.inputs;let a=this._getInputMessages(n);if(this.historyMessagesKey===void 0){const c=await r.getMessages();a=a.slice(c.length)}const o=e.outputs;if(!o)throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(e,null,2)}`);const l=this._getOutputMessages(o);await r.addMessages([...a,...l])}async _mergeConfig(...e){const t=await super._mergeConfig(...e);if(!t.configurable||!t.configurable.sessionId){const n={[this.inputMessagesKey??"input"]:"foo"},a={configurable:{sessionId:"123"}};throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()
eg. chain.invoke(${JSON.stringify(n)}, ${JSON.stringify(a)})`)}const{sessionId:r}=t.configurable;return t.configurable.messageHistory=await this.getMessageHistory(r),t}},sL={};We(sL,{RouterRunnable:()=>tL,Runnable:()=>bt,RunnableAssign:()=>Qp,RunnableBinding:()=>Fa,RunnableBranch:()=>rL,RunnableEach:()=>hj,RunnableLambda:()=>xs,RunnableMap:()=>qa,RunnableParallel:()=>gj,RunnablePassthrough:()=>gc,RunnablePick:()=>u1,RunnableRetry:()=>Xp,RunnableSequence:()=>Gc,RunnableToolLike:()=>Qh,RunnableWithFallbacks:()=>c1,RunnableWithMessageHistory:()=>nL,_coerceToRunnable:()=>qr,ensureConfig:()=>Je,getCallbackManagerForConfig:()=>_r,mergeConfigs:()=>ac,patchConfig:()=>ot,pickRunnableConfigKeys:()=>Pn});var S1=class extends bt{parseResultWithPrompt(e,t,r){return this.parseResult(e,r)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,t){return typeof e=="string"?this._callWithConfig(async(r,n)=>this.parseResult([{text:r}],n?.callbacks),e,{...t,runType:"parser"}):this._callWithConfig(async(r,n)=>this.parseResult([{message:r,text:this._baseMessageToString(r)}],n?.callbacks),e,{...t,runType:"parser"})}},Zc=class extends S1{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}},In=class extends Error{llmOutput;observation;sendToLLM;constructor(e,t,r,n=!1){if(super(e),this.llmOutput=t,this.observation=r,this.sendToLLM=n,n&&(r===void 0||t===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");Jb(this,"OUTPUT_PARSING_FAILURE")}},po=class extends Zc{async*_transform(e){for await(const t of e)typeof t=="string"?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:this._baseMessageToString(t)}])}async*transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}},Kc=class extends po{diff=!1;constructor(e){super(e),this.diff=e?.diff??this.diff}async*_transform(e){let t,r;for await(const n of e){if(typeof n!="string"&&typeof n.content!="string")throw new Error("Cannot handle non-string output.");let a;if(Tp(n)){if(typeof n.content!="string")throw new Error("Cannot handle non-string message output.");a=new Bh({message:n,text:n.content})}else if(Cn(n)){if(typeof n.content!="string")throw new Error("Cannot handle non-string message output.");a=new Bh({message:tc(n),text:n.content})}else a=new ja({text:n});r===void 0?r=a:r=r.concat(a);const o=await this.parsePartialResult([r]);o!=null&&!Bs(o,t)&&(this.diff?yield this._diff(t,o):yield o,t=o)}}getFormatInstructions(){return""}},aL=class extends po{static lc_name(){return"BytesOutputParser"}lc_namespace=["langchain_core","output_parsers","bytes"];lc_serializable=!0;textEncoder=new TextEncoder;parse(e){return Promise.resolve(this.textEncoder.encode(e))}getFormatInstructions(){return""}},mo=class extends po{re;async*_transform(e){let t="";for await(const r of e)if(typeof r=="string"?t+=r:t+=r.content,this.re){const n=[...t.matchAll(this.re)];if(n.length>1){let a=0;for(const o of n.slice(0,-1))yield[o[1]],a+=(o.index??0)+o[0].length;t=t.slice(a)}}else{const n=await this.parse(t);if(n.length>1){for(const a of n.slice(0,-1))yield[a];t=n[n.length-1]}}for(const r of await this.parse(t))yield[r]}},iL=class extends mo{static lc_name(){return"CommaSeparatedListOutputParser"}lc_namespace=["langchain_core","output_parsers","list"];lc_serializable=!0;async parse(e){try{return e.trim().split(",").map(t=>t.trim())}catch{throw new In(`Could not parse output: ${e}`,e)}}getFormatInstructions(){return"Your response should be a list of comma separated values, eg: `foo, bar, baz`"}},oL=class extends mo{lc_namespace=["langchain_core","output_parsers","list"];length;separator;constructor({length:e,separator:t}){super(...arguments),this.length=e,this.separator=t||","}async parse(e){try{const t=e.trim().split(this.separator).map(r=>r.trim());if(this.length!==void 0&&t.length!==this.length)throw new In(`Incorrect number of items. Expected ${this.length}, got ${t.length}.`);return t}catch(t){throw Object.getPrototypeOf(t)===In.prototype?t:new In(`Could not parse output: ${e}`)}}getFormatInstructions(){return`Your response should be a list of ${this.length===void 0?"":`${this.length} `}items separated by "${this.separator}" (eg: \`foo${this.separator} bar${this.separator} baz\`)`}},lL=class extends mo{static lc_name(){return"NumberedListOutputParser"}lc_namespace=["langchain_core","output_parsers","list"];lc_serializable=!0;getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}re=/\d+\.\s([^\n]+)/g;async parse(e){return[...e.matchAll(this.re)??[]].map(t=>t[1])}},cL=class extends mo{static lc_name(){return"NumberedListOutputParser"}lc_namespace=["langchain_core","output_parsers","list"];lc_serializable=!0;getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}re=/^\s*[-*]\s([^\n]+)$/gm;async parse(e){return[...e.matchAll(this.re)??[]].map(t=>t[1])}},uL=class extends po{static lc_name(){return"StrOutputParser"}lc_namespace=["langchain_core","output_parsers","string"];lc_serializable=!0;parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}_textContentToString(e){return e.text}_imageUrlContentToString(e){throw new Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentToString(e){switch(e.type){case"text":case"text_delta":if("text"in e)return this._textContentToString(e);break;case"image_url":if("image_url"in e)return this._imageUrlContentToString(e);break;default:throw new Error(`Cannot coerce "${e.type}" message part into a string.`)}throw new Error(`Invalid content type: ${e.type}`)}_baseMessageContentToString(e){return e.reduce((t,r)=>t+this._messageContentToString(r),"")}},k1=class extends Zc{static lc_name(){return"StructuredOutputParser"}lc_namespace=["langchain","output_parsers","structured"];toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),this.schema=e}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const t=Hc(Object.fromEntries(Object.entries(e).map(([r,n])=>[r,Vc().describe(n)])));return new this(t)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Ga(this.schema))}
\`\`\`
`}async parse(e){try{const t=e.trim(),n=(t.match(/^```(?:json)?\s*([\s\S]*?)```/)?.[1]||t.match(/```json\s*([\s\S]*?)```/)?.[1]||t).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(a,o)=>`"${o.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await Kp(this.schema,JSON.parse(n))}catch(t){throw new In(`Failed to parse. Text: "${e}". Error: ${t}`,e)}}},T1=class extends k1{static lc_name(){return"JsonMarkdownStructuredOutputParser"}getFormatInstructions(e){const t=e?.interpolationDepth??1;if(t<1)throw new Error("f string interpolation depth must be at least 1");return`Return a markdown code snippet with a JSON object formatted to look like:
\`\`\`json
${this._schemaToInstruction(Ga(this.schema)).replaceAll("{","{".repeat(t)).replaceAll("}","}".repeat(t))}
\`\`\``}_schemaToInstruction(e,t=2){const r=e;if("type"in r){let n=!1,a;if(Array.isArray(r.type)){const c=r.type.findIndex(d=>d==="null");c!==-1&&(n=!0,r.type.splice(c,1)),a=r.type.join(" | ")}else a=r.type;if(r.type==="object"&&r.properties){const c=r.description?` // ${r.description}`:"";return`{
${Object.entries(r.properties).map(([f,p])=>{const m=r.required?.includes(f)?"":" (optional)";return`${" ".repeat(t)}"${f}": ${this._schemaToInstruction(p,t+2)}${m}`}).join(`
`)}
${" ".repeat(t-2)}}${c}`}if(r.type==="array"&&r.items){const c=r.description?` // ${r.description}`:"";return`array[
${" ".repeat(t)}${this._schemaToInstruction(r.items,t+2)}
${" ".repeat(t-2)}] ${c}`}const o=n?" (nullable)":"",l=r.description?` // ${r.description}`:"";return`${a}${l}${o}`}if("anyOf"in r)return r.anyOf.map(n=>this._schemaToInstruction(n,t)).join(`
${" ".repeat(t-2)}`);throw new Error("unsupported schema type")}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const t=Hc(Object.fromEntries(Object.entries(e).map(([r,n])=>[r,Vc().describe(n)])));return new this(t)}},dL=class extends Zc{structuredInputParser;constructor({inputSchema:e}){super(...arguments),this.structuredInputParser=new T1(e)}async parse(e){let t;try{t=await this.structuredInputParser.parse(e)}catch(r){throw new In(`Failed to parse. Text: "${e}". Error: ${r}`,e)}return this.outputProcessor(t)}getFormatInstructions(){return this.structuredInputParser.getFormatInstructions()}},fL={};We(fL,{applyPatch:()=>$a,compare:()=>Vp});var hL=class extends Kc{static lc_name(){return"JsonOutputParser"}lc_namespace=["langchain_core","output_parsers"];lc_serializable=!0;_concatOutputChunks(e,t){return this.diff?super._concatOutputChunks(e,t):t}_diff(e,t){if(t)return e?Vp(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return Ch(e[0].text)}async parse(e){return Ch(e,JSON.parse)}getFormatInstructions(){return""}};const pL=function(){const e={};e.parser=function(T,S){return new r(T,S)},e.SAXParser=r,e.SAXStream=f,e.createStream=d,e.MAX_BUFFER_LENGTH=64*1024;const t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(T,S){if(!(this instanceof r))return new r(T,S);var V=this;a(V),V.q=V.c="",V.bufferCheckPosition=e.MAX_BUFFER_LENGTH,V.opt=S||{},V.opt.lowercase=V.opt.lowercase||V.opt.lowercasetags,V.looseCase=V.opt.lowercase?"toLowerCase":"toUpperCase",V.tags=[],V.closed=V.closedRoot=V.sawRoot=!1,V.tag=V.error=null,V.strict=!!T,V.noscript=!!(T||V.opt.noscript),V.state=C.BEGIN,V.strictEntities=V.opt.strictEntities,V.ENTITIES=V.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),V.attribList=[],V.opt.xmlns&&(V.ns=Object.create(b)),V.trackPosition=V.opt.position!==!1,V.trackPosition&&(V.position=V.line=V.column=0),Ne(V,"onready")}Object.create||(Object.create=function(T){function S(){}S.prototype=T;var V=new S;return V}),Object.keys||(Object.keys=function(T){var S=[];for(var V in T)T.hasOwnProperty(V)&&S.push(V);return S});function n(T){for(var S=Math.max(e.MAX_BUFFER_LENGTH,10),V=0,j=0,Te=t.length;j<Te;j++){var He=T[t[j]].length;if(He>S)switch(t[j]){case"textNode":Ve(T);break;case"cdata":ke(T,"oncdata",T.cdata),T.cdata="";break;case"script":ke(T,"onscript",T.script),T.script="";break;default:ee(T,"Max buffer length exceeded: "+t[j])}V=Math.max(V,He)}var Ge=e.MAX_BUFFER_LENGTH-V;T.bufferCheckPosition=Ge+T.position}function a(T){for(var S=0,V=t.length;S<V;S++)T[t[S]]=""}function o(T){Ve(T),T.cdata!==""&&(ke(T,"oncdata",T.cdata),T.cdata=""),T.script!==""&&(ke(T,"onscript",T.script),T.script="")}r.prototype={end:function(){J(this)},write:ue,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var l=ReadableStream;l||(l=function(){});var c=e.EVENTS.filter(function(T){return T!=="error"&&T!=="end"});function d(T,S){return new f(T,S)}function f(T,S){if(!(this instanceof f))return new f(T,S);l.apply(this),this._parser=new r(T,S),this.writable=!0,this.readable=!0;var V=this;this._parser.onend=function(){V.emit("end")},this._parser.onerror=function(j){V.emit("error",j),V._parser.error=null},this._decoder=null,c.forEach(function(j){Object.defineProperty(V,"on"+j,{get:function(){return V._parser["on"+j]},set:function(Te){if(!Te)return V.removeAllListeners(j),V._parser["on"+j]=Te,Te;V.on(j,Te)},enumerable:!0,configurable:!1})})}f.prototype=Object.create(l.prototype,{constructor:{value:f}}),f.prototype.write=function(T){return this._parser.write(T.toString()),this.emit("data",T),!0},f.prototype.end=function(T){return T&&T.length&&this.write(T),this._parser.end(),!0},f.prototype.on=function(T,S){var V=this;return!V._parser["on"+T]&&c.indexOf(T)!==-1&&(V._parser["on"+T]=function(){var j=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);j.splice(0,0,T),V.emit.apply(V,j)}),l.prototype.on.call(V,T,S)};var p="[CDATA[",m="DOCTYPE",y="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/2000/xmlns/",b={xml:y,xmlns:_},x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,E=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,I=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function A(T){return T===" "||T===`
`||T==="\r"||T==="	"}function D(T){return T==='"'||T==="'"}function H(T){return T===">"||A(T)}function Z(T,S){return T.test(S)}function K(T,S){return!Z(T,S)}var C=0;e.STATE={BEGIN:C++,BEGIN_WHITESPACE:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_CLOSED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(T){var S=e.ENTITIES[T],V=typeof S=="number"?String.fromCharCode(S):S;e.ENTITIES[T]=V});for(var ce in e.STATE)e.STATE[e.STATE[ce]]=ce;C=e.STATE;function Ne(T,S,V){T[S]&&T[S](V)}function ke(T,S,V){T.textNode&&Ve(T),Ne(T,S,V)}function Ve(T){T.textNode=tt(T.opt,T.textNode),T.textNode&&Ne(T,"ontext",T.textNode),T.textNode=""}function tt(T,S){return T.trim&&(S=S.trim()),T.normalize&&(S=S.replace(/\s+/g," ")),S}function ee(T,S){return Ve(T),T.trackPosition&&(S+=`
Line: `+T.line+`
Column: `+T.column+`
Char: `+T.c),S=new Error(S),T.error=S,Ne(T,"onerror",S),T}function J(T){return T.sawRoot&&!T.closedRoot&&W(T,"Unclosed root tag"),T.state!==C.BEGIN&&T.state!==C.BEGIN_WHITESPACE&&T.state!==C.TEXT&&ee(T,"Unexpected end"),Ve(T),T.c="",T.closed=!0,Ne(T,"onend"),r.call(T,T.strict,T.opt),T}function W(T,S){if(typeof T!="object"||!(T instanceof r))throw new Error("bad call to strictFail");T.strict&&ee(T,S)}function te(T){T.strict||(T.tagName=T.tagName[T.looseCase]());var S=T.tags[T.tags.length-1]||T,V=T.tag={name:T.tagName,attributes:{}};T.opt.xmlns&&(V.ns=S.ns),T.attribList.length=0,ke(T,"onopentagstart",V)}function M(T,S){var V=T.indexOf(":"),j=V<0?["",T]:T.split(":"),Te=j[0],He=j[1];return S&&T==="xmlns"&&(Te="xmlns",He=""),{prefix:Te,local:He}}function q(T){if(T.strict||(T.attribName=T.attribName[T.looseCase]()),T.attribList.indexOf(T.attribName)!==-1||T.tag.attributes.hasOwnProperty(T.attribName)){T.attribName=T.attribValue="";return}if(T.opt.xmlns){var S=M(T.attribName,!0),V=S.prefix,j=S.local;if(V==="xmlns")if(j==="xml"&&T.attribValue!==y)W(T,"xml: prefix must be bound to "+y+`
Actual: `+T.attribValue);else if(j==="xmlns"&&T.attribValue!==_)W(T,"xmlns: prefix must be bound to "+_+`
Actual: `+T.attribValue);else{var Te=T.tag,He=T.tags[T.tags.length-1]||T;Te.ns===He.ns&&(Te.ns=Object.create(He.ns)),Te.ns[j]=T.attribValue}T.attribList.push([T.attribName,T.attribValue])}else T.tag.attributes[T.attribName]=T.attribValue,ke(T,"onattribute",{name:T.attribName,value:T.attribValue});T.attribName=T.attribValue=""}function G(T,S){if(T.opt.xmlns){var V=T.tag,j=M(T.tagName);V.prefix=j.prefix,V.local=j.local,V.uri=V.ns[j.prefix]||"",V.prefix&&!V.uri&&(W(T,"Unbound namespace prefix: "+JSON.stringify(T.tagName)),V.uri=j.prefix);var Te=T.tags[T.tags.length-1]||T;V.ns&&Te.ns!==V.ns&&Object.keys(V.ns).forEach(function(er){ke(T,"onopennamespace",{prefix:er,uri:V.ns[er]})});for(var He=0,Ge=T.attribList.length;He<Ge;He++){var nt=T.attribList[He],vt=nt[0],Qt=nt[1],st=M(vt,!0),Ft=st.prefix,pn=st.local,Dn=Ft===""?"":V.ns[Ft]||"",ie={name:vt,value:Qt,prefix:Ft,local:pn,uri:Dn};Ft&&Ft!=="xmlns"&&!Dn&&(W(T,"Unbound namespace prefix: "+JSON.stringify(Ft)),ie.uri=Ft),T.tag.attributes[vt]=ie,ke(T,"onattribute",ie)}T.attribList.length=0}T.tag.isSelfClosing=!!S,T.sawRoot=!0,T.tags.push(T.tag),ke(T,"onopentag",T.tag),S||(!T.noscript&&T.tagName.toLowerCase()==="script"?T.state=C.SCRIPT:T.state=C.TEXT,T.tag=null,T.tagName=""),T.attribName=T.attribValue="",T.attribList.length=0}function P(T){if(!T.tagName){W(T,"Weird empty close tag."),T.textNode+="</>",T.state=C.TEXT;return}if(T.script){if(T.tagName!=="script"){T.script+="</"+T.tagName+">",T.tagName="",T.state=C.SCRIPT;return}ke(T,"onscript",T.script),T.script=""}var S=T.tags.length,V=T.tagName;T.strict||(V=V[T.looseCase]());for(var j=V;S--;){var Te=T.tags[S];if(Te.name!==j)W(T,"Unexpected close tag");else break}if(S<0){W(T,"Unmatched closing tag: "+T.tagName),T.textNode+="</"+T.tagName+">",T.state=C.TEXT;return}T.tagName=V;for(var He=T.tags.length;He-- >S;){var Ge=T.tag=T.tags.pop();T.tagName=T.tag.name,ke(T,"onclosetag",T.tagName);var nt={};for(var vt in Ge.ns)nt[vt]=Ge.ns[vt];var Qt=T.tags[T.tags.length-1]||T;T.opt.xmlns&&Ge.ns!==Qt.ns&&Object.keys(Ge.ns).forEach(function(st){var Ft=Ge.ns[st];ke(T,"onclosenamespace",{prefix:st,uri:Ft})})}S===0&&(T.closedRoot=!0),T.tagName=T.attribValue=T.attribName="",T.attribList.length=0,T.state=C.TEXT}function U(T){var S=T.entity,V=S.toLowerCase(),j,Te="";return T.ENTITIES[S]?T.ENTITIES[S]:T.ENTITIES[V]?T.ENTITIES[V]:(S=V,S.charAt(0)==="#"&&(S.charAt(1)==="x"?(S=S.slice(2),j=parseInt(S,16),Te=j.toString(16)):(S=S.slice(1),j=parseInt(S,10),Te=j.toString(10))),S=S.replace(/^0+/,""),isNaN(j)||Te.toLowerCase()!==S?(W(T,"Invalid character entity"),"&"+T.entity+";"):String.fromCodePoint(j))}function se(T,S){S==="<"?(T.state=C.OPEN_WAKA,T.startTagPosition=T.position):A(S)||(W(T,"Non-whitespace before first tag."),T.textNode=S,T.state=C.TEXT)}function le(T,S){var V="";return S<T.length&&(V=T.charAt(S)),V}function ue(T){var S=this;if(this.error)throw this.error;if(S.closed)return ee(S,"Cannot write after close. Assign an onready handler.");if(T===null)return J(S);typeof T=="object"&&(T=T.toString());for(var V=0,j="";j=le(T,V++),S.c=j,!!j;)switch(S.trackPosition&&(S.position++,j===`
`?(S.line++,S.column=0):S.column++),S.state){case C.BEGIN:if(S.state=C.BEGIN_WHITESPACE,j==="\uFEFF")continue;se(S,j);continue;case C.BEGIN_WHITESPACE:se(S,j);continue;case C.TEXT:if(S.sawRoot&&!S.closedRoot){for(var Te=V-1;j&&j!=="<"&&j!=="&";)j=le(T,V++),j&&S.trackPosition&&(S.position++,j===`
`?(S.line++,S.column=0):S.column++);S.textNode+=T.substring(Te,V-1)}j==="<"&&!(S.sawRoot&&S.closedRoot&&!S.strict)?(S.state=C.OPEN_WAKA,S.startTagPosition=S.position):(!A(j)&&(!S.sawRoot||S.closedRoot)&&W(S,"Text data outside of root node."),j==="&"?S.state=C.TEXT_ENTITY:S.textNode+=j);continue;case C.SCRIPT:j==="<"?S.state=C.SCRIPT_ENDING:S.script+=j;continue;case C.SCRIPT_ENDING:j==="/"?S.state=C.CLOSE_TAG:(S.script+="<"+j,S.state=C.SCRIPT);continue;case C.OPEN_WAKA:if(j==="!")S.state=C.SGML_DECL,S.sgmlDecl="";else if(!A(j))if(Z(x,j))S.state=C.OPEN_TAG,S.tagName=j;else if(j==="/")S.state=C.CLOSE_TAG,S.tagName="";else if(j==="?")S.state=C.PROC_INST,S.procInstName=S.procInstBody="";else{if(W(S,"Unencoded <"),S.startTagPosition+1<S.position){var He=S.position-S.startTagPosition;j=new Array(He).join(" ")+j}S.textNode+="<"+j,S.state=C.TEXT}continue;case C.SGML_DECL:(S.sgmlDecl+j).toUpperCase()===p?(ke(S,"onopencdata"),S.state=C.CDATA,S.sgmlDecl="",S.cdata=""):S.sgmlDecl+j==="--"?(S.state=C.COMMENT,S.comment="",S.sgmlDecl=""):(S.sgmlDecl+j).toUpperCase()===m?(S.state=C.DOCTYPE,(S.doctype||S.sawRoot)&&W(S,"Inappropriately located doctype declaration"),S.doctype="",S.sgmlDecl=""):j===">"?(ke(S,"onsgmldeclaration",S.sgmlDecl),S.sgmlDecl="",S.state=C.TEXT):(D(j)&&(S.state=C.SGML_DECL_QUOTED),S.sgmlDecl+=j);continue;case C.SGML_DECL_QUOTED:j===S.q&&(S.state=C.SGML_DECL,S.q=""),S.sgmlDecl+=j;continue;case C.DOCTYPE:j===">"?(S.state=C.TEXT,ke(S,"ondoctype",S.doctype),S.doctype=!0):(S.doctype+=j,j==="["?S.state=C.DOCTYPE_DTD:D(j)&&(S.state=C.DOCTYPE_QUOTED,S.q=j));continue;case C.DOCTYPE_QUOTED:S.doctype+=j,j===S.q&&(S.q="",S.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:S.doctype+=j,j==="]"?S.state=C.DOCTYPE:D(j)&&(S.state=C.DOCTYPE_DTD_QUOTED,S.q=j);continue;case C.DOCTYPE_DTD_QUOTED:S.doctype+=j,j===S.q&&(S.state=C.DOCTYPE_DTD,S.q="");continue;case C.COMMENT:j==="-"?S.state=C.COMMENT_ENDING:S.comment+=j;continue;case C.COMMENT_ENDING:j==="-"?(S.state=C.COMMENT_ENDED,S.comment=tt(S.opt,S.comment),S.comment&&ke(S,"oncomment",S.comment),S.comment=""):(S.comment+="-"+j,S.state=C.COMMENT);continue;case C.COMMENT_ENDED:j!==">"?(W(S,"Malformed comment"),S.comment+="--"+j,S.state=C.COMMENT):S.state=C.TEXT;continue;case C.CDATA:j==="]"?S.state=C.CDATA_ENDING:S.cdata+=j;continue;case C.CDATA_ENDING:j==="]"?S.state=C.CDATA_ENDING_2:(S.cdata+="]"+j,S.state=C.CDATA);continue;case C.CDATA_ENDING_2:j===">"?(S.cdata&&ke(S,"oncdata",S.cdata),ke(S,"onclosecdata"),S.cdata="",S.state=C.TEXT):j==="]"?S.cdata+="]":(S.cdata+="]]"+j,S.state=C.CDATA);continue;case C.PROC_INST:j==="?"?S.state=C.PROC_INST_ENDING:A(j)?S.state=C.PROC_INST_BODY:S.procInstName+=j;continue;case C.PROC_INST_BODY:if(!S.procInstBody&&A(j))continue;j==="?"?S.state=C.PROC_INST_ENDING:S.procInstBody+=j;continue;case C.PROC_INST_ENDING:j===">"?(ke(S,"onprocessinginstruction",{name:S.procInstName,body:S.procInstBody}),S.procInstName=S.procInstBody="",S.state=C.TEXT):(S.procInstBody+="?"+j,S.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:Z(E,j)?S.tagName+=j:(te(S),j===">"?G(S):j==="/"?S.state=C.OPEN_TAG_SLASH:(A(j)||W(S,"Invalid character in tag name"),S.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:j===">"?(G(S,!0),P(S)):(W(S,"Forward-slash in opening tag not followed by >"),S.state=C.ATTRIB);continue;case C.ATTRIB:if(A(j))continue;j===">"?G(S):j==="/"?S.state=C.OPEN_TAG_SLASH:Z(x,j)?(S.attribName=j,S.attribValue="",S.state=C.ATTRIB_NAME):W(S,"Invalid attribute name");continue;case C.ATTRIB_NAME:j==="="?S.state=C.ATTRIB_VALUE:j===">"?(W(S,"Attribute without value"),S.attribValue=S.attribName,q(S),G(S)):A(j)?S.state=C.ATTRIB_NAME_SAW_WHITE:Z(E,j)?S.attribName+=j:W(S,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if(j==="=")S.state=C.ATTRIB_VALUE;else{if(A(j))continue;W(S,"Attribute without value"),S.tag.attributes[S.attribName]="",S.attribValue="",ke(S,"onattribute",{name:S.attribName,value:""}),S.attribName="",j===">"?G(S):Z(x,j)?(S.attribName=j,S.state=C.ATTRIB_NAME):(W(S,"Invalid attribute name"),S.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(A(j))continue;D(j)?(S.q=j,S.state=C.ATTRIB_VALUE_QUOTED):(W(S,"Unquoted attribute value"),S.state=C.ATTRIB_VALUE_UNQUOTED,S.attribValue=j);continue;case C.ATTRIB_VALUE_QUOTED:if(j!==S.q){j==="&"?S.state=C.ATTRIB_VALUE_ENTITY_Q:S.attribValue+=j;continue}q(S),S.q="",S.state=C.ATTRIB_VALUE_CLOSED;continue;case C.ATTRIB_VALUE_CLOSED:A(j)?S.state=C.ATTRIB:j===">"?G(S):j==="/"?S.state=C.OPEN_TAG_SLASH:Z(x,j)?(W(S,"No whitespace between attributes"),S.attribName=j,S.attribValue="",S.state=C.ATTRIB_NAME):W(S,"Invalid attribute name");continue;case C.ATTRIB_VALUE_UNQUOTED:if(!H(j)){j==="&"?S.state=C.ATTRIB_VALUE_ENTITY_U:S.attribValue+=j;continue}q(S),j===">"?G(S):S.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(S.tagName)j===">"?P(S):Z(E,j)?S.tagName+=j:S.script?(S.script+="</"+S.tagName,S.tagName="",S.state=C.SCRIPT):(A(j)||W(S,"Invalid tagname in closing tag"),S.state=C.CLOSE_TAG_SAW_WHITE);else{if(A(j))continue;K(x,j)?S.script?(S.script+="</"+j,S.state=C.SCRIPT):W(S,"Invalid tagname in closing tag."):S.tagName=j}continue;case C.CLOSE_TAG_SAW_WHITE:if(A(j))continue;j===">"?P(S):W(S,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:var Ge,nt;switch(S.state){case C.TEXT_ENTITY:Ge=C.TEXT,nt="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:Ge=C.ATTRIB_VALUE_QUOTED,nt="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:Ge=C.ATTRIB_VALUE_UNQUOTED,nt="attribValue";break}if(j===";")if(S.opt.unparsedEntities){var vt=U(S);S.entity="",S.state=Ge,S.write(vt)}else S[nt]+=U(S),S.entity="",S.state=Ge;else Z(S.entity.length?O:I,j)?S.entity+=j:(W(S,"Invalid character in entity name"),S[nt]+="&"+S.entity+j,S.entity="",S.state=Ge);continue;default:throw new Error(S,"Unknown state: "+S.state)}return S.position>=S.bufferCheckPosition&&n(S),S}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */return String.fromCodePoint||(function(){var T=String.fromCharCode,S=Math.floor,V=function(){var j=16384,Te=[],He,Ge,nt=-1,vt=arguments.length;if(!vt)return"";for(var Qt="";++nt<vt;){var st=Number(arguments[nt]);if(!isFinite(st)||st<0||st>1114111||S(st)!==st)throw RangeError("Invalid code point: "+st);st<=65535?Te.push(st):(st-=65536,He=(st>>10)+55296,Ge=st%1024+56320,Te.push(He,Ge)),(nt+1===vt||Te.length>j)&&(Qt+=T.apply(null,Te),Te.length=0)}return Qt};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:V,configurable:!0,writable:!0}):String.fromCodePoint=V})(),e},mL=pL(),tp=`The output should be formatted as a XML file.
1. Output should conform to the tags below. 
2. If tags are not given, make them on your own.
3. Remember to always open and close all the tags.

As an example, for the tags ["foo", "bar", "baz"]:
1. String "<foo>
   <bar>
      <baz></baz>
   </bar>
</foo>" is a well-formatted instance of the schema. 
2. String "<foo>
   <bar>
   </foo>" is a badly-formatted instance.
3. String "<foo>
   <tag>
   </tag>
</foo>" is a badly-formatted instance.

Here are the output tags:
\`\`\`
{tags}
\`\`\``;var gL=class extends Kc{tags;constructor(e){super(e),this.tags=e?.tags}static lc_name(){return"XMLOutputParser"}lc_namespace=["langchain_core","output_parsers"];lc_serializable=!0;_diff(e,t){if(t)return e?Vp(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return rp(e[0].text)}async parse(e){return rp(e)}getFormatInstructions(){return!!(this.tags&&this.tags.length>0)?tp.replace("{tags}",this.tags?.join(", ")??""):tp}};const yL=e=>e.split(`
`).map(t=>t.replace(/^\s+/,"")).join(`
`).trim(),C1=e=>{if(Object.keys(e).length===0)return{};const t={};return e.children.length>0?(t[e.name]=e.children.map(C1),t):(t[e.name]=e.text??void 0,t)};function rp(e){const t=yL(e),r=mL.parser(!0);let n={};const a=[];r.onopentag=c=>{const d={name:c.name,attributes:c.attributes,children:[],text:"",isSelfClosing:c.isSelfClosing};a.length>0?a[a.length-1].children.push(d):n=d,c.isSelfClosing||a.push(d)},r.onclosetag=()=>{if(a.length>0){const c=a.pop();a.length===0&&c&&(n=c)}},r.ontext=c=>{if(a.length>0){const d=a[a.length-1];d.text+=c}},r.onattribute=c=>{if(a.length>0){const d=a[a.length-1];d.attributes[c.name]=c.value}};const o=/```(xml)?(.*)```/s.exec(t),l=o?o[2]:t;return r.write(l).close(),n&&n.name==="?xml"&&(n=n.children[0]),C1(n)}var vL={};We(vL,{AsymmetricStructuredOutputParser:()=>dL,BaseCumulativeTransformOutputParser:()=>Kc,BaseLLMOutputParser:()=>S1,BaseOutputParser:()=>Zc,BaseTransformOutputParser:()=>po,BytesOutputParser:()=>aL,CommaSeparatedListOutputParser:()=>iL,CustomListOutputParser:()=>oL,JsonMarkdownStructuredOutputParser:()=>T1,JsonOutputParser:()=>hL,ListOutputParser:()=>mo,MarkdownListOutputParser:()=>cL,NumberedListOutputParser:()=>lL,OutputParserException:()=>In,StringOutputParser:()=>uL,StructuredOutputParser:()=>k1,XMLOutputParser:()=>gL,XML_FORMAT_INSTRUCTIONS:()=>tp,parseJsonMarkdown:()=>Ch,parsePartialJson:()=>Ic,parseXMLMarkdown:()=>rp});function N1(e,t){if(e.function===void 0)return;let r;if(t?.partial)try{r=Ic(e.function.arguments??"{}")}catch{return}else try{r=JSON.parse(e.function.arguments)}catch(a){throw new In([`Function "${e.function.name}" arguments:`,"",e.function.arguments,"","are not valid JSON.",`Error: ${a.message}`].join(`
`))}const n={name:e.function.name,args:r,type:"tool_call"};return t?.returnId&&(n.id=e.id),n}function _L(e){if(e.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:e.id,type:"function",function:{name:e.name,arguments:JSON.stringify(e.args)}}}function wL(e,t){return{name:e.function?.name,args:e.function?.arguments,id:e.id,error:t,type:"invalid_tool_call"}}var I1=class extends Kc{static lc_name(){return"JsonOutputToolsParser"}returnId=!1;lc_namespace=["langchain","output_parsers","openai_tools"];lc_serializable=!0;constructor(e){super(e),this.returnId=e?.returnId??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,t=!0){const r=e[0].message;let n;if(Rp(r)&&r.tool_calls?.length?n=r.tool_calls.map(o=>{const{id:l,...c}=o;return this.returnId?{id:l,...c}:c}):r.additional_kwargs.tool_calls!==void 0&&(n=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(l=>N1(l,{returnId:this.returnId,partial:t}))),!n)return[];const a=[];for(const o of n)if(o!==void 0){const l={type:o.name,args:o.args,id:o.id};a.push(l)}return a}},bL=class extends I1{static lc_name(){return"JsonOutputKeyToolsParser"}lc_namespace=["langchain","output_parsers","openai_tools"];lc_serializable=!0;returnId=!1;keyName;returnSingle=!1;zodSchema;constructor(e){super(e),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;const t=await fP(this.zodSchema,e);if(t.success)return t.data;throw new In(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error?.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const r=(await super.parsePartialResult(e)).filter(a=>a.type===this.keyName);let n=r;if(r.length)return this.returnId||(n=r.map(a=>a.args)),this.returnSingle?n[0]:n}async parseResult(e){const r=(await super.parsePartialResult(e,!1)).filter(o=>o.type===this.keyName);let n=r;return r.length?(this.returnId||(n=r.map(o=>o.args)),this.returnSingle?this._validateResult(n[0]):await Promise.all(n.map(o=>this._validateResult(o)))):void 0}},xL={};We(xL,{JsonOutputKeyToolsParser:()=>bL,JsonOutputToolsParser:()=>I1,convertLangChainToolCallToOpenAI:()=>_L,makeInvalidToolCall:()=>wL,parseToolCall:()=>N1});new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function sm(e){return e!==void 0&&Array.isArray(e.lc_namespace)}function am(e){return e!==void 0&&bt.isRunnable(e)&&"lc_name"in e.constructor&&typeof e.constructor.lc_name=="function"&&e.constructor.lc_name()==="RunnableToolLike"}function im(e){return!!e&&typeof e=="object"&&"name"in e&&"schema"in e&&(Bc(e.schema)||e.schema!=null&&typeof e.schema=="object"&&"type"in e.schema&&typeof e.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(e.schema.type))}function om(e){return im(e)||am(e)||sm(e)}var EL={};We(EL,{convertToOpenAIFunction:()=>R1,convertToOpenAITool:()=>SL,isLangChainTool:()=>om,isRunnableToolLike:()=>am,isStructuredTool:()=>sm,isStructuredToolParams:()=>im});function R1(e,t){const r=typeof t=="number"?void 0:t;return{name:e.name,description:e.description,parameters:Ga(e.schema),...r?.strict!==void 0?{strict:r.strict}:{}}}function SL(e,t){const r=typeof t=="number"?void 0:t;let n;return om(e)?n={type:"function",function:R1(e)}:n=e,r?.strict!==void 0&&(n.function.strict=r.strict),n}var kL={};We(kL,{BaseLLM:()=>A1,LLM:()=>TL});var A1=class Di extends nm{lc_namespace=["langchain","llms",this._llmType()];async invoke(t,r){const n=Di._convertInputToPromptValue(t);return(await this.generatePrompt([n],r,r?.callbacks)).generations[0][0].text}async*_streamResponseChunks(t,r,n){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(t){const[r,n]=super._separateRunnableConfigFromCallOptions(t);return n.signal=r.signal,[r,n]}async*_streamIterator(t,r){if(this._streamResponseChunks===Di.prototype._streamResponseChunks)yield this.invoke(t,r);else{const n=Di._convertInputToPromptValue(t),[a,o]=this._separateRunnableConfigFromCallOptionsCompat(r),l=await dr.configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),c={options:o,invocation_params:this?.invocationParams(o),batch_size:1},d=await l?.handleLLMStart(this.toJSON(),[n.toString()],a.runId,void 0,c,void 0,void 0,a.runName);let f=new ja({text:""});try{for await(const p of this._streamResponseChunks(n.toString(),o,d?.[0]))f?f=f.concat(p):f=p,typeof p.text=="string"&&(yield p.text)}catch(p){throw await Promise.all((d??[]).map(m=>m?.handleLLMError(p))),p}await Promise.all((d??[]).map(p=>p?.handleLLMEnd({generations:[[f]]})))}}async generatePrompt(t,r,n){const a=t.map(o=>o.toString());return this.generate(a,r,n)}invocationParams(t){return{}}_flattenLLMResult(t){const r=[];for(let n=0;n<t.generations.length;n+=1){const a=t.generations[n];if(n===0)r.push({generations:[a],llmOutput:t.llmOutput});else{const o=t.llmOutput?{...t.llmOutput,tokenUsage:{}}:void 0;r.push({generations:[a],llmOutput:o})}}return r}async _generateUncached(t,r,n,a){let o;if(a!==void 0&&a.length===t.length)o=a;else{const f=await dr.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),p={options:r,invocation_params:this?.invocationParams(r),batch_size:t.length};o=await f?.handleLLMStart(this.toJSON(),t,n.runId,void 0,p,void 0,void 0,n?.runName)}const l=!!o?.[0].handlers.find(Pp);let c;if(l&&t.length===1&&this._streamResponseChunks!==Di.prototype._streamResponseChunks)try{const f=await this._streamResponseChunks(t[0],r,o?.[0]);let p;for await(const m of f)p===void 0?p=m:p=_s(p,m);if(p===void 0)throw new Error("Received empty response from chat model call.");c={generations:[[p]],llmOutput:{}},await o?.[0].handleLLMEnd(c)}catch(f){throw await o?.[0].handleLLMError(f),f}else{try{c=await this._generate(t,r,o?.[0])}catch(p){throw await Promise.all((o??[]).map(m=>m?.handleLLMError(p))),p}const f=this._flattenLLMResult(c);await Promise.all((o??[]).map((p,m)=>p?.handleLLMEnd(f[m])))}const d=o?.map(f=>f.runId)||void 0;return Object.defineProperty(c,eo,{value:d?{runIds:d}:void 0,configurable:!0}),c}async _generateCached({prompts:t,cache:r,llmStringKey:n,parsedOptions:a,handledOptions:o,runId:l}){const c=await dr.configure(o.callbacks,this.callbacks,o.tags,this.tags,o.metadata,this.metadata,{verbose:this.verbose}),d={options:a,invocation_params:this?.invocationParams(a),batch_size:t.length},f=await c?.handleLLMStart(this.toJSON(),t,l,void 0,d,void 0,void 0,o?.runName),p=[],y=(await Promise.allSettled(t.map(async(x,E)=>{const I=await r.lookup(x,n);return I==null&&p.push(E),I}))).map((x,E)=>({result:x,runManager:f?.[E]})).filter(({result:x})=>x.status==="fulfilled"&&x.value!=null||x.status==="rejected"),_=[];await Promise.all(y.map(async({result:x,runManager:E},I)=>{if(x.status==="fulfilled"){const O=x.value;return _[I]=O.map(A=>(A.generationInfo={...A.generationInfo,tokenUsage:{}},A)),O.length&&await E?.handleLLMNewToken(O[0].text),E?.handleLLMEnd({generations:[O]},void 0,void 0,void 0,{cached:!0})}else return await E?.handleLLMError(x.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(x.reason)}));const b={generations:_,missingPromptIndices:p,startedRunManagers:f};return Object.defineProperty(b,eo,{value:f?{runIds:f?.map(x=>x.runId)}:void 0,configurable:!0}),b}async generate(t,r,n){if(!Array.isArray(t))throw new Error("Argument 'prompts' is expected to be a string[]");let a;Array.isArray(r)?a={stop:r}:a=r;const[o,l]=this._separateRunnableConfigFromCallOptionsCompat(a);if(o.callbacks=o.callbacks??n,!this.cache)return this._generateUncached(t,l,o);const{cache:c}=this,d=this._getSerializedCacheKeyParametersForCall(l),{generations:f,missingPromptIndices:p,startedRunManagers:m}=await this._generateCached({prompts:t,cache:c,llmStringKey:d,parsedOptions:l,handledOptions:o,runId:o.runId});let y={};if(p.length>0){const _=await this._generateUncached(p.map(b=>t[b]),l,o,m!==void 0?p.map(b=>m?.[b]):void 0);await Promise.all(_.generations.map(async(b,x)=>{const E=p[x];return f[E]=b,c.update(t[E],d,b)})),y=_.llmOutput??{}}return{generations:f,llmOutput:y}}_identifyingParams(){return{}}_modelType(){return"base_llm"}},TL=class extends A1{async _generate(e,t,r){return{generations:await Promise.all(e.map((a,o)=>this._call(a,{...t,promptIndex:o},r).then(l=>[{text:l}])))}}},CL={};We(CL,{chunkArray:()=>NL});const NL=(e,t)=>e.reduce((r,n,a)=>{const o=Math.floor(a/t),l=r[o]||[];return r[o]=l.concat([n]),r},[]);var IL={};We(IL,{Embeddings:()=>RL});var RL=class{caller;constructor(e){this.caller=new ho(e??{})}},AL={};We(AL,{BaseToolkit:()=>OL,DynamicStructuredTool:()=>$1,DynamicTool:()=>P1,StructuredTool:()=>lm,Tool:()=>O1,ToolInputParsingException:()=>ec,isLangChainTool:()=>om,isRunnableToolLike:()=>am,isStructuredTool:()=>sm,isStructuredToolParams:()=>im,tool:()=>PL});var lm=class extends rm{returnDirect=!1;verboseParsingErrors=!1;get lc_namespace(){return["langchain","tools"]}responseFormat="content";defaultConfig;constructor(e){super(e??{}),this.verboseParsingErrors=e?.verboseParsingErrors??this.verboseParsingErrors,this.responseFormat=e?.responseFormat??this.responseFormat,this.defaultConfig=e?.defaultConfig??this.defaultConfig,this.metadata=e?.metadata??this.metadata}async invoke(e,t){let r,n=Je(ac(this.defaultConfig,t));return Fi(e)?(r=e.args,n={...n,toolCall:e}):r=e,this.call(r,n)}async call(e,t,r){const n=Fi(e)?e.args:e;let a;if(Bc(this.schema))try{a=await Kp(this.schema,n)}catch(_){let b="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(b=`${b}
Details: ${_.message}`),_ instanceof Error&&_.constructor.name==="ZodError"&&(b=`${b}

${tP(_)}`),new ec(b,JSON.stringify(e))}else{const _=ct(n,this.schema);if(!_.valid){let b="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(b=`${b}
Details: ${_.errors.map(x=>`${x.keywordLocation}: ${x.error}`).join(`
`)}`),new ec(b,JSON.stringify(e))}a=n}const o=Fc(t),c=await dr.configure(o.callbacks,this.callbacks,o.tags||r,this.tags,o.metadata,this.metadata,{verbose:this.verbose})?.handleToolStart(this.toJSON(),typeof e=="string"?e:JSON.stringify(e),o.runId,void 0,void 0,void 0,o.runName);delete o.runId;let d;try{d=await this._call(a,c,o)}catch(_){throw await c?.handleToolError(_),_}let f,p;if(this.responseFormat==="content_and_artifact")if(Array.isArray(d)&&d.length===2)[f,p]=d;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(d)}`);else f=d;let m;Fi(e)&&(m=e.id),!m&&LR(o)&&(m=o.toolCall.id);const y=$L({content:f,artifact:p,toolCallId:m,name:this.name,metadata:this.metadata});return await c?.handleToolEnd(y),y}},O1=class extends lm{schema=Hc({input:Vc().optional()}).transform(e=>e.input);constructor(e){super(e)}call(e,t){const r=typeof e=="string"||e==null?{input:e}:e;return super.call(r,t)}},P1=class extends O1{static lc_name(){return"DynamicTool"}name;description;func;constructor(e){super(e),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect}async call(e,t){const r=Fc(t);return r.runName===void 0&&(r.runName=this.name),super.call(e,r)}async _call(e,t,r){return this.func(e,t,r)}},$1=class extends lm{static lc_name(){return"DynamicStructuredTool"}name;description;func;schema;constructor(e){super(e),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect,this.schema=e.schema}async call(e,t,r){const n=Fc(t);return n.runName===void 0&&(n.runName=this.name),super.call(e,n,r)}_call(e,t,r){return this.func(e,t,r)}},OL=class{getTools(){return this.tools}};function PL(e,t){const r=Hx(t.schema),n=Gi(t.schema);if(!t.schema||r||n)return new P1({...t,description:t.description??t.schema?.description??`${t.name} tool`,func:async(l,c,d)=>new Promise((f,p)=>{const m=ot(d,{callbacks:c?.getChild()});Zr.runWithConfig(Pn(m),async()=>{try{f(e(l,m))}catch(y){p(y)}})})});const a=t.schema,o=t.description??t.schema.description??`${t.name} tool`;return new $1({...t,description:o,schema:a,func:async(l,c,d)=>new Promise((f,p)=>{let m;const y=()=>{d?.signal&&m&&d.signal.removeEventListener("abort",m)};d?.signal&&(m=()=>{y(),p(Xi(d.signal))},d.signal.addEventListener("abort",m));const _=ot(d,{callbacks:c?.getChild()});Zr.runWithConfig(Pn(_),async()=>{try{const b=await e(l,_);if(d?.signal?.aborted){y();return}y(),f(b)}catch(b){y(),p(b)}})})})}function $L(e){const{content:t,artifact:r,toolCallId:n,metadata:a}=e;return n&&!Cp(t)?typeof t=="string"||Array.isArray(t)&&t.every(o=>typeof o=="object")?new ys({status:"success",content:t,artifact:r,tool_call_id:n,name:e.name,metadata:a}):new ys({status:"success",content:jL(t),artifact:r,tool_call_id:n,name:e.name,metadata:a}):t}function jL(e){try{return JSON.stringify(e,null,2)??""}catch{return`${e}`}}function LL(e){const t=wb.filter(n=>e.includes(n.id));if(t.length===0)return"The user has not completed any lessons yet.";let r=`The user has completed the following lessons:

`;return t.forEach(n=>{r+=`Lesson: ${n.title}
`,r+=`Topic: ${n.topic}
`,r+=`Difficulty: ${n.difficulty}
`,r+=`Description: ${n.description}
`,r+=`Explanation: ${n.content.explanation}
`,r+=`Example:
${n.content.example}

`}),r}function ML(e){return`You are BuggyChat, a friendly and helpful AI programming tutor for CodeQuest Academy. Your role is to:

1. Answer questions about the programming lessons the user has already completed. Use the lesson content provided below as your reference.

2. Teach new programming concepts and topics that the user asks about, even if they haven't covered them in lessons yet.

3. Provide clear, beginner-friendly explanations with code examples when appropriate.

4. Be encouraging and supportive, helping users understand programming concepts step by step.

${LL(e)}

When answering questions:
- If the question relates to a completed lesson, reference that lesson's content
- If the question is about a new topic, provide a clear explanation with examples
- Always use JavaScript examples unless the user specifies another language
- Keep explanations concise but thorough
- Encourage the user to practice and experiment with code`}function DL(){throw new Error("OpenAI API key is not configured. Please set VITE_OPENAI_API_KEY in your .env file.")}async function zL(e,t,r){try{const n=DL(),a=ML(r),o=[new On(a),...t.map(c=>c.role==="user"?new Wr(c.content):new An(c.content)),new Wr(e)];return(await n.invoke(o)).content}catch(n){if(n instanceof Error){if(n.message.includes("API key"))throw new Error("OpenAI API key is missing or invalid. Please check your .env file.");if(n.message.includes("rate limit"))throw new Error("Rate limit exceeded. Please try again in a moment.");if(n.message.includes("network")||n.message.includes("fetch"))throw new Error("Network error. Please check your internet connection.")}throw new Error("Failed to get response from AI. Please try again.")}}function FL({userProgress:e}){const[t,r]=N.useState(!1),[n,a]=N.useState([{role:"assistant",content:"Hi! I'm BuggyChat, your AI programming tutor. I can help you with questions about the lessons you've completed, or teach you new programming concepts. What would you like to learn today?"}]),[o,l]=N.useState(""),[c,d]=N.useState(!1),[f,p]=N.useState(null),m=N.useRef(null),y=N.useRef(null);N.useEffect(()=>{m.current?.scrollIntoView({behavior:"smooth"})},[n]),N.useEffect(()=>{t&&y.current&&setTimeout(()=>y.current?.focus(),100)},[t]);const _=async()=>{if(!o.trim()||c)return;const x=o.trim();l(""),p(null);const E=[...n,{role:"user",content:x}];a(E),d(!0);try{const I=await zL(x,n,e.completedLessons);a([...E,{role:"assistant",content:I}])}catch(I){const O=I instanceof Error?I.message:"An unexpected error occurred";p(O),a([...E,{role:"assistant",content:`Sorry, I encountered an error: ${O}. Please try again.`}])}finally{d(!1)}},b=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),_())};return w.jsxs(w.Fragment,{children:[!t&&w.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-6 right-6 z-50 w-16 h-16 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 flex items-center justify-center group","aria-label":"Open BuggyChat",children:w.jsx("img",{src:"/BuggyChat.png",alt:"BuggyChat",className:"w-12 h-12 object-contain group-hover:scale-105 transition-transform"})}),t&&w.jsxs("div",{className:"fixed bottom-6 right-6 z-50 w-[calc(100vw-3rem)] sm:w-96 h-[600px] max-h-[calc(100vh-3rem)] flex flex-col bg-white rounded-lg shadow-2xl border border-gray-200 overflow-hidden transition-all duration-300",children:[w.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white p-4 flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("img",{src:"/BuggyChat.png",alt:"BuggyChat",className:"w-8 h-8 object-contain"}),w.jsxs("div",{children:[w.jsx("h3",{className:"font-semibold",children:"BuggyChat"}),w.jsx("p",{className:"text-xs text-indigo-100",children:"Your AI Programming Tutor"})]})]}),w.jsx(vr,{variant:"ghost",size:"icon",onClick:()=>r(!1),className:"text-white hover:bg-white/20 h-8 w-8","aria-label":"Close chat",children:w.jsx(Dw,{className:"h-4 w-4"})})]}),w.jsx(BI,{className:"flex-1 p-4",children:w.jsxs("div",{className:"space-y-4",children:[n.map((x,E)=>w.jsx("div",{className:`flex ${x.role==="user"?"justify-end":"justify-start"}`,children:w.jsx(ht,{className:`max-w-[80%] p-3 ${x.role==="user"?"bg-indigo-500 text-white":"bg-gray-100 text-gray-900"}`,children:w.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:x.content})})},E)),c&&w.jsx("div",{className:"flex justify-start",children:w.jsx(ht,{className:"bg-gray-100 p-3",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(vv,{className:"h-4 w-4 animate-spin text-indigo-500"}),w.jsx("span",{className:"text-sm text-gray-600",children:"Thinking..."})]})})}),f&&w.jsx("div",{className:"flex justify-start",children:w.jsx(ht,{className:"bg-red-50 border-red-200 p-3",children:w.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[w.jsx(lC,{className:"h-4 w-4"}),w.jsx("span",{className:"text-sm",children:f})]})})}),w.jsx("div",{ref:m})]})}),w.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:w.jsxs("div",{className:"flex gap-2",children:[w.jsx(TI,{ref:y,value:o,onChange:x=>l(x.target.value),onKeyPress:b,placeholder:"Ask me anything about programming...",disabled:c,className:"flex-1"}),w.jsx(vr,{onClick:_,disabled:!o.trim()||c,className:"bg-indigo-500 hover:bg-indigo-600",children:c?w.jsx(vv,{className:"h-4 w-4 animate-spin"}):w.jsx(kC,{className:"h-4 w-4"})})]})})]})]})}function UL(){const[e,t]=N.useState({level:1,xp:0,xpToNextLevel:100,streak:0,completedLessons:[],completedChallenges:[],badges:[],characterType:"wizard"}),r=l=>{t(c=>{let d=c.xp+l,f=c.level,p=c.xpToNextLevel;for(;d>=p;)d-=p,f+=1,p=Math.floor(p*1.5);return{...c,xp:d,level:f,xpToNextLevel:p}})},n=(l,c)=>{e.completedLessons.includes(l)||(t(d=>({...d,completedLessons:[...d.completedLessons,l]})),r(c))},a=(l,c)=>{e.completedChallenges.includes(l)||(t(d=>({...d,completedChallenges:[...d.completedChallenges,l]})),r(c))},o=l=>{e.badges.includes(l)||t(c=>({...c,badges:[...c.badges,l]}))};return w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50",children:[w.jsxs("div",{className:"container mx-auto p-4 md:p-8 max-w-7xl",children:[w.jsxs("div",{className:"mb-8",children:[w.jsx("h1",{className:"text-4xl mb-2 text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600",children:"CodeQuest Academy"}),w.jsx("p",{className:"text-gray-600",children:"Learn coding through adventure and exploration!"})]}),w.jsxs(_w,{defaultValue:"dashboard",className:"space-y-6",children:[w.jsxs(ww,{className:"grid w-full grid-cols-4 lg:w-auto lg:inline-grid",children:[w.jsxs(Ds,{value:"dashboard",className:"flex items-center gap-2",children:[w.jsx(wc,{className:"w-4 h-4"}),w.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]}),w.jsxs(Ds,{value:"lessons",className:"flex items-center gap-2",children:[w.jsx(bc,{className:"w-4 h-4"}),w.jsx("span",{className:"hidden sm:inline",children:"Lessons"})]}),w.jsxs(Ds,{value:"challenges",className:"flex items-center gap-2",children:[w.jsx(Wi,{className:"w-4 h-4"}),w.jsx("span",{className:"hidden sm:inline",children:"Challenges"})]}),w.jsxs(Ds,{value:"profile",className:"flex items-center gap-2",children:[w.jsx(OC,{className:"w-4 h-4"}),w.jsx("span",{className:"hidden sm:inline",children:"Profile"})]})]}),w.jsx(zs,{value:"dashboard",className:"space-y-6",children:w.jsx(LC,{userProgress:e})}),w.jsx(zs,{value:"lessons",className:"space-y-6",children:w.jsx(wI,{userProgress:e,onCompleteLesson:n,onEarnBadge:o})}),w.jsx(zs,{value:"challenges",className:"space-y-6",children:w.jsx(SI,{userProgress:e,onCompleteChallenge:a,onEarnBadge:o})}),w.jsx(zs,{value:"profile",className:"space-y-6",children:w.jsx(kI,{userProgress:e})})]})]}),w.jsx(FL,{userProgress:e})]})}zS.createRoot(document.getElementById("root")).render(w.jsx(UL,{}));
